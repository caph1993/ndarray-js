!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,n=t();for(r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,()=>(()=>{"use strict";var n={138:function(e,t,r){var n=this&&this.__generator||function(n,a){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=a.call(n,u)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.NDArray=void 0,r(960)),s=(Object.defineProperty(u.prototype,"dtype",{get:function(){return this._flat.constructor},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"size",{get:function(){return null==this._simpleIndexes?this._flat.length:this._simpleIndexes.size},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"flat",{get:function(){var r,n=this;return null==this._simpleIndexes?this._flat:(r=this._simpleIndexes.indices,(0,a.new_buffer)(r.length,this.dtype).map(function(e,t){return n._flat[r[t]]}))},set:function(e){if(e.length!=this.size)throw new Error("Length mismatch. Can't write ".concat(e.length," values into ").concat(this.size," available positions."));var t=this.size;if(null==this._simpleIndexes)for(var r=0;r<t;r++)this._flat[r]=e[r];else for(var n=this._simpleIndexes.indices,r=0;r<t;r++)this._flat[n[r]]=e[r]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"T",{get:function(){return this.transpose()},enumerable:!1,configurable:!0}),u.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.shape[0]?[4,this.index(t)]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},Object.defineProperty(u.prototype,"length",{get:function(){return this.shape[0]||0},enumerable:!1,configurable:!0}),u.prototype.item=function(){if(1!=this.size)throw new Error("Can't convert array of size ".concat(this.size," to scalar"));return this.dtype==Uint8Array?!!this._flat[0]:this._flat[0]},u);function u(e,t){this.shape=t||[e.length],this._flat=e,this._simpleIndexes=null}t.NDArray=s;r(257).GLOBALS.NDArray=s;var l=r(440),r=r(923),c=(s.prototype.modules=l.modules,l.modules.basic);s.prototype.reshape=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return c.reshape.apply(c,o([this,e],i(t),!1))},s.prototype.ravel=function(){return c.ravel(this)},s.prototype.copy=function(){return c.copy(this)},s.prototype.index=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.modules.indexes.index(this,e)},s.prototype.toString=function(){return l.modules.print.humanReadable(this)},s.prototype.any=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.any),s.prototype.all=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.all),s.prototype.sum=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.sum),s.prototype.product=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.product),s.prototype.max=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.max),s.prototype.min=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.min),s.prototype.argmax=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.argmax),s.prototype.argmin=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.argmin),s.prototype.mean=r.Method_a_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.mean),s.prototype.var=r.Method_a_axis_ddof_keepdims.defaultDecorator(l.modules.reduce.reducers.var),s.prototype.std=r.Method_a_axis_ddof_keepdims.defaultDecorator(l.modules.reduce.reducers.std),s.prototype.norm=r.Method_a_ord_axis_keepdims.defaultDecorator(l.modules.reduce.reducers.norm),s.prototype.add=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["+"]),s.prototype.subtract=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["-"]),s.prototype.multiply=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["*"]),s.prototype.divide=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["/"]),s.prototype.mod=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["%"]),s.prototype.divide_int=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["//"]),s.prototype.pow=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["**"]),s.prototype.maximum=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary.max),s.prototype.minimum=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary.min),s.prototype.bitwise_or=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["|"]),s.prototype.bitwise_and=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["&"]),s.prototype.bitwise_or=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["^"]),s.prototype.bitwise_shift_right=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["<<"]),s.prototype.bitwise_shift_right=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary[">>"]),s.prototype.logical_or=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary.or),s.prototype.logical_and=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary.and),s.prototype.logical_xor=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary.xor),s.prototype.greater=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary[">"]),s.prototype.less=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["<"]),s.prototype.greater_equal=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary[">="]),s.prototype.less_equal=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["<="]),s.prototype.equal=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["=="]),s.prototype.not_equal=r.Method_other_out.defaultDecorator(l.modules.operators.op_binary["!="]),s.prototype.bitwise_not=r.Method_out.defaultDecorator(l.modules.elementwise.funcs.bitwise_not),s.prototype.logical_not=r.Method_out.defaultDecorator(l.modules.elementwise.funcs.logical_not),s.prototype.negative=r.Method_out.defaultDecorator(l.modules.elementwise.funcs.negative),s.prototype.abs=r.Method_out.defaultDecorator(l.modules.elementwise.funcs.abs),s.prototype.isclose=l.modules.operators.isclose,s.prototype.allclose=l.modules.operators.allclose,s.prototype.assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["="]),s.prototype.add_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["+="]),s.prototype.subtract_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["-="]),s.prototype.multiply_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["*="]),s.prototype.divide_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["/="]),s.prototype.mod_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["%="]),s.prototype.divide_int_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["//="]),s.prototype.pow_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["**="]),s.prototype.maximum_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["max="]),s.prototype.minimum_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["min="]),s.prototype.bitwise_or_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["|="]),s.prototype.bitwise_and_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["&="]),s.prototype.bitwise_shift_left_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["<<="]),s.prototype.bitwise_shift_right_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign[">>="]),s.prototype.logical_or_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["or="]),s.prototype.logical_and_assign=r.Method_values_where.defaultDecorator(l.modules.operators.op_assign["and="]),s.prototype.tolist=function(){return l.modules.jsInterface.tolist(this)},s.prototype.round=r.Method_a_decimals_out.defaultDecorator(l.modules.elementwise.funcs.round),s.prototype.transpose=function(e){return l.modules.transform.transpose(this,e=void 0===e?null:e)},s.prototype.sort=function(e){return l.modules.transform.sort(this,e=void 0===e?-1:e),null};s.prototype.op=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e.length)return this;if("string"==typeof e[0]){var r=e[0];if(1==e.length){var n=l.modules.elementwise.ops[r];if(n)return n(this,r);throw new Error('Unknown unary operator "'.concat(r,'". Options:').concat(o([],i(Object.keys(l.modules.elementwise.ops)),!1)))}if(2<e.length)throw new Error("Too many arguments provided: ".concat(o([],i(e),!1)));var n=e[1],a=l.modules.operators.op_binary[r];if(a)return a(this,n);if(a=l.modules.operators.op_assign[r])return a(this,n);if(r.includes(":"))throw new Error('Expected index or operator symbol. Found "'.concat(r,'". Did you mean ').concat([r],"?"));throw new Error('Expected index or operator symbol. Found "'.concat(r,'"'))}a=e[0];if(a instanceof s)throw new Error("Expected operator or index. Found numpy array");if(1==e.length)return this.index(a);n=e[1],r=l.modules.operators.op_assign[n];if(!r)throw new Error('Unknown assign operator "'.concat(n,'". Options:').concat(o([],i(Object.keys(l.modules.operators.op_assign)),!1)));if(3<e.length)throw new Error("Too many arguments provided: ".concat(o([],i(e),!1)));return r(this,a,e[2])},t.default=s},257:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBALS=void 0;t.GLOBALS={NDArray:null,np:null}},150:function(e,r,t){var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},t=(Object.defineProperty(r,"__esModule",{value:!0}),r.broadcast_n_shapes=r.broadcast_shapes=r.array=r.asarray=r.new_NDArray=r.isarray=r._NDArray=void 0,t(257)),n=t.GLOBALS.np,t=t.GLOBALS.NDArray;if(!t)throw new Error("Programming error: NDArray not defined");function a(e){return e instanceof r._NDArray}function i(e,t){return new r._NDArray(e,t)}function o(e){return a(e)?e:n.fromlist(e)}r._NDArray=t,r.isarray=a,r.new_NDArray=i,r.asarray=o,r.array=function(e){return a(e)?i(null==e._simpleIndexes?e.dtype.from(e.flat):e.flat,e.shape):o(e)},r.broadcast_shapes=function(e,t){var r=[],n=Math.max(e.length,t.length);e=u(u([],s(Array.from({length:n-e.length},function(){return 1})),!1),s(e),!1),t=u(u([],s(Array.from({length:n-t.length},function(){return 1})),!1),s(t),!1);for(var a=n-1;0<=a;a--){var i=e[a],o=t[a];if(1!==i&&1!==o&&i!==o)throw new Error("Can not broadcast axis ".concat(a," with sizes ").concat(i," and ").concat(o));r.unshift(Math.max(i,o))}return[r,e,t]},r.broadcast_n_shapes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=Math.max.apply(Math,u([],s(e.map(function(e){return e.length})),!1)),n=e.map(function(e){return u(u([],s(Array.from({length:r-e.length},function(){return 1})),!1),s(e),!1)}),a=[],i=r-1;0<=i;i--)!function(t){var e=n.map(function(e){return e[t]}),r=Math.max.apply(Math,u([],s(e),!1));if(e.some(function(e){return 1!==e&&e!==r}))throw new Error("Can not broadcast axis ".concat(t," with sizes ").concat(e));a.unshift(r)}(i);return[n,a]}},418:function(e,t,r){var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.copy=t.empty=t.new_from=t.ravel=t.reshape=t.parse_shape=t.shape_shifts=t.as_number=t.as_boolean=t.number_collapse=t._NDArray=t.new_NDArray=t.array=t.asarray=t.isarray=void 0,r(150));function n(e,t){if(!e.shape.length)return e.flat[0];if(t=void 0===t?!1:t)throw new Error("Expected constant. Got array with shape ".concat(e.shape));return e}function c(e){if((0,l.isarray)(e))e=n(e,!0);else if("string"==typeof e)throw new Error("'string' object can not be interpreted as boolean: ".concat(e));return parseFloat(e)}function p(e){if("number"==typeof e)return[e];if((0,l.isarray)(e)){if(1<e.shape.length)throw new Error("Expected flat list. Got array with shape ".concat(e.shape));return u([],s(e.flat),!1)}if(Array.isArray(e))return e;throw new Error("Expected list. Got ".concat(e))}function a(e,t,r){void 0===t&&(t=void 0),void 0===r&&(r=Float32Array);var n=(e=p(e)).reduce(function(e,t){return e*t},1),r=void 0===t?new r(n):r.from({length:n},t);return(0,l.new_NDArray)(r,e)}Object.defineProperty(t,"isarray",{enumerable:!0,get:function(){return l.isarray}}),Object.defineProperty(t,"asarray",{enumerable:!0,get:function(){return l.asarray}}),Object.defineProperty(t,"array",{enumerable:!0,get:function(){return l.array}}),Object.defineProperty(t,"new_NDArray",{enumerable:!0,get:function(){return l.new_NDArray}}),Object.defineProperty(t,"_NDArray",{enumerable:!0,get:function(){return l._NDArray}}),t.number_collapse=n,t.as_boolean=function(e){if((0,l.isarray)(e))e=n(e,!0);else if("string"==typeof e)throw new Error("'string' object can not be interpreted as boolean: ".concat(e));return!!(0+e)},t.as_number=c,t.shape_shifts=function(e){var t=Array.from({length:e.length},function(e){return 0});t[e.length-1]=1;for(var r=e.length-2;0<=r;r--)t[r]=t[r+1]*e[r+1];return t},t.parse_shape=p,t.reshape=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];e=(0,l.asarray)(e);var t=r.length?u([t],s(r),!1).map(c):p(t),a=e.size,i=t.indexOf(-1);if(-1!==i){var o=t.filter(function(e){return-1!==e}).reduce(function(e,t){return e*t},1);if(a%o!=0)throw new Error("Invalid shape. The total number of elements must match the product of the known dimensions.");t[i]=a/o}else{i=t.reduce(function(e,t){return e*t},1);if(a!==i)throw new Error("Invalid target shape [".concat(t,"] from source [").concat(e.shape,"]. Expected size ").concat(a,". Found ").concat(i,"."))}return(0,l.new_NDArray)(e.flat,t)},t.ravel=function(e){return e=(0,l.asarray)(e),(0,l.new_NDArray)(e.flat,[e.size])},t.new_from=a,t.empty=function(e,t){return a(e,void 0,t=void 0===t?Float32Array:t)},t.copy=function(e){return(0,l.new_NDArray)(e.dtype.from(e.flat),e.shape)}},124:function(e,t,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.kw_funcs=t.ops=t.funcs=t.elementwise=void 0,r(418)),i=r(923),o=r(960);function s(e,t,r,n){void 0===n&&(n=null),e=(0,a.asarray)(e),n&&(r=n.dtype);r=((0,o.dtype_leq)(r,e.dtype)?e.flat:(0,o.new_buffer)(e.flat,r)).map(t);return n?(n.flat=r,n):(0,a.new_NDArray)(r,e.shape)}function u(r,n){return function(e,t){return s(e,r,n,t=void 0===t?null:t)}}t.elementwise=s,t.funcs={sign:u(Math.sign,Float64Array),sqrt:u(Math.sqrt,Float64Array),square:u(function(e){return e*e},Float64Array),exp:u(Math.exp,Float64Array),log:u(Math.log,Float64Array),log2:u(Math.log2,Float64Array),log10:u(Math.log10,Float64Array),log1p:u(Math.log1p,Float64Array),sin:u(Math.sin,Float64Array),cos:u(Math.cos,Float64Array),tan:u(Math.tan,Float64Array),asin:u(Math.asin,Float64Array),acos:u(Math.acos,Float64Array),atan:u(Math.atan,Float64Array),cosh:u(Math.cosh,Float64Array),sinh:u(Math.sinh,Float64Array),tanh:u(Math.tanh,Float64Array),acosh:u(Math.acosh,Float64Array),asinh:u(Math.asinh,Float64Array),atanh:u(Math.atanh,Float64Array),floor:u(Math.floor,Float64Array),ceil:u(Math.ceil,Float64Array),isfinite:u(isFinite,Uint8Array),isnan:u(isNaN,Uint8Array),round:function(e,t,r){return void 0===r&&(r=null),0==t&&s(e,Math.round,Float64Array,r),s(e,function(e){return parseFloat(e.toFixed(t))},Float64Array,r)},negative:u(function(e){return-e},Float64Array),bitwise_not:u(function(e){return~e},Float64Array),logical_not:u(function(e){return!e},Uint8Array),valueOf:u(function(e){return+e},Float64Array),abs:u(Math.abs,Float64Array)},t.ops=n(n({},t.funcs),{"~":t.funcs.bitwise_not,not:t.funcs.logical_not,"+":t.funcs.valueOf,"-":t.funcs.negative}),t.kw_funcs={sign:i.Func_a_out.defaultDecorator(t.funcs.sign),sqrt:i.Func_a_out.defaultDecorator(t.funcs.sqrt),square:i.Func_a_out.defaultDecorator(t.funcs.square),exp:i.Func_a_out.defaultDecorator(t.funcs.exp),log:i.Func_a_out.defaultDecorator(t.funcs.log),log2:i.Func_a_out.defaultDecorator(t.funcs.log2),log10:i.Func_a_out.defaultDecorator(t.funcs.log10),log1p:i.Func_a_out.defaultDecorator(t.funcs.log1p),sin:i.Func_a_out.defaultDecorator(t.funcs.sin),cos:i.Func_a_out.defaultDecorator(t.funcs.cos),tan:i.Func_a_out.defaultDecorator(t.funcs.tan),asin:i.Func_a_out.defaultDecorator(t.funcs.asin),acos:i.Func_a_out.defaultDecorator(t.funcs.acos),atan:i.Func_a_out.defaultDecorator(t.funcs.atan),cosh:i.Func_a_out.defaultDecorator(t.funcs.cosh),sinh:i.Func_a_out.defaultDecorator(t.funcs.sinh),tanh:i.Func_a_out.defaultDecorator(t.funcs.tanh),acosh:i.Func_a_out.defaultDecorator(t.funcs.acosh),asinh:i.Func_a_out.defaultDecorator(t.funcs.asinh),atanh:i.Func_a_out.defaultDecorator(t.funcs.atanh),floor:i.Func_a_out.defaultDecorator(t.funcs.floor),ceil:i.Func_a_out.defaultDecorator(t.funcs.ceil),negative:i.Func_a_out.defaultDecorator(t.funcs.negative),bitwise_not:i.Func_a_out.defaultDecorator(t.funcs.bitwise_not),logical_not:i.Func_a_out.defaultDecorator(t.funcs.logical_not),valueOf:i.Func_a_out.defaultDecorator(t.funcs.valueOf),abs:i.Func_a_out.defaultDecorator(t.funcs.abs),isfinite:i.Func_a_out.defaultDecorator(t.funcs.isfinite),isnan:i.Func_a_out.defaultDecorator(t.funcs.isnan),round:i.Func_a_decimals_out.defaultDecorator(t.funcs.round)}},440:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modules=void 0,r(150);var n=r(418),a=r(748),i=r(790),o=r(124),s=r(791),u=r(421),l=r(291),r=r(400);t.modules={basic:n,jsInterface:i,indexes:a,elementwise:o,print:s,reduce:u,operators:l,transform:r}},748:function(e,t,r){var y=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},d=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},g=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},f=(Object.defineProperty(t,"__esModule",{value:!0}),t.AxisIndex=t.__parse_sliceRange=t.AxesIndex=t.index=void 0,r(418)),s=r(960);t.index=function(e,t){var r,n,a;if((0,f.isarray)(e))return(t=_.prototype.parse(e.shape,t)).isConstant&&1==e.shape.length?(n=y(t.indices,1)[0],e.flat[n]):(t.isSimple?(n=function(e,t){if(null==e)return t;for(var r=[],n=0,a=0;a<e.axisIndexes.length;a++){var i=e.axisIndexes[a].spec,o=t.axisIndexes[n].spec;if("array"==i.type)throw new Error("Expected simple index. Found advanced: ".concat(i.type));if("array"==o.type)throw new Error("Expected simple index. Found advanced: ".concat(o.type));var s=void 0;if("number"==i.type)s=i;else if(n++,!1===i.type)s=i;else if(!1===o.type)s=o;else if(":"==i.type)s=o;else if(":"==o.type)s=i;else{var i=i.range,u=i.start,l=i.step,i=i.nSteps;if("number"==o.type){var c=o.index;if((c=c<0?i+c:c)<0||i<=c)throw new Error("Index ".concat(c," out of bounds [0..").concat(i,")"));s={type:"number",index:c=u+c*l}}else{var c=o.range,o=c.start,p=c.step,h=c.nSteps,i=v.prototype.parse_range(i,o,o+h*p,p),o=i.step*l,h=u+i.start*o,p=i.nSteps;s={type:"range",range:{start:h,step:o,nSteps:p}}}}r.push(new v(s))}if(n<t.axisIndexes.length)throw new Error("Index too long. Expected ".concat(n," axes. Found ").concat(t.axisIndexes.length));var d=t.shape,f=e.internalShape;return new _(d,f,r)}(e._simpleIndexes,t),(a=(0,f.new_NDArray)(e._flat,t.shape))._simpleIndexes=n,e.__warnAssignments&&(a.__warnAssignments=!0)):(r=e.flat,n=e.dtype.from(t.indices.map(function(e){return r[e]})),(a=(0,f.new_NDArray)(n,t.shape)).__warnAssignments=!0),a);throw new Error("Expected NDArray. Found ".concat(typeof e,": ").concat(e))};Object.defineProperty(n.prototype,"indices",{get:function(){var e;return this._indices||(e=function(e,t){var r,n;try{for(var a=d(t),i=a.next();!i.done;i=a.next())if(0==i.value.length)return[]}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}var o=(0,f.shape_shifts)(e),s=t.map(function(e,t){for(var r=[],n=e.length,a=0;a<n-1;a++)r.push(o[t]*(e[a+1]-e[a]));return r[n-1]=o[t]*(e[0]-e[n-1]),r}),u=[],l=e.length-1,c=new Array(e.length).fill(0),p=t.map(function(e,t){return e[c[t]]*o[t]}).reduce(function(e,t){return e+t},0);for(;;){if(!isFinite(p))throw new Error("Programming error");u.push(p);for(var h=l;0<=h&&(p+=s[h][c[h]++],!(c[h]<s[h].length));)c[h--]=0;if(h<0)break}return u}(this.internalShape,this.__slices),this._indices=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"__slices",{get:function(){return this.axisIndexes.map(function(e){return e.indices})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return null!==this._size?this._size:this._size=this.axisIndexes.map(function(e){return e.size}).reduce(function(e,t){return e*t},1)},enumerable:!1,configurable:!0});var _=n;function n(e,t,r){this.shape=e,this.internalShape=t,this.axisIndexes=r,this._indices=null,this._size=null,this.isSimple=this.axisIndexes.map(function(e){return e.isSimple}).reduce(function(e,t){return e&&t},!0),this.isConstant=this.axisIndexes.map(function(e){return e.isConstant}).reduce(function(e,t){return e&&t},!0)}t.AxesIndex=_,t.__parse_sliceRange=function(e,t){var r=t.start,n=t.stop,a=t.step;if(null==r?r=0:r<0&&(r=e+r),null==n?n=e:n<0&&(n=e+n),null==a)a=1;else if(0==a)throw new Error("Slice range with step size of zero");if(!isFinite(r)||!isFinite(n)||!isFinite(a))throw new Error("Invalid slice ".concat([r,n,a],". Axis size ").concat(e));var i=[];if(0<a)for(var r=Math.max(r,0),n=Math.min(n,e),o=r;o<n;o+=a)i.push(o);else{n=Math.max(n,0);for(o=r=Math.min(r,e);n<o;o+=a)i.push(o)}return i};Object.defineProperty(a.prototype,"indices",{get:function(){if(this._indices)return this._indices;if(":"===this.spec.type)a=Array.from({length:this.spec.size},function(e,t){return t});else if("number"===this.spec.type)a=[this.spec.index];else if("array"===this.spec.type)a=this.spec.indices;else if(!1===this.spec.type)a=[];else{if("range"!=this.spec.type)throw new Error("Unknown spec type ".concat(this.spec.type));var e=this.spec.range,t=e.nSteps,r=e.step,n=e.start,a=Array.from({length:t},function(e,t){return n+t*r})}return this._indices=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){if(":"===this.spec.type)return this.spec.size;if("number"===this.spec.type)return 1;if("array"===this.spec.type)return this.spec.indices.length;if("range"==this.spec.type)return this.spec.range.nSteps;if(!1===this.spec.type)return 0;throw new Error("Unknown spec type ".concat(this.spec.type))},enumerable:!1,configurable:!0});var v=a;function a(e){this.spec=e,this._indices=null,this.isSimple="array"!=this.spec.type,this.isConstant="number"==this.spec.type}(t.AxisIndex=v).prototype.parse_range=function(a,e,t,r){if(void 0===e&&(e=null),void 0===t&&(t=null),null==(r=void 0===r?null:r))r=1;else if(0==r)throw new Error("Index specification error. Step must be different from zero.");function n(e,t,r,n){return null==e?t:(e<0&&(e=Math.max(0,a-e)),Math.min(n,Math.max(r,e)))}return t=0<r?(e=n(e,0,0,a-1),n(t,a,0,a)):(e=n(e,a-1,0,a-1),n(t,a-1,-1,a-1)),t=Math.max(t,e),{start:e,step:r,nSteps:Math.floor(Math.abs(t-e)/r)}},v.prototype.parse_range_spec=function(e){var t=e.split(":").map(function(e){if(""==(e=e.trim()))return null;var t=parseInt(e);if(Number.isInteger(t))return t;throw new Error("Wrong input. Slice index unrecognized: ".concat(e))});if(0==t.length)throw new Error("Unexpected empty index. Expected colons.");if(3<t.length)throw new Error("Too many colons in index ".concat(e));var e=y(g(g([],y(t),!1),[null,null,null],!1)),t=e[0],r=e[1],n=e[2];e.slice(3);return{start:t,stop:r,step:n}},v.prototype.parse=function(e,t){var r=1;if(":"==(e=(0,f.isarray)(e)&&0==e.shape.length?e.item():e)||void 0===e)o={type:":",size:t};else if("number"==typeof e){var n=e;if((n=n<0?t+n:n)<0||t<=n)throw new Error("Index ".concat(n," out of bounds [0..").concat(t,")"));o={type:"number",index:n}}else if((0,f.isarray)(e)||Array.isArray(e)){var a,n=(0,f.asarray)(e);if((0,s.dtype_is_boolean)(n.dtype))a=[],n.flat.forEach(function(e,t){return e&&a.push(t)}),r=Math.max(1,n.shape.length);else if(a=n.flat,!(0,s.dtype_is_integer)(n.dtype)&&0<n.size){var i=new Int32Array(a);if(i.some(function(e,t){return e!=a[t]}))throw new Error("Expected 1D array of indices or nD array of booleans. "+"Found shape=".concat(n.shape," and dtype=").concat(n.dtype));a=i}o={type:"array",indices:a}}else{if("string"!=typeof e)throw new Error("Unknown index type. Found ".concat(typeof e,": ").concat(e));var n=v.prototype.parse_range_spec(e),i=n.start,e=n.stop,n=n.step,i=v.prototype.parse_range(t,i,e,n),o=0==i.start&&i.nSteps==t&&1==i.step?{type:":",size:t}:{type:"range",range:i}}return{axisIndex:new v(o),span:r}},_.prototype.parse=function(e,t){for(var r=null==t?[]:g([],y(t),!1),n={axisIndexes:[],apparentShape:[],internalShape:[]},a=1,i={axisIndexes:NaN,apparentShape:NaN,internalShape:NaN},o=0,s=0,u=e.length,l=r.length;0<l||0<u;){var c=r[s];if(0<l){if((s<0||s>=r.length)&&(c=":"),l--,s+=a,"None"==c||null===c||!0===c){n.apparentShape.push(1);continue}if(!1===c){n.apparentShape.push(0);continue}if("..."==c){if(-1==a)throw new Error("Index can only have a single ellipsis. Found index(".concat(t,")"));for(var p in a=-1,i)i[p]=n[p].length;s=r.length-1,o=e.length-1;continue}}else c=":";for(var c=v.prototype.parse(c,e[o]),h=c.axisIndex,d=c.span,f=(u-=d,1),m=0;m<d;m++){if(o<0||o>=e.length)throw new Error("Index where=".concat(JSON.stringify(t)," spans over more dimensions than available in shape=").concat(JSON.stringify(e)));f*=e[o],o+=a}n.axisIndexes.push(h),"number"!=h.spec.type&&n.apparentShape.push(h.size),n.internalShape.push(f)}if(-1==a)for(var p in n)n[p].splice(0,i[p]).concat(n[p].reverse());return new _(n.apparentShape,n.internalShape,n.axisIndexes)}},790:function(e,t,r){var m=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.tolist=t.fromlist=void 0,r(418));t.fromlist=function(e,t){if(void 0===t&&(t=Float64Array),(0,i.isarray)(e))return e;if("number"==typeof e)return(0,i.new_NDArray)(new Float32Array([e]),[]);if("boolean"==typeof e)return(0,i.new_NDArray)(new Uint8Array([e?1:0]),[]);if(e===i._NDArray.prototype)throw new Error("Programming error");if(!Array.isArray(e))throw new Error("Can't parse input of type ".concat(typeof e,": ").concat(e));for(var h=[],r=e;Array.isArray(r);)if(h.push(r.length),r=r[0],256<h.length)throw new Error("Circular reference or excessive array depth");function d(e,t){var r,n,a,i;if(t==h.length-1)try{for(var o=m(e),s=o.next();!s.done;s=o.next()){var u=s.value;if(Array.isArray(u))throw new Error("Inconsistent shape");f.push(u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else{if(!Array.isArray(e))throw new Error("Inconsistent shape");try{for(var l=m(e),c=l.next();!c.done;c=l.next()){var p=c.value;if(p.length!=h[t+1])throw new Error("Inconsistent shape: found sibling arrays of lengths ".concat(p.length," and ").concat(h[t+1]));d(p,t+1)}}catch(e){a={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}}}var f=[],e=(d(e,0),new t(f));return(0,i.new_NDArray)(e,h)},t.tolist=function e(t){if((0,i.isarray)(this))return e;if(null===t||"number"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t))return t.map(e);if((0,i.isarray)(t))return t=(0,i.number_collapse)(t),(0,i.isarray)(t)?function e(t,r){if(0===r.length)return t.shift();for(var n=r.slice(1),a=r[0],i=[],o=0;o<a;o++)i.push(e(t,n));return i}(a([],n(t.flat),!1),t.shape):t;throw new Error("Expected MyArray. Got ".concat(typeof t,": ").concat(t))}},923:function(e,t,r){var m=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},y=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},g=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=(Object.defineProperty(t,"__esModule",{value:!0}),t.Func_y_x_out=t.Method_a_axis_ddof_keepdims=t.Func_a_axis_ddof_keepdims=t.Method_a_ord_axis_keepdims=t.Func_a_ord_axis_keepdims=t.Method_a_axis_keepdims=t.Func_a_axis_keepdims=t.Method_values_where=t.Func_a_values_where=t.Method_other_out=t.Func_a_other_out=t.Method_a_decimals_out=t.Func_a_decimals_out=t.Method_out=t.Func_a_out=t.Func_a_lastAxis=t.Func_a_q_axis=t.kwargs_decorator=void 0,r(150));function n(e){var t=e.defaults,n=e.implementation,r=e.parsers,a=e.this_as_first_arg,i=function(l){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];var p=null,t=l.length&&l.slice(-1)[0];t&&t[0].startsWith("...")&&(p=t[0]=t[0].slice(3));function h(e){return 100<(e=JSON.stringify(e)).length?e.slice(0,100)+"...":e}var d=Object.assign(Object.fromEntries(l)),f=Object.fromEntries(l.map(function(e){return[m(e,1)[0],!0]}));return function(e){var t,r,n={};p&&(n[p]=y([],m(d[p]),!1));for(var a=0;a<e.length;a++){var i=e[a];if(i instanceof Object&&!(0,_.isarray)(i)&&!Array.isArray(i))for(var o in i)if(o==p)n[o].push(i[o]);else{if(o in n)throw new Error("Duplicate argument ".concat(o," in ").concat(h(e)));if(!f[o])throw new Error("Invalid argument ".concat(o," in ").concat(h(e)));n[o]=i[o]}else if(void 0!==i)if(p&&a>=l.length-1)n[p].push(i);else{if(!(a<l.length))throw new Error("Too many arguments ".concat(h(e)));if((o=l[a][0])in n)throw new Error("Duplicate argument ".concat(o," in ").concat(h(e)));if(!f[o])throw new Error("Invalid argument ".concat(o," in ").concat(h(e)));n[o]=i}}for(o in d)if(o in n||(n[o]=d[o]),void 0===n[o])throw new Error("Missing argument ".concat(o," in ").concat(h(e),". Found only ").concat(JSON.stringify(Object.keys(e))));try{for(var s=g(c),u=s.next();!u.done;u=s.next())(0,u.value)(n)}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return l.map(function(e){e=m(e,1)[0];return n[e]})}}.apply(void 0,y([t],m(r),!1));return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a&&(e=y([this],m(e),!1));var r=i(e),r=n.apply(void 0,y([],m(r),!1));return(0,_.isarray)(r)&&0==r.shape.length?r.flat[0]:r}}t.kwargs_decorator=n;var a,i,o,s,u,l,c,p,h,d,f,v,x,b,w,I,A,S,F,r={a:function(e){e.a=(0,_.asarray)(e.a)},a_axis:function(e){e.a=(0,_.asarray)(e.a),null==e.axis&&(e.axis=-1);var t=e.a.shape.length;if(e.axis+t<0||e.axis>=t)throw new Error("Invalid axis ".concat(e.axis," for array of shape ").concat(JSON.stringify(e.a.shape)));e.axis<0&&(e.axis+=t)},a_axis_flatten:function(e){e.a=(0,_.asarray)(e.a),null==e.axis&&(e.a=e.a.reshape(-1),e.axis=-1);var t=e.a.shape.length;if(e.axis+t<0||e.axis>=t)throw new Error("Invalid axis ".concat(e.axis," for array of shape ").concat(JSON.stringify(e.a.shape)));e.axis<0&&(e.axis+=t)},keepdims:function(e){e.keepdims=!!e.keepdims},isarray_or_null:function(t){return function(e){if(null!=e[t]&&!(0,_.isarray)(e[t]))throw new Error('Invalid "'.concat(t,'" argument. Expected NDArray. Found type ').concat(typeof e[t]," (").concat(e[t].prototype,")"))}},asarray:function(t){return function(e){e[t]=(0,_.asarray)(e[t])}},isarray:function(t){return function(e){if(!(0,_.isarray)(e[t]))throw new Error('Invalid "'.concat(t,'" argument. Expected NDArray. Found type ').concat(typeof e[t]," (").concat(e[t].prototype,")"))}},is_integer_non_neg:function(t){return function(e){if("number"!=typeof e[t]||e[t]<0||e[t]%1!=0)throw new Error('Invalid "'.concat(t,'" argument. Expected non-negative integer. Found ').concat(e[t]))}},is_pnorm:function(t){return function(e){if("number"!=typeof e[t]||e[t]<=0)throw new Error('Invalid "'.concat(t,'" argument. Expected non-negative integer. Found ').concat(e[t]))}}};(a=t.Func_a_q_axis={}).decorator=n,a.defaults=[["a",void 0],["q",void 0],["axis",null]],a.parsers=[r.a_axis_flatten,function(e){e.q=(0,_.asarray)(e.q)}],a.defaultDecorator=function(e){return a.decorator({defaults:a.defaults,implementation:e,parsers:a.parsers})},(i=t.Func_a_lastAxis={}).decorator=n,i.defaults=[["a",void 0],["axis",-1]],i.parsers=[r.a_axis],i.defaultDecorator=function(e){return i.decorator({defaults:i.defaults,implementation:e,parsers:i.parsers})},(o=t.Func_a_out={}).decorator=n,o.defaults=[["a",void 0],["out",null]],o.parsers=[r.asarray("a"),r.isarray_or_null("out")],o.defaultDecorator=function(e){return o.decorator({defaults:o.defaults,implementation:e,parsers:o.parsers})},(s=t.Method_out={defaults:[["a",void 0],["out",null]]}).parsers=[r.isarray("a"),r.isarray_or_null("out")],s.defaultDecorator=function(e){return n({defaults:s.defaults,implementation:e,parsers:s.parsers,this_as_first_arg:!0})},(u=t.Func_a_decimals_out={}).decorator=n,u.defaults=[["a",void 0],["decimals",0],["out",null]],u.parsers=[r.asarray("a"),r.is_integer_non_neg("decimals"),r.isarray_or_null("out")],u.defaultDecorator=function(e){return u.decorator({defaults:u.defaults,implementation:e,parsers:u.parsers})},(l=t.Method_a_decimals_out={}).decorator=n,l.defaults=[["a",void 0],["decimals",0],["out",null]],l.parsers=[r.isarray("a"),r.is_integer_non_neg("decimals"),r.isarray_or_null("out")],l.defaultDecorator=function(e){return l.decorator({defaults:l.defaults,implementation:e,parsers:l.parsers,this_as_first_arg:!0})},(c=t.Func_a_other_out={}).decorator=n,c.defaults=[["a",void 0],["other",void 0],["out",null]],c.parsers=[r.asarray("a"),r.asarray("other"),r.isarray_or_null("out")],c.defaultDecorator=function(e){return c.decorator({defaults:c.defaults,implementation:e,parsers:c.parsers})},(p=t.Method_other_out={defaults:[["a",void 0],["other",void 0],["out",null]]}).parsers=[r.isarray("a"),r.asarray("other"),r.isarray_or_null("out")],p.defaultDecorator=function(e){return n({defaults:p.defaults,implementation:e,parsers:p.parsers,this_as_first_arg:!0})},(h=t.Func_a_values_where={}).decorator=n,h.defaults=[["a",void 0],["values",void 0],["...where",null]],h.parsers=[r.asarray("a"),r.asarray("values")],h.defaultDecorator=function(e){return h.decorator({defaults:h.defaults,implementation:e,parsers:h.parsers})},(d=t.Method_values_where={}).decorator=n,d.defaults=[["a",void 0],["values",void 0],["...where",null]],d.parsers=[r.isarray("a"),r.asarray("values")],d.defaultDecorator=function(e){return d.decorator({defaults:d.defaults,implementation:e,parsers:d.parsers,this_as_first_arg:!0})},(f=t.Func_a_axis_keepdims={}).decorator=n,f.defaults=[["a",void 0],["axis",null],["keepdims",!1]],f.parsers=[r.a_axis_flatten],f.defaultDecorator=function(e){return n({defaults:f.defaults,implementation:e,parsers:f.parsers})},(v=t.Method_a_axis_keepdims={}).decorator=n,v.defaults=[["a",void 0],["axis",null],["keepdims",!1]],v.parsers=[r.isarray("a"),r.a_axis_flatten],v.defaultDecorator=function(e){return n({defaults:v.defaults,implementation:e,parsers:v.parsers,this_as_first_arg:!0})},(b=x||(t.Func_a_ord_axis_keepdims=x={})).decorator=n,b.defaults=[["a",void 0],["ord",2],["axis",null],["keepdims",!1]],b.parsers=[r.a_axis_flatten,r.is_pnorm("ord")],b.defaultDecorator=function(e){return n({defaults:b.defaults,implementation:e,parsers:b.parsers})},(w||(t.Method_a_ord_axis_keepdims={})).defaultDecorator=function(e){return n({defaults:x.defaults,parsers:x.parsers,implementation:e,this_as_first_arg:!0})},(A=I||(t.Func_a_axis_ddof_keepdims=I={})).decorator=n,A.defaults=[["a",void 0],["ddof",0],["axis",null],["keepdims",!1]],A.parsers=[r.a_axis_flatten,r.is_integer_non_neg("ddof")],A.defaultDecorator=function(e){return n({defaults:A.defaults,implementation:e,parsers:A.parsers})},(S||(t.Method_a_axis_ddof_keepdims={})).defaultDecorator=function(e){return n({defaults:I.defaults,parsers:I.parsers,implementation:e,this_as_first_arg:!0})},(F=t.Func_y_x_out={}).decorator=n,F.defaults=[["x",void 0],["y",void 0],["out",null]],F.parsers=[r.asarray("x"),r.asarray("y"),r.isarray_or_null("out")],F.defaultDecorator=function(e){return F.decorator({defaults:F.defaults,implementation:e,parsers:F.parsers})}},291:function(e,t,r){var m=this&&this.__generator||function(n,a){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=a.call(n,u)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},v=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},x=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},y=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.n_ary_operation=t.atan2=t.allclose=t.isclose=t.op_assign=t.__make_assignment_operator=t._assign_operation_toJS=t.assign_operation=t.op_binary=t.__make_operator=t.binary_operation=void 0,r(748)),b=r(418),i=r(790),n=r(923),o=r(862),g=r(400),w=r(150),I=r(960);function u(e,t,r,n,a){if(void 0===a&&(a=null),(0,b.isarray)(this))return r.bind(b._NDArray.prototype).apply(void 0,x([this],v(arguments),!1));e=(0,b.asarray)(e),t=(0,b.asarray)(t);var i=v((0,w.broadcast_shapes)(e.shape,t.shape),3),o=i[0],s=i[1],u=i[2];if(a&&(n=a.dtype),null==a)a=(0,b.new_from)(o,void 0,n);else if(!(0,b.isarray)(a))throw new Error("Out must be of type ".concat(b._NDArray,". Got ").concat(typeof a));for(var l=[],c=(0,b.shape_shifts)(s),p=(0,b.shape_shifts)(u),h=e.flat,d=t.flat,f=0;f<a.size;f++){for(var m=0,y=0,g=f,_=o.length-1;0<=_;_--)m+=c[_]*(g%s[_]),y+=p[_]*(g%u[_]),g=Math.floor(g/o[_]);l.push(r(h[m],d[y]))}return a.flat=(0,I.new_buffer)(l,n),a}function a(n,a){return function(e,t,r){return u(e,t,a,n,r=void 0===r?null:r)}}function l(t,e,r,n){if(t.__warnAssignment&&(console.warn("Warning: You are assigning on a copy that resulted from an advanced index on a source array.\nIf this is intentional, use yourArray = source.withKwArgs({copy:true}).index(...yourIndex) to make explicit your awareness of the copy operation.\nInstead, if you want to assign to the source array, use source.op('=', other) or source.op(['::3', -1, '...', [5,4]], '*=', other).\n"),delete t.__warnAssignment),!(0,b.isarray)(t))return c(t,e,r,n);if(r){e=(0,b.asarray)(e);var a,i=s.AxesIndex.prototype.parse(t.shape,r).indices,o=void 0;for(a in u(o=null==n?(n=function(e,t){return t},(0,b.new_from)(i.length,function(){},t.dtype)):(0,b.asarray)(i.map(function(e){return t._flat[e]})),(0,b.ravel)(e),n,t.dtype,o),i)t._flat[i[a]]=o._flat[a]}else u(t,e,n,t.dtype,t);return t}function c(e,t,r,n){if(!Array.isArray(e))throw new Error("Can not assign to a non-array. Found ".concat(typeof e,": ").concat(e));console.warn("Assignment to JS array is experimental and slow.");for(var a=(0,b.asarray)(e),t=(l(a,t,r,n),(0,i.tolist)(a));e.length;)e.pop();return(0,o.extend)(e,t),e}function p(n){return function(e,t,r){return 1===r.length&&!1===r[0]?e:l(e,t,r=1===r.length&&!0===r[0]?[]:r,n)}}t.binary_operation=u,t.__make_operator=a,t.op_binary={"+":a(Float64Array,function(e,t){return e+t}),"-":a(Float64Array,function(e,t){return e-t}),"*":a(Float64Array,function(e,t){return e*t}),"/":a(Float64Array,function(e,t){return e/t}),"%":a(Float64Array,function(e,t){return e%t}),"|":a(Float64Array,function(e,t){return e|t}),"&":a(Float64Array,function(e,t){return e&t}),"^":a(Float64Array,function(e,t){return e^t}),"<<":a(Float64Array,function(e,t){return e<<t}),">>":a(Float64Array,function(e,t){return e>>t}),"**":a(Float64Array,function(e,t){return Math.pow(e,t)}),"//":a(Float64Array,function(e,t){return Math.floor(e/t)}),"<":a(Uint8Array,function(e,t){return e<t}),">":a(Uint8Array,function(e,t){return t<e}),">=":a(Uint8Array,function(e,t){return t<=e}),"<=":a(Uint8Array,function(e,t){return e<=t}),"==":a(Uint8Array,function(e,t){return e==t}),"!=":a(Uint8Array,function(e,t){return e!=t}),or:a(Uint8Array,function(e,t){return e||t}),and:a(Uint8Array,function(e,t){return e&&t}),xor:a(Uint8Array,function(e,t){return!e!=!t}),max:a(Float64Array,function(e,t){return Math.max(e,t)}),min:a(Float64Array,function(e,t){return Math.min(e,t)})},t.op_binary["↑"]=t.op_binary.max,t.op_binary["↓"]=t.op_binary.min,t.op_binary["≤"]=t.op_binary.leq,t.op_binary["≥"]=t.op_binary.geq,t.op_binary["≠"]=t.op_binary.neq,t.assign_operation=l,t._assign_operation_toJS=c,t.__make_assignment_operator=p,t.op_assign={"=":p(function(e,t){return t}),"+=":p(function(e,t){return e+t}),"-=":p(function(e,t){return e-t}),"*=":p(function(e,t){return e*t}),"/=":p(function(e,t){return e/t}),"%=":p(function(e,t){return e%t}),"//=":p(function(e,t){return Math.floor(e/t)}),"**=":p(function(e,t){return Math.pow(e,t)}),"|=":p(function(e,t){return e|t}),"&=":p(function(e,t){return e&t}),"^=":p(function(e,t){return e^t}),"<<=":p(function(e,t){return e<<t}),">>=":p(function(e,t){return e>>t}),"max=":p(function(e,t){return Math.max(e,t)}),"min=":p(function(e,t){return Math.min(e,t)}),"or=":p(function(e,t){return e||t}),"and=":p(function(e,t){return e&&t})},t.isclose=function(e,t,r,n,a){var i;return void 0===r&&(r=1e-5),void 0===n&&(n=1e-8),void 0===a&&(a=!1),i=Object.assign({rtol:r,atol:n,equal_nan:a},this),r=i.rtol,n=i.atol,a=i.equal_nan,u(e,t,function(e,t){return e==t||(Number.isFinite(e)&&Number.isFinite(t)?Math.abs(e-t)<=n+r*t:(console.log("NOT FINITE",e,t),e==t||a&&Number.isNaN(e)&&Number.isNaN(t)))},Uint8Array)},t.allclose=function(e,t,r,n,a){void 0===r&&(r=1e-5),void 0===n&&(n=1e-8),void 0===a&&(a=!1),i=Object.assign({rtol:r,atol:n,equal_nan:a},this),r=i.rtol,n=i.atol,a=i.equal_nan;var i,o=function(e,t){return Number.isFinite(e)&&Number.isFinite(t)?Math.abs(e-t)<=n+r*t:e==t||a&&Number.isNaN(e)&&Number.isNaN(t)},s=new Error("");try{u(e,t,function(e,t){if(o(e,t))return 0;throw s},Float64Array)}catch(e){if(e===s)return!1;throw e}return!0},t.atan2=n.Func_y_x_out.defaultDecorator(a(Float64Array,Math.atan2)),t.n_ary_operation=function(o,e,n){var t,r,a=(o=o.map(b.asarray)).map(function(e){return e.shape}),s=(a=v(w.broadcast_n_shapes.apply(void 0,x([],v(a),!1)),2))[0],u=a[1],l=u.reduce(function(e,t){return e*t},1);if(0==u.length)return(0,b.asarray)(n.apply(void 0,x([],v(o.map(function(e){return e.flat[0]})),!1)));var c=s.map(function(e){return(0,b.shape_shifts)(e)}),i=[],p=!1;try{for(var h=y(function(){var t,r,n,a,i;return m(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:if(!(t<l))return[3,4];for(r=t,n=o.map(function(e){return 0}),a=u.length-1;0<=a;a--){for(i=0;i<o.length;i++)n[i]+=c[i][a]*(r%s[i][a]);r=Math.floor(r/u[a])}return[4,[t,n]];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})}()),d=h.next();!d.done;d=h.next()){var f=v(d.value,2);!function(e,r){var t=n.apply(void 0,x([],v(o.map(function(e,t){return e.flat[r[t]]})),!1));0==e&&(p=(0,b.isarray)(t)),i.push(t)}(f[0],f[1])}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return a=(a=(p?(0,g.concatenate):(0,b.asarray))(i)).reshape(x([u],v(a.shape.slice(1)),!1))}},791:function(e,t,r){var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},f=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.humanReadable=void 0,r(124)),p=r(790),h=r(960),d=n.ops.round;t.humanReadable=function(u){if(0==u.shape.length)return u.flat[0].toString();for(var a=u.shape.map(function(e){return 1}),e=30,t=0;t<u.shape.length;t++){var r=a[t];a[t]=Math.min(u.shape[t],e),a[t]>r&&(e=Math.floor(e/(a[t]-r)))}for(var n=30,t=u.shape.length-1;0<=t;t--){r=a[t];a[t]=Math.min(u.shape[t],n),a[t]>r&&(n=Math.floor(n/(a[t]-r)))}for(var l=u.shape.length-1;0<l&&1==u.shape[l];)l--;(0,h.dtype_is_float)(u.dtype)&&(u=d(u,2));var i=(0,p.tolist)(u),o=", shape=(".concat(u.shape,"), dtype=").concat(u.dtype.name);return i=(i=function e(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=0),"..."==t||n>=u.shape.length)return t;if(n==u.shape.length-1)return"[".concat(t.join(", "),"]");for(var a=l<=n?" ":"\n"+" ".repeat(r+1),i=[],o=0;o<t.length;o++){var s=e(t[o],r+1,n+1)+",";i.push(o<t.length-1?s:s.slice(0,-1))}return"[".concat(i.join(a),"]")}(function t(e,r){var n;return(r=void 0===r?0:r)==u.shape.length?e:2*a[r]>=e.length?e.map(function(e){return t(e,r+1)}):(n=e.slice(0,a[r]).map(function(e){return t(e,r+1)}),e=e.slice(-a[r]).map(function(e){return t(e,r+1)}),c(c(c([],s(n),!1),["..."],!1),s(e),!1))}(i),1+"np".length)).replace(/.*?(\n|$)/g,function(e){return e.replace(/(.{60,}?,)/g,"$1\n")}).replace(/\n+/g,"\n"),i=function(e,a){void 0===a&&(a=",");var t,r,n,i,e=e.split("\n"),o=Array(e[0].split(a).length).fill(0);try{for(var s=f(e),u=s.next();!u.done;u=s.next())for(var l=u.value.split(a),c=0;c<l.length;c++)o[c]=Math.max(o[c],l[c].trim().length)}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}var p="";try{for(var h=f(e),d=h.next();!d.done;d=h.next())!function(e){for(var r=(r=e.split(a)).map(function(e,t){return t==r.length-1?e:e+a}),t=0;t<r.length;t++){var n=r[t].trim();p+=n.padStart(o[t]+1).padEnd(o[t]+2)}p+="\n"}(d.value)}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return p}("".concat("np","(").concat(i)).trim(),i="".concat(i).concat(o,")")}},421:function(e,a,t){var y=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},g=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=(Object.defineProperty(a,"__esModule",{value:!0}),a.kw_reducers=a.reducers=void 0,t(418)),r=t(291),n=t(923),v=t(960),o=r.op_binary["*"],s=r.op_binary["/"],u=r.op_binary["-"],l=r.op_binary["**"];function c(f,m){return m=m||Float64Array,function(e,t,r){var n=f,a=m,i=t,t=r;if(null==i)return n(e.flat);i<0&&(i=e.shape.length-1);for(var o=e.shape[i],s=(0,_.shape_shifts)(e.shape)[i],u=Array.from({length:o},function(e){return[]}),l=(e.flat.forEach(function(e,t){return u[Math.floor(t/s)%o].push(e)}),e.size/o),c=[],p=0;p<l;p++){for(var h=[],d=0;d<o;d++)h.push(u[d][p]);c.push(h)}return n=c.map(n),e=g([],y(e.shape),!1),t?e[i]=1:e=e.filter(function(e,t){return t!=i}),1==(t=(0,_.new_NDArray)((0,v.new_buffer)(n,a),e)).size?t.flat[0]:t}}a.reducers={sum:c(function(e){return e.reduce(function(e,t){return e+t},0)}),product:c(function(e){return e.reduce(function(e,t){return e*t},1)}),mean:c(function(e){return e.reduce(function(e,t){return e+t},0)/e.length}),max:c(function(e){return Math.max.apply(Math,g([],y(e),!1))}),min:c(function(e){return Math.min.apply(Math,g([],y(e),!1))}),argmax:c(function(e){return e.indexOf(Math.max.apply(Math,g([],y(e),!1)))},Int32Array),argmin:c(function(e){return e.indexOf(Math.min.apply(Math,g([],y(e),!1)))},Int32Array),len:c(function(e){return e.length},Int32Array),any:c(function(e){var t,r;try{for(var n=i(e),a=n.next();!a.done;a=n.next())if(a.value)return!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},Uint8Array),all:c(function(e){var t,r;try{for(var n=i(e),a=n.next();!a.done;a=n.next())if(!a.value)return!1}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!0},Uint8Array),norm:function(e,t,r,n){return t%2!=0&&(e=e.abs()),t==1/0?a.reducers.max(e,r,n):1==t?a.reducers.sum(e,r,n):l(a.reducers.sum(l(e,t),r,n),1/t)},var:function(e,t,r,n){return e=u(e,a.reducers.mean(e,t,!0)),e=o(e,e),0==r?a.reducers.mean(e,t,n):s(a.reducers.sum(e,t,n),e.shape[t]-r)},std:function(e,t,r,n){return l(a.reducers.var(e,t,r,n),.5)}},a.kw_reducers={sum:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.sum),product:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.product),mean:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.mean),max:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.max),min:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.min),argmax:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.argmax),argmin:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.argmin),len:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.len),any:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.any),all:n.Func_a_axis_keepdims.defaultDecorator(a.reducers.all),norm:n.Func_a_ord_axis_keepdims.defaultDecorator(a.reducers.norm),var:n.Func_a_axis_ddof_keepdims.defaultDecorator(a.reducers.var),std:n.Func_a_axis_ddof_keepdims.defaultDecorator(a.reducers.std)}},400:function(e,r,t){var d=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},f=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},p=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},m=(Object.defineProperty(r,"__esModule",{value:!0}),r.kw_exported=r.stack=r.concatenate=r.swapAxes=r.transpose=r.sort=r.cmp_nan_at_the_end=r.apply_along_axis=void 0,t(418)),y=t(790),h=t(862),n=t(923),g=t(960);function _(e,t,r,n){if(void 0===n&&(n=Float64Array),e=(0,m.asarray)(e),null==t)return r(e.flat);var a=e.shape.length;if((t=t<0?a+t:t)!==a-1)return a=x(e,t,-1),x(_(a,-1,r,n),t,-1);for(var i=e.shape[t],o=(0,m.shape_shifts)(e.shape)[t],s=Array.from({length:i},function(e){return[]}),u=(e.flat.forEach(function(e,t){return s[Math.floor(t/o)%i].push(e)}),e.size/i),l=[],c=0;c<u;c++){for(var p=[],h=0;h<i;h++)p.push(s[h][c]);l.push(p)}a=l.map(r),r=(0,y.fromlist)(a),a=f(f(f([],d(e.shape.slice(0,t)),!1),d(r.shape.slice(1)),!1),d(e.shape.slice(t+1)),!1),e=(0,m.new_NDArray)((0,g.new_buffer)(r.flat,n),a);return(0,m.number_collapse)(e)}r.apply_along_axis=_;function a(e,t){return _(e,t,function(e){e=f([],d(e),!1);return e.sort(r.cmp_nan_at_the_end),e},e.dtype)}function v(t,e){void 0===e&&(e=null),null!==(e=Object.assign({axes:e},this).axes)&&e.axes&&(e=e.axes);var r=t.shape.length;if(null==e)return v(t,Array.from({length:r},function(e,t){return t}).reverse());if(e.length!==r)throw new Error("Axes must have length ".concat(r,". Found ").concat(e.length));for(var n=Array.from({length:r},function(){return-1}),a=0;a<r;a++){if(e[a]<0||e[a]>=r)throw new Error("Expected axis in [0..".concat(r,"). Found ").concat(e[a]));n[e[a]]=a}for(a=0;a<r;a++)if(-1==n[a])throw new Error("Axes must contain all dimensions. [".concat(e.join(", "),"] is missing ").concat(a,"."));for(var i=(0,m.shape_shifts)(t.shape),o=e.map(function(e){return t.shape[e]}),s=e.map(function(e){return i[e]}),u=[],l=new Array(o.length).fill(0),c=0;;){if(!isFinite(c))throw new Error("Programming error");u.push(c);for(var p=r-1;0<=p&&(l[p]++,c+=s[p],!(l[p]<o[p]));)c-=s[p]*o[p],l[p]=0,p--;if(p<0)break}var h=t.flat;return(0,m.new_NDArray)(t.dtype.from(u.map(function(e){return h[e]})),o)}function x(e,t,r){var n=(e=(0,m.asarray)(e)).shape.length,n=(t<0&&(t=n+t),r<0&&(r=n+r),Array.from({length:n},function(e,t){return t}));return n[t]=r,n[r]=t,v(e,n)}function c(e,r){var t;if((r=void 0===r?null:r)instanceof Object&&(r=r.axis),e=(e=(0,m.isarray)(e)?f([],d(e),!1):e).map(m.asarray),null==r&&(e=e.map(function(e){return(0,m.ravel)(e)}),r=0),!e.length)throw new Error("Expected at least two arrays");var n=e[0].shape.length,a=(r<0&&(r=n+r),f([],d(e[0].shape),!1)),i=[],o=a.map(function(e,t){return 0==t?0:a[t==r?0:t]});try{for(var s=p(e),u=s.next();!u.done;u=s.next()){var l=u.value;if(!(0,h.allEq)(l.shape.filter(function(e,t){return t!=r}),a.filter(function(e,t){return t!=r})))throw new Error("Inconsistent input shape ".concat(a," with respect to ").concat(l.shape.map(function(e,t){return t==r?"?":e})));o[0]+=l.shape[r],l=0==r?l:x(l,r,0),(0,h.extend)(i,l.flat)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(c=s.return)&&c.call(s)}finally{if(t)throw t.error}}var n=g.dtype_least_ancestor.apply(void 0,f([],d(e.map(function(e){return e.dtype})),!1)),c=(0,m.new_NDArray)(n.from(i),o);return 0==r?c:x(c,r,0)}r.cmp_nan_at_the_end=function(e,t){return e-t||isNaN(e)-isNaN(t)||Object.is(t,-0)-Object.is(e,-0)},r.sort=a,r.transpose=v,r.swapAxes=x,r.concatenate=c,r.stack=function(e,t){var r,n;if((t=void 0===t?0:t)instanceof Object&&(t=t.axis),(0,m.isarray)(e)&&(e=f([],d(e),!1)),!Array.isArray(e))throw new Error("Expected list of arrays. Found ".concat(typeof e));if(!(e=e.map(m.asarray)).length)throw new Error("Expected at least two arrays");var a=f([],d(e[0].shape),!1),i=(t<0&&(t=a.length+1+t),f(f(f([],d(a.slice(0,t)),!1),[1],!1),d(a.slice(t)),!1)),o=[];try{for(var s=p(e),u=s.next();!u.done;u=s.next()){var l=u.value;if(!(0,h.allEq)(l.shape,a))throw new Error("Inconsistent input shape ".concat(JSON.stringify(a)," with respect to ").concat(JSON.stringify(l.shape)));o.push((0,m.reshape)(l,i))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return c(o,t)},r.kw_exported={sort:n.Func_a_lastAxis.defaultDecorator(a)}},960:function(e,A){var S=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},F=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},O=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(A,"__esModule",{value:!0}),A.dtype_least_ancestor=A.dtype_is_float=A.dtype_is_boolean=A.dtype_is_integer=A.dtype_lt=A.dtype_leq=A.dtype_eq=A.new_buffer=A.dtypes=void 0,A.dtypes=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],A.new_buffer=function(e,t){return new(t||Float64Array)(e)},A.dtype_eq=function(e,t){return e===t},A.dtype_leq=function(e,t){return r[e.name+t.name]||!1},A.dtype_lt=function(e,t){return n[e.name+t.name]||!1},A.dtype_is_integer=function(e){return e===Uint32Array||e===Uint8Array||e===Int8Array||e===Uint8ClampedArray||e===Int16Array||e===Uint16Array||e===Int32Array},A.dtype_is_boolean=function(e){return e===Uint8Array},A.dtype_is_float=function(e){return e===Float32Array||e===Float64Array},A.dtype_least_ancestor=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return a[e.name+t.name]},Float64Array)};var t=function(){var t,e,r,n,a,i,o=[],s=[];try{for(var u=O(Object.entries({Uint8Array:[],Int8Array:[],Uint8ClampedArray:[],Int16Array:["Int8Array","Uint8Array","Uint8ClampedArray"],Uint16Array:["Int8Array","Uint8Array","Uint8ClampedArray"],Int32Array:["Int16Array","Uint16Array","Int8Array","Uint8Array","Uint8ClampedArray"],Uint32Array:["Int16Array","Uint16Array","Int8Array","Uint8Array","Uint8ClampedArray"],BigInt64Array:["Int32Array","Uint32Array","Int16Array","Uint16Array","Int8Array","Uint8Array","Uint8ClampedArray"],BigUint64Array:["Int32Array","Uint32Array","Int16Array","Uint16Array","Int8Array","Uint8Array","Uint8ClampedArray"],Float32Array:["Int32Array","Uint32Array","Int16Array","Uint16Array","Int8Array","Uint8Array","Uint8ClampedArray","BigUint32Array","BigInt32Array"],Float64Array:["Float32Array","Int32Array","Uint32Array","Int16Array","Uint16Array","Int8Array","Uint8Array","Uint8ClampedArray","BigUint32Array","BigInt32Array","BigUint64Array","BigInt64Array"]})),l=u.next();!l.done;l=u.next()){var c=S(l.value,2);!function(t,e){s.push(t+t),s.push.apply(s,F([],S(e.map(function(e){return t+e})),!1)),o.push.apply(o,F([],S(e.map(function(e){return t+e})),!1))}(c[0],c[1])}}catch(e){h={error:e}}finally{try{l&&!l.done&&(p=u.return)&&p.call(u)}finally{if(h)throw h.error}}var p=Object.fromEntries(s.map(function(e){return[e,!0]})),h=Object.fromEntries(o.map(function(e){return[e,!1]})),d={};try{for(var f=O(A.dtypes),m=f.next();!m.done;m=f.next()){var y=m.value;try{r=void 0;for(var g=O(A.dtypes),_=g.next();!_.done;_=g.next()){var v=_.value,x=Float64Array;try{a=void 0;for(var b=O(A.dtypes),w=b.next();!w.done;w=b.next()){var I=w.value;s[y.name+I.name]&&s[v.name+I.name]&&s[I.name+x.name]&&(x=I)}}catch(e){a={error:e}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(a)throw a.error}}d[y.name+v.name]=x}}catch(e){r={error:e}}finally{try{_&&!_.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{m&&!m.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}return{hierarchy_leq:p,hierarchy_lt:h,hierarchy_max:d}}(),r=t.hierarchy_leq,n=t.hierarchy_lt,a=t.hierarchy_max},800:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.np=void 0,function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a="Usage example: np`np.arange(10)+${5}` or np([0,1,2]).";if("number"==typeof e)return e;if(e instanceof s.NDArray)return e;if(!Array.isArray(e))throw new Error("Expected template or array. ".concat(a));if(!e.length)throw new Error("Expected argument. ".concat(a));if("string"==typeof e[0]){if(r.length+1!=e.length)throw new Error("Wrong input. ".concat(a));return(t=s.modules.grammar).parse.apply(t,o([e],i(r),!1))}if(r.length)throw new Error("Wrong input. ".concat(a));return s.asarray(e)});t.np=s;r(257).GLOBALS.np=s;var t=r(138),n=(s.NDArray=t.default,t.default.prototype.modules.jsInterface.tolist),a=(s.tolist=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n(s.apply(void 0,o([e],i(t),!1)))},s.fromlist=t.default.prototype.modules.jsInterface.fromlist,s.ravel=t.default.prototype.modules.basic.ravel,s.reshape=t.default.prototype.modules.basic.reshape,s.array=t.default.prototype.modules.basic.array,s.asarray=t.default.prototype.modules.basic.asarray,t.default.prototype.modules.reduce),a=(s.sum=a.kw_reducers.sum,s.product=a.kw_reducers.product,s.prod=s.product,s.any=a.kw_reducers.any,s.all=a.kw_reducers.all,s.max=a.kw_reducers.max,s.min=a.kw_reducers.min,s.argmax=a.kw_reducers.argmax,s.argmin=a.kw_reducers.argmin,s.mean=a.kw_reducers.mean,s.norm=a.kw_reducers.norm,s.var=a.kw_reducers.var,s.std=a.kw_reducers.std,t.default.prototype.modules.transform),a=(s.transpose=a.transpose,s.apply_along_axis=a.apply_along_axis,s.sort=a.kw_exported.sort,s.concatenate=a.concatenate,s.stack=a.stack,r(923)),u=t.default.prototype.modules.operators,a=(s.add=a.Func_a_other_out.defaultDecorator(u.op_binary["+"]),s.subtract=a.Func_a_other_out.defaultDecorator(u.op_binary["-"]),s.multiply=a.Func_a_other_out.defaultDecorator(u.op_binary["*"]),s.divide=a.Func_a_other_out.defaultDecorator(u.op_binary["/"]),s.mod=a.Func_a_other_out.defaultDecorator(u.op_binary["%"]),s.divide_int=a.Func_a_other_out.defaultDecorator(u.op_binary["//"]),s.pow=a.Func_a_other_out.defaultDecorator(u.op_binary["**"]),s.bitwise_or=a.Func_a_other_out.defaultDecorator(u.op_binary["|"]),s.bitwise_and=a.Func_a_other_out.defaultDecorator(u.op_binary["&"]),s.bitwise_xor=a.Func_a_other_out.defaultDecorator(u.op_binary["^"]),s.bitwise_shift_left=a.Func_a_other_out.defaultDecorator(u.op_binary["<<"]),s.bitwise_shift_right=a.Func_a_other_out.defaultDecorator(u.op_binary[">>"]),s.greater=a.Func_a_other_out.defaultDecorator(u.op_binary[">"]),s.less=a.Func_a_other_out.defaultDecorator(u.op_binary["<"]),s.greater_equal=a.Func_a_other_out.defaultDecorator(u.op_binary[">="]),s.less_equal=a.Func_a_other_out.defaultDecorator(u.op_binary["<="]),s.equal=a.Func_a_other_out.defaultDecorator(u.op_binary["=="]),s.not_equal=a.Func_a_other_out.defaultDecorator(u.op_binary["!="]),s.maximum=a.Func_a_other_out.defaultDecorator(u.op_binary.max),s.minimum=a.Func_a_other_out.defaultDecorator(u.op_binary.min),s.logical_or=a.Func_a_other_out.defaultDecorator(u.op_binary.or),s.logical_and=a.Func_a_other_out.defaultDecorator(u.op_binary.and),s.atan2=u.atan2,s.assign=u.op_assign["="],s.allclose=u.allclose,s.isclose=u.isclose,t.default.prototype.modules.elementwise),u=(s.sign=a.kw_funcs.sign,s.sqrt=a.kw_funcs.sqrt,s.square=a.kw_funcs.square,s.exp=a.kw_funcs.exp,s.log=a.kw_funcs.log,s.log2=a.kw_funcs.log2,s.log10=a.kw_funcs.log10,s.log1p=a.kw_funcs.log1p,s.sin=a.kw_funcs.sin,s.cos=a.kw_funcs.cos,s.tan=a.kw_funcs.tan,s.asin=a.kw_funcs.asin,s.acos=a.kw_funcs.acos,s.atan=a.kw_funcs.atan,s.cosh=a.kw_funcs.cosh,s.sinh=a.kw_funcs.sinh,s.tanh=a.kw_funcs.tanh,s.acosh=a.kw_funcs.acosh,s.asinh=a.kw_funcs.asinh,s.atanh=a.kw_funcs.atanh,s.floor=a.kw_funcs.floor,s.ceil=a.kw_funcs.ceil,s.isnan=a.kw_funcs.isnan,s.isfinite=a.kw_funcs.isfinite,s.abs=a.kw_funcs.abs,s.bitwise_not=a.kw_funcs.bitwise_not,s.logical_not=a.kw_funcs.logical_not,s.negative=a.kw_funcs.negative,s.round=a.kw_funcs.round,r(895));s.modules=u.modules,s.random=s.modules.random,s.empty=s.modules.constructors.empty,s.zeros=s.modules.constructors.zeros,s.ones=s.modules.constructors.ones,s.arange=s.modules.constructors.arange,s.linspace=s.modules.constructors.linspace,s.geomspace=s.modules.constructors.geomspace,s.take=s.modules.indexing.take,s.where=s.modules.indexing.where,s.nonzero=s.modules.indexing.nonzero,s.quantile=s.modules.statistics.kw_exported.quantile,s.nanquantile=s.modules.statistics.kw_exported.nanquantile,s.pi=Math.PI,s.e=Math.E},392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nd_modules=t.np=void 0;var r=r(257),n=r.GLOBALS.np,r=r.GLOBALS.NDArray;if(!(t.np=n))throw new Error("Programming error: np not defined");t.nd_modules=r.prototype.modules},907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.geomspace=t.linspace=t.arange=t.ones=t.zeros=t.empty=void 0;var r=r(138).default.prototype.modules,a=r.basic,i=r.elementwise;function o(e,t){var r,e=null===(t=void 0===t?null:t)?(r=0,e):(r=e,t);return a.new_from(e-r,function(e,t){return r+t},Int32Array)}function s(e,t,r,n){void 0===r&&(r=50),void 0===n&&(n=!0),e=a.as_number(e),t=a.as_number(t);n=r-(n?1:0);return o(r).divide(n).multiply(t-e).add(e)}t.empty=function(e,t){return void 0===t&&(t=Float64Array),a.new_from(e,void 0,t)},t.zeros=function(e,t){return void 0===t&&(t=Float64Array),a.new_from(e,function(e){return 0},t)},t.ones=function(e,t){return void 0===t&&(t=Float64Array),a.new_from(e,function(e){return 1},t)},t.arange=o,t.linspace=s,t.geomspace=function(e,t,r,n){return void 0===r&&(r=50),void 0===n&&(n=!0),e=Math.log(e),t=Math.log(t),i.funcs.exp(s(e,t,r,n))}},581:function(e,o,t){var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},l=(Object.defineProperty(o,"__esModule",{value:!0}),o.parse=o.__parser_pool=o.__makeSemantics=o.ohmGrammar=o.grammar=void 0,t(392)),t=t(636);o.grammar=String.raw(r(['\nArrayGrammar {\n  Instruction\n  = Variable "[" Slice "]" AssignSymbol ArithmeticLogicExp -- sliceAssignment\n  | ArithmeticLogicExp                       -- expression\n  \n  Variable\n   = "#" digit+ "#"\n  \n  AssignSymbol\n  ="="|"+="|"-="|"*="|"/="|"%="|"&="|"|="|"^="|"@="|"**="|"<<="|">>="|"//="|"or="|"and="|"xor="|"max="|"min="\n  \n  /* Declaration in precedence order (weakest first) */\n  ArithmeticLogicExp = Precedence11\n\n  /* https://docs.python.org/3/reference/expressions.html */\n  Operator11 = "<" | "<=" | ">" | ">=" | "!=" | "=="\n  Operator10 = "|"\n  Operator09 = "^"\n  Operator08 = "&"\n  Operator07 = "<<" | ">>"\n  Operator06 = "+" | "-"\n  Operator05 = "*" | "@" | "/" | "//" | "%"\n  Operator04 = "~" /* Unary */\n  Operator03 = "+" | "-" /* Unary. Special treatment to prevent "-1.3" to be "-(array of 1.3)" */\n  Operator02 = "**"\n  /* Operator01 = "x[index]" | "x[index:index]" | "x(arguments...)" | "x.attribute" */\n  /* Operator00 = "(expressions...)" */\n\n  Precedence11 = Precedence11 Operator11 Precedence10 | "" "" Precedence10\n  Precedence10 = Precedence10 Operator10 Precedence09 | "" "" Precedence09\n  Precedence09 = Precedence09 Operator09 Precedence08 | "" "" Precedence08\n  Precedence08 = Precedence08 Operator08 Precedence07 | "" "" Precedence07\n  Precedence07 = Precedence07 Operator07 Precedence06 | "" "" Precedence06\n  Precedence06 = Precedence06 Operator06 Precedence05 | "" "" Precedence05\n  Precedence05 = Precedence05 Operator05 Precedence04 | "" "" Precedence04\n  Precedence04 = ""           Operator04 Precedence03 | "" "" Precedence03 /* Unary */\n  Precedence03 = ""           Operator03 Precedence02 | "" "" Precedence02 /* Special */\n  Precedence02 = Precedence02 Operator02 Precedence03 | "" "" Precedence01\n  Precedence01 = Arr\n  \n  Parenthesis = "(" ArithmeticLogicExp ")"\n  Arr\n    = Arr "." Name CallArgs     -- method\n    | Arr "." Name              -- attribute\n    | Arr "[" Slice "]"         -- slice\n    | Parenthesis\n    | Name ("." Name)* CallArgs -- call\n    | number\n    | Variable\n\n  Name  (an identifier)\n    = (letter|"_") (letter|"_"|digit)*\n\n  number  (a number)\n    = ("+"|"-")? digit* "." digit+ "E" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+ "e" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+  ""  ""        ""\n    | ("+"|"-")? digit+ ""  ""      ""  ""        ""\n  \n  int (an integer) = ""  digit+ | "-" digit+ | "+" digit+\n\n  CallArgs // Using empty strings instead of separate rules\n   = "(" Args ","  KwArgs ","? ")"\n   | "(" Args ","? ""      ""  ")"\n   | "(" ""   ","? KwArgs ","? ")"\n   | "(" ""    ""  ""      ""  ")"\n   \n  Args = NonemptyListOf<ArgValue, ",">\n  KwArgs = NonemptyListOf<KwArg, ",">\n  KwArg = Name "=" ArgValue\n\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\n  Constant = "True" | "False" | "None" | "np.nan" | "np.inf"\n  JsArray\n    = "[" ListOf<ArgValue, ","> ","? "]"\n    | "(" ListOf<ArgValue, ","> ","? ")"\n\n  String = "\'" any* "\'" | """ any* """\n   \n  Slice = NonemptyListOf<SliceTerm, ",">\n  SliceTerm\n    = SliceRange\n    | (":" | "..." | "None") -- constant\n    | ("True" | "False") -- boolean_constant\n    | JsArray\n    | ArithmeticLogicExp\n  \n  SliceRange\n    = int ":" int ":" int\n    | int ":" int ""  ""\n    | int ":" ""  ":" int\n    | int ":" ""  ""  ""\n    | ""  ":" int ":" int\n    | ""  ":" int ""  ""\n    | ""  ":" ""  ":" int\n    | ""  ":" ""  ""  ""\n}\n'],['\nArrayGrammar {\n  Instruction\n  = Variable "[" Slice "]" AssignSymbol ArithmeticLogicExp -- sliceAssignment\n  | ArithmeticLogicExp                       -- expression\n  \n  Variable\n   = "#" digit+ "#"\n  \n  AssignSymbol\n  ="="|"+="|"-="|"*="|"/="|"%="|"&="|"|="|"^="|"@="|"**="|"<<="|">>="|"//="|"or="|"and="|"xor="|"max="|"min="\n  \n  /* Declaration in precedence order (weakest first) */\n  ArithmeticLogicExp = Precedence11\n\n  /* https://docs.python.org/3/reference/expressions.html */\n  Operator11 = "<" | "<=" | ">" | ">=" | "!=" | "=="\n  Operator10 = "|"\n  Operator09 = "^"\n  Operator08 = "&"\n  Operator07 = "<<" | ">>"\n  Operator06 = "+" | "-"\n  Operator05 = "*" | "@" | "/" | "//" | "%"\n  Operator04 = "~" /* Unary */\n  Operator03 = "+" | "-" /* Unary. Special treatment to prevent "-1.3" to be "-(array of 1.3)" */\n  Operator02 = "**"\n  /* Operator01 = "x[index]" | "x[index:index]" | "x(arguments...)" | "x.attribute" */\n  /* Operator00 = "(expressions...)" */\n\n  Precedence11 = Precedence11 Operator11 Precedence10 | "" "" Precedence10\n  Precedence10 = Precedence10 Operator10 Precedence09 | "" "" Precedence09\n  Precedence09 = Precedence09 Operator09 Precedence08 | "" "" Precedence08\n  Precedence08 = Precedence08 Operator08 Precedence07 | "" "" Precedence07\n  Precedence07 = Precedence07 Operator07 Precedence06 | "" "" Precedence06\n  Precedence06 = Precedence06 Operator06 Precedence05 | "" "" Precedence05\n  Precedence05 = Precedence05 Operator05 Precedence04 | "" "" Precedence04\n  Precedence04 = ""           Operator04 Precedence03 | "" "" Precedence03 /* Unary */\n  Precedence03 = ""           Operator03 Precedence02 | "" "" Precedence02 /* Special */\n  Precedence02 = Precedence02 Operator02 Precedence03 | "" "" Precedence01\n  Precedence01 = Arr\n  \n  Parenthesis = "(" ArithmeticLogicExp ")"\n  Arr\n    = Arr "." Name CallArgs     -- method\n    | Arr "." Name              -- attribute\n    | Arr "[" Slice "]"         -- slice\n    | Parenthesis\n    | Name ("." Name)* CallArgs -- call\n    | number\n    | Variable\n\n  Name  (an identifier)\n    = (letter|"_") (letter|"_"|digit)*\n\n  number  (a number)\n    = ("+"|"-")? digit* "." digit+ "E" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+ "e" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+  ""  ""        ""\n    | ("+"|"-")? digit+ ""  ""      ""  ""        ""\n  \n  int (an integer) = ""  digit+ | "-" digit+ | "+" digit+\n\n  CallArgs // Using empty strings instead of separate rules\n   = "(" Args ","  KwArgs ","? ")"\n   | "(" Args ","? ""      ""  ")"\n   | "(" ""   ","? KwArgs ","? ")"\n   | "(" ""    ""  ""      ""  ")"\n   \n  Args = NonemptyListOf<ArgValue, ",">\n  KwArgs = NonemptyListOf<KwArg, ",">\n  KwArg = Name "=" ArgValue\n\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\n  Constant = "True" | "False" | "None" | "np.nan" | "np.inf"\n  JsArray\n    = "[" ListOf<ArgValue, ","> ","? "]"\n    | "(" ListOf<ArgValue, ","> ","? ")"\n\n  String = "\\\'" any* "\\\'" | "\\"" any* "\\""\n   \n  Slice = NonemptyListOf<SliceTerm, ",">\n  SliceTerm\n    = SliceRange\n    | (":" | "..." | "None") -- constant\n    | ("True" | "False") -- boolean_constant\n    | JsArray\n    | ArithmeticLogicExp\n  \n  SliceRange\n    = int ":" int ":" int\n    | int ":" int ""  ""\n    | int ":" ""  ":" int\n    | int ":" ""  ""  ""\n    | ""  ":" int ":" int\n    | ""  ":" int ""  ""\n    | ""  ":" ""  ":" int\n    | ""  ":" ""  ""  ""\n}\n'])),o.ohmGrammar=t.grammar(o.grammar),o.__makeSemantics=function(){var a=[],e={Instruction_sliceAssignment:function(e,t,r,n,a,i){var o=e.parse(),e=i.parse(),i=a.sourceString,a=r.parse(),r=l.nd_modules.basic.asarray(o);if(l.nd_modules.operators.op_assign[i](o,a,e),r!==o){for(l.nd_modules.jsInterface.tolist(r);o.length;)o.pop();o.push.apply(o,u([],s(o),!1))}return null},Instruction_expression:function(e){e=e.parse();return"number"==typeof e||"boolean"==typeof e||Array.isArray(e)||l.nd_modules.basic.isarray(e)&&(e=l.nd_modules.basic.number_collapse(e)),e},Precedence11:t,Precedence10:t,Precedence09:t,Precedence08:t,Precedence07:t,Precedence06:t,Precedence05:t,Precedence04:r,Precedence03:r,Precedence02:t,number:function(e,t,r,n,a,i,o){return parseFloat(this.sourceString)},Arr_slice:function(e,t,r,n){e=e.parse(),r=r.parse();return e.index.apply(e,u([],s(r),!1))},SliceTerm_constant:function(e){return e.sourceString},SliceTerm_boolean_constant:function(e){return"True"===e.sourceString},Arr_call:function(e,t,r,n){e=e.sourceString+t.sourceString,t=(e="np."==e.slice(0,3)?e.slice(3):e).split(".").reduce(function(e,t){return e[t]},l.np);if(void 0===t)throw new Error("Unrecognized function ".concat(e));e=n.parse(),n=e.args,e=e.kwArgs;return 0==Object.keys(e).length?t.apply(void 0,u([],s(n),!1)):t.apply(void 0,u(u([],s(n),!1),[e],!1))},Arr_method:function(e,t,r,n){var e=e.parse(),r=r.sourceString,n=n.parse(),a=n.args,n=n.kwArgs;if(void 0===e[r])throw new Error("Unrecognized method ".concat(r));return 0==Object.keys(n).length?e[r].apply(e,u([],s(a),!1)):e[r].apply(e,u(u([],s(a),!1),[n],!1))},Parenthesis:function(e,t,r){return t.parse()},Arr_attribute:function(e,t,r){return e.parse()[r.sourceString]},Variable:function(e,t,r){var t=parseInt(t.sourceString),t=a[t],n=Array.isArray(t)&&t.length&&l.nd_modules.basic.isarray(t[0]);return t=Array.isArray(t)&&!n?l.nd_modules.basic.array(t):t},int:function(e,t){t=parseInt(t.sourceString);return"-"==e.sourceString?-t:t},SliceRange:function(e,t,r,n,a){return this.sourceString},Constant:function(e){switch(e.sourceString){case"True":return!0;case"False":return!1;case"None":return null;case"np.nan":return Number.NaN;case"np.inf":return Number.POSITIVE_INFINITY}throw new Error("Unrecognized constant ".concat(e.sourceString))},String:function(e,t,r){return t.sourceString},CallArgs:function(e,t,r,n,a,i){t=t.parse()||[],n=n.parse()||[];return{args:t,kwArgs:Object.fromEntries(n.map(function(e){var e=s(e,2),t=e[0],e=e[1];return[t,e=l.nd_modules.basic.isarray(e)?l.nd_modules.basic.number_collapse(e):e]}))}},KwArg:function(e,t,r){return[e.sourceString,r.parse()]},NonemptyListOf:function(e,t,r){return u([e],s(r.children),!1).map(function(e){return e.parse()})},JsArray:function(e,t,r,n){var a,i=t.parse(),o=l.nd_modules.jsInterface.tolist;for(a in i)l.nd_modules.basic.isarray(i[a])&&(i[a]=o(i[a]));return i},_terminal:function(){return null}};function t(e,t,r){e=e.parse(),r=r.parse(),t=t.sourceString;return""==t&&null===e?r:l.nd_modules.operators.op_binary[t](e,r)}function r(e,t,r){var n=r.parse(),r=t.sourceString;if(""==r)return n;var a=l.nd_modules.elementwise.ops;switch(r){case"+":return a["+"](n);case"-":return a["-"](n);case"~":return a["~"](n);case"!":return a.not(n)}throw new Error("Programming Error: ".concat(r))}var i=o.ohmGrammar.createSemantics();return i.addOperation("parse",e),{parse:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0,e=e.join("###").replace(/###/g,function(){return"#".concat(n++,"#")}),e=(a.length=0,a.push.apply(a,u([],s(t),!1)),o.ohmGrammar.match(e));if(e.succeeded())return i(e).parse();throw new Error(e.message)},ohmSemantics:i,semantics:e,semanticVariables:a,busy:0}},o.__parser_pool=[(0,o.__makeSemantics)()];o.parse=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=o.__parser_pool,a=0;a<n.length;a++){var i=n[a];if(0==i.busy++)try{return i.parse.apply(i,u([e],s(t),!1))}finally{i.busy=0}a==n.length&&n.push((0,o.__makeSemantics)())}}},895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modules=void 0,r(392);var n=r(907),a=r(581),i=r(294),o=r(120),r=r(781);t.modules={constructors:n,grammar:a,random:o,indexing:i,statistics:r}},294:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.nonzero=t.where=t.take=void 0,r(138)),a=r(418);t.take=function(e,t,r){var n=e.shape.map(function(){return":"});return n[r]=t,e.index.apply(e,o([],i(n),!1))},t.where=function(e,t,r,n){return void 0===n&&(n=null),"boolean"==typeof e?e?t:r:(e=(0,a.asarray)(e),(n=null==n?e.copy():(0,a.asarray)(n)).assign(t,e),n.assign(r,e.logical_not()),n)},t.nonzero=function(n){var e=o([],i(n.flat),!1).map(function(e,t){return e?t:null}).filter(function(e){return null!==e}),a=n.shape.map(function(){return new Int32Array(e.length)});return e.forEach(function(e,t){for(var r=n.shape.length-1;0<=r;r--)a[r][t]=e%n.shape[r],e=Math.floor(e/n.shape[r])}),a.map(function(e){return new s.default(e)})}},120:function(e,t,r){var a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.shuffle=t.shuffled=t._shuffled=t._shuffle=t.normal=t.randn=t._normal_buffer=t.exponential=t.uniform=t.random=void 0,r(392)),o=r(960);function n(e){return i.nd_modules.basic.new_from(e,function(e){return Math.random()},Float64Array)}function s(e){for(var t=(0,o.new_buffer)(e),r=0;r<e;){var n=2*Math.random()-1,a=2*Math.random()-1,i=n*n+a*a;1<i||(n=Math.sqrt(-2*Math.log(i)/i)*n,i=Math.sqrt(-2*Math.log(i)/i)*a,t[r++]=n,r<e&&(t[r++]=i))}return t}function u(e){var t=s(e.reduce(function(e,t){return e*t},1));return new i.np.NDArray(t,e)}function l(e){for(var t=e.length-1;0<=t;t--){var r=Math.floor(Math.random()*(t+1)),n=a([e[r],e[t]],2);e[t]=n[0],e[r]=n[1]}}function c(e){e=e.slice();return l(e),e}function p(e){if(0==e.shape.length)return e;var t;if(1==e.shape.length)return t=c(e.flat),new i.np.NDArray(t,e.shape);for(var r=c(Array.from({length:e.length},function(e,t){return t})),n=i.np.empty(e.shape),a=0;a<e.length;a++)n.assign(e.index(r[a]),a);return n}t.random=n,t.uniform=function(e,t,r){return n(r).multiply(t-e).add(e)},t.exponential=function(e,t){return i.np.multiply(e,i.np.subtract(0,i.np.log(n(t))))},t._normal_buffer=s,t.randn=u,t.normal=function(e,t,r){return u(r).multiply(t).add(e)},t._shuffle=l,t._shuffled=c,t.shuffled=p,t.shuffle=function(e){e.assign(p(e))}},781:function(e,t,r){var m=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},y=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},g=(Object.defineProperty(t,"__esModule",{value:!0}),t.kw_exported=t.nanmedian=t.nanquantile=t.nanpercentile=t.average=t.median=t.quantile=t.percentile=void 0,r(150)),n=r(923),_=r(400),o=r(392);function a(e,t,r){return i(e,t=o.np.divide(t,100),r)}function i(e,t,r,n){void 0===n&&(n=!1),t=(0,g.asarray)(t),r!=e.shape.length-1&&(e=(0,_.swapAxes)(e,r,-1));for(var r=t.shape,a=e.shape.slice(0,-1),i=(e=e.reshape(-1,e.shape.at(-1)),t=t.reshape(-1),m(e.shape,2)),o=i[0],s=i[1],u=e.flat,l=t.flat,c=new Float64Array(t.size*o),p=0;p<o;p++){var h,d=function(n,e,t){void 0===t&&(t=!1);var a=(n=y([],m(n),!1).sort(_.cmp_nan_at_the_end)).length;return t&&(a-=n.reduce(function(e,t){return e+(isNaN(t)?1:0)},0)),e.map(function(e){var t,e=e*(a-1),r=Math.floor(e);return e==r?n[r]:e==(t=r+1)?n[t]:n[r]*(t-e)+n[t]*(e-r)})}(u.slice(p*s,(p+1)*s),l,n),f=p;for(h in d)c[f]=d[h],f+=o}return(0,g.new_NDArray)(c,y(y([],m(r),!1),m(a),!1))}function s(e,t,r){var n=i(e,.5,t);return r&&((r=e.shape.slice())[t]=1,n=n.reshape(r)),n}function u(e,t,r){return l(e,t=o.np.divide(t,100),r)}function l(e,t,r){return i(e,t,r,!0)}function c(e,t,r){var n=l(e,.5,t);return r&&((r=e.shape.slice())[t]=1,n=n.reshape(r)),n}t.percentile=a,t.quantile=i,t.median=s,t.average=function(e,t,r,n){var a,i;return null===r?o.np.mean(e,t):(a=o.np.sum(r),(i=e.shape.map(function(){return 1}))[t]=r.size,r=r.reshape(i),i=o.np.sum(o.np.multiply(e,r),t,n),o.np.asarray(o.np.divide(i,a)))},t.nanpercentile=u,t.nanquantile=l,t.nanmedian=c,t.kw_exported={quantile:n.Func_a_q_axis.defaultDecorator(i),nanquantile:n.Func_a_q_axis.defaultDecorator(l),percentile:n.Func_a_q_axis.defaultDecorator(a),nanpercentile:n.Func_a_q_axis.defaultDecorator(u),median:n.Func_a_axis_keepdims.defaultDecorator(s),nanmedian:n.Func_a_axis_keepdims.defaultDecorator(c)}},862:function(e,t){var h=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};function s(e,t,r){for(var n,a=[[e,t,[],0]];;){var i=a.pop();if(!i)return!0;var i=h(i,4),o=i[0],s=i[1],u=i[2],l=i[3];if(Array.isArray(o)&&Array.isArray(s)&&o.length==s.length)for(var c in o){var p=[];u.push(p),a.push([o[c],s[c],p,l+1])}else u.push(r(o,s));if(1e4<l&&Array.isArray(o)){if((n=n||[]).includes(o))throw new Error("Circular reference found. ".concat(o));n[l-1e4]=o}}}function o(e,t,r){void 0===r&&(r=1e4);for(var n=0;n<t.length;n+=r)n=Math.min(n,t.length),e.push.apply(e,a([],h(t.slice(n,n+r)),!1));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.allClose=t.allEq=t.ravel=t.extend=t.binary_operation=void 0,t.binary_operation=s,t.extend=o,t.ravel=function(e){for(var n,a=[[e,0]],i=[];"break"!==function(){var e=a.pop();if(!e)return"break";var e=h(e,2),t=e[0],r=e[1];if(1e4<r&&Array.isArray(t)){if((n=n||[]).includes(t))throw new Error("Circular reference found. ".concat(t));n[r-1e4]=t}if(Array.isArray(t))return o(a,t.map(function(e){return[e,r+1]})),"continue";i.push(t)}(););return i},t.allEq=function(e,t,r){void 0===r&&(r=!1);var n=new Error("");try{s(e,t,function(e,t){if(e===t||r&&Number.isNaN(e)&&Number.isNaN(t))return 0;throw n})}catch(e){if(e===n)return!1;throw e}return!0},t.allClose=function(e,t,r,n,a){function i(e,t){if(e=e,t=t,Number.isFinite(e)&&Number.isFinite(t)?Math.abs(e-t)<=n+r*Math.abs(t):e==t||a&&Number.isNaN(e)&&Number.isNaN(t))return 0;throw o}void 0===r&&(r=1e-5),void 0===n&&(n=1e-8),void 0===a&&(a=!1);var o=new Error("");try{s(e,t,i)}catch(e){if(e===o)return!1;throw e}return!0}},636:(C,e)=>{function t(e){const t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function d(e,t){if(!e)throw new Error(t||"Assertion failed")}function j(e,t,r){let n;Object.defineProperty(e,t,{get(){return n=n||r.call(this)}})}function T(e,t){for(var r=[];0<t--;)r.push(e());return r}function q(e,t){return new Array(t+1).join(e)}function U(e,t){return T(()=>e,t)}function G(t){var r=[];for(let e=0;e<t.length;e++){var n=t[e];t.lastIndexOf(n)!==e&&r.indexOf(n)<0&&r.push(n)}return r}function B(e){const t=[];return e.forEach(e=>{t.indexOf(e)<0&&t.push(e)}),t}function l(e){e=e[0];return e===e.toUpperCase()}function z(e){return!l(e)}function V(e,t,r){return e.length<t?q(r||" ",t-e.length)+e:e}function f(){this.strings=[]}Object.defineProperty(e,"__esModule",{value:!0}),f.prototype.append=function(e){this.strings.push(e)},f.prototype.contents=function(){return this.strings.join("")};const K=e=>String.fromCodePoint(parseInt(e,16));function $(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return K(e.slice(2,4));case"u":return"{"===e.charAt(2)?K(e.slice(3,-1)):K(e.slice(2,6));default:return e.charAt(1)}}function J(t){if(null==t)return String(t);var r=Object.prototype.toString.call(t);try{let e;return(e=t.constructor&&t.constructor.name?t.constructor.name:0===r.indexOf("[object ")?r.slice(8,-1):typeof t)+": "+JSON.stringify(String(t))}catch(e){return r}}var H=Object.freeze({__proto__:null,abstract:t,assert:d,defineLazyProperty:j,clone:function(e){return e&&Object.assign({},e)},repeatFn:T,repeatStr:q,repeat:U,getDuplicates:G,copyWithoutDuplicates:B,isSyntactic:l,isLexical:z,padLeft:V,StringBuffer:f,unescapeCodePoint:$,unexpectedObjToString:J});const W={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class n{constructor(){if(this.constructor===n)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}const r=Object.create(n.prototype),a=Object.create(n.prototype);class c extends n{constructor(e){super(),this.obj=e}}class i extends n{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=1<e.length||1<t.length}}class o extends n{constructor(e){super(),this.index=e}}class s extends n{constructor(e){super(),this.terms=e}}class u extends s{constructor(e,t,r){super([r,e.rules[t].body]),this.superGrammar=e,this.name=t,this.body=r}}class p extends s{constructor(e,t,r,n){var a=e.rules[t].body;super([...r,a,...n]),this.superGrammar=e,this.ruleName=t,this.expansionPos=r.length}}class h extends n{constructor(e){super(),this.factors=e}}class m extends n{constructor(e){super(),this.expr=e}}class y extends m{}class g extends m{}class _ extends m{}y.prototype.operator="*",g.prototype.operator="+",_.prototype.operator="?",y.prototype.minNumMatches=0,g.prototype.minNumMatches=1,_.prototype.minNumMatches=0,y.prototype.maxNumMatches=Number.POSITIVE_INFINITY,g.prototype.maxNumMatches=Number.POSITIVE_INFINITY,_.prototype.maxNumMatches=1;class v extends n{constructor(e){super(),this.expr=e}}class x extends n{constructor(e){super(),this.expr=e}}class b extends n{constructor(e){super(),this.expr=e}}class w extends n{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return l(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class I extends n{constructor(e){super(),this.category=e,this.pattern=W[e]}}function A(e,t){let r;return t?((r=new Error(t.getLineAndColumnMessage()+e)).shortMessage=e,r.interval=t):r=new Error(e),r}function Q(){return A("Interval sources don't match")}function Z(e,t,r){return A("Rule "+e+" is not declared in grammar "+t,r)}function Y(e,t,r,n){let a="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==r&&(a+=" (originally declared in '"+r+"')"),A(a,n)}function X(e,t,r,n){return A("Wrong number of parameters for rule "+e+" (expected "+t+", got "+r+")",n)}function ee(e,t,r){return A("Duplicate parameter names in rule "+e+": "+t.join(", "),r)}function te(e,t){return A("Incorrect argument type: expected "+e,t.source)}function re(e,t){var r=0<t.length?t[t.length-1].args:[];let n="Nullable expression "+e.expr.substituteParams(r)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";return 0<t.length&&(r=t.map(e=>new w(e.ruleName,e.args)).join("\n"),n+="\nApplication stack (most recent application last):\n"+r),A(n,e.expr.source)}function ne(e,t,r,n){return A("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+r+")",n.source)}function ae(e){if(1===e.length)throw e[0];if(1<e.length)throw t=(e=e).map(e=>e.message),A(["Errors:"].concat(t).join("\n- "),e[0].interval);var t}function ie(e,t,r){var n=e.length;return(e.slice(0,r)+t+e.slice(r+t.length)).substr(0,n)}function oe(...t){var r=this,n=r["offset"],a=H["repeatStr"];const i=new f,o=(i.append("Line "+r.lineNum+", col "+r.colNum+":\n"),function(e){let t=0;return e.map(e=>{e=e.toString();return t=Math.max(t,e.length),e}).map(e=>V(e,t))}([null==r.prevLine?0:r.lineNum-1,r.lineNum,null==r.nextLine?0:r.lineNum+1]));var e=(e,t,r)=>{i.append(r+o[e]+" | "+t+"\n")},s=(null!=r.prevLine&&e(0,r.prevLine,"  "),e(1,r.line,"> "),r.line.length);let u=a(" ",s+1);for(let e=0;e<t.length;++e){var l=t[e][0],c=t[e][1],p=(d(0<=l&&l<=c,"range start must be >= 0 and <= end"),n-r.colNum+1),l=Math.max(0,l-p),c=Math.min(c-p,s);u=ie(u,a("~",c-l),l)}var h=2+o[1].length+3;return i.append(a(" ",h)),u=ie(u,"^",r.colNum-1),i.append(u.replace(/ +$/,"")+"\n"),null!=r.nextLine&&e(2,r.nextLine,"  "),i.contents()}let se=[];function ue(e){se.push(e)}function le(e,t){let r=1,n=1,a=0,i=0,o=null,s=null,u=-1;for(;a<t;){var l=e.charAt(a++);"\n"===l?(r++,n=1,u=i,i=a):"\r"!==l&&n++}let c=e.indexOf("\n",i);-1===c?c=e.length:(p=e.indexOf("\n",c+1),o=(o=-1===p?e.slice(c):e.slice(c,p)).replace(/^\r?\n/,"").replace(/\r$/,"")),0<=u&&(s=e.slice(u,i).replace(/\r?\n$/,""));var p=e.slice(i,c).replace(/\r$/,"");return{offset:t,lineNum:r,colNum:n,line:p,prevLine:s,nextLine:o,toString:oe}}function ce(e,t,...r){return le(e,t).toString(...r)}const pe=(()=>{let t=0;return e=>""+e+t++})();class S{constructor(e,t,r){this.sourceString=e,this.startIdx=t,this.endIdx=r}get contents(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return S.coverage(...e,this)}collapsedLeft(){return new S(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new S(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return le(this.sourceString,this.startIdx)}getLineAndColumnMessage(){var e=[this.startIdx,this.endIdx];return ce(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw Q();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new S(this.sourceString,this.startIdx,e.startIdx),new S(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new S(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new S(this.sourceString,this.startIdx,e.startIdx)]:[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw Q();return d(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new S(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){var e=this["contents"],t=this.startIdx+e.match(/^\s*/)[0].length,e=this.endIdx-e.match(/\s*$/)[0].length;return new S(this.sourceString,t,e)}subInterval(e,t){e=this.startIdx+e;return new S(this.sourceString,e,e+t)}}S.coverage=function(e,...t){let{startIdx:r,endIdx:n}=e;for(const a of t){if(a.sourceString!==e.sourceString)throw Q();r=Math.min(r,a.startIdx),n=Math.max(n,a.endIdx)}return new S(e.sourceString,r,n)};class he{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){var e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){var e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){var e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){var e=this.source.slice(this.pos++).codePointAt(0);return 65535<e&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let r;if(t)for(r=0;r<e.length;r++){var n=this.next(),a=e[r];if(null==n||n.toUpperCase()!==a.toUpperCase())return!1}else for(r=0;r<e.length;r++)if(this.next()!==e[r])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new S(this.source,e,t||this.pos)}}class de{constructor(e,t,r,n,a,i,o){this.matcher=e,this.input=t,this.startExpr=r,this._cst=n,this._cstOffset=a,this._rightmostFailurePosition=i,this._rightmostFailures=o,this.failed()&&(j(this,"message",function(){var e="Expected "+this.getExpectedText();return ce(this.input,this.getRightmostFailurePosition())+e}),j(this,"shortMessage",function(){var e="expected "+this.getExpectedText(),t=le(this.input,this.getRightmostFailurePosition());return"Line "+t.lineNum+", col "+t.colNum+": "+e}))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){var e;return this._rightmostFailures||(this.matcher.setInput(this.input),e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()}),this._rightmostFailures=e.getRightmostFailures()),this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");var t=new f;let r=this.getRightmostFailures();r=r.filter(e=>!e.isFluffy());for(let e=0;e<r.length;e++)0<e&&(e===r.length-1?t.append(2<r.length?", or ":" or "):t.append(", ")),t.append(r[e].toString());return t.contents()}getInterval(){var e=this.getRightmostFailurePosition();return new S(this.input,e,e)}}class fe{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return 0<=this.applicationMemoKeyStack.indexOf(e.toMemoKey())}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;const r=this["applicationMemoKeyStack"],n=r.indexOf(e.toMemoKey())+1,a=r.slice(n);t.isInvolved=function(e){return 0<=a.indexOf(e)},t.updateInvolvedApplicationMemoKeys=function(){for(let e=n;e<r.length;e++){var t=r[e];this.isInvolved(t)||a.push(t)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(t){if(t.isLeftRecursion){var r=this["applicationMemoKeyStack"];for(let e=0;e<r.length;e++){var n=r[e];if(t.isInvolved(n))return!1}}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(r,n){if(!(r+this.maxExaminedLength<=n)){const a=this["memo"];this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(a).forEach(e=>{var t=a[e];r+t.examinedLength>n?delete a[e]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset))})}}}const me="⋅",ye="␉",ge="␊",_e="␍",ve={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function xe(e){return"string"==typeof e?e.replace(/ /g,me).replace(/\t/g,ye).replace(/\n/g,ge).replace(/\r/g,_e):String(e)}class F{constructor(e,t,r,n,a,i,o){this.input=e,this.pos=this.pos1=t,this.pos2=r,this.source=new S(e,t,r),this.expr=n,this.bindings=i,this.children=o||[],this.terminatingLREntry=null,this._flags=a?ve.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){e=new F(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return e.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,e.isImplicitSpaces=this.isImplicitSpaces,e.isMemoized=this.isMemoized,e.isRootNode=this.isRootNode,e.terminatesLR=this.terminatesLR,e.terminatingLREntry=this.terminatingLREntry,e}recordLRTermination(e,t){this.terminatingLREntry=new F(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,a){let i=e;function o(t,e,r){let n=!0;(n=i.enter&&i.enter.call(a,t,e,r)===F.prototype.SKIP?!1:n)&&(t.children.forEach(e=>{o(e,t,r+1)}),i.exit)&&i.exit.call(a,t,e,r)}"function"==typeof i&&(i={enter:i}),this.isRootNode?this.children.forEach(e=>{o(e,null,0)}):o(this,null,0)}toString(){const o=new f;return this.walk((e,t,r)=>{if(!e)return this.SKIP;var n,a,i;"Alt"!==e.expr.constructor.name&&(o.append((n=e.input,i=e.pos,a=10,((n=xe(n.slice(i,i+a))).length<a?n+U(" ",a-n.length).join(""):n)+U(" ",2*r+1).join(""))),o.append((e.succeeded?"✓":"✗")+" "+e.displayString),e.isHeadOfLeftRecursion&&o.append(" (LR)"),e.succeeded&&(i=xe(e.source.contents),o.append(" ⇒  "),o.append("string"==typeof i?'"'+i+'"':i)),o.append("\n"))}),o.contents()}}F.prototype.SKIP={},Object.keys(ve).forEach(e=>{const t=ve[e];Object.defineProperty(F.prototype,e,{get(){return 0!=(this._flags&t)},set(e){e?this._flags|=t:this._flags&=~t}})}),n.prototype.allowsSkippingPrecedingSpace=t("allowsSkippingPrecedingSpace"),r.allowsSkippingPrecedingSpace=a.allowsSkippingPrecedingSpace=w.prototype.allowsSkippingPrecedingSpace=c.prototype.allowsSkippingPrecedingSpace=i.prototype.allowsSkippingPrecedingSpace=I.prototype.allowsSkippingPrecedingSpace=function(){return!0},s.prototype.allowsSkippingPrecedingSpace=m.prototype.allowsSkippingPrecedingSpace=b.prototype.allowsSkippingPrecedingSpace=x.prototype.allowsSkippingPrecedingSpace=v.prototype.allowsSkippingPrecedingSpace=o.prototype.allowsSkippingPrecedingSpace=h.prototype.allowsSkippingPrecedingSpace=function(){return!1};let O;ue(e=>{O=e});let be;n.prototype.assertAllApplicationsAreValid=function(e,t){be=0,this._assertAllApplicationsAreValid(e,t)},n.prototype._assertAllApplicationsAreValid=t("_assertAllApplicationsAreValid"),r._assertAllApplicationsAreValid=a._assertAllApplicationsAreValid=c.prototype._assertAllApplicationsAreValid=i.prototype._assertAllApplicationsAreValid=o.prototype._assertAllApplicationsAreValid=I.prototype._assertAllApplicationsAreValid=function(e,t){},b.prototype._assertAllApplicationsAreValid=function(e,t){be++,this.expr._assertAllApplicationsAreValid(e,t),be--},s.prototype._assertAllApplicationsAreValid=function(t,r){for(let e=0;e<this.terms.length;e++)this.terms[e]._assertAllApplicationsAreValid(t,r)},h.prototype._assertAllApplicationsAreValid=function(t,r){for(let e=0;e<this.factors.length;e++)this.factors[e]._assertAllApplicationsAreValid(t,r)},m.prototype._assertAllApplicationsAreValid=v.prototype._assertAllApplicationsAreValid=x.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)},w.prototype._assertAllApplicationsAreValid=function(t,r,e=!1){var n=r.rules[this.ruleName],a=l(t)&&0===be;if(!n)throw Z(this.ruleName,r.name,this.source);if(!e&&l(this.ruleName)&&!a)throw A("Cannot apply syntactic rule "+this.ruleName+" from here (inside a lexical context)",this.source);var i,e=this.args.length,o=n.formals.length;if(e!==o)throw u=this.ruleName,i=this.source,A("Wrong number of arguments for rule "+u+" (expected "+o+", got "+e+")",i);const s=O&&n===O.rules.applySyntactic;var u=O&&n===O.rules.caseInsensitive;if(u&&!(this.args[0]instanceof c))throw te('a Terminal (e.g. "abc")',this.args[0]);if(s){o=this.args[0];if(!(o instanceof w))throw te("a syntactic rule application",o);if(!l(o.ruleName))throw A(`applySyntactic is for syntactic rules, but '${o.ruleName}' is a lexical rule. `+"NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.",o.source);if(a)throw A("applySyntactic is not required here (in a syntactic context)",this.source)}this.args.forEach(e=>{if(e._assertAllApplicationsAreValid(t,r,s),1!==e.getArity())throw A("Invalid parameter to rule "+this.ruleName+": "+(e=e)+" has arity "+e.getArity()+", but parameter expressions must have arity 1",e.source)})},n.prototype.assertChoicesHaveUniformArity=t("assertChoicesHaveUniformArity"),r.assertChoicesHaveUniformArity=a.assertChoicesHaveUniformArity=c.prototype.assertChoicesHaveUniformArity=i.prototype.assertChoicesHaveUniformArity=o.prototype.assertChoicesHaveUniformArity=b.prototype.assertChoicesHaveUniformArity=I.prototype.assertChoicesHaveUniformArity=function(e){},s.prototype.assertChoicesHaveUniformArity=function(t){if(0!==this.terms.length){var r=this.terms[0].getArity();for(let e=0;e<this.terms.length;e++){var n=this.terms[e],a=(n.assertChoicesHaveUniformArity(),n.getArity());if(r!==a)throw ne(t,r,a,n)}}},u.prototype.assertChoicesHaveUniformArity=function(e){var t=this.terms[0].getArity(),r=this.terms[1].getArity();if(t!==r)throw ne(e,r,t,this.terms[0])},h.prototype.assertChoicesHaveUniformArity=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(t)},m.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},v.prototype.assertChoicesHaveUniformArity=function(e){},x.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},w.prototype.assertChoicesHaveUniformArity=function(e){},n.prototype.assertIteratedExprsAreNotNullable=t("assertIteratedExprsAreNotNullable"),r.assertIteratedExprsAreNotNullable=a.assertIteratedExprsAreNotNullable=c.prototype.assertIteratedExprsAreNotNullable=i.prototype.assertIteratedExprsAreNotNullable=o.prototype.assertIteratedExprsAreNotNullable=I.prototype.assertIteratedExprsAreNotNullable=function(e){},s.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(t)},h.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(t)},m.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw re(this,[])},_.prototype.assertIteratedExprsAreNotNullable=v.prototype.assertIteratedExprsAreNotNullable=x.prototype.assertIteratedExprsAreNotNullable=b.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)},w.prototype.assertIteratedExprsAreNotNullable=function(t){this.args.forEach(e=>{e.assertIteratedExprsAreNotNullable(t)})};class we{constructor(e){this.matchLength=e}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return 0<this.numChildren()}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){e=this.indexOfChild(e);if(e<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===e)throw new Error("cannot get child before first child");return this.childAt(e-1)}childAfter(e){e=this.indexOfChild(e);if(e<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(e===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(e+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class N extends we{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}}class Ie extends we{constructor(e,t,r,n){super(n),this.ruleName=e,this.children=t,this.childOffsets=r}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return z(this.ctorName)}isSyntactic(){return l(this.ctorName)}}class Ae extends we{constructor(e,t,r,n){super(r),this.children=e,this.childOffsets=t,this.optional=n}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}function P(e,t){var r={};return e.source&&t&&(e=e.source.relativeTo(t),r.sourceInterval=[e.startIdx,e.endIdx]),r}function Se(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function Fe(a){const t=Object.create(null);a.forEach(e=>{t[e]=(t[e]||0)+1}),Object.keys(t).forEach(n=>{if(!(t[n]<=1)){let r=1;a.forEach((e,t)=>{e===n&&(a[t]=e+"_"+r++)})}})}n.prototype.eval=t("eval"),r.eval=function(e){var t=e["inputStream"],r=t.pos,t=t.nextCodePoint();return void 0!==t?(e.pushBinding(new N(String.fromCodePoint(t).length),r),!0):(e.processFailure(r,this),!1)},a.eval=function(e){var t=e["inputStream"],r=t.pos;return t.atEnd()?(e.pushBinding(new N(0),r),!0):(e.processFailure(r,this),!1)},c.prototype.eval=function(e){var t=e["inputStream"],r=t.pos;return t.matchString(this.obj)?(e.pushBinding(new N(this.obj.length),r),!0):(e.processFailure(r,this),!1)},i.prototype.eval=function(e){var t=e["inputStream"],r=t.pos,t=this.matchCodePoint?t.nextCodePoint():t.nextCharCode();return void 0!==t&&this.from.codePointAt(0)<=t&&t<=this.to.codePointAt(0)?(e.pushBinding(new N(String.fromCodePoint(t).length),r),!0):(e.processFailure(r,this),!1)},o.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])},b.prototype.eval=function(e){e.enterLexifiedContext();var t=e.eval(this.expr);return e.exitLexifiedContext(),t},s.prototype.eval=function(t){for(let e=0;e<this.terms.length;e++)if(t.eval(this.terms[e]))return!0;return!1},h.prototype.eval=function(t){for(let e=0;e<this.factors.length;e++){var r=this.factors[e];if(!t.eval(r))return!1}return!0},m.prototype.eval=function(e){for(var t=e["inputStream"],r=t.pos,n=this.getArity(),a=[],i=[];a.length<n;)a.push([]),i.push([]);let o=0,s=r,u;for(;o<this.maxNumMatches&&e.eval(this.expr);){if(t.pos===s)throw re(this,e._applicationStack);s=t.pos,o++;var l=e._bindings.splice(e._bindings.length-n,n),c=e._bindingOffsets.splice(e._bindingOffsets.length-n,n);for(u=0;u<l.length;u++)a[u].push(l[u]),i[u].push(c[u])}if(o<this.minNumMatches)return!1;let p=e.posToOffset(r),h=0;0<o&&(r=(r=i[n-1])[r.length-1]+(r=a[n-1])[r.length-1].matchLength,p=i[0][0],h=r-p);var d=this instanceof _;for(u=0;u<a.length;u++)e._bindings.push(new Ae(a[u],i[u],h,d)),e._bindingOffsets.push(p);return!0},v.prototype.eval=function(e){var t=e["inputStream"],r=t.pos,n=(e.pushFailuresInfo(),e.eval(this.expr));return e.popFailuresInfo(),n?(e.processFailure(r,this),!1):(t.pos=r,!0)},x.prototype.eval=function(e){var t=e["inputStream"],r=t.pos;return!!e.eval(this.expr)&&(t.pos=r,!0)},w.prototype.eval=function(e){var t=e.currentApplication(),t=t?t.args:[],t=this.substituteParams(t),r=e.getCurrentPosInfo();if(r.isActive(t))return t.handleCycle(e);var n=t.toMemoKey(),a=r.memo[n];if(a&&r.shouldUseMemoizedResult(a)){if(e.hasNecessaryInfo(a))return e.useMemoizedResult(e.inputStream.pos,a);delete r.memo[n]}return t.reallyEval(e)},w.prototype.handleCycle=function(e){var t=e.getCurrentPosInfo(),r=t["currentLeftRecursion"],n=this.toMemoKey();let a=t.memo[n];return r&&r.headApplication.toMemoKey()===n?a.updateInvolvedApplicationMemoKeys():a||(a=t.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,a)),e.useMemoizedResult(e.inputStream.pos,a)},w.prototype.reallyEval=function(e){var t=e["inputStream"],r=t.pos,n=e.getCurrentPosInfo(),a=e.grammar.rules[this.ruleName],i=a["body"],a=a["description"],o=(e.enterApplication(n,this),a&&e.pushFailuresInfo(),t.examinedLength);t.examinedLength=0;let s=this.evalOnce(i,e);var u=n.currentLeftRecursion,l=this.toMemoKey(),c=u&&u.headApplication.toMemoKey()===l;let p;e.doNotMemoize?e.doNotMemoize=!1:c?(s=this.growSeedResult(i,e,r,u,s),n.endLeftRecursion(),(p=u).examinedLength=t.examinedLength-r,p.rightmostFailureOffset=e._getRightmostFailureOffset(),n.memoize(l,p)):u&&u.isInvolved(l)||(p=n.memoize(l,{matchLength:t.pos-r,examinedLength:t.examinedLength-r,value:s,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));i=!!s;return a&&(e.popFailuresInfo(),i||e.processFailure(r,this),p)&&(p.failuresAtRightmostPosition=e.cloneRecordedFailures()),e.isTracing()&&p&&(u=e.getTraceEntry(r,this,i,i?[s]:[]),c&&(d(null!=u.terminatingLREntry||!i),u.isHeadOfLeftRecursion=!0),p.traceEntry=u),t.examinedLength=Math.max(t.examinedLength,o),e.exitApplication(n,s),i},w.prototype.evalOnce=function(e,t){var r,n=t["inputStream"],a=n.pos;return!!t.eval(e)&&(e=e.getArity(),r=t._bindings.splice(t._bindings.length-e,e),t=t._bindingOffsets.splice(t._bindingOffsets.length-e,e),e=n.pos-a,new Ie(this.ruleName,r,t,e))},w.prototype.growSeedResult=function(e,t,r,n,a){if(!a)return!1;for(var i,o=t["inputStream"];n.matchLength=o.pos-r,n.value=a,n.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()&&(i=t.trace[t.trace.length-1],n.traceEntry=new F(t.input,r,o.pos,this,!0,[a],[i.clone()])),o.pos=r,a=this.evalOnce(e,t),!(o.pos-r<=n.matchLength);)t.isTracing()&&t.trace.splice(-2,1);return t.isTracing()&&n.traceEntry.recordLRTermination(t.trace.pop(),a),o.pos=r+n.matchLength,n.value},I.prototype.eval=function(e){var t=e["inputStream"],r=t.pos,t=t.next();return t&&this.pattern.test(t)?(e.pushBinding(new N(t.length),r),!0):(e.processFailure(r,this),!1)},n.prototype.getArity=t("getArity"),r.getArity=a.getArity=c.prototype.getArity=i.prototype.getArity=o.prototype.getArity=w.prototype.getArity=I.prototype.getArity=function(){return 1},s.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},h.prototype.getArity=function(){let t=0;for(let e=0;e<this.factors.length;e++)t+=this.factors[e].getArity();return t},m.prototype.getArity=function(){return this.expr.getArity()},v.prototype.getArity=function(){return 0},x.prototype.getArity=b.prototype.getArity=function(){return this.expr.getArity()},n.prototype.outputRecipe=t("outputRecipe"),r.outputRecipe=function(e,t){return["any",P(this,t)]},a.outputRecipe=function(e,t){return["end",P(this,t)]},c.prototype.outputRecipe=function(e,t){return["terminal",P(this,t),this.obj]},i.prototype.outputRecipe=function(e,t){return["range",P(this,t),this.from,this.to]},o.prototype.outputRecipe=function(e,t){return["param",P(this,t),this.index]},s.prototype.outputRecipe=function(t,r){return["alt",P(this,r)].concat(this.terms.map(e=>e.outputRecipe(t,r)))},u.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)},p.prototype.outputRecipe=function(t,r){var e=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",P(this,r),e.map(e=>e.outputRecipe(t,r)),n.map(e=>e.outputRecipe(t,r))]},h.prototype.outputRecipe=function(t,r){return["seq",P(this,r)].concat(this.factors.map(e=>e.outputRecipe(t,r)))},y.prototype.outputRecipe=g.prototype.outputRecipe=_.prototype.outputRecipe=v.prototype.outputRecipe=x.prototype.outputRecipe=b.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),P(this,t),this.expr.outputRecipe(e,t)]},w.prototype.outputRecipe=function(t,r){return["app",P(this,r),this.ruleName,this.args.map(e=>e.outputRecipe(t,r))]},I.prototype.outputRecipe=function(e,t){return["unicodeChar",P(this,t),this.category]},n.prototype.introduceParams=t("introduceParams"),r.introduceParams=a.introduceParams=c.prototype.introduceParams=i.prototype.introduceParams=o.prototype.introduceParams=I.prototype.introduceParams=function(e){return this},s.prototype.introduceParams=function(n){return this.terms.forEach((e,t,r)=>{r[t]=e.introduceParams(n)}),this},h.prototype.introduceParams=function(n){return this.factors.forEach((e,t,r)=>{r[t]=e.introduceParams(n)}),this},m.prototype.introduceParams=v.prototype.introduceParams=x.prototype.introduceParams=b.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this},w.prototype.introduceParams=function(n){var e=n.indexOf(this.ruleName);if(0<=e){if(0<this.args.length)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new o(e).withSource(this.source)}return this.args.forEach((e,t,r)=>{r[t]=e.introduceParams(n)}),this},n.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))},n.prototype._isNullable=t("_isNullable"),r._isNullable=i.prototype._isNullable=o.prototype._isNullable=g.prototype._isNullable=I.prototype._isNullable=function(e,t){return!1},a._isNullable=function(e,t){return!0},c.prototype._isNullable=function(e,t){return"string"==typeof this.obj&&""===this.obj},s.prototype._isNullable=function(t,r){return 0===this.terms.length||this.terms.some(e=>e._isNullable(t,r))},h.prototype._isNullable=function(t,r){return this.factors.every(e=>e._isNullable(t,r))},y.prototype._isNullable=_.prototype._isNullable=v.prototype._isNullable=x.prototype._isNullable=function(e,t){return!0},b.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)},w.prototype._isNullable=function(e,t){var r,n=this.toMemoKey();return Object.prototype.hasOwnProperty.call(t,n)||(r=e.rules[this.ruleName]["body"],r=r.substituteParams(this.args),t[n]=!1,t[n]=r._isNullable(e,t)),t[n]},n.prototype.substituteParams=t("substituteParams"),r.substituteParams=a.substituteParams=c.prototype.substituteParams=i.prototype.substituteParams=I.prototype.substituteParams=function(e){return this},o.prototype.substituteParams=function(e){return e[this.index]},s.prototype.substituteParams=function(t){return new s(this.terms.map(e=>e.substituteParams(t)))},h.prototype.substituteParams=function(t){return new h(this.factors.map(e=>e.substituteParams(t)))},m.prototype.substituteParams=v.prototype.substituteParams=x.prototype.substituteParams=b.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))},w.prototype.substituteParams=function(t){var e;return 0===this.args.length?this:(e=this.args.map(e=>e.substituteParams(t)),new w(this.ruleName,e))},n.prototype.toArgumentNameList=t("toArgumentNameList"),r.toArgumentNameList=function(e,t){return["any"]},a.toArgumentNameList=function(e,t){return["end"]},c.prototype.toArgumentNameList=function(e,t){return"string"==typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]},i.prototype.toArgumentNameList=function(e,t){let r=this.from+"_to_"+this.to;return Se(r)||(r="_"+r),[r=Se(r)?r:"$"+e]},s.prototype.toArgumentNameList=function(t,e){var r=this.terms.map(e=>e.toArgumentNameList(t,!0)),n=[],a=r[0].length;for(let t=0;t<a;t++){var i=[];for(let e=0;e<this.terms.length;e++)i.push(r[e][t]);var o=B(i);n.push(o.join("_or_"))}return e||Fe(n),n},h.prototype.toArgumentNameList=function(t,e){let r=[];return this.factors.forEach(e=>{e=e.toArgumentNameList(t,!0);r=r.concat(e),t+=e.length}),e||Fe(r),r},m.prototype.toArgumentNameList=function(e,t){e=this.expr.toArgumentNameList(e,t).map(e=>"s"===e[e.length-1]?e+"es":e+"s");return t||Fe(e),e},_.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map(e=>"opt"+e[0].toUpperCase()+e.slice(1))},v.prototype.toArgumentNameList=function(e,t){return[]},x.prototype.toArgumentNameList=b.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)},w.prototype.toArgumentNameList=function(e,t){return[this.ruleName]},I.prototype.toArgumentNameList=function(e,t){return["$"+e]},o.prototype.toArgumentNameList=function(e,t){return["param"+this.index]},n.prototype.toDisplayString=t("toDisplayString"),s.prototype.toDisplayString=h.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},r.toDisplayString=a.toDisplayString=m.prototype.toDisplayString=v.prototype.toDisplayString=x.prototype.toDisplayString=b.prototype.toDisplayString=c.prototype.toDisplayString=i.prototype.toDisplayString=o.prototype.toDisplayString=function(){return this.toString()},w.prototype.toDisplayString=function(){var e;return 0<this.args.length?(e=this.args.map(e=>e.toDisplayString()),this.ruleName+"<"+e.join(",")+">"):this.ruleName},I.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};class E{constructor(e,t,r){if("description"!==(n=r)&&"string"!==n&&"code"!==n)throw new Error("invalid Failure type: "+r);var n;this.pexpr=e,this.text=t,this.type=r,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return"description"===this.type}isStringTerminal(){return"string"===this.type}isCode(){return"code"===this.type}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()}clone(){var e=new E(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+"#"+this.type}}n.prototype.toFailure=t("toFailure"),r.toFailure=function(e){return new E(this,"any object","description")},a.toFailure=function(e){return new E(this,"end of input","description")},c.prototype.toFailure=function(e){return new E(this,this.obj,"string")},i.prototype.toFailure=function(e){return new E(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},v.prototype.toFailure=function(e){e=this.expr===r?"nothing":"not "+this.expr.toFailure(e);return new E(this,e,"description")},x.prototype.toFailure=function(e){return this.expr.toFailure(e)},w.prototype.toFailure=function(e){let t=e.rules[this.ruleName]["description"];return t||(e=/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a",t=e+" "+this.ruleName),new E(this,t,"description")},I.prototype.toFailure=function(e){return new E(this,"a Unicode ["+this.category+"] character","description")},s.prototype.toFailure=function(t){var e="("+this.terms.map(e=>e.toFailure(t)).join(" or ")+")";return new E(this,e,"description")},h.prototype.toFailure=function(t){var e="("+this.factors.map(e=>e.toFailure(t)).join(" ")+")";return new E(this,e,"description")},m.prototype.toFailure=function(e){e="("+this.expr.toFailure(e)+this.operator+")";return new E(this,e,"description")},n.prototype.toString=t("toString"),r.toString=function(){return"any"},a.toString=function(){return"end"},c.prototype.toString=function(){return JSON.stringify(this.obj)},i.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},o.prototype.toString=function(){return"$"+this.index},b.prototype.toString=function(){return"#("+this.expr.toString()+")"},s.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map(e=>e.toString()).join(" | ")+")"},h.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map(e=>e.toString()).join(" ")+")"},m.prototype.toString=function(){return this.expr+this.operator},v.prototype.toString=function(){return"~"+this.expr},x.prototype.toString=function(){return"&"+this.expr},w.prototype.toString=function(){var e;return 0<this.args.length?(e=this.args.map(e=>e.toString()),this.ruleName+"<"+e.join(",")+">"):this.ruleName},I.prototype.toString=function(){return"\\p{"+this.category+"}"};class Oe extends n{constructor(e){super(),this.obj=e}_getString(e){e=e.currentApplication().args[this.obj.index];return d(e instanceof c,"expected a Terminal expression"),e.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){var t=e["inputStream"],r=t.pos,n=this._getString(e);return t.matchString(n,!0)?(e.pushBinding(new N(n.length),r),!0):(e.processFailure(r,this),!1)}getArity(){return 1}substituteParams(e){return new Oe(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new E(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}var Ne=Object.freeze({__proto__:null,CaseInsensitiveTerminal:Oe,PExpr:n,any:r,end:a,Terminal:c,Range:i,Param:o,Alt:s,Extend:u,Splice:p,Seq:h,Iter:m,Star:y,Plus:g,Opt:_,Not:v,Lookahead:x,Lex:b,Apply:w,UnicodeChar:I});let Pe;ue(e=>{Pe=e.rules.applySyntactic.body});const Ee=new w("spaces");class De{constructor(e,t,r){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new he(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==r&&(this.positionToRecordFailures=r,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){var r=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,r)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){var e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(Ee),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==Ee?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t=t||(this.memoTable[e]=new fe)}processFailure(e,t){this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures&&((e=this.currentApplication())&&(t=t.substituteParams(e.args)),this.recordFailure(t.toFailure(this.grammar),!1))}recordFailure(e,t){var r=e.toKey();this.recordedFailures[r]?this.recordedFailures[r].isFluffy()&&!e.isFluffy()&&this.recordedFailures[r].clearFluffy():this.recordedFailures[r]=t?e.clone():e}recordFailures(t,r){Object.keys(t).forEach(e=>{this.recordFailure(t[e],r)})}cloneRecordedFailures(){if(this.recordedFailures){const t=Object.create(null);return Object.keys(this.recordedFailures).forEach(e=>{t[e]=this.recordedFailures[e].clone()}),t}}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return 0<=this.rightmostFailurePosition?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){e=this.memoTable[e];if(e&&t instanceof w){var e=e.memo[t.toMemoKey()];if(e&&e.traceEntry)return(e=e.traceEntry.cloneWithExpr(t)).isMemoized=!0,e}return null}getTraceEntry(e,t,r,n){var a;return t instanceof w&&(a=(a=this.currentApplication())?a.args:[],t=t.substituteParams(a)),this.getMemoizedTraceEntry(e,t)||new F(this.input,e,this.inputStream.pos,t,r,n,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return!(this.trace&&!e.traceEntry||this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures&&!e.failuresAtRightmostPosition)}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);var r=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,r),this.recordedFailures&&this.positionToRecordFailures===r&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),!!t.value&&(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0)}eval(e){var t=this["inputStream"],r=this._bindings.length,n=this.userData;let a;this.recordedFailures&&(a=this.recordedFailures,this.recordedFailures=Object.create(null));var i=t.pos,o=this.maybeSkipSpacesBefore(e);let s;this.trace&&(s=this.trace,this.trace=[]);var u,l=e.eval(this);return this.trace&&(u=this._bindings.slice(r),(o=this.getTraceEntry(o,e,l,u)).isImplicitSpaces=e===Ee,o.isRootNode=e===this.startExpr,s.push(o),this.trace=s),l?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(e=>{this.recordedFailures[e].makeFluffy()}):(t.pos=i,this.truncateBindings(r),this.userData=n),this.recordedFailures&&this.recordFailures(a,!1),e===Pe&&this.skipSpaces(),l}getMatchResult(){this.grammar._setUpMatchState(this),this.eval(this.startExpr);let e;this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(e=>this.recordedFailures[e]));var t=this._bindings[0];return t&&(t.grammar=this.grammar),new de(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];var e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class Me{constructor(e){this.grammar=e,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(t,e,r){var n=this._input,a=this._memoTable;if(t<0||t>n.length||e<0||e>n.length||e<t)throw new Error("Invalid indices: "+t+" and "+e);this._input=n.slice(0,t)+r+n.slice(e),this._input!==n&&0<a.length&&(this._isMemoTableStale=!0);n=a.slice(e);a.length=t;for(let e=0;e<r.length;e++)a.push(void 0);for(const o of n)a.push(o);for(let e=0;e<t;e++){var i=a[e];i&&i.clearObsoleteEntries(e,t)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){t={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(t.incremental){if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw A(`Grammar '${this.grammar.name}' does not support incremental parsing`)}else this._resetMemoTable();e=new De(this,e,t.positionToRecordFailures);return t.tracing?e.getTrace():e.getMatchResult()}_getStartExpr(e){var e=e||this.grammar.defaultStartRule;if(e)return e=this.grammar.parseApplication(e),new h([e,a]);throw new Error("Missing start rule argument -- the grammar has no default start rule.")}}const D=[],Le=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class ke{constructor(e,t,r){this._node=e,this.source=t,this._baseInterval=r,e.isNonterminal()&&d(t===r),this._childWrappers=[]}_forgetMemoizedResultFor(t){delete this._node[this._semantics.attributeKeys[t]],this.children.forEach(e=>{e._forgetMemoizedResultFor(t)})}child(t){if(0<=t&&t<this._node.numChildren()){let e=this._childWrappers[t];var r,n,a;return e||(r=this._node.childAt(t),n=this._node.childOffsets[t],n=this._baseInterval.subInterval(n,r.matchLength),a=r.isNonterminal()?n:this._baseInterval,e=this._childWrappers[t]=this._semantics.wrap(r,n,a)),e}}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){var e=e||[],t=e.map(e=>e._node),t=new Ae(t,[],-1,!1),t=this._semantics.wrap(t,null,null);return t._childWrappers=e,t}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class M{constructor(e,t){const n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:ke){constructor(e,t,r){super(e,t,r),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return"[semantics wrapper for "+n.grammar.name+"]"}},this.super=t){if(!e.equals(this.super.grammar)&&!e._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const r in this.attributes)Object.defineProperty(this.attributeKeys,r,{value:pe(r)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function l(e){return e.super!==M.BuiltInSemantics._getSemantics()}let c="(function(g) {\n";if(l(this)){c+="  var semantics = "+this.super.toRecipe(!0)+"(g";var t=this.super.grammar;let e=this.grammar;for(;e!==t;)c+=".superGrammar",e=e.superGrammar;c=c+");\n"+"  return g.extendSemantics(semantics)"}else c+="  return g.createSemantics()";return["Operation","Attribute"].forEach(s=>{const u=this[s.toLowerCase()+"s"];Object.keys(u).forEach(e=>{const{actionDict:r,formals:t,builtInDefault:n}=u[e];let a=e;0<t.length&&(a+="("+t.join(", ")+")");let i;i=l(this)&&this.super[s.toLowerCase()+"s"][e]?"extend"+s:"add"+s,c+="\n    ."+i+"("+JSON.stringify(a)+", {";const o=[];Object.keys(r).forEach(t=>{if(r[t]!==n){let e=r[t].toString().trim();e=e.replace(/^.*\(/,"function("),o.push("\n      "+JSON.stringify(t)+": "+e)}}),c+=o.join(",")+"\n    })"})}),c+=";\n  })",c=e?c:"(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+c+"(grammar);\n  return semantics;\n});\n"}addOperationOrAttribute(o,e,t){const s=o+"s";e=Re(e,o);const u=e["name"];function r(...e){var t=(this._semantics.operations[a]||this._semantics.attributes[a]).formals.map(e=>this.args[e]);if(this.isIteration()||1!==e.length)throw function(e,t,r,n){n=n.slice(0,-1).map(e=>{var t="  "+e[0].name+" > "+e[1];return 3===e.length?t+" for '"+e[2]+"'":t}).join("\n"),n+="\n  "+t+" > "+e;let a="";return(r=A([`Missing semantic action for '${e}' in ${r} '${t}'.`+(a="_iter"===e?["\nNOTE: as of Ohm v16, there is no default action for iteration nodes — see ","  https://ohmjs.org/d/dsa for details."].join("\n"):a),"Action stack (most recent call last):",n].join("\n"))).name="missingSemanticAction",r}(this.ctorName,a,n,D);return i.apply(e[0],t)}var n,a,i,e=e["formals"];this.assertNewName(u,o),n=o,a=u,i=c;const l={_default:r};Object.keys(t).forEach(e=>{l[e]=t[e]});e="operation"===o?new Ce(u,e,l,r):new je(u,l,r);function c(...e){var t=this._semantics[s][u];if(arguments.length!==t.formals.length)throw new Error("Invalid number of arguments passed to "+u+" "+o+" (expected "+t.formals.length+", got "+arguments.length+")");var r,n,a=Object.create(null);for([r,n]of Object.entries(e))a[t.formals[r]]=n;var e=this.args,i=(this.args=a,t.execute(this._semantics,this));return this.args=e,i}e.checkActionDict(this.grammar),this[s][u]=e,"operation"===o?(this.Wrapper.prototype[u]=c,this.Wrapper.prototype[u].toString=function(){return"["+u+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,u,{get:c,configurable:!0}),Object.defineProperty(this.attributeKeys,u,{value:pe(u)}))}extendOperationOrAttribute(e,t,r){var n=e+"s";if(Re(t,"attribute"),!(this.super&&t in this.super[n]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(Le(this[n],t))throw new Error("Cannot extend "+e+" '"+t+"' again");var a=this[n][t].formals,i=this[n][t].actionDict;const o=Object.create(i);Object.keys(r).forEach(e=>{o[e]=r[e]}),this[n][t]="operation"===e?new Ce(t,a,o):new je(t,o),this[n][t].checkActionDict(this.grammar)}assertNewName(e,t){if(Le(ke.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")}wrap(e,t,r){r=r||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,r)}}function Re(e,t){if(!M.prototypeGrammar)return d(-1===e.indexOf("(")),{name:e,formals:[]};e=M.prototypeGrammar.match(e,"operation"===t?"OperationSignature":"AttributeSignature");if(e.failed())throw new Error(e.message);return M.prototypeGrammarSemantics(e).parse()}M.createSemantics=function(n,e){function r(e){if(!(e instanceof de))throw new TypeError("Semantics expected a MatchResult, but got "+J(e));if(e.failed())throw new TypeError("cannot apply Semantics to "+e.toString());var t=e._cst;if(t.grammar!==n)throw new Error("Cannot use a MatchResult from grammar '"+t.grammar.name+"' with a semantics for '"+n.name+"'");var r=new he(e.input);return a.wrap(t,r.interval(e._cstOffset,e.input.length))}const a=new M(n,void 0!==e?e:M.BuiltInSemantics._getSemantics());return r.addOperation=function(e,t){return a.addOperationOrAttribute("operation",e,t),r},r.extendOperation=function(e,t){return a.extendOperationOrAttribute("operation",e,t),r},r.addAttribute=function(e,t){return a.addOperationOrAttribute("attribute",e,t),r},r.extendAttribute=function(e,t){return a.extendOperationOrAttribute("attribute",e,t),r},r._getActionDict=function(e){var t=a.operations[e]||a.attributes[e];if(t)return t.actionDict;throw new Error('"'+e+'" is not a valid operation or attribute name in this semantics for "'+n.name+'"')},r._remove=function(e){let t;return e in a.operations?(t=a.operations[e],delete a.operations[e]):e in a.attributes&&(t=a.attributes[e],delete a.attributes[e]),delete a.Wrapper.prototype[e],t},r.getOperationNames=function(){return Object.keys(a.operations)},r.getAttributeNames=function(){return Object.keys(a.attributes)},r.getGrammar=function(){return a.grammar},r.toRecipe=function(e){return a.toRecipe(e)},r.toString=a.toString.bind(a),r._getSemantics=function(){return a},r};class Ce{constructor(e,t,r,n){this.name=e,this.formals=t,this.actionDict=r,this.builtInDefault=n}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{var r=t._node["ctorName"];let e=this.actionDict[r];return e?(D.push([this,r]),e.apply(t,t._children())):(t.isNonterminal()&&(e=this.actionDict._nonterminal)?(D.push([this,"_nonterminal",r]),e):(D.push([this,"default action",r]),this.actionDict._default)).apply(t,t._children())}finally{D.pop()}}}Ce.prototype.typeName="operation";class je extends Ce{constructor(e,t,r){super(e,[],t,r)}execute(e,t){var r=t._node,n=e.attributeKeys[this.name];return Le(r,n)||(r[n]=Ce.prototype.execute.call(this,e,t)),r[n]}}je.prototype.typeName="attribute";const Te=["_iter","_terminal","_nonterminal","_default"];function qe(t){return Object.keys(t.rules).sort().map(e=>t.rules[e])}let Ue,Ge;class L{constructor(e,t,r,n){if(this.name=e,this.superGrammar=t,this.rules=r,n){if(!(n in r))throw new Error("Invalid start rule: '"+n+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=n}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new Me(this)}isBuiltIn(){return this===L.ProtoBuiltInRules||this===L.BuiltInRules}equals(e){if(this===e)return!0;if(null==e||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||this.superGrammar!==e.superGrammar&&!this.superGrammar.equals(e.superGrammar))return!1;var t=qe(this);const r=qe(e);return t.length===r.length&&t.every((e,t)=>e.description===r[t].description&&e.formals.join(",")===r[t].formals.join(",")&&e.body.toString()===r[t].body.toString())}match(e,t){var r=this.matcher();return r.replaceInputRange(0,0,e),r.match(t)}trace(e,t){var r=this.matcher();return r.replaceInputRange(0,0,e),r.trace(t)}createSemantics(){return M.createSemantics(this)}extendSemantics(e){return M.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,r){var n,a=[];for(const s in r){var i=r[s];if(Te.includes(s)||s in this.rules)if("function"!=typeof i)a.push(`'${s}' must be a function in an action dictionary for '${this.name}'`);else{var i=i.length,o=this._topDownActionArity(s);if(i!==o){let e;e="_iter"===s||"_nonterminal"===s?`it should use a rest parameter, e.g. \`${s}(...children) {}\`. `+"NOTE: this is new in Ohm v16 — see https://ohmjs.org/d/ati for details.":`expected ${o}, got `+i,a.push(`Semantic action '${s}' has the wrong arity: `+e)}}else a.push(`'${s}' is not a valid semantic action for '${this.name}'`)}if(0<a.length)throw n=a.map(e=>"- "+e),(t=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...n].join("\n"))).problems=a,t}_topDownActionArity(e){return Te.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e=void 0){var t={};this.source&&(t.source=this.source.contents);let r=null;this.defaultStartRule&&(r=this.defaultStartRule);const s={};Object.keys(this.rules).forEach(e=>{var t=this.rules[e],r=t["body"],n=!this.superGrammar||!this.superGrammar.rules[e];let a;a=n?"define":r instanceof u?"extend":"override";var i={},o=(t.source&&this.source&&(o=t.source.relativeTo(this.source),i.sourceInterval=[o.startIdx,o.endIdx]),n?t.description:null),n=r.outputRecipe(t.formals,this.source);s[e]=[a,i,o,t.formals,n]});let n="null";return e?n=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(n=this.superGrammar.toRecipe()),`[${[...["grammar",t,this.name].map(JSON.stringify),n,...[r,s].map(JSON.stringify)].join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){var e=new f;e.append("{");let t=!0;for(const n in this.rules){var r=this.rules[n]["body"];t?t=!1:e.append(","),e.append("\n"),e.append("  "),this.addSemanticActionTemplate(n,r,e)}return e.append("\n}"),e.contents()}addSemanticActionTemplate(e,t,r){r.append(e),r.append(": function(");e=this._topDownActionArity(e);r.append(U("_",e).join(", ")),r.append(") {\n"),r.append("  }")}parseApplication(e){let t;if(!((t=-1===e.indexOf("<")?new w(e):(e=Ue.match(e,"Base_application"),Ge(e,{}))).ruleName in this.rules))throw Z(t.ruleName,this.name);var r,e=this.rules[t.ruleName]["formals"];if(e.length!==t.args.length)throw r=this.rules[t.ruleName]["source"],X(t.ruleName,e.length,t.args.length,r);return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}}L.ProtoBuiltInRules=new L("ProtoBuiltInRules",void 0,{any:{body:r,formals:[],description:"any character",primitive:!0},end:{body:a,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new Oe(new o(0)),formals:["str"],primitive:!0},lower:{body:new I("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new I("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new I("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new y(new w("space")),formals:[]},space:{body:new i("\0"," "),formals:[],description:"a space"}}),L.initApplicationParser=function(e,t){Ue=e,Ge=t};class Be{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?L.ProtoBuiltInRules:L.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){var r=this.ensureSuperGrammar().rules[e];if(r)return r;throw r=this.superGrammar.name,A("Cannot override rule "+e+" because it is not declared in "+r,t)}installOverriddenOrExtendedRule(e,t,r,n){var a=G(t);if(0<a.length)throw ee(e,a,n);var a=this.ensureSuperGrammar().rules[e],i=a.formals,i=i?i.length:0;if(t.length!==i)throw X(e,i,t.length,n);return this.install(e,t,r,a.description,n)}install(e,t,r,n,a,i=!1){return this.rules[e]={body:r.introduceParams(t),formals:t,description:n,source:a,primitive:i},this}withSuperGrammar(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new he(e).interval(0,e.length),this}build(){const r=new L(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule),n=(r._matchStateInitializer=r.superGrammar._matchStateInitializer,r.supportsIncrementalParsing=r.superGrammar.supportsIncrementalParsing,[]);let a=!1;return Object.keys(r.rules).forEach(e=>{var t=r.rules[e]["body"];try{t.assertChoicesHaveUniformArity(e)}catch(e){n.push(e)}try{t.assertAllApplicationsAreValid(e,r)}catch(e){n.push(e),a=!0}}),a||Object.keys(r.rules).forEach(e=>{e=r.rules[e].body;try{e.assertIteratedExprsAreNotNullable(r,[])}catch(e){n.push(e)}}),0<n.length&&ae(n),this.source&&(r.source=this.source),r}define(e,t,r,n,a,i){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw Y(e,this.name,this.superGrammar.name,a);if(this.rules[e])throw Y(e,this.name,this.name,a);var o=G(t);if(0<o.length)throw ee(e,o,a);return this.install(e,t,r,n,a,i)}override(e,t,r,n,a){return this.ensureSuperGrammarRuleForOverriding(e,a),this.installOverriddenOrExtendedRule(e,t,r,a),this}extend(e,t,r,n,a){var i;if(this.ensureSuperGrammar().rules[e])return(i=new u(this.superGrammar,e,r)).source=r.source,this.installOverriddenOrExtendedRule(e,t,i,a),this;throw r=this.superGrammar.name,A("Cannot extend rule "+e+" because it is not declared in "+r,a)}}class ze{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new Be(e)}grammar(e,t,r,n,s){const u=new Be(t);return r&&u.withSuperGrammar(r instanceof L?r:this.fromRecipe(r)),n&&u.withDefaultStartRule(n),e&&e.source&&u.withSource(e.source),this.currentDecl=u,Object.keys(s).forEach(e=>{this.currentRuleName=e;var t=s[e],r=t[0],n=t[1],a=t[2],i=t[3],t=this.fromRecipe(t[4]);let o;u.source&&n&&n.sourceInterval&&(o=u.source.subInterval(n.sourceInterval[0],n.sourceInterval[1]-n.sourceInterval[0])),u[r](e,i,t,a,o)}),this.currentRuleName=this.currentDecl=null,u.build()}terminal(e){return new c(e)}range(e,t){return new i(e,t)}param(e){return new o(e)}alt(...e){let t=[];for(var r of e)(r=r instanceof n?r:this.fromRecipe(r))instanceof s?t=t.concat(r.terms):t.push(r);return 1===t.length?t[0]:new s(t)}seq(...e){let t=[];for(var r of e)(r=r instanceof n?r:this.fromRecipe(r))instanceof h?t=t.concat(r.factors):t.push(r);return 1===t.length?t[0]:new h(t)}star(e){return e instanceof n||(e=this.fromRecipe(e)),new y(e)}plus(e){return e instanceof n||(e=this.fromRecipe(e)),new g(e)}opt(e){return e instanceof n||(e=this.fromRecipe(e)),new _(e)}not(e){return e instanceof n||(e=this.fromRecipe(e)),new v(e)}lookahead(e){return e instanceof n||(e=this.fromRecipe(e)),new x(e)}lex(e){return e instanceof n||(e=this.fromRecipe(e)),new b(e)}app(e,t){return t&&0<t.length&&(t=t.map(function(e){return e instanceof n?e:this.fromRecipe(e)},this)),new w(e,t)}splice(e,t){return new p(this.currentDecl.superGrammar,this.currentRuleName,e.map(e=>this.fromRecipe(e)),t.map(e=>this.fromRecipe(e)))}fromRecipe(e){var t="grammar"===e[0]?e.slice(1):e.slice(2),t=this[e[0]](...t),e=e[1];return e&&e.sourceInterval&&this.currentDecl&&t.withSource(this.currentDecl.sourceInterval(...e.sourceInterval)),t}}function Ve(e){return"function"==typeof e?e.call(new ze):("string"==typeof e&&(e=JSON.parse(e)),(new ze).fromRecipe(e))}var Ke,$e=Ve(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]),Je=(L.BuiltInRules=$e,Ke=L.BuiltInRules,se.forEach(e=>{e(Ke)}),Ve(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",se=null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0","􏿿"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]));const He=Object.create(n.prototype);function We(e,t){for(const r in e)if(r===t)return 1}function Qe(e,i,t){const o=new ze;let s,u,l,a=!1;return(t||Je).createSemantics().addOperation("visit",{Grammars(e){return e.children.map(e=>e.visit())},Grammar(e,t,r,n,a){e=e.visit(),s=o.newGrammar(e),t.child(0)&&t.child(0).visit(),n.children.map(e=>e.visit()),t=s.build();if(t.source=this.source.trimmed(),We(i,e))throw A("Grammar "+t.name+" is already declared in this namespace");return i[e]=t},SuperGrammar(e,t){var r,n,a=t.visit();if("null"===a)s.withSuperGrammar(null);else{if(!i||!We(i,a))throw r=a,n=i,t=t.source,A(n?`Grammar ${r} is not declared in namespace '${n}'`:"Undeclared grammar "+r,t);s.withSuperGrammar(i[a])}},Rule_define(e,t,r,n,a){u=e.visit(),l=t.children.map(e=>e.visit())[0]||[],s.defaultStartRule||s.ensureSuperGrammar()===L.ProtoBuiltInRules||s.withDefaultStartRule(u);e=a.visit(),t=r.children.map(e=>e.visit())[0],a=this.source.trimmed();return s.define(u,l,e,t,a)},Rule_override(e,t,r,n){u=e.visit(),l=t.children.map(e=>e.visit())[0]||[];e=this.source.trimmed(),s.ensureSuperGrammarRuleForOverriding(u,e),a=!0,t=n.visit();return a=!1,s.override(u,l,t,null,e)},Rule_extend(e,t,r,n){u=e.visit(),l=t.children.map(e=>e.visit())[0]||[];e=n.visit(),t=this.source.trimmed();return s.extend(u,l,e,null,t)},RuleBody(e,t){return o.alt(...t.visit()).withSource(this.source)},OverrideRuleBody(e,t){var r,t=t.visit(),n=t.indexOf(He);return(0<=n?(r=t.slice(0,n),(n=t.slice(n+1)).forEach(e=>{if(e===He)throw A("'...' can appear at most once in a rule body",e.source)}),new p(s.superGrammar,u,r,n)):o.alt(...t)).withSource(this.source)},Formals(e,t,r){return t.visit()},Params(e,t,r){return t.visit()},Alt(e){return o.alt(...e.visit()).withSource(this.source)},TopLevelTerm_inline(e,t){var t=u+"_"+t.visit(),e=e.visit(),r=this.source.trimmed(),n=!(s.superGrammar&&s.superGrammar.rules[t]),n=(a&&!n?s.override(t,l,e,null,r):s.define(t,l,e,null,r),l.map(e=>o.app(e)));return o.app(t,n).withSource(e.source)},OverrideTopLevelTerm_superSplice(e){return He},Seq(e){return o.seq(...e.children.map(e=>e.visit())).withSource(this.source)},Iter_star(e,t){return o.star(e.visit()).withSource(this.source)},Iter_plus(e,t){return o.plus(e.visit()).withSource(this.source)},Iter_opt(e,t){return o.opt(e.visit()).withSource(this.source)},Pred_not(e,t){return o.not(t.visit()).withSource(this.source)},Pred_lookahead(e,t){return o.lookahead(t.visit()).withSource(this.source)},Lex_lex(e,t){return o.lex(t.visit()).withSource(this.source)},Base_application(e,t){t=t.children.map(e=>e.visit())[0]||[];return o.app(e.visit(),t).withSource(this.source)},Base_range(e,t,r){return o.range(e.visit(),r.visit()).withSource(this.source)},Base_terminal(e){return o.terminal(e.visit()).withSource(this.source)},Base_paren(e,t,r){return t.visit()},ruleDescr(e,t,r){return t.visit()},ruleDescrText(e){return this.sourceString.trim()},caseName(e,t,r,n,a){return r.visit()},name(e,t){return this.sourceString},nameFirst(e){},nameRest(e){},terminal(e,t,r){return t.children.map(e=>e.visit()).join("")},oneCharTerminal(e,t,r){return t.visit()},escapeChar(t){try{return $(this.sourceString)}catch(e){if(e instanceof RangeError&&e.message.startsWith("Invalid code point "))throw d((r=(t=t)._node)&&r.isNonterminal()&&"escapeChar_unicodeCodePoint"===r.ctorName),A(`U+${(t=(r=t.children.slice(1,-1).map(e=>e.source))[0].coverageWith(...r.slice(1))).contents} is not a valid Unicode code point`,t);throw e}var r},NonemptyListOf(e,t,r){return[e.visit()].concat(r.children.map(e=>e.visit()))},EmptyListOf(){return[]},_terminal(){return this.sourceString}})(e).visit()}var Ze=Ve(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);R=L.BuiltInRules,k={empty(){return this.iteration()},nonEmpty(e,t,r){return this.iteration([e].concat(r.children))}},M.BuiltInSemantics=M.createSemantics(R,null).addOperation("asIteration",{emptyListOf:k.empty,nonemptyListOf:k.nonEmpty,EmptyListOf:k.empty,NonemptyListOf:k.nonEmpty}),R=Ze,M.prototypeGrammarSemantics=R.createSemantics().addOperation("parse",{AttributeSignature(e){return{name:e.parse(),formals:[]}},OperationSignature(e,t){return{name:e.parse(),formals:t.children.map(e=>e.parse())[0]||[]}},Formals(e,t,r){return t.asIteration().children.map(e=>e.parse())},name(e,t){return this.sourceString}}),M.prototypeGrammar=R;const Ye="an indented block",Xe="a dedent";class et extends he{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&0===this._indentationAt(this.pos)}next(){if(0===this._indentationAt(this.pos))return super.next();this.examinedLength=Math.max(this.examinedLength,this.pos)}nextCharCode(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCharCode()}nextCodePoint(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCodePoint()}}class tt extends n{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){var t=e["inputStream"],r=e.userData,t=(e.doNotMemoize=!0,t.pos),n=this.isIndent?1:-1;return 0<(r[t]||0)*n?(e.userData=Object.create(r),e.userData[t]-=n,e.pushBinding(new N(0),t),!0):(e.processFailure(t,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(e){var t=this.isIndent?Ye:Xe;return new E(this,t,"description")}}var k=new w("indent"),Ze=new w("dedent"),R=new p($e,"any",[k,Ze],[]),k=(new ze).newGrammar("IndentationSensitive").withSuperGrammar($e).define("indent",[],new tt(!0),Ye,void 0,!0).define("dedent",[],new tt(!1),Xe,void 0,!0).extend("any",[],R,"any character",void 0).build();Object.assign(k,{_matchStateInitializer(e){e.userData=function(e){let t=0;const r=[0];for(var n=()=>r[r.length-1],a={},i=/( *).*(?:$|\r?\n|\r)/g;null!=(o=i.exec(e));){var[o,s]=o;if(0===o.length)break;var u=s.length,s=n(),l=t+u;if(s<u)r.push(u),a[l]=1;else if(u<s){for(s=r.length;n()!==u;)r.pop();a[l]=-1*(s-r.length)}t+=o.length}return 1<r.length&&(a[t]=1-r.length),a}(e.input),e.inputStream=new et(e)},supportsIncrementalParsing:!1});L.initApplicationParser(Je,Qe);const rt=e=>!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e);function nt(e,t){var r,n,e=Je.match(e,"Grammars");if(e.failed())throw r=e,n=new Error,Object.defineProperty(n,"message",{enumerable:!0,get(){return r.message}}),Object.defineProperty(n,"shortMessage",{enumerable:!0,get(){return"Expected "+r.getExpectedText()}}),n.interval=r.getInterval(),n;Qe(e,t)}function at(e,t){t=Object.create(t||{});if("string"!=typeof e){if(!rt(e))throw new TypeError("Expected string as first argument, got "+J(e));e=e.toString()}return nt(e,t),t}e.ExperimentalIndentationSensitive=k,e._buildGrammar=Qe,e.grammar=function(e,t){var r,e=at(e,t);if(0===(t=Object.keys(e)).length)throw new Error("Missing grammar definition");if(1<t.length)throw r=e[t[1]].source,new Error(ce(r.sourceString,r.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.");return e[t[0]]},e.grammars=at,e.makeRecipe=Ve,e.ohmGrammar=Je,e.pexprs=Ne,e.version="17.1.0"}},a={};return function e(t){var r=a[t];return void 0===r&&(r=a[t]={exports:{}},n[t].call(r.exports,r,r.exports,e)),r.exports}(800)})());
//# sourceMappingURL=index.js.map