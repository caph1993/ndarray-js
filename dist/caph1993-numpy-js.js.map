{"version":3,"sources":["webpack://@caph1993/numpy-js/./src/core-modules/-core-globals.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-basic.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-elementwise.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-indexes.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-js-interface.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-operators.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-print.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-reduce.ts","webpack://@caph1993/numpy-js/./src/core-modules/core-transform.ts","webpack://@caph1993/numpy-js/./src/core-modules/index.ts","webpack://@caph1993/numpy-js/./src/core.ts","webpack://@caph1993/numpy-js/./src/globals.ts","webpack://@caph1993/numpy-js/./src/index.ts","webpack://@caph1993/numpy-js/./src/js-utils.ts","webpack://@caph1993/numpy-js/./src/np-modules/-np-globals.ts","webpack://@caph1993/numpy-js/./src/np-modules/index.ts","webpack://@caph1993/numpy-js/./src/np-modules/np-constructors.ts","webpack://@caph1993/numpy-js/./src/np-modules/np-grammar.ts","webpack://@caph1993/numpy-js/./src/np-modules/np-random.ts","webpack://@caph1993/numpy-js/./src/np.ts","webpack://@caph1993/numpy-js/./node_modules/.pnpm/ohm-js@17.1.0/node_modules/ohm-js/dist/ohm.cjs","webpack://@caph1993/numpy-js/webpack/bootstrap","webpack://@caph1993/numpy-js/webpack/startup"],"names":["__read","this","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spreadArray","to","from","pack","arguments","length","l","Array","prototype","slice","concat","globals_1","Object","defineProperty","exports","array","asarray","new_NDArray","isarray","_NDArray","np","GLOBALS","__NDArray","NDArray","Error","A","fromJS","flat","shape","dtype","_simpleIndexes","_core_globals_1","copy","empty","new_from","ravel","reshape","parse_shape","shape_shifts","as_number","as_boolean","number_collapse","arr","expect","obj","parseFloat","list","isArray","f","undefined","Number","size","reduce","a","b","enumerable","get","shifts","_","shape_or_first","more_shape","_i","map","inferredIndex","indexOf","known","filter","dim","acc","val","ops","__make_elementwise","logical_not","bitwise_not","round","elementwise","core_basic_1","func","decimals","Math","x","toFixed","Boolean","sign","sqrt","square","abs","exp","log","log2","log10","log1p","sin","cos","tan","asin","acos","atan","atan2","cosh","sinh","tanh","acosh","asinh","atanh","__values","s","TypeError","AxisIndex","__parse_sliceRange","AxesIndex","index","where","src_flat_1","out","assign","__popKwArgs","axesIndex","parse","isConstant","index_1","indices","isSimple","composition","first","second","axisIndexes","j","specA","spec","specB","type","_a","range","startA","start","stepA","step","nStepsA","nSteps","index_2","_b","startB","stepB","nStepsB","sub","parse_range","apparentShape","internalShape","_flat","_indices","slices","e_1","slices_1","slices_1_1","e_1_1","return","iShifts","axis","lastAxis","tuple","fill","cursor","isFinite","__slices","configurable","idx","_size","axis_size","stop","max","min","step_1","start_1","ifNull","floor","parse_range_spec","rangeString","numbers","split","trim","parseInt","isInteger","indexSpec","span","index_3","indices_1","forEach","if_value","stop_1","axisIndex","_where","buffers","readDir","reversedAfter","NaN","remainingAxes","axisWhere","key","refSize","splice","reverse","toJS","root","pushToFlat","e_2","arr_1","arr_1_1","elem","arr_2","arr_2_1","e_2_1","recursiveReshape","flatArr","shapeArr","shift","innerShape","outerSize","innerArray","indexes","allclose","isclose","op_assign","__make_assignment_operator","_assign_operation_toJS","assign_operation","op_unary","op_binary","__make_operator_special","__make_operator","_broadcast_shapes","binary_operation","core_js_interface_1","B","bind","apply","shapeA","shapeB","flatOut","shiftsA","shiftsB","flatA","flatB","idxA","idxB","maxDim","dim1","dim2","unshift","operator","funcNum","funcBool","console","warn","tgt","src","tmpTgt","indices_1_1","tgtJS","cpy","outJS","pop","args","pow","rtol","atol","equal_nan","isNaN","different","err","core_elementwise_1","humanReadable","toString","budgets","lBudget","before","rBudget","rLimit","suffix","name","str","indent","depth","join","sep","repeat","simplify","left","right","replace","match","inputString","delimiter","rows","columnWidths","rows_1","rows_1_1","columns","formattedString","rows_2","rows_2_1","_loop_1","row","column","padStart","padEnd","reducers","core_operators_1","keepdims","reducer","groups","nCols","groupsT","newRow","__make_reducer","sum","product","any","all","argmax","argmin","mean","var","arrMean","std","variance","stack","concatenate","swapAxes","transpose","sort","apply_along_axis","js_utils_1","transform","nDims","tmp_1","data","tmp","axes","inv","srcShifts","axisA","axisB","perm","arrays","shapeIn","arrays_1","arrays_1_1","allEq","v","shapeBroadcast","bArrays","arrays_2","arrays_2_1","modules","basic","jsInterface","print","operators","__generator","thisArg","body","y","t","label","sent","trys","g","verb","op","_this","set","withKwArgs","kwArgs","core_modules_1","reduceDecorator","binaryOpDecorator","other","unaryOpDecorator","assignOpDecorator","_binary_operation","add","subtract","multiply","divide","mod","divide_int","maximum","minimum","bitwise_or","bitwise_and","bitwise_shift_right","logical_or","logical_and","logical_xor","greater","less","greater_equal","less_equal","equal","not_equal","add_assign","subtract_assign","multiply_assign","divide_assign","mod_assign","divide_int_assign","pow_assign","maximum_assign","minimum_assign","bitwise_or_assign","bitwise_and_assign","bitwise_shift_left_assign","bitwise_shift_right_assign","logical_or_assign","logical_and_assign","JS","symbol_1","func_1","keys","other_1","func_2","includes","symbol","_np","seen","q","_next","c","c_i","allClose","nan_equal","wrapper","nd_modules","constructors","grammar","random","geomspace","linspace","arange","ones","zeros","arg0","arg1","end","num","endpoint","__makeTemplateObject","cooked","raw","_np_globals_1","__parser_pool","__makeSemantics","ohmGrammar","ohm","String","semanticVariables","semantics","Instruction_sliceAssignment","$tgt","_open","$where","_close","$symbol","$src","_tgt","_src","sourceString","Instruction_expression","$arr","Precedence11","BinaryOperation","Precedence10","Precedence09","Precedence08","Precedence07","Precedence06","Precedence05","Precedence04","UnaryOperation","Precedence03","Precedence02","number","arg2","arg3","arg4","arg5","arg6","arg7","Arr_slice","SliceTerm_constant","$x","Arr_call","$name","$names","$callArgs","Arr_method","_dot","Parenthesis","__","Arr_attribute","Variable","$i","isListOfArrays","int","$sign","$value","SliceRange","$start","$stop","$step","Constant","POSITIVE_INFINITY","$str","CallArgs","$args","_comma","$kwArgs","_trailing","entries","fromEntries","k","KwArg","$key","_equals","NonemptyListOf","more","children","JsArray","$list","_terminal","$A","$B","ohmSemantics","createSemantics","addOperation","template","variables","template_with_placeholders","succeeded","message","busy","pool","parser","shuffle","shuffled","_shuffled","_shuffle","normal","randn","__normal","exponential","uniform","u","prod","usage","core_1","default","ew","bitwise_xor","bitwise_shift_left","np_modules_1","abstract","optMethodName","methodName","constructor","assert","cond","defineLazyProperty","propName","getterFn","let","memo","repeatFn","fn","repeatStr","getDuplicates","duplicates","lastIndexOf","copyWithoutDuplicates","noDuplicates","entry","isSyntactic","ruleName","firstChar","toUpperCase","isLexical","padLeft","len","optChar","StringBuffer","strings","append","contents","escapeUnicode","fromCodePoint","unescapeCodePoint","charAt","unexpectedObjToString","baseToString","typeName","JSON","stringify","common","freeze","__proto__","clone","UnicodeCategories","Lu","Ll","Lt","Lm","Lo","Nl","Nd","Mn","Mc","Pc","Zs","L","Ltmo","PExpr","withSource","interval","source","trimmed","create","Terminal","super","Range","matchCodePoint","Param","Alt","terms","Extend","superGrammar","rules","Splice","beforeTerms","afterTerms","origBody","expansionPos","Seq","factors","Iter","expr","Star","Plus","Opt","minNumMatches","maxNumMatches","Not","Lookahead","Lex","Apply","toMemoKey","_memoKey","UnicodeChar","category","pattern","createError","optInterval","getLineAndColumnMessage","shortMessage","intervalSourcesDontMatch","undeclaredRule","grammarName","duplicateRuleDeclaration","declGrammarName","optSource","wrongNumberOfParameters","expected","actual","duplicateParameterNames","incorrectArgumentType","expectedType","kleeneExprHasNullableOperand","kleeneExpr","applicationStack","actuals","substituteParams","stackTrace","app","inconsistentArity","throwErrors","errors","messages","strcpy","dest","offset","origDestLen","substr","lineAndColumnToMessage","ranges","lineAndCol","sb","lineNumbers","lineNum","colNum","maxLen","prevLine","nextLine","appendLine","content","prefix","lineLen","line","indicationLine","startIdx","endIdx","lineStartOffset","gutterWidth","builtInRulesCallbacks","awaitBuiltInRules","cb","getLineAndColumn","currOffset","prevLineStartOffset","lineEndOffset","nextLineEndOffset","uniqueId","idCounter","Interval","_contents","coverageWith","intervals","coverage","collapsedLeft","collapsedRight","minus","that","relativeTo","subInterval","newStartIdx","firstInterval","InputStream","pos","examinedLength","atEnd","ans","nextCharCode","nextChar","charCodeAt","nextCodePoint","cp","codePointAt","matchString","optIgnoreCase","sourceSlice","optEndIdx","MatchResult","matcher","input","startExpr","cst","cstOffset","rightmostFailurePosition","optRecordedFailures","_cst","_cstOffset","_rightmostFailurePosition","_rightmostFailures","failed","detail","getExpectedText","getRightmostFailurePosition","errorInfo","getRightmostFailures","matchResultWithFailures","setInput","_match","tracing","positionToRecordFailures","failures","failure","isFluffy","getInterval","PosInfo","applicationMemoKeyStack","maxExaminedLength","maxRightmostFailureOffset","currentLeftRecursion","isActive","application","enter","exit","startLeftRecursion","headApplication","memoRec","isLeftRecursion","nextLeftRecursion","indexOfFirstInvolvedRule","involvedApplicationMemoKeys","isInvolved","applicationMemoKey","updateInvolvedApplicationMemoKeys","endLeftRecursion","shouldUseMemoizedResult","memoize","memoKey","rightmostFailureOffset","clearObsoleteEntries","invalidatedIdx","DOT_OPERATOR","SYMBOL_FOR_HORIZONTAL_TABULATION","SYMBOL_FOR_LINE_FEED","SYMBOL_FOR_CARRIAGE_RETURN","Flags","isRootNode","isImplicitSpaces","isMemoized","isHeadOfLeftRecursion","terminatesLR","asEscapedString","Trace","pos1","pos2","bindings","optChildren","terminatingLREntry","_flags","toDisplayString","cloneWithExpr","recordLRTermination","ruleBodyTrace","walk","visitorObjOrFn","optThisArg","visitor","_walk","node","parent","recurse","SKIP","child","excerpt","displayString","mask","allowsSkippingPrecedingSpace","BuiltInRules$1","lexifyCount","assertAllApplicationsAreValid","_assertAllApplicationsAreValid","skipSyntacticCheck","ruleInfo","isContextSyntactic","formals","isBuiltInApplySyntactic","applySyntactic","isBuiltInCaseInsensitive","caseInsensitive","arg","getArity","assertChoicesHaveUniformArity","arity","term","otherArity","actualArity","expectedArity","assertIteratedExprsAreNotNullable","isNullable","Node","matchLength","numChildren","childAt","indexOfChild","hasChildren","hasNoChildren","onlyChild","ctorName","firstChild","lastChild","childBefore","childIdx","childAfter","isTerminal","isNonterminal","isIteration","isOptional","TerminalNode","NonterminalNode","childOffsets","IterationNode","optional","getMetaInfo","grammarInterval","metaInfo","adjusted","sourceInterval","isRestrictedJSIdentifier","test","resolveDuplicatedNames","argumentNameList","count","argName","dupArgName","subscript","eval","state","inputStream","origPos","pushBinding","processFailure","currentApplication","enterLexifiedContext","exitLexifiedContext","factor","cols","colOffsets","numMatches","prevPos","_applicationStack","_bindings","rowOffsets","_bindingOffsets","posToOffset","endOffset","lastColOffsets","lastCol","pushFailuresInfo","popFailuresInfo","caller","posInfo","getCurrentPosInfo","handleCycle","hasNecessaryInfo","useMemoizedResult","reallyEval","origPosInfo","description","origInputStreamExaminedLength","enterApplication","evalOnce","currentLR","doNotMemoize","growSeedResult","_getRightmostFailureOffset","failuresAtRightmostPosition","cloneRecordedFailures","isTracing","getTraceEntry","traceEntry","exitApplication","offsets","lrMemoRec","newValue","seedTrace","trace","ch","outputRecipe","toLowerCase","introduceParams","_isNullable","some","every","inlined","hasOwnProperty","toArgumentNameList","firstArgIndex","noDupCheck","termArgNameLists","numArgs","colIdx","col","rowIdx","uniqueNames","factorArgumentNameList","exprArgumentString","ps","Failure","pexpr","text","fluffy","getPExpr","getText","getType","isDescription","isStringTerminal","isCode","makeFluffy","clearFluffy","subsumes","toKey","toFailure","article","CaseInsensitiveTerminal","param","_getString","terminal","matchStr","pexprs","builtInApplySyntacticBody","builtInRules","applySpaces","MatchState","optPositionToRecordFailures","getInput","memoTable","_memoTable","userData","_posStack","inLexifiedContextStack","_rightmostFailurePositionStack","_recordedFailuresStack","recordedFailures","optNode","inSyntacticContext","inLexifiedContext","skipSpaces","popBinding","skipSpacesIfInSyntacticContext","maybeSkipSpacesBefore","numBindings","truncateBindings","newLength","getPosInfo","recordFailure","shouldCloneIfNew","recordFailures","getMemoizedTraceEntry","memoRecRightmostFailurePosition","origNumBindings","origUserData","origRecordedFailures","memoPos","origTrace","getMatchResult","_setUpMatchState","rightmostFailures","getTrace","matchResult","rootTrace","result","Matcher","_input","_isMemoTableStale","_resetMemoTable","replaceInputRange","prevInput","restOfMemoTable","optStartApplicationStr","options","incremental","_getStartExpr","opts","supportsIncrementalParsing","applicationStr","defaultStartRule","startApp","parseApplication","globalActionStack","prop","Wrapper","baseInterval","_node","_baseInterval","_childWrappers","_forgetMemoizedResultFor","attributeName","_semantics","attributeKeys","childWrapper","childNode","base","wrap","_children","iteration","optChildWrappers","childWrappers","childNodes","iter","Semantics","superSemantics","self","checkedActionDicts","checkActionDictsIfHaventAlready","equals","_inheritsFrom","operations","attributes","checkActionDicts","checkActionDict","toRecipe","semanticsOnly","hasSuperSemantics","BuiltInSemantics","_getSemantics","superSemanticsGrammar","relatedGrammar","semanticOperations","actionDict","builtInDefault","signature","method","srcArray","actionName","addOperationOrAttribute","typePlural","parsedNameAndFormalArgs","parseSignature","formal","info","moreInfo","doIt","assertNewName","realActionDict","_default","Operation","Attribute","thisThing","argsObj","oldArgs","execute","extendOperationOrAttribute","inheritedFormals","inheritedActionDict","newActionDict","optBaseInterval","prototypeGrammar","prototypeGrammarSemantics","optSuperSemantics","proxy","extendOperation","addAttribute","extendAttribute","_getActionDict","operationOrAttributeName","action","_remove","semantic","getOperationNames","getAttributeNames","getGrammar","_checkTopDownActionDict","nodeWrapper","actionFn","_nonterminal","SPECIAL_ACTION_NAMES","getSortedRuleValues","ohmGrammar$1","buildGrammar$1","Grammar","optDefaultStartRule","_matchStateInitializer","isBuiltIn","ProtoBuiltInRules","BuiltInRules","myRules","otherRules","rule","optStartApplication","extendSemantics","what","prettyProblems","problems","_topDownActionArity","details","problem","superGrammarExpr","startRule","isDefinition","operation","bodyRecipe","superGrammarOutput","toOperationActionDictionaryTemplate","_toOperationOrAttributeActionDictionaryTemplate","toAttributeActionDictionaryTemplate","addSemanticActionTemplate","primitive","lower","upper","unicodeLtmo","spaces","space","initApplicationParser","builderFn","GrammarDecl","ensureSuperGrammar","withSuperGrammar","ensureSuperGrammarRuleForOverriding","installOverriddenOrExtendedRule","duplicateParameterNames$1","expectedFormals","expectedNumFormals","install","withDefaultStartRule","build","grammarErrors","grammarHasInvalidApplications","define","override","descIgnored","extend","fragment","Builder","currentDecl","currentRuleName","newGrammar","gDecl","fromRecipe","ruleRecipe","alt","termArgs","seq","factorArgs","star","plus","opt","not","lookahead","lex","optParams","recipe","makeRecipe","superSplicePlaceholder","namespaceHas","ns","buildGrammar","namespace","optOhmGrammarForTesting","builder","decl","currentRuleFormals","overriding","Grammars","grammarIter","visit","id","SuperGrammar","superGrammarName","Rule_define","fs","d","Rule_override","Rule_extend","RuleBody","OverrideRuleBody","Formals","opointy","cpointy","Params","seqs","TopLevelTerm_inline","inlineRuleName","isNewRuleDeclaration","params","OverrideTopLevelTerm_superSplice","Iter_star","Iter_plus","Iter_opt","Pred_not","Pred_lookahead","Lex_lex","Base_application","Base_range","Base_terminal","Base_paren","open","close","ruleDescr","ruleDescrText","caseName","space1","space2","rest","nameFirst","nameRest","cs","oneCharTerminal","escapeChar","RangeError","startsWith","applyWrapper","fullInterval","digitIntervals","xs","EmptyListOf","operationsAndAttributesGrammar","actions","nonEmpty","emptyListOf","nonemptyListOf","AttributeSignature","OperationSignature","optFormals","oparen","cparen","asIteration","INDENT_DESCRIPTION","DEDENT_DESCRIPTION","InputStreamWithIndentation","_indentationAt","Indentation","isIndent","pseudoTokens","applyIndent","applyDedent","newAnyBody","IndentationSensitive","topOfStack","regex","exec","indentSize","prevSize","indentPos","prevLength","isBuffer","compileAndLoad","matchFailure","grammars","optNamespace","ExperimentalIndentationSensitive","_buildGrammar","grammarNames","version","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__"],"mappings":"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","file":"caph1993-numpy-js.js","sourcesContent":["\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.array = exports.asarray = exports.new_NDArray = exports.isarray = exports._NDArray = void 0;\nvar globals_1 = require(\"../globals\");\nvar np = globals_1.GLOBALS.np, __NDArray = globals_1.GLOBALS.NDArray;\nif (!__NDArray)\n    throw new Error(\"Programming error: NDArray not defined\");\n// Functions to avoid importing NDArray (because if I import NDArray, I can't use it as a type annotation in the same file)\nexports._NDArray = __NDArray;\nfunction isarray(A) {\n    return A instanceof exports._NDArray;\n}\nexports.isarray = isarray;\nvar new_NDArray = function (flat, shape, dtype) { return new exports._NDArray(flat, shape, dtype); };\nexports.new_NDArray = new_NDArray;\nfunction asarray(A) {\n    if (isarray(A))\n        return A;\n    else\n        return np.fromJS(A);\n}\nexports.asarray = asarray;\nfunction array(A) {\n    if (isarray(A)) { // shallow copy of A\n        var flat = A._simpleIndexes == null ? __spreadArray([], __read(A.flat), false) : A.flat;\n        return (0, exports.new_NDArray)(flat, A.shape, A.dtype);\n    }\n    else\n        return asarray(A);\n}\nexports.array = array;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.copy = exports.empty = exports.new_from = exports.ravel = exports.reshape = exports.parse_shape = exports.shape_shifts = exports.as_number = exports.as_boolean = exports.number_collapse = exports._NDArray = exports.new_NDArray = exports.array = exports.asarray = exports.isarray = void 0;\nvar _core_globals_1 = require(\"./-core-globals\");\nObject.defineProperty(exports, \"isarray\", { enumerable: true, get: function () { return _core_globals_1.isarray; } });\nObject.defineProperty(exports, \"asarray\", { enumerable: true, get: function () { return _core_globals_1.asarray; } });\nObject.defineProperty(exports, \"array\", { enumerable: true, get: function () { return _core_globals_1.array; } });\nObject.defineProperty(exports, \"new_NDArray\", { enumerable: true, get: function () { return _core_globals_1.new_NDArray; } });\nObject.defineProperty(exports, \"_NDArray\", { enumerable: true, get: function () { return _core_globals_1._NDArray; } });\n// Functions to avoid importing NDArray (because if I import NDArray, I can't use it as a type annotation in the same file)\n/**\n * If the array is 0D, it returns it's unique element (number or boolean).\n * The signature is kept as NDArray for type consistency, even though the\n * output is a number or a boolean. This is consistent with the facts that\n * (1) all functions requiring arrays work with numbers as well because they call asarray,\n * and (2) semantically, a constant is an array.\n */\nfunction number_collapse(arr, expect) {\n    if (expect === void 0) { expect = false; }\n    if (!arr.shape.length)\n        return arr.flat[0];\n    if (expect)\n        throw new Error(\"Expected constant. Got array with shape \".concat(arr.shape));\n    return arr;\n}\nexports.number_collapse = number_collapse;\nfunction as_boolean(obj) {\n    if ((0, _core_globals_1.isarray)(obj))\n        obj = number_collapse(obj, true);\n    else if (typeof obj == 'string')\n        throw new Error(\"'string' object can not be interpreted as boolean: \".concat(obj));\n    return !!(0 + obj);\n}\nexports.as_boolean = as_boolean;\nfunction as_number(obj) {\n    if ((0, _core_globals_1.isarray)(obj))\n        obj = number_collapse(obj, true);\n    else if (typeof obj == 'string')\n        throw new Error(\"'string' object can not be interpreted as boolean: \".concat(obj));\n    return parseFloat(obj);\n}\nexports.as_number = as_number;\n// ====================\n// Reshape and shape shifts for indexing\n// ====================\nfunction shape_shifts(shape) {\n    // increasing one by one on a given axis is increasing by shifts[axis] in flat representation\n    var shifts = Array.from({ length: shape.length }, function (_) { return 0; });\n    shifts[shape.length - 1] = 1;\n    for (var i = shape.length - 2; i >= 0; i--)\n        shifts[i] = shifts[i + 1] * shape[i + 1];\n    return shifts;\n}\nexports.shape_shifts = shape_shifts;\nfunction parse_shape(list) {\n    if (typeof list == \"number\")\n        return [list];\n    if ((0, _core_globals_1.isarray)(list)) {\n        if (list.shape.length > 1) {\n            throw new Error(\"Expected flat list. Got array with shape \".concat(list.shape));\n        }\n        return list.flat;\n    }\n    if (Array.isArray(list))\n        return list;\n    throw new Error(\"Expected list. Got \".concat(list));\n}\nexports.parse_shape = parse_shape;\nfunction reshape(A, shape_or_first) {\n    var more_shape = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        more_shape[_i - 2] = arguments[_i];\n    }\n    A = (0, _core_globals_1.asarray)(A);\n    var shape;\n    if (!more_shape.length)\n        shape = parse_shape(shape_or_first);\n    else\n        shape = __spreadArray([shape_or_first], __read(more_shape), false).map(as_number);\n    var n = A.size;\n    // Find -1\n    var inferredIndex = shape.indexOf(-1);\n    if (inferredIndex !== -1) {\n        var known = shape.filter(function (dim) { return dim !== -1; }).reduce(function (acc, val) { return acc * val; }, 1);\n        if (n % known !== 0) {\n            throw new Error(\"Invalid shape. The total number of elements must match the product of the known dimensions.\");\n        }\n        shape[inferredIndex] = n / known;\n    }\n    return (0, _core_globals_1.new_NDArray)(A.flat, shape, A.dtype);\n}\nexports.reshape = reshape;\n;\nfunction ravel(A) {\n    A = (0, _core_globals_1.asarray)(A);\n    return (0, _core_globals_1.new_NDArray)(A.flat, [A.size], A.dtype);\n}\nexports.ravel = ravel;\n;\n// ====================\n// Constructors\n// ====================\nfunction new_from(shape, f, dtype) {\n    if (f === void 0) { f = undefined; }\n    if (dtype === void 0) { dtype = Number; }\n    shape = parse_shape(shape);\n    var size = shape.reduce(function (a, b) { return a * b; }, 1);\n    var flat = Array.from({ length: size }, f);\n    return (0, _core_globals_1.new_NDArray)(flat, shape, dtype);\n}\nexports.new_from = new_from;\n;\nfunction empty(shape, /**@type {import('./core').DType} */ dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    return new_from(shape, function (_) { return undefined; }, dtype);\n}\nexports.empty = empty;\n;\nfunction copy(A) {\n    return (0, _core_globals_1.new_NDArray)(__spreadArray([], __read(A.flat), false), A.shape, A.dtype);\n}\nexports.copy = copy;\n","\"use strict\";\n//@ts-check\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ops = exports.__make_elementwise = exports.logical_not = exports.bitwise_not = exports.round = exports.elementwise = void 0;\nvar core_basic_1 = require(\"./core-basic\");\n// Here, we declare only the core functions (those that are methods)\nfunction elementwise(A, func, dtype) {\n    A = (0, core_basic_1.asarray)(A);\n    return (0, core_basic_1.new_NDArray)(A.flat.map(func), A.shape, dtype);\n}\nexports.elementwise = elementwise;\nfunction round(A, decimals) {\n    if (decimals === void 0) { decimals = 0; }\n    if (decimals == 0)\n        elementwise(A, Math.round, Number);\n    return elementwise(A, function (x) { return parseFloat(x.toFixed(decimals)); }, Number);\n}\nexports.round = round;\n;\nfunction bitwise_not(A) {\n    return elementwise(A, function (x) { return ~x; }, Number);\n}\nexports.bitwise_not = bitwise_not;\n;\nfunction logical_not(A) {\n    return elementwise(A, function (x) { return !x; }, Boolean);\n}\nexports.logical_not = logical_not;\n;\nfunction __make_elementwise(func, dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    return function (A) {\n        return elementwise(A, func, dtype);\n    };\n}\nexports.__make_elementwise = __make_elementwise;\nexports.ops = {\n    sign: __make_elementwise(Math.sign),\n    sqrt: __make_elementwise(Math.sqrt),\n    square: __make_elementwise(function (a) { return a * a; }),\n    abs: __make_elementwise(Math.abs),\n    exp: __make_elementwise(Math.exp),\n    log: __make_elementwise(Math.log),\n    log2: __make_elementwise(Math.log2),\n    log10: __make_elementwise(Math.log10),\n    log1p: __make_elementwise(Math.log1p),\n    sin: __make_elementwise(Math.sin),\n    cos: __make_elementwise(Math.cos),\n    tan: __make_elementwise(Math.tan),\n    asin: __make_elementwise(Math.asin),\n    acos: __make_elementwise(Math.acos),\n    atan: __make_elementwise(Math.atan),\n    atan2: __make_elementwise(Math.atan2),\n    cosh: __make_elementwise(Math.cosh),\n    sinh: __make_elementwise(Math.sinh),\n    tanh: __make_elementwise(Math.tanh),\n    acosh: __make_elementwise(Math.acosh),\n    asinh: __make_elementwise(Math.asinh),\n    atanh: __make_elementwise(Math.atanh),\n    round: round,\n};\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AxisIndex = exports.__parse_sliceRange = exports.AxesIndex = exports.index = void 0;\n//@ts-check\nvar core_basic_1 = require(\"./core-basic\");\nfunction index(arr, where) {\n    // This can result either in a value, a view, a copy.\n    // The index is simple if there are only ranges, numbers, \":\" and at most one \"...\"\n    // If index is simple, don't call \".indices\" and make view\n    // If index is advanced, get indices and make copy\n    var copy = Object.assign({ copy: false }, arr.__popKwArgs()).copy;\n    if (!((0, core_basic_1.isarray)(arr)))\n        throw new Error(\"Expected NDArray. Found \".concat(typeof arr, \": \").concat(arr));\n    var axesIndex = AxesIndex.prototype.parse(arr.shape, where);\n    if (axesIndex.isConstant) {\n        var _a = __read(axesIndex.indices, 1), index_1 = _a[0];\n        return arr.flat[index_1];\n    }\n    else if (axesIndex.isSimple) {\n        var composition = __compose_simpleIndexes(arr._simpleIndexes, axesIndex);\n        var out = (0, core_basic_1.new_NDArray)(arr._flat, axesIndex.shape, arr.dtype);\n        out._simpleIndexes = composition;\n        if (arr['__warnAssignments'])\n            out['__warnAssignments'] = true;\n        return copy ? out.copy() : out;\n    }\n    else {\n        var src_flat_1 = arr.flat;\n        var flat = axesIndex.indices.map(function (i) { return src_flat_1[i]; });\n        var out = (0, core_basic_1.new_NDArray)(flat, axesIndex.shape, arr.dtype);\n        if (!copy)\n            out['__warnAssignments'] = true;\n        return out;\n    }\n}\nexports.index = index;\n// type SimpleIndexes = null | { size: number, ranges: { refSize: number, range: null | number | [number, number, number] }[], indices: null | number[] };\nvar AxesIndex = /** @class */ (function () {\n    /**\n     * @param {AxisIndex[]} axisIndexes\n     */\n    function AxesIndex(apparentShape, internalShape, axisIndexes) {\n        this.shape = apparentShape;\n        this.internalShape = internalShape;\n        this.axisIndexes = axisIndexes;\n        this._indices = null;\n        this._size = null;\n        this.isSimple = this.axisIndexes.map(function (idx) { return idx.isSimple; }).reduce(function (a, b) { return a && b; }, true);\n        this.isConstant = this.axisIndexes.map(function (idx) { return idx.isConstant; }).reduce(function (a, b) { return a && b; }, true);\n    }\n    Object.defineProperty(AxesIndex.prototype, \"indices\", {\n        get: function () {\n            if (this._indices)\n                return this._indices;\n            var indices = __slices_to_indices(this.internalShape, this.__slices);\n            return this._indices = indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AxesIndex.prototype, \"__slices\", {\n        get: function () {\n            return this.axisIndexes.map(function (idx) { return idx.indices; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AxesIndex.prototype, \"size\", {\n        get: function () {\n            if (this._size)\n                return this._size;\n            return this._size = this.axisIndexes.map(function (idx) { return idx.size; }).reduce(function (a, b) { return a * b; }, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AxesIndex;\n}());\nexports.AxesIndex = AxesIndex;\nfunction __compose_simpleIndexes(first, second) {\n    if (first == null)\n        return second;\n    var axisIndexes = [];\n    // console.log({ first, second })\n    var j = 0;\n    for (var i = 0; i < first.axisIndexes.length; i++) {\n        var specA = first.axisIndexes[i].spec;\n        var specB = second.axisIndexes[j].spec;\n        if (specA.type == \"array\")\n            throw new Error(\"Expected simple index. Found advanced: \".concat(specA.type));\n        if (specB.type == \"array\")\n            throw new Error(\"Expected simple index. Found advanced: \".concat(specB.type));\n        var /**@type {AxisIndexSpec} */ spec = void 0;\n        if (specA.type == \"number\")\n            spec = specA;\n        else {\n            j++;\n            if (specA.type == \":\")\n                spec = specB;\n            else if (specB.type == \":\")\n                spec = specA;\n            else {\n                var _a = specA.range, startA = _a.start, stepA = _a.step, nStepsA = _a.nSteps;\n                if (specB.type == \"number\") {\n                    var index_2 = specB.index;\n                    if (index_2 < 0)\n                        index_2 = nStepsA + index_2;\n                    if (index_2 < 0 || index_2 >= nStepsA)\n                        throw new Error(\"Index \".concat(index_2, \" out of bounds [0..\").concat(nStepsA, \")\"));\n                    index_2 = startA + index_2 * stepA;\n                    spec = { type: \"number\", index: index_2 };\n                }\n                else {\n                    var _b = specB.range, startB = _b.start, stepB = _b.step, nStepsB = _b.nSteps;\n                    var sub = AxisIndex.prototype.parse_range(nStepsA, startB, startB + nStepsB * stepB, stepB);\n                    var step = sub.step * stepA;\n                    var start = startA + sub.start * step;\n                    var nSteps = sub.nSteps;\n                    spec = { type: \"range\", range: { start: start, step: step, nSteps: nSteps } };\n                }\n            }\n        }\n        axisIndexes.push(new AxisIndex(spec));\n    }\n    if (j < second.axisIndexes.length)\n        throw new Error(\"Index too long. Expected \".concat(j, \" axes. Found \").concat(second.axisIndexes.length));\n    var apparentShape = second.shape;\n    var internalShape = first.internalShape;\n    return new AxesIndex(apparentShape, internalShape, axisIndexes);\n}\n/**\n * Computes the indices wr to shape of the cartesian products of the slices.\n * We have shape.length==slices.length, and the elements in slices[axis] are\n * integers between 0 and shape[axis]-1\n * @param {number[]} shape\n * @param {number[][]} slices\n * @returns {number[]}\n */\nfunction __slices_to_indices(shape, slices) {\n    var e_1, _a;\n    try {\n        for (var slices_1 = __values(slices), slices_1_1 = slices_1.next(); !slices_1_1.done; slices_1_1 = slices_1.next()) {\n            var slice = slices_1_1.value;\n            if (slice.length == 0)\n                return [];\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (slices_1_1 && !slices_1_1.done && (_a = slices_1.return)) _a.call(slices_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var shifts = (0, core_basic_1.shape_shifts)(shape);\n    var iShifts = slices.map(function (indices, axis) {\n        // out[i] = How much does the cursor increase if we change from [...,indices[i],...] to [...,indices[(i+1)%n],...]\n        var out = [], n = indices.length;\n        for (var i = 0; i < n - 1; i++)\n            out.push(shifts[axis] * (indices[i + 1] - indices[i]));\n        out[n - 1] = shifts[axis] * (indices[0] - indices[n - 1]);\n        return out;\n    });\n    var indices = [];\n    var lastAxis = shape.length - 1;\n    var tuple = new Array(shape.length).fill(0);\n    var cursor = slices.map(function (l, i) { return l[tuple[i]] * shifts[i]; }).reduce(function (a, b) { return a + b; }, 0);\n    while (true) {\n        if (!isFinite(cursor))\n            throw new Error(\"Programming error\");\n        indices.push(cursor);\n        var axis = lastAxis;\n        while (axis >= 0) {\n            cursor += iShifts[axis][tuple[axis]++];\n            if (tuple[axis] < iShifts[axis].length)\n                break;\n            tuple[axis--] = 0; // Overflow\n        }\n        ;\n        if (axis < 0)\n            break;\n    }\n    return indices;\n}\n// =========================================\n//     Slicing\n// =========================================\nfunction __parse_sliceRange(axis_size, _a) {\n    var start = _a.start, stop = _a.stop, step = _a.step;\n    if (start == null)\n        start = 0;\n    else if (start < 0)\n        start = axis_size + start;\n    if (stop == null)\n        stop = axis_size;\n    else if (stop < 0)\n        stop = axis_size + stop;\n    if (step == null)\n        step = 1;\n    else if (step == 0)\n        throw new Error(\"Slice range with step size of zero\");\n    if (!isFinite(start) || !isFinite(stop) || !isFinite(step))\n        throw new Error(\"Invalid slice \".concat([start, stop, step], \". Axis size \").concat(axis_size));\n    var indices = [];\n    if (step > 0) {\n        start = Math.max(start, 0);\n        stop = Math.min(stop, axis_size);\n        for (var i = start; i < stop; i += step)\n            indices.push(i);\n    }\n    else {\n        stop = Math.max(stop, 0);\n        start = Math.min(start, axis_size);\n        for (var i = start; i > stop; i += step)\n            indices.push(i);\n    }\n    return indices;\n}\nexports.__parse_sliceRange = __parse_sliceRange;\nvar AxisIndex = /** @class */ (function () {\n    /**\n     * Invariant: Immutable\n     * @param {AxisIndexSpec} spec\n     */\n    function AxisIndex(spec) {\n        this.spec = spec;\n        this._indices = null;\n        this.isSimple = (this.spec.type != \"array\");\n        this.isConstant = (this.spec.type == \"number\");\n    }\n    Object.defineProperty(AxisIndex.prototype, \"indices\", {\n        get: function () {\n            if (this._indices)\n                return this._indices;\n            var indices;\n            if (this.spec.type == ':')\n                indices = Array.from({ length: this.spec.size }, function (_, i) { return i; });\n            else if (this.spec.type === \"number\")\n                indices = [this.spec.index];\n            else if (this.spec.type === \"array\")\n                indices = this.spec.indices;\n            else if (this.spec.type == \"range\") {\n                var _a = this.spec.range, nSteps = _a.nSteps, step_1 = _a.step, start_1 = _a.start;\n                indices = Array.from({ length: nSteps }, function (_, i) { return start_1 + i * step_1; });\n            }\n            else\n                throw new Error(\"Unknown spec type \".concat(this.spec['type']));\n            return this._indices = indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AxisIndex.prototype, \"size\", {\n        get: function () {\n            if (this.spec.type == ':')\n                return this.spec.size;\n            else if (this.spec.type === \"number\")\n                return 1;\n            else if (this.spec.type === \"array\")\n                return this.spec.indices.length;\n            else if (this.spec.type == \"range\")\n                return this.spec.range.nSteps;\n            else\n                throw new Error(\"Unknown spec type \".concat(this.spec['type']));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AxisIndex;\n}());\nexports.AxisIndex = AxisIndex;\nAxisIndex.prototype.parse_range = function (size, start, stop, step) {\n    if (start === void 0) { start = null; }\n    if (stop === void 0) { stop = null; }\n    if (step === void 0) { step = null; }\n    if (step == null)\n        step = 1;\n    else if (step == 0)\n        throw new Error(\"Index specification error. Step must be different from zero.\");\n    /**\n     *  @param {number|null} i @param {number} ifNull @param {number} min @param {number} max */\n    var parse = function (i, ifNull, min, max) {\n        if (i == null)\n            return ifNull;\n        if (i < 0)\n            i = Math.max(0, size - i);\n        return Math.min(max, Math.max(min, i));\n    };\n    var nSteps;\n    if (step > 0)\n        start = parse(start, 0, 0, size - 1), stop = parse(stop, size, 0, size);\n    else\n        start = parse(start, size - 1, 0, size - 1), stop = parse(stop, size - 1, -1, size - 1);\n    stop = Math.max(stop, start);\n    nSteps = Math.floor(Math.abs(stop - start) / step);\n    return { start: start, step: step, nSteps: nSteps };\n};\n/**\n *\n * @param {string} rangeString\n * @returns {{start:(number|null), stop:(number|null), step:(number|null)}}\n */\nAxisIndex.prototype.parse_range_spec = function (rangeString) {\n    var numbers = rangeString.split(':').map(function (s) {\n        s = s.trim();\n        if (s == \"\")\n            return null;\n        var n = parseInt(s);\n        if (!Number.isInteger(n))\n            throw new Error(\"Wrong input. Slice index unrecognized: \".concat(s));\n        return n;\n    });\n    if (numbers.length == 0)\n        throw new Error('Unexpected empty index. Expected colons.');\n    if (numbers.length > 3)\n        throw new Error(\"Too many colons in index \".concat(rangeString));\n    var _a = __read(__spreadArray(__spreadArray([], __read(numbers), false), [null, null, null], false)), start = _a[0], stop = _a[1], step = _a[2], _ = _a.slice(3);\n    return { start: start, stop: stop, step: step };\n};\n/**\n * We are reading `indexSpec` and `shape` in parallel, in the reading direction readDir.\n * With respect to `shape` we are at the given `axis`.\n * With respect to `indexSpec`, we found `indexSpec`, which we should process.\n * @param {indexSpec|undefined} indexSpec\n */\nAxisIndex.prototype.parse = function (indexSpec, size) {\n    /**\n     *\n     * span (virtual shape) matches shape unless there are boolean masks spanning\n     * over several axes/dimensions.\n     * For example, in `np.ones((2,3,4,5))[:, np.arange(12).reshape((3,4))>5, 1]`,\n     * the boolean mask is spanning over axes 1 and 2. In this case, the output should\n     * merge these axes, resulting in an a vShape of (2, 12, 5).\n     * The boolean mask is then converted to indices in the flattened merged axis.\n     */\n    /**@type {AxisIndexSpec} */\n    var spec;\n    var span = 1;\n    if (indexSpec == ':' || indexSpec === undefined) {\n        spec = { type: ':', size: size };\n    }\n    else if (typeof indexSpec === \"number\") {\n        var index_3 = indexSpec;\n        if (index_3 < 0)\n            index_3 = size + index_3;\n        if (index_3 < 0 || index_3 >= size)\n            throw new Error(\"Index \".concat(index_3, \" out of bounds [0..\").concat(size, \")\"));\n        spec = { type: 'number', index: index_3 };\n    }\n    else if ((0, core_basic_1.isarray)(indexSpec) || Array.isArray(indexSpec)) {\n        var arr = (0, core_basic_1.asarray)(indexSpec);\n        var indices_1;\n        if (arr.dtype == Number) {\n            // Array of indices\n            if (arr.shape.length > 1)\n                throw new Error(\"Expected 1D array of indices or nD array of booleans. \" +\n                    \"Found shape=\".concat(arr.shape, \" and dtype=\").concat(arr.dtype));\n            indices_1 = arr.flat;\n        }\n        else {\n            // Boolean mask\n            indices_1 = [];\n            arr.flat.forEach(function (if_value, i) { return if_value && indices_1.push(i); });\n            // Next lines: the boolean mask spans over more than 1 axis\n            span = Math.max(1, arr.shape.length);\n            // Multiply the (possibly inverted) interval\n        }\n        spec = { type: 'array', indices: indices_1 };\n    }\n    else if (typeof indexSpec == \"string\") {\n        var _a = AxisIndex.prototype.parse_range_spec(indexSpec), start = _a.start, stop_1 = _a.stop, step = _a.step;\n        var range = AxisIndex.prototype.parse_range(size, start, stop_1, step);\n        if (range.start == 0 && range.nSteps == size && range.step == 1) {\n            // Small optimization: all of these are just \":\": [\"::\",\"0::1\", \":axisSize:\", etc.]\n            spec = { type: ':', size: size };\n        }\n        else {\n            spec = { type: 'range', range: range };\n        }\n    }\n    else\n        throw new Error(\"Unknown index type. Found \".concat(typeof indexSpec, \": \").concat(indexSpec));\n    var axisIndex = new AxisIndex(spec);\n    return { axisIndex: axisIndex, span: span };\n};\n/**\n * @param {Where} where\n * @returns {AxesIndex}\n */\nAxesIndex.prototype.parse = function (shape, where) {\n    /**@type {Array<GeneralIndexSpec|undefined>}*/\n    var _where = where == null ? [] : where;\n    var buffers = {\n        axisIndexes: /**@type {AxisIndex[]}*/ ([]),\n        apparentShape: /**@type {number[]}*/ ([]),\n        internalShape: /**@type {number[]}*/ ([]),\n    };\n    var readDir = 1;\n    var reversedAfter = { axisIndexes: NaN, apparentShape: NaN, internalShape: NaN };\n    var axis = 0, j = 0, remainingAxes = shape.length;\n    while (remainingAxes > 0) {\n        var axisWhere = _where[j];\n        _where[j] = undefined; // For ellipsis to avoid reading twice in opposite reading directions\n        j += readDir;\n        if (axisWhere == \"None\" || axisWhere === null) {\n            buffers.apparentShape.push(1);\n            continue;\n        }\n        else if (axisWhere == \"...\") {\n            if (readDir == -1)\n                throw new Error(\"Index can only have a single ellipsis ('...')\");\n            readDir = -1;\n            for (var key in reversedAfter)\n                reversedAfter[key] = buffers[key].length;\n            j = _where.length - 1;\n            axis = shape.length - 1;\n            continue;\n        }\n        var _a = AxisIndex.prototype.parse(axisWhere, shape[axis]), axisIndex = _a.axisIndex, span = _a.span;\n        // Advance the axis cursor span axes in readDir and compute the total size of consumed axes\n        remainingAxes -= span;\n        var refSize = 1;\n        for (var i = 0; i < span; i++) {\n            if (axis < 0 || axis >= shape.length)\n                throw new Error(\"Index spans over more dimensions than available\");\n            refSize *= shape[axis];\n            axis += readDir;\n        }\n        buffers.axisIndexes.push(axisIndex);\n        if (axisIndex.spec.type != \"number\")\n            buffers.apparentShape.push(axisIndex.size);\n        buffers.internalShape.push(refSize);\n    }\n    if (readDir == -1) { // reverse the right to left elements\n        for (var key in buffers)\n            buffers[key].splice(0, reversedAfter[key]).concat(buffers[key].reverse());\n    }\n    var axesIndex = new AxesIndex(buffers.apparentShape, buffers.internalShape, buffers.axisIndexes);\n    return axesIndex;\n};\n","\"use strict\";\n//@ts-check\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toJS = exports.fromJS = void 0;\nvar core_basic_1 = require(\"./core-basic\");\nfunction fromJS(arr) {\n    if ((0, core_basic_1.isarray)(arr))\n        return arr;\n    if (typeof arr === \"number\")\n        return (0, core_basic_1.new_NDArray)([arr], [], Number);\n    if (typeof arr === \"boolean\")\n        return (0, core_basic_1.new_NDArray)([arr ? 1 : 0], [], Boolean);\n    if (arr === core_basic_1._NDArray.prototype)\n        throw new Error(\"Programming error\");\n    if (!Array.isArray(arr))\n        throw new Error(\"Can't parse input of type \".concat(typeof arr, \": \").concat(arr));\n    var shape = [];\n    var root = arr;\n    while (Array.isArray(root)) {\n        shape.push(root.length);\n        root = root[0];\n        if (shape.length > 256)\n            throw new Error(\"Circular reference or excessive array depth\");\n    }\n    var dtype = typeof root === \"boolean\" ? Boolean : Number;\n    var flat = [];\n    var pushToFlat = function (arr, axis) {\n        var e_1, _a, e_2, _b;\n        // Check consistency\n        if (axis == shape.length - 1) {\n            try {\n                for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n                    var elem = arr_1_1.value;\n                    if (Array.isArray(elem))\n                        throw new Error(\"Inconsistent shape\");\n                    flat.push(elem);\n                    // Update dtype\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        else {\n            if (!Array.isArray(arr))\n                throw new Error(\"Inconsistent shape\");\n            try {\n                for (var arr_2 = __values(arr), arr_2_1 = arr_2.next(); !arr_2_1.done; arr_2_1 = arr_2.next()) {\n                    var sub = arr_2_1.value;\n                    if (sub.length != shape[axis + 1])\n                        throw new Error(\"Inconsistent shape: found sibling arrays of lengths \".concat(sub.length, \" and \").concat(shape[axis + 1]));\n                    pushToFlat(sub, axis + 1);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (arr_2_1 && !arr_2_1.done && (_b = arr_2.return)) _b.call(arr_2);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n    };\n    pushToFlat(arr, 0);\n    return (0, core_basic_1.new_NDArray)(flat, shape, dtype);\n}\nexports.fromJS = fromJS;\nfunction toJS(arr) {\n    if ((0, core_basic_1.isarray)(this))\n        return toJS;\n    if (arr === null || typeof arr == \"number\" || typeof arr == \"boolean\")\n        return arr;\n    if (Array.isArray(arr))\n        return arr.map(toJS);\n    if (!((0, core_basic_1.isarray)(arr)))\n        throw new Error(\"Expected MyArray. Got \".concat(typeof arr, \": \").concat(arr));\n    arr = (0, core_basic_1.number_collapse)(arr);\n    if (!((0, core_basic_1.isarray)(arr)))\n        return arr;\n    // let out = [], top;\n    // let q = /**@type {[MyArray, any][]}*/([[arr, out]])\n    // while (top = q.pop()) {\n    //   let [arr, out] = top;\n    //   if (arr.shape.length <= 1) {\n    //     out.push(...arr.flat);\n    //   } else {\n    //     for (let i = 0; i < arr.shape[0]; i++) {\n    //       let l = []\n    //       out.push(l);\n    //       q.push([arr.index(i), l]);\n    //     }\n    //   }\n    // }\n    // return out;\n    function recursiveReshape(flatArr, shapeArr) {\n        if (shapeArr.length === 0) {\n            return flatArr.shift();\n        }\n        var innerShape = shapeArr.slice(1);\n        var outerSize = shapeArr[0];\n        var innerArray = [];\n        for (var i = 0; i < outerSize; i++) {\n            innerArray.push(recursiveReshape(flatArr, innerShape));\n        }\n        return innerArray;\n    }\n    var out = recursiveReshape(__spreadArray([], __read(arr.flat), false), arr.shape);\n    return out;\n}\nexports.toJS = toJS;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.allclose = exports.isclose = exports.op_assign = exports.__make_assignment_operator = exports._assign_operation_toJS = exports.assign_operation = exports.op_unary = exports.op_binary = exports.__make_operator_special = exports.__make_operator = exports._broadcast_shapes = exports.binary_operation = void 0;\n//@ts-check\nvar indexes = require(\"./core-indexes\");\nvar elementwise = require(\"./core-elementwise\");\nvar core_basic_1 = require(\"./core-basic\");\nvar core_js_interface_1 = require(\"./core-js-interface\");\nfunction binary_operation(A, B, func, dtype, out) {\n    if (out === void 0) { out = null; }\n    if ((0, core_basic_1.isarray)(this))\n        return func.bind(core_basic_1._NDArray.prototype).apply(void 0, __spreadArray([this], __read(arguments), false));\n    // Find output shape and input broadcast shapes\n    A = (0, core_basic_1.asarray)(A);\n    B = (0, core_basic_1.asarray)(B);\n    var _a = __read(_broadcast_shapes(A.shape, B.shape), 3), shape = _a[0], shapeA = _a[1], shapeB = _a[2];\n    if (out == null)\n        out = (0, core_basic_1.new_from)(shape, function (_) { return undefined; }, dtype);\n    else if (!((0, core_basic_1.isarray)(out)))\n        throw new Error(\"Out must be of type \".concat(core_basic_1._NDArray, \". Got \").concat(typeof out));\n    // Iterate with broadcasted indices\n    var flatOut = [];\n    var shiftsA = (0, core_basic_1.shape_shifts)(shapeA);\n    var shiftsB = (0, core_basic_1.shape_shifts)(shapeB);\n    var flatA = A.flat;\n    var flatB = B.flat;\n    for (var i = 0; i < out.size; i++) {\n        var idxA = 0, idxB = 0, idx = i;\n        for (var axis = shape.length - 1; axis >= 0; axis--) {\n            idxA += shiftsA[axis] * (idx % shapeA[axis]);\n            idxB += shiftsB[axis] * (idx % shapeB[axis]);\n            idx = Math.floor(idx / shape[axis]);\n        }\n        flatOut.push(func(flatA[idxA], flatB[idxB]));\n    }\n    ;\n    out.flat = flatOut;\n    return (0, core_basic_1.number_collapse)(out);\n}\nexports.binary_operation = binary_operation;\nfunction _broadcast_shapes(shapeA, shapeB) {\n    var shape = [];\n    var maxDim = Math.max(shapeA.length, shapeB.length);\n    shapeA = __spreadArray(__spreadArray([], __read(Array.from({ length: maxDim - shapeA.length }, function () { return 1; })), false), __read(shapeA), false);\n    shapeB = __spreadArray(__spreadArray([], __read(Array.from({ length: maxDim - shapeB.length }, function () { return 1; })), false), __read(shapeB), false);\n    for (var axis = maxDim - 1; axis >= 0; axis--) {\n        var dim1 = shapeA[axis];\n        var dim2 = shapeB[axis];\n        if (dim1 !== 1 && dim2 !== 1 && dim1 !== dim2)\n            throw new Error(\"Can not broadcast axis \".concat(axis, \" with sizes \").concat(dim1, \" and \").concat(dim2));\n        shape.unshift(Math.max(dim1, dim2));\n    }\n    return [shape, shapeA, shapeB];\n}\nexports._broadcast_shapes = _broadcast_shapes;\nfunction __make_operator(dtype, func) {\n    function operator(A, B, out) {\n        if (out === void 0) { out = null; }\n        if ((0, core_basic_1.isarray)(this))\n            return operator.bind(core_basic_1._NDArray.prototype).apply(void 0, __spreadArray([this], __read(arguments), false));\n        return binary_operation(A, B, func, dtype, out);\n    }\n    ;\n    return /**@type {BinaryOperator}*/ (operator);\n}\nexports.__make_operator = __make_operator;\nfunction __make_operator_special(funcNum, funcBool) {\n    /** @param {NDArray?} out */\n    function operator(A, B, out) {\n        if (out === void 0) { out = null; }\n        if ((0, core_basic_1.isarray)(this))\n            return operator.bind(core_basic_1._NDArray.prototype).apply(void 0, __spreadArray([this], __read(arguments), false));\n        A = (0, core_basic_1.asarray)(A);\n        B = (0, core_basic_1.asarray)(B);\n        var dtype = A.dtype, func;\n        if (A.dtype != B.dtype)\n            console.warn(\"Warning: operating arrays of different dtypes. Using \".concat(dtype));\n        if (dtype == Boolean)\n            func = funcBool;\n        else\n            func = funcNum;\n        return binary_operation(A, B, func, dtype, out);\n    }\n    ;\n    return /**@type {BinaryOperator}*/ (operator);\n}\nexports.__make_operator_special = __make_operator_special;\nexports.op_binary = {\n    \"+\": __make_operator(Number, function (a, b) { return a + b; }),\n    \"-\": __make_operator(Number, function (a, b) { return a - b; }),\n    \"*\": __make_operator(Number, function (a, b) { return a * b; }),\n    \"/\": __make_operator(Number, function (a, b) { return a / b; }),\n    \"%\": __make_operator(Number, function (a, b) { return (a % b); }),\n    \"//\": __make_operator(Number, function (a, b) { return Math.floor(a / b); }),\n    \"**\": __make_operator(Number, function (a, b) { return Math.pow(a, b); }),\n    \"<\": __make_operator(Boolean, function (a, b) { return a < b; }),\n    \">\": __make_operator(Boolean, function (a, b) { return a > b; }),\n    \">=\": __make_operator(Boolean, function (a, b) { return a >= b; }),\n    \"<=\": __make_operator(Boolean, function (a, b) { return a <= b; }),\n    \"==\": __make_operator(Boolean, function (a, b) { return a == b; }),\n    \"!=\": __make_operator(Boolean, function (a, b) { return a != b; }),\n    \"|\": __make_operator_special(function (a, b) { return a | b; }, function (a, b) { return a || b; }),\n    \"&\": __make_operator_special(function (a, b) { return a & b; }, function (a, b) { return a && b; }),\n    \"^\": __make_operator(Number, function (a, b) { return a ^ b; }),\n    \"<<\": __make_operator(Number, function (a, b) { return a << b; }),\n    \">>\": __make_operator(Number, function (a, b) { return a >> b; }),\n    // Operators with custom ascii identifiers:\n    \"or\": __make_operator(Boolean, function (a, b) { return a || b; }),\n    \"and\": __make_operator(Boolean, function (a, b) { return a && b; }),\n    \"xor\": __make_operator(Boolean, function (a, b) { return (!a) != (!b); }),\n    \"max\": __make_operator(Number, function (a, b) { return Math.max(a, b); }),\n    \"min\": __make_operator(Number, function (a, b) { return Math.min(a, b); }),\n    // \"isclose\": ,\n};\nexports.op_binary[\"\"] = exports.op_binary[\"max\"];\nexports.op_binary[\"\"] = exports.op_binary[\"min\"];\nexports.op_binary[\"\"] = exports.op_binary[\"leq\"];\nexports.op_binary[\"\"] = exports.op_binary[\"geq\"];\nexports.op_binary[\"\"] = exports.op_binary[\"neq\"];\nexports.op_unary = {\n    // Unary operators:\n    \"~\": elementwise.bitwise_not,\n    \"not\": elementwise.logical_not,\n    \"+\": elementwise.__make_elementwise(function (x) { return x; }),\n    \"-\": elementwise.__make_elementwise(function (x) { return -x; }, Number),\n};\n/**\n * @param {NDArray} tgt\n * @param {ArrayOrConstant} src\n * @param {Index} where\n * */\nfunction assign_operation(tgt, src, where, func, dtype) {\n    var e_1, _a;\n    if (tgt['__warnAssignment']) {\n        console.warn(\"Warning: You are assigning on a copy that resulted from an advanced index on a source array.\\nIf this is intentional, use yourArray = source.withKwArgs({copy:true}).index(...yourIndex) to make explicit your awareness of the copy operation.\\nInstead, if you want to assign to the source array, use source.op('=', other) or source.op(['::3', -1, '...', [5,4]], '*=', other).\\n\");\n        delete tgt['__warnAssignment'];\n    }\n    if (!((0, core_basic_1.isarray)(tgt)))\n        return _assign_operation_toJS(/**@type {*}*/ (tgt), src, where, func, dtype);\n    if (!where) {\n        binary_operation(tgt, src, func, dtype, tgt);\n    }\n    else {\n        src = (0, core_basic_1.asarray)(src);\n        var indices = indexes.AxesIndex.prototype.parse(tgt.shape, where).indices;\n        var tmpTgt = void 0;\n        if (func == null) {\n            // Small optimization: unlike \"+=\", \"*=\", etc., for \"=\", we don't need to reed the target\n            func = function (a, b) { return b; };\n            tmpTgt = (0, core_basic_1.new_from)(indices.length, function () { return undefined; }, tgt.dtype);\n        }\n        else {\n            tmpTgt = (0, core_basic_1.asarray)(indices.map(function (i) { return tgt._flat[i]; }));\n        }\n        binary_operation(tmpTgt, (0, core_basic_1.ravel)(src), func, dtype, tmpTgt);\n        try {\n            for (var indices_1 = __values(indices), indices_1_1 = indices_1.next(); !indices_1_1.done; indices_1_1 = indices_1.next()) {\n                var i = indices_1_1.value;\n                tgt._flat[i] = tmpTgt._flat[i];\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (indices_1_1 && !indices_1_1.done && (_a = indices_1.return)) _a.call(indices_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n}\nexports.assign_operation = assign_operation;\n;\nfunction _assign_operation_toJS(tgtJS, src, where, func, dtype) {\n    if (!Array.isArray(tgtJS))\n        throw new Error(\"Can not assign to a non-array. Found \".concat(typeof tgtJS, \": \").concat(tgtJS));\n    console.warn('Assignment to JS array is experimental and slow.');\n    // Parse the whole array\n    var cpy = (0, core_basic_1.asarray)(tgtJS);\n    assign_operation(cpy, src, where, func, dtype);\n    // WARNING: Creates a copy. This is terrible for arr[2, 4, 3] = 5\n    var outJS = (0, core_js_interface_1.toJS)(cpy);\n    while (tgtJS.length)\n        tgtJS.pop();\n    // @ts-ignore\n    tgtJS.push.apply(tgtJS, __spreadArray([], __read(outJS), false));\n}\nexports._assign_operation_toJS = _assign_operation_toJS;\nfunction __make_assignment_operator(dtype, func) {\n    function operator() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if ((0, core_basic_1.isarray)(this))\n            return operator.bind(core_basic_1._NDArray.prototype).apply(void 0, __spreadArray([this], __read(args), false));\n        if (args.length < 2)\n            throw new Error(\"Not enough arguments for assignment operator\");\n        if (args.length > 3)\n            throw new Error(\"Too many arguments for assignment operator\");\n        var tgt = args[0];\n        var src = args[args.length == 3 ? 2 : 1];\n        var where = args.length == 2 ? args[1] : null;\n        return assign_operation(tgt, src, where, func, dtype);\n    }\n    return operator;\n}\nexports.__make_assignment_operator = __make_assignment_operator;\nexports.op_assign = {\n    \"=\": __make_assignment_operator(Number, function (a, b) { return b; }),\n    \"+=\": __make_assignment_operator(Number, function (a, b) { return a + b; }),\n    \"-=\": __make_assignment_operator(Number, function (a, b) { return a - b; }),\n    \"*=\": __make_assignment_operator(Number, function (a, b) { return a * b; }),\n    \"/=\": __make_assignment_operator(Number, function (a, b) { return a / b; }),\n    \"%=\": __make_assignment_operator(Number, function (a, b) { return (a % b); }),\n    \"//=\": __make_assignment_operator(Number, function (a, b) { return Math.floor(a / b); }),\n    \"**=\": __make_assignment_operator(Number, function (a, b) { return Math.pow(a, b); }),\n    \"|=\": __make_assignment_operator(Number, function (a, b) { return a | b; }),\n    \"&=\": __make_assignment_operator(Number, function (a, b) { return a & b; }),\n    \"^=\": __make_assignment_operator(Number, function (a, b) { return a ^ b; }),\n    \"<<=\": __make_assignment_operator(Number, function (a, b) { return a << b; }),\n    \">>=\": __make_assignment_operator(Number, function (a, b) { return a >> b; }),\n    // Operators with custom ascii identifiers:\n    \"max=\": __make_assignment_operator(Number, function (a, b) { return Math.max(a, b); }),\n    \"min=\": __make_assignment_operator(Number, function (a, b) { return Math.min(a, b); }),\n    \"or=\": __make_assignment_operator(Boolean, function (a, b) { return a || b; }),\n    \"and=\": __make_assignment_operator(Boolean, function (a, b) { return a && b; }),\n};\nexports.op_assign[\"=\"] = exports.op_assign[\"max=\"];\nexports.op_assign[\"=\"] = exports.op_assign[\"min=\"];\n// op[\"\"] = op[MyArray.prototype.isclose,\n// ====================================\nfunction isclose(A, B, rtol, atol, equal_nan) {\n    var _a;\n    if (rtol === void 0) { rtol = 1.e-5; }\n    if (atol === void 0) { atol = 1.e-8; }\n    if (equal_nan === void 0) { equal_nan = false; }\n    (_a = Object.assign({ rtol: rtol, atol: atol, equal_nan: equal_nan }, this), rtol = _a.rtol, atol = _a.atol, equal_nan = _a.equal_nan);\n    var func = function (a, b) {\n        if (Number.isFinite(a) && Number.isFinite(b))\n            return Math.abs(a - b) <= atol + rtol * b;\n        return (a == b) || (equal_nan && Number.isNaN(a) && Number.isNaN(b));\n    };\n    return binary_operation(A, B, func, Boolean);\n}\nexports.isclose = isclose;\nfunction allclose(A, B, rtol, atol, equal_nan) {\n    var _a;\n    if (rtol === void 0) { rtol = 1.e-5; }\n    if (atol === void 0) { atol = 1.e-8; }\n    if (equal_nan === void 0) { equal_nan = false; }\n    (_a = Object.assign({ rtol: rtol, atol: atol, equal_nan: equal_nan }, this), rtol = _a.rtol, atol = _a.atol, equal_nan = _a.equal_nan);\n    // Equivalent to all(isclose(A, B, rtol, atol, equal_nan)), but shortcutting if false \n    var func = function (a, b) {\n        if (Number.isFinite(a) && Number.isFinite(b))\n            return Math.abs(a - b) <= atol + rtol * b;\n        return (a == b) || (equal_nan && Number.isNaN(a) && Number.isNaN(b));\n    };\n    var different = new Error('');\n    var wrapper = function (a, b) {\n        if (!func(a, b))\n            throw different;\n        return 0;\n    };\n    try {\n        binary_operation(A, B, wrapper, Number);\n    }\n    catch (err) {\n        if (err === different)\n            return false;\n        else\n            throw err;\n    }\n    return true;\n}\nexports.allclose = allclose;\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.humanReadable = void 0;\nvar core_elementwise_1 = require(\"./core-elementwise\");\nvar core_js_interface_1 = require(\"./core-js-interface\");\nfunction humanReadable(arr) {\n    if (arr.shape.length == 0)\n        return arr.flat[0].toString();\n    var budgets = arr.shape.map(function (_) { return 1; });\n    var lBudget = 30;\n    for (var i = 0; i < arr.shape.length; i++) {\n        var before = budgets[i];\n        budgets[i] = Math.min(arr.shape[i], lBudget);\n        if (budgets[i] > before)\n            lBudget = Math.floor(lBudget / (budgets[i] - before));\n    }\n    var rBudget = 30;\n    for (var i = arr.shape.length - 1; i >= 0; i--) {\n        var before = budgets[i];\n        budgets[i] = Math.min(arr.shape[i], rBudget);\n        if (budgets[i] > before)\n            rBudget = Math.floor(rBudget / (budgets[i] - before));\n    }\n    function simplify(list, depth) {\n        if (depth === void 0) { depth = 0; }\n        if (depth == arr.shape.length)\n            return list;\n        if (2 * budgets[depth] >= list.length) {\n            return list.map(function (l) { return simplify(l, depth + 1); });\n        }\n        var left = list.slice(0, budgets[depth]).map(function (l) { return simplify(l, depth + 1); });\n        var right = list.slice(-budgets[depth]).map(function (l) { return simplify(l, depth + 1); });\n        return __spreadArray(__spreadArray(__spreadArray([], __read(left), false), ['...'], false), __read(right), false);\n    }\n    var rLimit = arr.shape.length - 1;\n    while (rLimit > 0 && arr.shape[rLimit] == 1) {\n        rLimit--;\n    }\n    if (arr.dtype == Number)\n        arr = (0, core_elementwise_1.round)(arr, 2);\n    var list = (0, core_js_interface_1.toJS)(arr);\n    function str(list, indent, depth) {\n        if (indent === void 0) { indent = 0; }\n        if (depth === void 0) { depth = 0; }\n        if (list == '...' || depth >= arr.shape.length)\n            return list;\n        if (depth == arr.shape.length - 1)\n            return \"[\".concat(list.join(', '), \"]\");\n        var sep = depth >= rLimit ? ' ' : '\\n' + ' '.repeat(indent + 1);\n        var out = [];\n        for (var i = 0; i < list.length; i++) {\n            var s = str(list[i], indent + 1, depth + 1) + ',';\n            out.push(i < list.length - 1 ? s : s.slice(0, -1));\n        }\n        return \"[\".concat(out.join(sep), \"]\");\n    }\n    var prefix = 'np';\n    var suffix = \", shape=(\".concat(arr.shape, \"), dtype=\").concat(arr.dtype.name);\n    var out = str(simplify(list), 1 + prefix.length);\n    function alignColumns(inputString, delimiter) {\n        var e_1, _a, e_2, _b;\n        if (delimiter === void 0) { delimiter = ','; }\n        // Split the input string into rows\n        var rows = inputString.split('\\n');\n        // Initialize an array to store the maximum width of each column\n        var columnWidths = Array(rows[0].split(delimiter).length).fill(0);\n        try {\n            // Find the maximum width for each column\n            for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {\n                var row = rows_1_1.value;\n                var columns = row.split(delimiter);\n                for (var i = 0; i < columns.length; i++) {\n                    columnWidths[i] = Math.max(columnWidths[i], columns[i].trim().length);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return)) _a.call(rows_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Build the formatted outputs\n        var formattedString = '';\n        var _loop_1 = function (row) {\n            var columns = row.split(delimiter);\n            columns = columns.map(function (s, i) { return i == columns.length - 1 ? s : s + delimiter; });\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i].trim();\n                formattedString += column.padStart(columnWidths[i] + 1).padEnd(columnWidths[i] + 2); // Add 1 for padding\n            }\n            formattedString += '\\n';\n        };\n        try {\n            for (var rows_2 = __values(rows), rows_2_1 = rows_2.next(); !rows_2_1.done; rows_2_1 = rows_2.next()) {\n                var row = rows_2_1.value;\n                _loop_1(row);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (rows_2_1 && !rows_2_1.done && (_b = rows_2.return)) _b.call(rows_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return formattedString;\n    }\n    out = out.replace(/.*?(\\n|$)/g, function (match) {\n        // Split with a newline every 0 characters, but only after a comma,\n        return match.replace(/(.{60,}?,)/g, '$1\\n');\n    }).replace(/\\n+/g, '\\n');\n    out = alignColumns(\"\".concat(prefix, \"(\").concat(out)).trim();\n    out = \"\".concat(out).concat(suffix, \")\");\n    return out;\n}\nexports.humanReadable = humanReadable;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reducers = exports.reduce = void 0;\n//@ts-check\nvar core_basic_1 = require(\"./core-basic\");\nvar core_operators_1 = require(\"./core-operators\");\n// ==============================\n//       Reducing functions\n// ==============================\nfunction reduce(arr, axis, keepdims, reducer, dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    keepdims = (0, core_basic_1.as_boolean)(keepdims);\n    // console.log({ arr })\n    arr = (0, core_basic_1.asarray)(arr);\n    if (axis == null)\n        return reducer(arr.flat);\n    if (axis < 0)\n        axis = arr.shape.length - 1;\n    var m = arr.shape[axis];\n    var shift = (0, core_basic_1.shape_shifts)(arr.shape)[axis];\n    var groups = Array.from({ length: m }, function (_) { /**@type {number[]}*/ return ([]); });\n    arr.flat.forEach(function (value, i) { return groups[(Math.floor(i / shift)) % m].push(value); });\n    // Transpose it:\n    var nCols = arr.size / m;\n    var groupsT = [];\n    for (var j = 0; j < nCols; j++) {\n        var newRow = [];\n        for (var i = 0; i < m; i++)\n            newRow.push(groups[i][j]);\n        groupsT.push(newRow);\n    }\n    var flat = groupsT.map(reducer);\n    var shape = __spreadArray([], __read(arr.shape), false);\n    if (keepdims)\n        shape[axis] = 1;\n    else\n        shape = shape.filter(function (_, i) { return i != axis; });\n    var out = (0, core_basic_1.new_NDArray)(flat, shape, dtype);\n    return (0, core_basic_1.number_collapse)(out);\n}\nexports.reduce = reduce;\n;\nfunction __make_reducer(dtype, reducer) {\n    /**\n     * @param {Array} arr\n    * @param {AxisArg} axis\n     * @param {boolean} keepdims\n     */\n    return function (arr, axis, keepdims) {\n        var _a;\n        if (axis === void 0) { axis = null; }\n        if (keepdims === void 0) { keepdims = false; }\n        (_a = Object.assign({ axis: axis, keepdims: keepdims }, this), axis = _a.axis, keepdims = _a.keepdims);\n        return reduce(arr, axis, keepdims, reducer, dtype);\n    };\n}\nexports.reducers = {\n    sum: __make_reducer(Number, function (arr) { return arr.reduce(function (a, b) { return a + b; }, 0); }),\n    product: __make_reducer(Number, function (arr) { return arr.reduce(function (a, b) { return a * b; }, 1); }),\n    any: __make_reducer(Boolean, function (arr) {\n        var e_1, _a;\n        try {\n            for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n                var x = arr_1_1.value;\n                if (x)\n                    return true;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return false;\n    }),\n    all: __make_reducer(Boolean, function (arr) {\n        var e_2, _a;\n        try {\n            for (var arr_2 = __values(arr), arr_2_1 = arr_2.next(); !arr_2_1.done; arr_2_1 = arr_2.next()) {\n                var x = arr_2_1.value;\n                if (!x)\n                    return false;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (arr_2_1 && !arr_2_1.done && (_a = arr_2.return)) _a.call(arr_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return true;\n    }),\n    max: __make_reducer(Number, function (arr) { return Math.max.apply(Math, __spreadArray([], __read(arr), false)); }),\n    min: __make_reducer(Number, function (arr) { return Math.min.apply(Math, __spreadArray([], __read(arr), false)); }),\n    argmax: __make_reducer(Number, function (arr) { return arr.indexOf(Math.max.apply(Math, __spreadArray([], __read(arr), false))); }),\n    argmin: __make_reducer(Number, function (arr) { return arr.indexOf(Math.min.apply(Math, __spreadArray([], __read(arr), false))); }),\n    mean: __make_reducer(Number, function (arr) { return arr.reduce(function (a, b) { return a + b; }, 0) / arr.length; }),\n    var: function (arr, axis, keepdims) {\n        var _a;\n        if (axis === void 0) { axis = null; }\n        if (keepdims === void 0) { keepdims = false; }\n        (_a = Object.assign({ axis: axis, keepdims: keepdims }, this), axis = _a.axis, keepdims = _a.keepdims);\n        var arrMean = exports.reducers.mean.bind({ axis: axis, keepdims: true })(arr);\n        arr = core_operators_1.op_binary[\"-\"](arr, arrMean);\n        arr = core_operators_1.op_binary[\"*\"](arr, arr);\n        return exports.reducers.mean.bind({ axis: axis, keepdims: keepdims })(arr);\n    },\n    std: function (arr, axis, keepdims) {\n        var _a;\n        if (axis === void 0) { axis = null; }\n        if (keepdims === void 0) { keepdims = false; }\n        (_a = Object.assign({ axis: axis, keepdims: keepdims }, this), axis = _a.axis, keepdims = _a.keepdims);\n        var variance = exports.reducers.var.bind({ axis: axis, keepdims: keepdims })(arr);\n        return core_operators_1.op_binary[\"**\"](variance, 0.5);\n    },\n};\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stack = exports.concatenate = exports.swapAxes = exports.transpose = exports.sort = exports.apply_along_axis = void 0;\nvar core_basic_1 = require(\"./core-basic\");\nvar core_js_interface_1 = require(\"./core-js-interface\");\nvar js_utils_1 = require(\"../js-utils\");\nfunction apply_along_axis(arr, axis, transform, dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    arr = (0, core_basic_1.asarray)(arr);\n    if (axis == null)\n        return transform(arr.flat);\n    var nDims = arr.shape.length;\n    if (axis < 0)\n        axis = nDims + axis;\n    if (axis !== nDims - 1) {\n        // Transpose to end, apply, and transpose back:\n        var tmp_1 = swapAxes(arr, axis, -1);\n        var out_1 = apply_along_axis(tmp_1, -1, transform, dtype);\n        return swapAxes(out_1, axis, -1);\n    }\n    var m = arr.shape[axis];\n    var shift = (0, core_basic_1.shape_shifts)(arr.shape)[axis];\n    var groups = Array.from({ length: m }, function (_) { /**@type {number[]}*/ return ([]); });\n    arr.flat.forEach(function (value, i) { return groups[(Math.floor(i / shift)) % m].push(value); });\n    // Transpose it:\n    var nCols = arr.size / m;\n    var groupsT = [];\n    for (var j = 0; j < nCols; j++) {\n        var newRow = [];\n        for (var i = 0; i < m; i++)\n            newRow.push(groups[i][j]);\n        groupsT.push(newRow);\n    }\n    var data = groupsT.map(transform);\n    var tmp = (0, core_js_interface_1.fromJS)(data);\n    var shape = __spreadArray(__spreadArray(__spreadArray([], __read(arr.shape.slice(0, axis)), false), __read(tmp.shape.slice(1)), false), __read(arr.shape.slice(axis + 1)), false);\n    var out = (0, core_basic_1.new_NDArray)(tmp.flat, shape, dtype);\n    return (0, core_basic_1.number_collapse)(out);\n}\nexports.apply_along_axis = apply_along_axis;\nfunction sort(A, axis) {\n    if (axis === void 0) { axis = -1; }\n    (axis = Object.assign({ axis: axis }, this).axis);\n    return apply_along_axis(A, axis, function (arr) {\n        var cpy = __spreadArray([], __read(arr), false);\n        cpy.sort(function (a, b) { return a - b; });\n        return cpy;\n    }, A.dtype);\n}\nexports.sort = sort;\nfunction transpose(arr, axes) {\n    if (axes === void 0) { axes = null; }\n    (axes = Object.assign({ axes: axes }, this).axes);\n    var nDims = arr.shape.length;\n    if (axes == null)\n        return transpose(arr, Array.from({ length: nDims }, function (_, i) { return i; }).reverse());\n    if (axes.length !== nDims)\n        throw new Error(\"Axes must have length \".concat(nDims, \". Found \").concat(axes.length));\n    var inv = Array.from({ length: nDims }, function () { return -1; });\n    for (var i = 0; i < nDims; i++) {\n        if (axes[i] < 0 || axes[i] >= nDims)\n            throw new Error(\"Expected axis in [0..\".concat(nDims, \"). Found \").concat(axes[i]));\n        inv[axes[i]] = i;\n    }\n    for (var i = 0; i < nDims; i++)\n        if (inv[i] == -1)\n            throw new Error(\"Axes must contain all dimensions. [\".concat(axes.join(\", \"), \"] is missing \").concat(i, \".\"));\n    var srcShifts = (0, core_basic_1.shape_shifts)(arr.shape);\n    var shape = axes.map(function (j) { return arr.shape[j]; });\n    var shifts = axes.map(function (j) { return srcShifts[j]; });\n    // Copied from slice:\n    var indices = [];\n    var tuple = new Array(shape.length).fill(0);\n    var cursor = 0;\n    while (true) {\n        if (!isFinite(cursor))\n            throw new Error(\"Programming error\");\n        indices.push(cursor);\n        var axis = nDims - 1;\n        while (axis >= 0) {\n            tuple[axis]++;\n            cursor += shifts[axis];\n            if (tuple[axis] < shape[axis])\n                break;\n            // Overflow\n            cursor -= shifts[axis] * shape[axis];\n            tuple[axis] = 0;\n            axis--;\n        }\n        ;\n        if (axis < 0)\n            break;\n    }\n    // Now, just copy the data:\n    var src = arr.flat;\n    return (0, core_basic_1.new_NDArray)(indices.map(function (i) { return src[i]; }), shape, arr.dtype);\n}\nexports.transpose = transpose;\nfunction swapAxes(arr, axisA, axisB) {\n    arr = (0, core_basic_1.asarray)(arr);\n    var nDims = arr.shape.length;\n    if (axisA < 0)\n        axisA = nDims + axisA;\n    if (axisB < 0)\n        axisB = nDims + axisB;\n    var perm = Array.from({ length: nDims }, function (_, i) { return i; });\n    perm[axisA] = axisB;\n    perm[axisB] = axisA;\n    return transpose(arr, perm);\n}\nexports.swapAxes = swapAxes;\nfunction concatenate(arrays, axis) {\n    var e_1, _a;\n    if (axis === void 0) { axis = null; }\n    (axis = Object.assign({ axis: axis }, this).axis);\n    if ((0, core_basic_1.isarray)(arrays))\n        arrays = __spreadArray([], __read(arrays), false);\n    arrays = arrays.map(core_basic_1.asarray);\n    if (axis == null) {\n        arrays = arrays.map(function (arr) { return (0, core_basic_1.ravel)(arr); });\n        axis = 0;\n    }\n    if (!arrays.length)\n        throw new Error(\"Expected at least two arrays\");\n    var nDims = arrays[0].shape.length;\n    if (axis < 0)\n        axis = nDims + axis;\n    var shapeIn = __spreadArray([], __read(arrays[0].shape), false);\n    var flat = [];\n    var shape = shapeIn.map(function (_, i) { return i == 0 ? 0 : shapeIn[i == axis ? 0 : i]; });\n    try {\n        for (var arrays_1 = __values(arrays), arrays_1_1 = arrays_1.next(); !arrays_1_1.done; arrays_1_1 = arrays_1.next()) {\n            var arr = arrays_1_1.value;\n            if (!(0, js_utils_1.allEq)(arr.shape.filter(function (_, i) { return i != axis; }), shapeIn.filter(function (_, i) { return i != axis; })))\n                throw new Error(\"Inconsistent input shape \".concat(shapeIn, \" with respect to \").concat(arr.shape.map(function (v, i) { return i == axis ? '?' : v; })));\n            shape[0] += arr.shape[axis];\n            arr = axis == 0 ? arr : swapAxes(arr, axis, 0);\n            flat.push.apply(flat, __spreadArray([], __read(arr.flat), false));\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (arrays_1_1 && !arrays_1_1.done && (_a = arrays_1.return)) _a.call(arrays_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // TO DO: infer or expect dtype here:\n    var out = (0, core_basic_1.new_NDArray)(flat, shape, arrays[0].dtype);\n    if (axis == 0)\n        return out;\n    else\n        return swapAxes(out, axis, 0);\n}\nexports.concatenate = concatenate;\nfunction stack(arrays, axis) {\n    var e_2, _a;\n    if (axis === void 0) { axis = 0; }\n    (axis = Object.assign({ axis: axis }, this).axis);\n    if ((0, core_basic_1.isarray)(arrays))\n        arrays = __spreadArray([], __read(arrays), false);\n    if (!Array.isArray(arrays))\n        throw new Error(\"Expected list of arrays. Found \".concat(typeof arrays));\n    arrays = arrays.map(core_basic_1.asarray);\n    if (!arrays.length)\n        throw new Error(\"Expected at least two arrays\");\n    var shapeIn = __spreadArray([], __read(arrays[0].shape), false);\n    if (axis < 0)\n        axis = shapeIn.length + 1 + axis;\n    var shapeBroadcast = __spreadArray(__spreadArray(__spreadArray([], __read(shapeIn.slice(0, axis)), false), [1], false), __read(shapeIn.slice(axis)), false);\n    console.log({ shapeBroadcast: shapeBroadcast });\n    var bArrays = [];\n    try {\n        for (var arrays_2 = __values(arrays), arrays_2_1 = arrays_2.next(); !arrays_2_1.done; arrays_2_1 = arrays_2.next()) {\n            var arr = arrays_2_1.value;\n            if (!(0, js_utils_1.allEq)(arr.shape, shapeIn))\n                throw new Error(\"Inconsistent input shape \".concat(arr.shape, \" with respect to \").concat(arr.shape));\n            bArrays.push((0, core_basic_1.reshape)(arr, shapeBroadcast));\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (arrays_2_1 && !arrays_2_1.done && (_a = arrays_2.return)) _a.call(arrays_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return concatenate(bArrays, axis);\n}\nexports.stack = stack;\n","\"use strict\";\n//@ts-check\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.modules = void 0;\n// Import core-globals first!\nrequire(\"./-core-globals\");\nvar basic = require(\"./core-basic\");\nvar indexes = require(\"./core-indexes\");\nvar jsInterface = require(\"./core-js-interface\");\nvar elementwise = require(\"./core-elementwise\");\nvar print = require(\"./core-print\");\nvar reduce = require(\"./core-reduce\");\nvar operators = require(\"./core-operators\");\nvar transform = require(\"./core-transform\");\nexports.modules = {\n    basic: basic,\n    jsInterface: jsInterface,\n    indexes: indexes,\n    elementwise: elementwise,\n    print: print,\n    reduce: reduce,\n    operators: operators,\n    transform: transform,\n};\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NDArray = /** @class */ (function () {\n    function NDArray(flat, shape, dtype) {\n        if (dtype === void 0) { dtype = Number; }\n        this.shape = shape; // invariant: immutable\n        this._flat = flat;\n        this.dtype = dtype;\n        this._simpleIndexes = null;\n    }\n    Object.defineProperty(NDArray.prototype, \"size\", {\n        get: function () {\n            return this._simpleIndexes == null ? this._flat.length : this._simpleIndexes.size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NDArray.prototype, \"flat\", {\n        get: function () {\n            var _this = this;\n            if (this._simpleIndexes == null)\n                return this._flat;\n            var indices = this._simpleIndexes.indices;\n            return indices.map(function (i) { return _this._flat[i]; });\n        },\n        set: function (list) {\n            if (list.length != this.size)\n                throw new Error(\"Length mismatch. Can't write \".concat(list.length, \" values into \").concat(this.size, \" available positions.\"));\n            var n = this.size;\n            if (this._simpleIndexes == null) {\n                for (var i = 0; i < n; i++)\n                    this._flat[i] = list[i];\n            }\n            else {\n                var indices = this._simpleIndexes.indices;\n                for (var i = 0; i < n; i++)\n                    this._flat[indices[i]] = list[i];\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NDArray.prototype, \"T\", {\n        get: function () {\n            return this.transpose();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NDArray.prototype.__popKwArgs = function () {\n        var out = this['__kwArgs'];\n        if (out === undefined)\n            return {};\n        delete this['__kwArgs'];\n        return out;\n    };\n    /** @param {Object<string, any>} kwArgs */\n    NDArray.prototype.withKwArgs = function (kwArgs) {\n        this['__kwArgs'] = kwArgs;\n        return this;\n    };\n    NDArray.prototype[Symbol.iterator] = function () {\n        var i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    i = 0;\n                    _a.label = 1;\n                case 1:\n                    if (!(i < this.shape[0])) return [3 /*break*/, 4];\n                    return [4 /*yield*/, this.index(i)];\n                case 2:\n                    _a.sent();\n                    _a.label = 3;\n                case 3:\n                    i++;\n                    return [3 /*break*/, 1];\n                case 4: return [2 /*return*/];\n            }\n        });\n    };\n    Object.defineProperty(NDArray.prototype, \"length\", {\n        get: function () {\n            return this.shape[0] || 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return NDArray;\n}());\nvar globals_1 = require(\"./globals\");\nglobals_1.GLOBALS.NDArray = NDArray;\nvar core_modules_1 = require(\"./core-modules\");\nNDArray.prototype.modules = core_modules_1.modules;\n// ==============================\n//    Basic methods\n// ==============================\nvar basic = core_modules_1.modules.basic;\nNDArray.prototype.reshape = function (shape) {\n    var more_shape = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        more_shape[_i - 1] = arguments[_i];\n    }\n    return basic.reshape.apply(basic, __spreadArray([this, shape], __read(more_shape), false));\n};\nNDArray.prototype.ravel = function () {\n    return basic.ravel(this);\n};\nNDArray.prototype.copy = function () {\n    return basic.copy(this);\n};\n// ==============================\n//    Indexing\n// ==============================\nNDArray.prototype.index = function () {\n    var where = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        where[_i] = arguments[_i];\n    }\n    return core_modules_1.modules.indexes.index(this, where);\n};\n// ==============================\n//    Printing\n// ==============================\nNDArray.prototype.toString = function () {\n    return core_modules_1.modules.print.humanReadable(this);\n};\n// ==============================\n//    Reduce\n// ==============================\nfunction reduceDecorator(func) {\n    return function (axis, keepdims) {\n        var _a;\n        if (axis === void 0) { axis = null; }\n        if (keepdims === void 0) { keepdims = false; }\n        (_a = Object.assign({ axis: axis, keepdims: keepdims }, this.__popKwArgs()), axis = _a.axis, keepdims = _a.keepdims);\n        return func(this, axis, keepdims);\n    };\n}\nNDArray.prototype.sum = reduceDecorator(core_modules_1.modules.reduce.reducers.sum);\nNDArray.prototype.product = reduceDecorator(core_modules_1.modules.reduce.reducers.product);\nNDArray.prototype.any = reduceDecorator(core_modules_1.modules.reduce.reducers.any);\nNDArray.prototype.all = reduceDecorator(core_modules_1.modules.reduce.reducers.all);\nNDArray.prototype.max = reduceDecorator(core_modules_1.modules.reduce.reducers.max);\nNDArray.prototype.min = reduceDecorator(core_modules_1.modules.reduce.reducers.min);\nNDArray.prototype.argmax = reduceDecorator(core_modules_1.modules.reduce.reducers.argmax);\nNDArray.prototype.argmin = reduceDecorator(core_modules_1.modules.reduce.reducers.argmin);\nNDArray.prototype.mean = reduceDecorator(core_modules_1.modules.reduce.reducers.mean);\nNDArray.prototype.var = reduceDecorator(core_modules_1.modules.reduce.reducers.var);\nNDArray.prototype.std = reduceDecorator(core_modules_1.modules.reduce.reducers.std);\n// ==============================\n//       Operators: Binary operations, assignment operations and unary boolean_not\n// ==============================\nNDArray.prototype._binary_operation = core_modules_1.modules.operators.binary_operation;\n/**\n * @param {import(\"./core-operators\").BinaryOperator} func\n * @returns {import(\"./core-operators\").SelfBinaryOperator}\n */\nfunction binaryOpDecorator(func) {\n    return function (other, out) {\n        if (out === void 0) { out = null; }\n        (out = Object.assign({ out: out }, this.__popKwArgs()).out);\n        return func(this, other, out);\n    };\n}\nNDArray.prototype.add = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"+\"]);\nNDArray.prototype.subtract = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"-\"]);\nNDArray.prototype.multiply = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"*\"]);\nNDArray.prototype.divide = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"/\"]);\nNDArray.prototype.mod = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"%\"]);\nNDArray.prototype.divide_int = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"//\"]);\nNDArray.prototype.pow = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"**\"]);\nNDArray.prototype.maximum = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"\"]);\nNDArray.prototype.minimum = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"\"]);\nNDArray.prototype.bitwise_or = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"|\"]);\nNDArray.prototype.bitwise_and = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"&\"]);\nNDArray.prototype.bitwise_or = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"^\"]);\nNDArray.prototype.bitwise_shift_right = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"<<\"]);\nNDArray.prototype.bitwise_shift_right = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\">>\"]);\nNDArray.prototype.logical_or = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"or\"]);\nNDArray.prototype.logical_and = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"and\"]);\nNDArray.prototype.logical_xor = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"xor\"]);\nNDArray.prototype.greater = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\">\"]);\nNDArray.prototype.less = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"<\"]);\nNDArray.prototype.greater_equal = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\">=\"]);\nNDArray.prototype.less_equal = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"<=\"]);\nNDArray.prototype.equal = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"==\"]);\nNDArray.prototype.not_equal = binaryOpDecorator(core_modules_1.modules.operators.op_binary[\"!=\"]);\nfunction unaryOpDecorator(func) {\n    return function (out) {\n        if (out === void 0) { out = null; }\n        (out = Object.assign({ out: out }, this.__popKwArgs()).out);\n        return func(this, out);\n    };\n}\n// Unary operations: only boolean_not. Positive is useless and negative is almost useless\nNDArray.prototype.bitwise_or = unaryOpDecorator(core_modules_1.modules.operators.op_unary[\"~\"]);\nNDArray.prototype.logical_or = unaryOpDecorator(core_modules_1.modules.operators.op_unary[\"not\"]);\nNDArray.prototype.isclose = core_modules_1.modules.operators.isclose;\nNDArray.prototype.allclose = core_modules_1.modules.operators.allclose;\nfunction assignOpDecorator(func) {\n    //@ts-ignore\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return func.apply(void 0, __spreadArray([this], __read(args), false));\n    };\n}\nNDArray.prototype.assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"=\"]);\nNDArray.prototype.add_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"+=\"]);\nNDArray.prototype.subtract_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"-=\"]);\nNDArray.prototype.multiply_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"*=\"]);\nNDArray.prototype.divide_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"/=\"]);\nNDArray.prototype.mod_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"%=\"]);\nNDArray.prototype.divide_int_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"//=\"]);\nNDArray.prototype.pow_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"**=\"]);\nNDArray.prototype.maximum_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"=\"]);\nNDArray.prototype.minimum_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"=\"]);\nNDArray.prototype.bitwise_or_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"|=\"]);\nNDArray.prototype.bitwise_and_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"&=\"]);\nNDArray.prototype.bitwise_shift_left_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"<<=\"]);\nNDArray.prototype.bitwise_shift_right_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\">>=\"]);\nNDArray.prototype.logical_or_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"or=\"]);\nNDArray.prototype.logical_and_assign = assignOpDecorator(core_modules_1.modules.operators.op_assign[\"and=\"]);\n// ==============================\n//    array instantiation and reshaping\n// ==============================\nNDArray.prototype.JS = function () {\n    return core_modules_1.modules.jsInterface.toJS(this);\n};\nNDArray.prototype.fromJS = function (A) {\n    return core_modules_1.modules.jsInterface.fromJS(A);\n};\n// ==============================\n//    elementwise methods\n// ==============================\nNDArray.prototype.round = function (decimals) {\n    if (decimals === void 0) { decimals = 0; }\n    (decimals = Object.assign({ decimals: decimals }, this.__popKwArgs()).decimals);\n    return core_modules_1.modules.elementwise.round(this, decimals);\n};\n// ==============================\n//    transform methods\n// ==============================\n/** @param {null|number[]} axes */\nNDArray.prototype.transpose = function (axes) {\n    if (axes === void 0) { axes = null; }\n    (axes = Object.assign({ axes: axes }, this.__popKwArgs()).axes);\n    return core_modules_1.modules.transform.transpose(this, axes);\n};\nNDArray.prototype.sort = function (axis) {\n    if (axis === void 0) { axis = -1; }\n    (axis = Object.assign({ axis: axis }, this.__popKwArgs()).axis);\n    core_modules_1.modules.transform.sort(this, axis);\n    return null;\n};\n//=============================\n/** @typedef {\"+\" | \"-\" | \"*\" | \"/\" | \"%\" | \"//\" | \"**\" | \"<\" | \">\" | \">=\" | \"<=\" | \"==\" | \"!=\" | \" | \" | \"&\" | \"^\" | \"<<\" | \">>\" | \"or\" | \"and\" | \"xor\" | \"max\" | \"min\"} BinaryOpSymbol */\n/** @typedef {\"=\" | \"+=\" | \"-=\" | \"*=\" | \"/=\" | \"%=\" | \"//=\" | \"**=\" | \"|=\" | \"&=\" | \"^=\" | \"<<=\" | \">>=\" | \"max=\" | \"min=\" | \"or=\" | \"and=\"} AssignmentOpSymbol */\n/** @typedef {\"~\" | \"not\" | \"-\"} UnaryOpSymbol */\n/** @typedef {import(\"./core-modules/core-indexes\").Where} Where */\n/**\n * @type {{():NDArray; (where:Where):ArrayOrConstant; (where:Where, op:AssignmentOpSymbol, B:ArrayOrConstant):NDArray; (op:AssignmentOpSymbol, B:ArrayOrConstant):NDArray; ( op:BinaryOpSymbol, B:ArrayOrConstant):NDArray; (UnaryOpSymbol):NDArray; }}  */\nNDArray.prototype.op = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (!args.length)\n        return this;\n    if (typeof args[0] == \"string\") {\n        var symbol_1 = args[0];\n        if (args.length == 1) {\n            var func_1 = core_modules_1.modules.operators.op_unary[symbol_1];\n            if (!func_1)\n                throw new Error(\"Unknown unary operator \\\"\".concat(symbol_1, \"\\\". Options:\").concat(__spreadArray([], __read(Object.keys(core_modules_1.modules.operators.op_unary)), false)));\n            return func_1(this, symbol_1);\n        }\n        if (args.length > 2)\n            throw new Error(\"Too many arguments provided: \".concat(__spreadArray([], __read(args), false)));\n        var other_1 = args[1];\n        var func_2 = core_modules_1.modules.operators.op_binary[symbol_1];\n        if (func_2)\n            return func_2(this, other_1);\n        func_2 = core_modules_1.modules.operators.op_assign[symbol_1];\n        if (func_2)\n            return func_2(this, other_1);\n        if (symbol_1.includes(':'))\n            throw new Error(\"Expected index or operator symbol. Found \\\"\".concat(symbol_1, \"\\\". Did you mean \").concat([symbol_1], \"?\"));\n        throw new Error(\"Expected index or operator symbol. Found \\\"\".concat(symbol_1, \"\\\"\"));\n    }\n    var where = args[0];\n    if (where instanceof NDArray)\n        throw new Error(\"Expected operator or index. Found numpy array\");\n    if (args.length == 1)\n        return this.index(where);\n    var symbol = args[1];\n    var func = core_modules_1.modules.operators.op_assign[symbol];\n    if (!func)\n        throw new Error(\"Unknown unary operator \\\"\".concat(symbol, \"\\\". Options:\").concat(__spreadArray([], __read(Object.keys(core_modules_1.modules.operators.op_unary)), false)));\n    if (args.length > 2)\n        throw new Error(\"Too many arguments provided: \".concat(__spreadArray([], __read(args), false)));\n    var other = args[2];\n    return func(this, where, other);\n};\nexports.default = NDArray;\n","\"use strict\";\n//@ts-check\n/**\n * This file exists for the sole purpose splitting the class methods across multiple files\n * while preserving all features of intellisense or JSDoc without errors.\n * The main issue is that the implementation of the methods require NDArray very often.\n * It resolves circular dependencies by using a global variable imported in each module.\n * The main file must define `require('./core-globals').GLOBALS.NDArray = NDArray;` before\n * importing any of the files that use it.\n *\n * A template header for files importing NDArray from this file is given below.\n *    DO NOT use `const NDArray = require(\"./core-globals\").GLOBALS.NDArray;`.\n *    Use const {NDArray} = ... instead as indicated. (Intellisense stops working otherwise)\n */\n// /** @typedef {import(\"./core\")} NDArray*/\n// const { NDArray } = require(\"./core-globals\").GLOBALS;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GLOBALS = void 0;\n//@ts-ignore\nvar _np = null;\nvar _array = null;\nexports.GLOBALS = {\n    NDArray: _array,\n    np: _np,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.np = void 0;\nvar _np = require(\"./np\");\nexports.np = _np;\nexports.default = exports.np;\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.allClose = exports.allEq = exports.ravel = exports.binary_operation = void 0;\nfunction binary_operation(A, B, func) {\n    // Pointwise check for equality for arbitrary js arrays (without broadcasting)\n    var C = [];\n    var q = [[A, B, C, 0]];\n    var seen;\n    while (true) {\n        var _next = q.pop();\n        if (!_next)\n            return true;\n        var _a = __read(_next, 4), a = _a[0], b = _a[1], c = _a[2], depth = _a[3];\n        if (Array.isArray(a) && Array.isArray(b) && a.length == b.length) {\n            for (var i in a) {\n                var c_i = [];\n                c.push(c_i);\n                q.push([a[i], b[i], c_i, depth + 1]);\n            }\n        }\n        else\n            c.push(func(a, b));\n        if (depth > 10000 && Array.isArray(a)) { // Activate circular reference detection\n            // Checking only A suffices (the other will exhaust otherwise)\n            seen = /**@type {any[]}*/ (seen || []);\n            if (seen.includes(a))\n                throw new Error(\"Circular reference found. \".concat(a));\n            seen[depth - 10000] = a;\n        }\n    }\n}\nexports.binary_operation = binary_operation;\n;\nfunction ravel(A) {\n    // Flatten js array\n    var q = [[A, 0]], flat = [];\n    var seen;\n    var _loop_1 = function () {\n        var _next = q.pop();\n        if (!_next)\n            return \"break\";\n        var _a = __read(_next, 2), a = _a[0], depth = _a[1];\n        if (depth > 10000 && Array.isArray(a)) { // Activate circular reference detection\n            seen = /**@type {any[]}*/ (seen || []);\n            if (seen.includes(a))\n                throw new Error(\"Circular reference found. \".concat(a));\n            seen[depth - 10000] = a;\n        }\n        if (Array.isArray(a)) {\n            q.push.apply(q, __spreadArray([], __read(a.map(function (v) { return [v, depth + 1]; })), false));\n            return \"continue\";\n        }\n        flat.push(a);\n    };\n    while (true) {\n        var state_1 = _loop_1();\n        if (state_1 === \"break\")\n            break;\n    }\n    return flat;\n}\nexports.ravel = ravel;\n;\nfunction allEq(A, B, nan_equal) {\n    if (nan_equal === void 0) { nan_equal = false; }\n    var different = new Error('');\n    var func = function (a, b) {\n        if (a !== b && !(nan_equal && Number.isNaN(a) && Number.isNaN(b)))\n            throw different;\n        return 0;\n    };\n    try {\n        binary_operation(A, B, func);\n    }\n    catch (err) {\n        if (err === different)\n            return false;\n        else\n            throw err;\n    }\n    return true;\n}\nexports.allEq = allEq;\n;\nfunction allClose(A, B, rtol, atol, nan_equal) {\n    if (rtol === void 0) { rtol = 1.e-5; }\n    if (atol === void 0) { atol = 1.e-8; }\n    if (nan_equal === void 0) { nan_equal = false; }\n    var func = function (a, b) {\n        if (Number.isFinite(a) && Number.isFinite(b))\n            return Math.abs(a - b) <= atol + rtol * Math.abs(b);\n        return (a === b) || (nan_equal && Number.isNaN(a) && Number.isNaN(b));\n    };\n    var different = new Error('');\n    var wrapper = function (a, b) {\n        if (!func(a, b))\n            throw different;\n        return 0;\n    };\n    try {\n        binary_operation(A, B, wrapper);\n    }\n    catch (err) {\n        if (err === different)\n            return false;\n        else\n            throw err;\n    }\n    return true;\n}\nexports.allClose = allClose;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nd_modules = exports.np = void 0;\n//@ts-check\nvar globals_1 = require(\"../globals\");\nvar np = globals_1.GLOBALS.np, _NDArray = globals_1.GLOBALS.NDArray;\nexports.np = np;\nif (!np)\n    throw new Error(\"Programming error: np not defined\");\nexports.nd_modules = _NDArray.prototype.modules;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.modules = void 0;\n//@ts-check\nrequire(\"./-np-globals\");\nvar constructors = require(\"./np-constructors\");\nvar grammar = require(\"./np-grammar\");\nvar random = require(\"./np-random\");\nexports.modules = {\n    constructors: constructors,\n    grammar: grammar,\n    random: random,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.geomspace = exports.linspace = exports.arange = exports.ones = exports.zeros = exports.empty = void 0;\n//@ts-check\nvar core_modules_1 = require(\"../core-modules\");\nvar basic = core_modules_1.modules.basic, elementwise = core_modules_1.modules.elementwise;\nfunction empty(shape, dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    return basic.new_from(shape, undefined, dtype);\n}\nexports.empty = empty;\n;\nfunction zeros(shape, dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    var c = dtype == Boolean ? false : 0;\n    return basic.new_from(shape, function (_) { return c; }, dtype);\n}\nexports.zeros = zeros;\n;\nfunction ones(shape, dtype) {\n    if (dtype === void 0) { dtype = Number; }\n    var c = dtype == Boolean ? true : 1;\n    return basic.new_from(shape, function (_) { return c; }, dtype);\n}\nexports.ones = ones;\n;\nfunction arange(arg0, arg1) {\n    if (arg1 === void 0) { arg1 = null; }\n    var start, end;\n    if (arg1 === null)\n        start = 0, end = arg0;\n    else\n        start = arg0, end = arg1;\n    return basic.new_from(end - start, function (_, i) { return start + i; }, Number);\n}\nexports.arange = arange;\n;\nfunction linspace(start, stop, num, endpoint) {\n    var _a;\n    if (num === void 0) { num = 50; }\n    if (endpoint === void 0) { endpoint = true; }\n    (_a = Object.assign({ stop: stop, num: num, endpoint: endpoint }, this), stop = _a.stop, num = _a.num, endpoint = _a.endpoint);\n    start = basic.as_number(start);\n    stop = basic.as_number(stop);\n    var n = (num - (endpoint ? 1 : 0));\n    var arr = arange(num).multiply((stop - start) / n).add(start);\n    return arr;\n}\nexports.linspace = linspace;\nfunction geomspace(start, stop, num, endpoint) {\n    var _a;\n    if (num === void 0) { num = 50; }\n    if (endpoint === void 0) { endpoint = true; }\n    (_a = Object.assign({ stop: stop, num: num, endpoint: endpoint }, this), stop = _a.stop, num = _a.num, endpoint = _a.endpoint);\n    start = elementwise.ops.log(start);\n    stop = elementwise.ops.log(stop);\n    return elementwise.ops.exp(linspace(start, stop, num, endpoint));\n}\nexports.geomspace = geomspace;\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = exports.__parser_pool = exports.__makeSemantics = exports.ohmGrammar = exports.grammar = void 0;\n//@ts-check\nvar _np_globals_1 = require(\"./-np-globals\");\nvar ohm = require(\"ohm-js\");\nexports.grammar = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\nArrayGrammar {\\n  Instruction\\n  = Variable \\\"[\\\" Slice \\\"]\\\" AssignSymbol ArithmeticLogicExp -- sliceAssignment\\n  | ArithmeticLogicExp                       -- expression\\n  \\n  Variable\\n   = \\\"#\\\" digit+ \\\"#\\\"\\n  \\n  AssignSymbol\\n  =\\\"=\\\"|\\\"+=\\\"|\\\"-=\\\"|\\\"/=\\\"|\\\"%=\\\"|\\\"&=\\\"|\\\"|=\\\"|\\\"^=\\\"|\\\"@=\\\"\\n  \\n  /* Declaration in precedence order (weakest first) */\\n  ArithmeticLogicExp = Precedence11\\n\\n  /* https://docs.python.org/3/reference/expressions.html */\\n  Operator11 = \\\"<\\\" | \\\"<=\\\" | \\\">\\\" | \\\">=\\\" | \\\"!=\\\" | \\\"==\\\"\\n  Operator10 = \\\"|\\\"\\n  Operator09 = \\\"^\\\"\\n  Operator08 = \\\"&\\\"\\n  Operator07 = \\\"<<\\\" | \\\">>\\\"\\n  Operator06 = \\\"+\\\" | \\\"-\\\"\\n  Operator05 = \\\"*\\\" | \\\"@\\\" | \\\"/\\\" | \\\"//\\\" | \\\"%\\\"\\n  Operator04 = \\\"~\\\" /* Unary */\\n  Operator03 = \\\"+\\\" | \\\"-\\\" /* Unary. Special treatment to prevent \\\"-1.3\\\" to be \\\"-(array of 1.3)\\\" */\\n  Operator02 = \\\"**\\\"\\n  /* Operator01 = \\\"x[index]\\\" | \\\"x[index:index]\\\" | \\\"x(arguments...)\\\" | \\\"x.attribute\\\" */\\n  /* Operator00 = \\\"(expressions...)\\\" */\\n\\n  Precedence11 = Precedence11 Operator11 Precedence10 | \\\"\\\" \\\"\\\" Precedence10\\n  Precedence10 = Precedence10 Operator10 Precedence09 | \\\"\\\" \\\"\\\" Precedence09\\n  Precedence09 = Precedence09 Operator09 Precedence08 | \\\"\\\" \\\"\\\" Precedence08\\n  Precedence08 = Precedence08 Operator08 Precedence07 | \\\"\\\" \\\"\\\" Precedence07\\n  Precedence07 = Precedence07 Operator07 Precedence06 | \\\"\\\" \\\"\\\" Precedence06\\n  Precedence06 = Precedence06 Operator06 Precedence05 | \\\"\\\" \\\"\\\" Precedence05\\n  Precedence05 = Precedence05 Operator05 Precedence04 | \\\"\\\" \\\"\\\" Precedence04\\n  Precedence04 = \\\"\\\"           Operator04 Precedence03 | \\\"\\\" \\\"\\\" Precedence03 /* Unary */\\n  Precedence03 = \\\"\\\"           Operator03 Precedence02 | \\\"\\\" \\\"\\\" Precedence02 /* Special */\\n  Precedence02 = Precedence02 Operator02 Precedence03 | \\\"\\\" \\\"\\\" Precedence01\\n  Precedence01 = Arr\\n  \\n  Parenthesis = \\\"(\\\" ArithmeticLogicExp \\\")\\\"\\n  Arr\\n    = Arr \\\".\\\" Name CallArgs     -- method\\n    | Arr \\\".\\\" Name              -- attribute\\n    | Arr \\\"[\\\" Slice \\\"]\\\"         -- slice\\n    | Parenthesis\\n    | Name (\\\".\\\" Name)* CallArgs -- call\\n    | number\\n    | Variable\\n\\n  Name  (an identifier)\\n    = (letter|\\\"_\\\") (letter|\\\"_\\\"|digit)*\\n\\n  number  (a number)\\n    = (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"E\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"e\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+  \\\"\\\"  \\\"\\\"        \\\"\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit+ \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\"\\\"        \\\"\\\"\\n  \\n  int (an integer) = \\\"\\\"  digit+ | \\\"-\\\" digit+ | \\\"+\\\" digit+\\n\\n  CallArgs // Using empty strings instead of separate rules\\n   = \\\"(\\\" Args \\\",\\\"  KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" Args \\\",\\\"? \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"   \\\",\\\"? KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"    \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   \\n  Args = NonemptyListOf<ArgValue, \\\",\\\">\\n  KwArgs = NonemptyListOf<KwArg, \\\",\\\">\\n  KwArg = Name \\\"=\\\" ArgValue\\n\\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\\n  Constant = \\\"True\\\" | \\\"False\\\" | \\\"None\\\" | \\\"np.nan\\\" | \\\"np.inf\\\"\\n  JsArray\\n    = \\\"[\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\"]\\\"\\n    | \\\"(\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\")\\\"\\n\\n  String = \\\"'\\\" any* \\\"'\\\" | \\\"\\\"\\\" any* \\\"\\\"\\\"\\n   \\n  Slice = NonemptyListOf<SliceTerm, \\\",\\\">\\n  SliceTerm\\n    = SliceRange\\n    | (\\\":\\\" | \\\"...\\\" | \\\"None\\\") -- constant\\n    | JsArray\\n    | ArithmeticLogicExp\\n  \\n  SliceRange\\n    = int \\\":\\\" int \\\":\\\" int\\n    | int \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | int \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | int \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" int \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n}\\n\"], [\"\\nArrayGrammar {\\n  Instruction\\n  = Variable \\\"[\\\" Slice \\\"]\\\" AssignSymbol ArithmeticLogicExp -- sliceAssignment\\n  | ArithmeticLogicExp                       -- expression\\n  \\n  Variable\\n   = \\\"#\\\" digit+ \\\"#\\\"\\n  \\n  AssignSymbol\\n  =\\\"=\\\"|\\\"+=\\\"|\\\"-=\\\"|\\\"/=\\\"|\\\"%=\\\"|\\\"&=\\\"|\\\"|=\\\"|\\\"^=\\\"|\\\"@=\\\"\\n  \\n  /* Declaration in precedence order (weakest first) */\\n  ArithmeticLogicExp = Precedence11\\n\\n  /* https://docs.python.org/3/reference/expressions.html */\\n  Operator11 = \\\"<\\\" | \\\"<=\\\" | \\\">\\\" | \\\">=\\\" | \\\"!=\\\" | \\\"==\\\"\\n  Operator10 = \\\"|\\\"\\n  Operator09 = \\\"^\\\"\\n  Operator08 = \\\"&\\\"\\n  Operator07 = \\\"<<\\\" | \\\">>\\\"\\n  Operator06 = \\\"+\\\" | \\\"-\\\"\\n  Operator05 = \\\"*\\\" | \\\"@\\\" | \\\"/\\\" | \\\"//\\\" | \\\"%\\\"\\n  Operator04 = \\\"~\\\" /* Unary */\\n  Operator03 = \\\"+\\\" | \\\"-\\\" /* Unary. Special treatment to prevent \\\"-1.3\\\" to be \\\"-(array of 1.3)\\\" */\\n  Operator02 = \\\"**\\\"\\n  /* Operator01 = \\\"x[index]\\\" | \\\"x[index:index]\\\" | \\\"x(arguments...)\\\" | \\\"x.attribute\\\" */\\n  /* Operator00 = \\\"(expressions...)\\\" */\\n\\n  Precedence11 = Precedence11 Operator11 Precedence10 | \\\"\\\" \\\"\\\" Precedence10\\n  Precedence10 = Precedence10 Operator10 Precedence09 | \\\"\\\" \\\"\\\" Precedence09\\n  Precedence09 = Precedence09 Operator09 Precedence08 | \\\"\\\" \\\"\\\" Precedence08\\n  Precedence08 = Precedence08 Operator08 Precedence07 | \\\"\\\" \\\"\\\" Precedence07\\n  Precedence07 = Precedence07 Operator07 Precedence06 | \\\"\\\" \\\"\\\" Precedence06\\n  Precedence06 = Precedence06 Operator06 Precedence05 | \\\"\\\" \\\"\\\" Precedence05\\n  Precedence05 = Precedence05 Operator05 Precedence04 | \\\"\\\" \\\"\\\" Precedence04\\n  Precedence04 = \\\"\\\"           Operator04 Precedence03 | \\\"\\\" \\\"\\\" Precedence03 /* Unary */\\n  Precedence03 = \\\"\\\"           Operator03 Precedence02 | \\\"\\\" \\\"\\\" Precedence02 /* Special */\\n  Precedence02 = Precedence02 Operator02 Precedence03 | \\\"\\\" \\\"\\\" Precedence01\\n  Precedence01 = Arr\\n  \\n  Parenthesis = \\\"(\\\" ArithmeticLogicExp \\\")\\\"\\n  Arr\\n    = Arr \\\".\\\" Name CallArgs     -- method\\n    | Arr \\\".\\\" Name              -- attribute\\n    | Arr \\\"[\\\" Slice \\\"]\\\"         -- slice\\n    | Parenthesis\\n    | Name (\\\".\\\" Name)* CallArgs -- call\\n    | number\\n    | Variable\\n\\n  Name  (an identifier)\\n    = (letter|\\\"_\\\") (letter|\\\"_\\\"|digit)*\\n\\n  number  (a number)\\n    = (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"E\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"e\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+  \\\"\\\"  \\\"\\\"        \\\"\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit+ \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\"\\\"        \\\"\\\"\\n  \\n  int (an integer) = \\\"\\\"  digit+ | \\\"-\\\" digit+ | \\\"+\\\" digit+\\n\\n  CallArgs // Using empty strings instead of separate rules\\n   = \\\"(\\\" Args \\\",\\\"  KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" Args \\\",\\\"? \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"   \\\",\\\"? KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"    \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   \\n  Args = NonemptyListOf<ArgValue, \\\",\\\">\\n  KwArgs = NonemptyListOf<KwArg, \\\",\\\">\\n  KwArg = Name \\\"=\\\" ArgValue\\n\\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\\n  Constant = \\\"True\\\" | \\\"False\\\" | \\\"None\\\" | \\\"np.nan\\\" | \\\"np.inf\\\"\\n  JsArray\\n    = \\\"[\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\"]\\\"\\n    | \\\"(\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\")\\\"\\n\\n  String = \\\"\\\\'\\\" any* \\\"\\\\'\\\" | \\\"\\\\\\\"\\\" any* \\\"\\\\\\\"\\\"\\n   \\n  Slice = NonemptyListOf<SliceTerm, \\\",\\\">\\n  SliceTerm\\n    = SliceRange\\n    | (\\\":\\\" | \\\"...\\\" | \\\"None\\\") -- constant\\n    | JsArray\\n    | ArithmeticLogicExp\\n  \\n  SliceRange\\n    = int \\\":\\\" int \\\":\\\" int\\n    | int \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | int \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | int \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" int \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n}\\n\"])));\nexports.ohmGrammar = ohm.grammar(exports.grammar);\nvar __makeSemantics = function () {\n    var semanticVariables = [];\n    var semantics = {\n        Instruction_sliceAssignment: function ($tgt, _open, $where, _close, $symbol, $src) {\n            var _tgt = $tgt.parse();\n            var _src = $src.parse();\n            var symbol = $symbol.sourceString;\n            var where = $where.parse();\n            var tgt = _np_globals_1.nd_modules.basic.asarray(_tgt);\n            _np_globals_1.nd_modules.operators.op_assign[symbol](_tgt, where, _src);\n            if (tgt !== _tgt) {\n                // WARNING: Creates a copy. This is terrible for arr[2, 4, 3] = 5\n                tgt = _np_globals_1.nd_modules.jsInterface.toJS(tgt);\n                while (_tgt.length)\n                    _tgt.pop();\n                // @ts-ignore\n                _tgt.push.apply(_tgt, __spreadArray([], __read(_tgt), false));\n            }\n            return null;\n        },\n        Instruction_expression: function ($arr) {\n            var arr = $arr.parse();\n            if (typeof arr === \"number\")\n                return arr;\n            if (typeof arr === \"boolean\")\n                return arr;\n            if (Array.isArray(arr))\n                return arr;\n            if (_np_globals_1.nd_modules.basic.isarray(arr))\n                arr = _np_globals_1.nd_modules.basic.number_collapse(arr);\n            return arr;\n        },\n        Precedence11: BinaryOperation,\n        Precedence10: BinaryOperation,\n        Precedence09: BinaryOperation,\n        Precedence08: BinaryOperation,\n        Precedence07: BinaryOperation,\n        Precedence06: BinaryOperation,\n        Precedence05: BinaryOperation,\n        Precedence04: UnaryOperation,\n        Precedence03: UnaryOperation,\n        Precedence02: BinaryOperation,\n        number: function (arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n            return parseFloat(this.sourceString);\n        },\n        Arr_slice: function ($arr, _open, $where, _close) {\n            var arr = $arr.parse();\n            var where = $where.parse();\n            return arr.index.apply(arr, __spreadArray([], __read(where), false));\n        },\n        SliceTerm_constant: function ($x) {\n            return $x.sourceString;\n        },\n        Arr_call: function ($name, $names, _, $callArgs) {\n            var name = $name.sourceString + $names.sourceString;\n            if (name.slice(0, 3) == \"np.\")\n                name = name.slice(3);\n            var func = name.split('.').reduce(function (obj, name) { return obj[name]; }, _np_globals_1.np);\n            if (func === undefined)\n                throw new Error(\"Unrecognized function \".concat(name));\n            var _a = $callArgs.parse(), args = _a.args, kwArgs = _a.kwArgs;\n            return func.bind(kwArgs).apply(void 0, __spreadArray([], __read(args), false));\n        },\n        Arr_method: function ($arr, _dot, $name, $callArgs) {\n            var _a;\n            var arr = $arr.parse();\n            var name = $name.sourceString;\n            var _b = $callArgs.parse(), args = _b.args, kwArgs = _b.kwArgs;\n            if (arr[name] === undefined)\n                throw new Error(\"Unrecognized method \".concat(name));\n            return (_a = arr.withKwArgs(kwArgs))[name].apply(_a, __spreadArray([], __read(args), false));\n        },\n        Parenthesis: function (_, $arr, __) { return $arr.parse(); },\n        Arr_attribute: function ($arr, _, $name) { return $arr.parse()[$name.sourceString]; },\n        Variable: function (_, $i, __) {\n            var i = parseInt($i.sourceString);\n            var value = semanticVariables[i];\n            var isListOfArrays = Array.isArray(value) && value.length && _np_globals_1.nd_modules.basic.isarray(value[0]);\n            if (Array.isArray(value) && !isListOfArrays)\n                value = _np_globals_1.nd_modules.basic.array(value);\n            return value;\n        },\n        int: function ($sign, $value) {\n            var value = parseInt($value.sourceString);\n            if ($sign.sourceString == '-')\n                return -value;\n            else\n                return value;\n        },\n        SliceRange: function ($start, _, $stop, __, $step) {\n            return this.sourceString;\n        },\n        Constant: function ($x) {\n            switch ($x.sourceString) {\n                case \"True\": return true;\n                case \"False\": return false;\n                case \"None\": return null;\n                case \"np.nan\": return Number.NaN;\n                case \"np.inf\": return Number.POSITIVE_INFINITY;\n            }\n            throw new Error(\"Unrecognized constant \".concat($x.sourceString));\n        },\n        String: function (_open, $str, _close) {\n            return $str.sourceString;\n        },\n        CallArgs: function (_open, $args, _comma, $kwArgs, _trailing, _close) {\n            var args = $args.parse() || [];\n            var entries = $kwArgs.parse() || [];\n            var kwArgs = Object.fromEntries(entries.map(function (_a) {\n                var _b = __read(_a, 2), k = _b[0], v = _b[1];\n                // The following is needed because minus integer gets parsed as array.\n                if (_np_globals_1.nd_modules.basic.isarray(v))\n                    v = _np_globals_1.nd_modules.basic.number_collapse(v);\n                return [k, v];\n            }));\n            return { args: args, kwArgs: kwArgs };\n        },\n        KwArg: function ($key, _equals, $value) {\n            var key = $key.sourceString;\n            var value = $value.parse();\n            return [key, value];\n        },\n        NonemptyListOf: function (first, _, more) {\n            return __spreadArray([first], __read(more.children), false).map(function (c) { return c.parse(); });\n        },\n        JsArray: function (_open, $list, _trailing, _close) {\n            var list = $list.parse();\n            // Downcast arrays (needed because, e.g., for [-1, 3, -2], -1 and -2 are interpreted as MyArray rather than int)\n            var toJS = _np_globals_1.nd_modules.jsInterface.toJS;\n            for (var i in list)\n                if (_np_globals_1.nd_modules.basic.isarray(list[i]))\n                    list[i] = toJS(list[i]);\n            return list;\n        },\n        _terminal: function () { return null; },\n    };\n    function BinaryOperation($A, $symbol, $B) {\n        var A = $A.parse();\n        var B = $B.parse();\n        var symbol = $symbol.sourceString;\n        if (symbol == \"\" && A === null)\n            return B;\n        var op = _np_globals_1.nd_modules.operators.op_binary;\n        return op[symbol](A, B);\n    }\n    function UnaryOperation(_, $symbol, $B) {\n        var B = $B.parse();\n        var symbol = $symbol.sourceString;\n        if (symbol == \"\")\n            return B;\n        var op_unary = _np_globals_1.nd_modules.operators.op_unary;\n        switch (symbol) {\n            case \"+\": return op_unary[\"+\"](B);\n            case \"-\": return op_unary[\"-\"](B);\n            case \"~\": return op_unary[\"~\"](B);\n            case \"!\": return op_unary[\"not\"](B);\n        }\n        throw new Error(\"Programming Error: \".concat(symbol));\n    }\n    var ohmSemantics = exports.ohmGrammar.createSemantics();\n    ohmSemantics.addOperation('parse', semantics);\n    /**\n     * @param {TemplateStringsArray} template\n     * @param {any[]} variables\n     */\n    function parse(template) {\n        var variables = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            variables[_i - 1] = arguments[_i];\n        }\n        // Replace variables in template with #0# #1# #2#, ...\n        var idx = 0;\n        var template_with_placeholders = template.join('###').replace(/###/g, function () { return \"#\".concat(idx++, \"#\"); });\n        semanticVariables.length = 0;\n        semanticVariables.push.apply(semanticVariables, __spreadArray([], __read(variables), false));\n        var match = exports.ohmGrammar.match(template_with_placeholders);\n        if (!match.succeeded())\n            throw new Error(match.message);\n        return ohmSemantics(match).parse();\n    }\n    return { parse: parse, ohmSemantics: ohmSemantics, semantics: semantics, semanticVariables: semanticVariables, busy: 0 };\n};\nexports.__makeSemantics = __makeSemantics;\nexports.__parser_pool = [(0, exports.__makeSemantics)()];\n/**\n * @param {TemplateStringsArray} template\n * @param {any[]} variables\n */\nvar parse = function (template) {\n    var variables = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        variables[_i - 1] = arguments[_i];\n    }\n    // Thread control, because the parser depends on semanticVariables,\n    // but we don't want to waste CPU time recreating the parser on each call\n    // No cleaning is done (we assume that the number of threads is negligible compared to the memory size)\n    var pool = exports.__parser_pool;\n    for (var i = 0; i < pool.length; i++) {\n        var parser = pool[i];\n        if (parser.busy++ == 0) {\n            try {\n                return parser.parse.apply(parser, __spreadArray([template], __read(variables), false));\n            }\n            finally {\n                parser.busy = 0;\n            }\n        }\n        if (i == pool.length)\n            pool.push((0, exports.__makeSemantics)());\n    }\n};\nexports.parse = parse;\nvar templateObject_1;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shuffle = exports.shuffled = exports._shuffled = exports._shuffle = exports.normal = exports.randn = exports.__normal = exports.exponential = exports.uniform = exports.random = void 0;\n//@ts-check\nvar _np_globals_1 = require(\"./-np-globals\");\nfunction random(shape) {\n    return _np_globals_1.nd_modules.basic.new_from(shape, function (_) { return Math.random(); }, Number);\n}\nexports.random = random;\n;\nfunction uniform(a, b, shape) {\n    return random(shape).multiply(b - a).add(a);\n}\nexports.uniform = uniform;\n;\nfunction exponential(mean, shape) {\n    return _np_globals_1.np.multiply(mean, _np_globals_1.np.subtract(0, _np_globals_1.np.log(random(shape))));\n}\nexports.exponential = exponential;\n;\n/** @param {number} n */\nfunction __normal(n) {\n    var out = [];\n    while (out.length < n) {\n        var u = Math.random() * 2 - 1;\n        var v = Math.random() * 2 - 1;\n        var s = u * u + v * v;\n        if (s >= 1)\n            continue;\n        var x = Math.sqrt(-2 * Math.log(s) / s) * u;\n        var y = Math.sqrt(-2 * Math.log(s) / s) * v;\n        out.push(x);\n        out.push(y);\n    }\n    if (out.length > n)\n        out.pop();\n    return out;\n}\nexports.__normal = __normal;\nfunction randn(shape) {\n    var flat = __normal(_np_globals_1.np.prod(shape));\n    return new _np_globals_1.np.NDArray(flat, shape, Number);\n}\nexports.randn = randn;\n;\nfunction normal(mean, std, shape) {\n    return _np_globals_1.np.add(mean, _np_globals_1.np.multiply(std, shape));\n}\nexports.normal = normal;\n;\n/** @param {any[]} list */\nfunction _shuffle(list) {\n    var _a;\n    // Fisher-Yates (aka Knuth) shuffle.\n    // https://stackoverflow.com/a/2450976\n    for (var i = list.length - 1; i >= 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        _a = __read([list[j], list[i]], 2), list[i] = _a[0], list[j] = _a[1];\n    }\n}\nexports._shuffle = _shuffle;\n/** @param {any[]} list */\nfunction _shuffled(list) {\n    var out = __spreadArray([], __read(list), false);\n    _shuffle(out);\n    return out;\n}\nexports._shuffled = _shuffled;\n/** @param {NDArray} arr  @returns {NDArray} */\nfunction shuffled(arr) {\n    if (arr.shape.length == 0)\n        return arr;\n    if (arr.shape.length == 1) {\n        var flat = _shuffled(arr.flat);\n        return new _np_globals_1.np.NDArray(flat, arr.shape, arr.dtype);\n    }\n    var perm = _shuffled(Array.from({ length: arr.length }, function (_, i) { return i; }));\n    var out = _np_globals_1.np.empty(arr.shape, arr.dtype);\n    for (var i = 0; i < arr.length; i++)\n        out.assign([i], arr.index(perm[i]));\n    return out;\n}\nexports.shuffled = shuffled;\n/**\n * @param {NDArray} arr\n */\nfunction shuffle(arr) {\n    arr.assign(shuffled(arr));\n}\nexports.shuffle = shuffle;\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @param {TemplateStringsArray|any[]|number|boolean} template\n * @param {any[]} variables\n */\nvar np = function (template) {\n    var _a;\n    var variables = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        variables[_i - 1] = arguments[_i];\n    }\n    var usage = 'Usage example: np`np.arange(10)+${5}` or np([0,1,2]).';\n    if (typeof template == \"number\")\n        return template;\n    if (template instanceof np.NDArray)\n        return template;\n    if (!Array.isArray(template))\n        throw new Error(\"Expected template or array. \".concat(usage));\n    if (!template.length)\n        throw new Error(\"Expected argument. \".concat(usage));\n    if (typeof template[0] == \"string\") {\n        if (variables.length + 1 != template.length)\n            throw new Error(\"Wrong input. \".concat(usage));\n        //@ts-ignore\n        return (_a = np.modules.grammar).parse.apply(_a, __spreadArray([/**@type {*}*/ (template)], __read(variables), false));\n    }\n    else {\n        if (variables.length)\n            throw new Error(\"Wrong input. \".concat(usage));\n        //@ts-ignore\n        return np.asarray(template);\n    }\n};\n// ==============================\n//    Define Global before importing any module\n// ==============================\nvar globals_1 = require(\"./globals\");\nglobals_1.GLOBALS.np = np;\n// ==============================\n//    Define casting and core before importing any other module\n// ==============================\nvar core_1 = require(\"./core\");\nnp.NDArray = core_1.default;\n// ==============================\n//  Define core-related functions\n// ==============================\nvar toJS = core_1.default.prototype.modules.jsInterface.toJS;\nnp.JS = function (template) {\n    var variables = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        variables[_i - 1] = arguments[_i];\n    }\n    return toJS(np.apply(void 0, __spreadArray([template], __read(variables), false)));\n};\nnp.fromJS = core_1.default.prototype.modules.jsInterface.fromJS;\nnp.ravel = core_1.default.prototype.modules.basic.ravel;\nnp.reshape = core_1.default.prototype.modules.basic.reshape;\nnp.array = core_1.default.prototype.modules.basic.array;\nnp.asarray = core_1.default.prototype.modules.basic.asarray;\nvar reduce = core_1.default.prototype.modules.reduce;\nnp.sum = reduce.reducers.sum;\nnp.product = reduce.reducers.product;\nnp.prod = np.product;\nnp.any = reduce.reducers.any;\nnp.all = reduce.reducers.all;\nnp.max = reduce.reducers.max;\nnp.min = reduce.reducers.min;\nnp.argmax = reduce.reducers.argmax;\nnp.argmin = reduce.reducers.argmin;\nnp.mean = reduce.reducers.mean;\nnp.var = reduce.reducers.var;\nnp.std = reduce.reducers.std;\nvar transform = core_1.default.prototype.modules.transform;\nnp.transpose = transform.transpose;\nnp.apply_along_axis = transform.apply_along_axis;\nnp.sort = transform.sort;\nnp.concatenate = transform.concatenate;\nnp.stack = transform.stack;\nvar operators = core_1.default.prototype.modules.operators;\nnp.add = operators.op_binary[\"+\"];\nnp.subtract = operators.op_binary[\"-\"];\nnp.multiply = operators.op_binary[\"*\"];\nnp.divide = operators.op_binary[\"/\"];\nnp.mod = operators.op_binary[\"%\"];\nnp.divide_int = operators.op_binary[\"//\"];\nnp.pow = operators.op_binary[\"**\"];\nnp.bitwise_or = operators.op_binary[\"|\"];\nnp.bitwise_and = operators.op_binary[\"&\"];\nnp.bitwise_xor = operators.op_binary[\"^\"];\nnp.bitwise_shift_left = operators.op_binary[\"<<\"];\nnp.bitwise_shift_right = operators.op_binary[\">>\"];\nnp.greater = operators.op_binary[\">\"];\nnp.less = operators.op_binary[\"<\"];\nnp.greater_equal = operators.op_binary[\">=\"];\nnp.less_equal = operators.op_binary[\"<=\"];\nnp.equal = operators.op_binary[\"==\"];\nnp.not_equal = operators.op_binary[\"!=\"];\nnp.maximum = operators.op_binary[\"\"];\nnp.minimum = operators.op_binary[\"\"];\nnp.logical_or = operators.op_binary[\"or\"];\nnp.logical_and = operators.op_binary[\"and\"];\nnp.bitwise_not = operators.op_unary[\"~\"];\nnp.logical_not = operators.op_unary[\"not\"];\nvar ew = core_1.default.prototype.modules.elementwise;\nnp.sign = ew.ops.sign;\nnp.sqrt = ew.ops.sqrt;\nnp.square = ew.ops.square;\nnp.abs = ew.ops.abs;\nnp.exp = ew.ops.exp;\nnp.log = ew.ops.log;\nnp.log2 = ew.ops.log2;\nnp.log10 = ew.ops.log10;\nnp.log1p = ew.ops.log1p;\nnp.sin = ew.ops.sin;\nnp.cos = ew.ops.cos;\nnp.tan = ew.ops.tan;\nnp.asin = ew.ops.asin;\nnp.acos = ew.ops.acos;\nnp.atan = ew.ops.atan;\nnp.atan2 = ew.ops.atan2;\nnp.cosh = ew.ops.cosh;\nnp.sinh = ew.ops.sinh;\nnp.tanh = ew.ops.tanh;\nnp.acosh = ew.ops.acosh;\nnp.asinh = ew.ops.asinh;\nnp.atanh = ew.ops.atanh;\nnp.round = ew.ops.round;\n// ==============================\n//   import np modules\n// ============================== \nvar np_modules_1 = require(\"./np-modules\");\nnp.modules = np_modules_1.modules;\nnp.empty = np.modules.constructors.empty;\nnp.zeros = np.modules.constructors.zeros;\nnp.ones = np.modules.constructors.ones;\nnp.arange = np.modules.constructors.arange;\nnp.linspace = np.modules.constructors.linspace;\nnp.geomspace = np.modules.constructors.geomspace;\nnp.random = np.modules.random;\nexports.default = np;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// --------------------------------------------------------------------\n\n// --------------------------------------------------------------------\n// Exports\n// --------------------------------------------------------------------\n\nfunction abstract(optMethodName) {\n  const methodName = optMethodName || '';\n  return function() {\n    throw new Error(\n        'this method ' +\n        methodName +\n        ' is abstract! ' +\n        '(it has no implementation in class ' +\n        this.constructor.name +\n        ')',\n    );\n  };\n}\n\nfunction assert(cond, message) {\n  if (!cond) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n\n// Define a lazily-computed, non-enumerable property named `propName`\n// on the object `obj`. `getterFn` will be called to compute the value the\n// first time the property is accessed.\nfunction defineLazyProperty(obj, propName, getterFn) {\n  let memo;\n  Object.defineProperty(obj, propName, {\n    get() {\n      if (!memo) {\n        memo = getterFn.call(this);\n      }\n      return memo;\n    },\n  });\n}\n\nfunction clone(obj) {\n  if (obj) {\n    return Object.assign({}, obj);\n  }\n  return obj;\n}\n\nfunction repeatFn(fn, n) {\n  const arr = [];\n  while (n-- > 0) {\n    arr.push(fn());\n  }\n  return arr;\n}\n\nfunction repeatStr(str, n) {\n  return new Array(n + 1).join(str);\n}\n\nfunction repeat(x, n) {\n  return repeatFn(() => x, n);\n}\n\nfunction getDuplicates(array) {\n  const duplicates = [];\n  for (let idx = 0; idx < array.length; idx++) {\n    const x = array[idx];\n    if (array.lastIndexOf(x) !== idx && duplicates.indexOf(x) < 0) {\n      duplicates.push(x);\n    }\n  }\n  return duplicates;\n}\n\nfunction copyWithoutDuplicates(array) {\n  const noDuplicates = [];\n  array.forEach(entry => {\n    if (noDuplicates.indexOf(entry) < 0) {\n      noDuplicates.push(entry);\n    }\n  });\n  return noDuplicates;\n}\n\nfunction isSyntactic(ruleName) {\n  const firstChar = ruleName[0];\n  return firstChar === firstChar.toUpperCase();\n}\n\nfunction isLexical(ruleName) {\n  return !isSyntactic(ruleName);\n}\n\nfunction padLeft(str, len, optChar) {\n  const ch = optChar || ' ';\n  if (str.length < len) {\n    return repeatStr(ch, len - str.length) + str;\n  }\n  return str;\n}\n\n// StringBuffer\n\nfunction StringBuffer() {\n  this.strings = [];\n}\n\nStringBuffer.prototype.append = function(str) {\n  this.strings.push(str);\n};\n\nStringBuffer.prototype.contents = function() {\n  return this.strings.join('');\n};\n\nconst escapeUnicode = str => String.fromCodePoint(parseInt(str, 16));\n\nfunction unescapeCodePoint(s) {\n  if (s.charAt(0) === '\\\\') {\n    switch (s.charAt(1)) {\n      case 'b':\n        return '\\b';\n      case 'f':\n        return '\\f';\n      case 'n':\n        return '\\n';\n      case 'r':\n        return '\\r';\n      case 't':\n        return '\\t';\n      case 'v':\n        return '\\v';\n      case 'x':\n        return escapeUnicode(s.slice(2, 4));\n      case 'u':\n        return s.charAt(2) === '{' ?\n          escapeUnicode(s.slice(3, -1)) :\n          escapeUnicode(s.slice(2, 6));\n      default:\n        return s.charAt(1);\n    }\n  } else {\n    return s;\n  }\n}\n\n// Helper for producing a description of an unknown object in a safe way.\n// Especially useful for error messages where an unexpected type of object was encountered.\nfunction unexpectedObjToString(obj) {\n  if (obj == null) {\n    return String(obj);\n  }\n  const baseToString = Object.prototype.toString.call(obj);\n  try {\n    let typeName;\n    if (obj.constructor && obj.constructor.name) {\n      typeName = obj.constructor.name;\n    } else if (baseToString.indexOf('[object ') === 0) {\n      typeName = baseToString.slice(8, -1); // Extract e.g. \"Array\" from \"[object Array]\".\n    } else {\n      typeName = typeof obj;\n    }\n    return typeName + ': ' + JSON.stringify(String(obj));\n  } catch (e) {\n    return baseToString;\n  }\n}\n\nvar common = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  abstract: abstract,\n  assert: assert,\n  defineLazyProperty: defineLazyProperty,\n  clone: clone,\n  repeatFn: repeatFn,\n  repeatStr: repeatStr,\n  repeat: repeat,\n  getDuplicates: getDuplicates,\n  copyWithoutDuplicates: copyWithoutDuplicates,\n  isSyntactic: isSyntactic,\n  isLexical: isLexical,\n  padLeft: padLeft,\n  StringBuffer: StringBuffer,\n  unescapeCodePoint: unescapeCodePoint,\n  unexpectedObjToString: unexpectedObjToString\n});\n\n// These are just categories that are used in ES5/ES2015.\n// The full list of Unicode categories is here: http://www.fileformat.info/info/unicode/category/index.htm.\nconst UnicodeCategories = {\n  // Letters\n  Lu: /\\p{Lu}/u,\n  Ll: /\\p{Ll}/u,\n  Lt: /\\p{Lt}/u,\n  Lm: /\\p{Lm}/u,\n  Lo: /\\p{Lo}/u,\n\n  // Numbers\n  Nl: /\\p{Nl}/u,\n  Nd: /\\p{Nd}/u,\n\n  // Marks\n  Mn: /\\p{Mn}/u,\n  Mc: /\\p{Mc}/u,\n\n  // Punctuation, Connector\n  Pc: /\\p{Pc}/u,\n\n  // Separator, Space\n  Zs: /\\p{Zs}/u,\n\n  // These two are not real Unicode categories, but our useful for Ohm.\n  // L is a combination of all the letter categories.\n  // Ltmo is a combination of Lt, Lm, and Lo.\n  L: /\\p{Letter}/u,\n  Ltmo: /\\p{Lt}|\\p{Lm}|\\p{Lo}/u,\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// General stuff\n\nclass PExpr {\n  constructor() {\n    if (this.constructor === PExpr) {\n      throw new Error(\"PExpr cannot be instantiated -- it's abstract\");\n    }\n  }\n\n  // Set the `source` property to the interval containing the source for this expression.\n  withSource(interval) {\n    if (interval) {\n      this.source = interval.trimmed();\n    }\n    return this;\n  }\n}\n\n// Any\n\nconst any = Object.create(PExpr.prototype);\n\n// End\n\nconst end = Object.create(PExpr.prototype);\n\n// Terminals\n\nclass Terminal extends PExpr {\n  constructor(obj) {\n    super();\n    this.obj = obj;\n  }\n}\n\n// Ranges\n\nclass Range extends PExpr {\n  constructor(from, to) {\n    super();\n    this.from = from;\n    this.to = to;\n    // If either `from` or `to` is made up of multiple code units, then\n    // the range should consume a full code point, not a single code unit.\n    this.matchCodePoint = from.length > 1 || to.length > 1;\n  }\n}\n\n// Parameters\n\nclass Param extends PExpr {\n  constructor(index) {\n    super();\n    this.index = index;\n  }\n}\n\n// Alternation\n\nclass Alt extends PExpr {\n  constructor(terms) {\n    super();\n    this.terms = terms;\n  }\n}\n\n// Extend is an implementation detail of rule extension\n\nclass Extend extends Alt {\n  constructor(superGrammar, name, body) {\n    const origBody = superGrammar.rules[name].body;\n    super([body, origBody]);\n\n    this.superGrammar = superGrammar;\n    this.name = name;\n    this.body = body;\n  }\n}\n\n// Splice is an implementation detail of rule overriding with the `...` operator.\nclass Splice extends Alt {\n  constructor(superGrammar, ruleName, beforeTerms, afterTerms) {\n    const origBody = superGrammar.rules[ruleName].body;\n    super([...beforeTerms, origBody, ...afterTerms]);\n\n    this.superGrammar = superGrammar;\n    this.ruleName = ruleName;\n    this.expansionPos = beforeTerms.length;\n  }\n}\n\n// Sequences\n\nclass Seq extends PExpr {\n  constructor(factors) {\n    super();\n    this.factors = factors;\n  }\n}\n\n// Iterators and optionals\n\nclass Iter extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\nclass Star extends Iter {}\nclass Plus extends Iter {}\nclass Opt extends Iter {}\n\nStar.prototype.operator = '*';\nPlus.prototype.operator = '+';\nOpt.prototype.operator = '?';\n\nStar.prototype.minNumMatches = 0;\nPlus.prototype.minNumMatches = 1;\nOpt.prototype.minNumMatches = 0;\n\nStar.prototype.maxNumMatches = Number.POSITIVE_INFINITY;\nPlus.prototype.maxNumMatches = Number.POSITIVE_INFINITY;\nOpt.prototype.maxNumMatches = 1;\n\n// Predicates\n\nclass Not extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\nclass Lookahead extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\n// \"Lexification\"\n\nclass Lex extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\n// Rule application\n\nclass Apply extends PExpr {\n  constructor(ruleName, args = []) {\n    super();\n    this.ruleName = ruleName;\n    this.args = args;\n  }\n\n  isSyntactic() {\n    return isSyntactic(this.ruleName);\n  }\n\n  // This method just caches the result of `this.toString()` in a non-enumerable property.\n  toMemoKey() {\n    if (!this._memoKey) {\n      Object.defineProperty(this, '_memoKey', {value: this.toString()});\n    }\n    return this._memoKey;\n  }\n}\n\n// Unicode character\n\nclass UnicodeChar extends PExpr {\n  constructor(category) {\n    super();\n    this.category = category;\n    this.pattern = UnicodeCategories[category];\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction createError(message, optInterval) {\n  let e;\n  if (optInterval) {\n    e = new Error(optInterval.getLineAndColumnMessage() + message);\n    e.shortMessage = message;\n    e.interval = optInterval;\n  } else {\n    e = new Error(message);\n  }\n  return e;\n}\n\n// ----------------- errors about intervals -----------------\n\nfunction intervalSourcesDontMatch() {\n  return createError(\"Interval sources don't match\");\n}\n\n// ----------------- errors about grammars -----------------\n\n// Grammar syntax error\n\nfunction grammarSyntaxError(matchFailure) {\n  const e = new Error();\n  Object.defineProperty(e, 'message', {\n    enumerable: true,\n    get() {\n      return matchFailure.message;\n    },\n  });\n  Object.defineProperty(e, 'shortMessage', {\n    enumerable: true,\n    get() {\n      return 'Expected ' + matchFailure.getExpectedText();\n    },\n  });\n  e.interval = matchFailure.getInterval();\n  return e;\n}\n\n// Undeclared grammar\n\nfunction undeclaredGrammar(grammarName, namespace, interval) {\n  const message = namespace ?\n    `Grammar ${grammarName} is not declared in namespace '${namespace}'` :\n    'Undeclared grammar ' + grammarName;\n  return createError(message, interval);\n}\n\n// Duplicate grammar declaration\n\nfunction duplicateGrammarDeclaration(grammar, namespace) {\n  return createError('Grammar ' + grammar.name + ' is already declared in this namespace');\n}\n\nfunction grammarDoesNotSupportIncrementalParsing(grammar) {\n  return createError(`Grammar '${grammar.name}' does not support incremental parsing`);\n}\n\n// ----------------- rules -----------------\n\n// Undeclared rule\n\nfunction undeclaredRule(ruleName, grammarName, optInterval) {\n  return createError(\n      'Rule ' + ruleName + ' is not declared in grammar ' + grammarName,\n      optInterval,\n  );\n}\n\n// Cannot override undeclared rule\n\nfunction cannotOverrideUndeclaredRule(ruleName, grammarName, optSource) {\n  return createError(\n      'Cannot override rule ' + ruleName + ' because it is not declared in ' + grammarName,\n      optSource,\n  );\n}\n\n// Cannot extend undeclared rule\n\nfunction cannotExtendUndeclaredRule(ruleName, grammarName, optSource) {\n  return createError(\n      'Cannot extend rule ' + ruleName + ' because it is not declared in ' + grammarName,\n      optSource,\n  );\n}\n\n// Duplicate rule declaration\n\nfunction duplicateRuleDeclaration(ruleName, grammarName, declGrammarName, optSource) {\n  let message =\n    \"Duplicate declaration for rule '\" + ruleName + \"' in grammar '\" + grammarName + \"'\";\n  if (grammarName !== declGrammarName) {\n    message += \" (originally declared in '\" + declGrammarName + \"')\";\n  }\n  return createError(message, optSource);\n}\n\n// Wrong number of parameters\n\nfunction wrongNumberOfParameters(ruleName, expected, actual, source) {\n  return createError(\n      'Wrong number of parameters for rule ' +\n      ruleName +\n      ' (expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n      source,\n  );\n}\n\n// Wrong number of arguments\n\nfunction wrongNumberOfArguments(ruleName, expected, actual, expr) {\n  return createError(\n      'Wrong number of arguments for rule ' +\n      ruleName +\n      ' (expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n      expr,\n  );\n}\n\n// Duplicate parameter names\n\nfunction duplicateParameterNames(ruleName, duplicates, source) {\n  return createError(\n      'Duplicate parameter names in rule ' + ruleName + ': ' + duplicates.join(', '),\n      source,\n  );\n}\n\n// Invalid parameter expression\n\nfunction invalidParameter(ruleName, expr) {\n  return createError(\n      'Invalid parameter to rule ' +\n      ruleName +\n      ': ' +\n      expr +\n      ' has arity ' +\n      expr.getArity() +\n      ', but parameter expressions must have arity 1',\n      expr.source,\n  );\n}\n\n// Application of syntactic rule from lexical rule\n\nconst syntacticVsLexicalNote =\n  'NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. ' +\n  'See https://ohmjs.org/d/svl for more details.';\n\nfunction applicationOfSyntacticRuleFromLexicalContext(ruleName, applyExpr) {\n  return createError(\n      'Cannot apply syntactic rule ' + ruleName + ' from here (inside a lexical context)',\n      applyExpr.source,\n  );\n}\n\n// Lexical rule application used with applySyntactic\n\nfunction applySyntacticWithLexicalRuleApplication(applyExpr) {\n  const {ruleName} = applyExpr;\n  return createError(\n      `applySyntactic is for syntactic rules, but '${ruleName}' is a lexical rule. ` +\n      syntacticVsLexicalNote,\n      applyExpr.source,\n  );\n}\n\n// Application of applySyntactic in a syntactic context\n\nfunction unnecessaryExperimentalApplySyntactic(applyExpr) {\n  return createError(\n      'applySyntactic is not required here (in a syntactic context)',\n      applyExpr.source,\n  );\n}\n\n// Incorrect argument type\n\nfunction incorrectArgumentType(expectedType, expr) {\n  return createError('Incorrect argument type: expected ' + expectedType, expr.source);\n}\n\n// Multiple instances of the super-splice operator (`...`) in the rule body.\n\nfunction multipleSuperSplices(expr) {\n  return createError(\"'...' can appear at most once in a rule body\", expr.source);\n}\n\n// Unicode code point escapes\n\nfunction invalidCodePoint(applyWrapper) {\n  const node = applyWrapper._node;\n  assert(node && node.isNonterminal() && node.ctorName === 'escapeChar_unicodeCodePoint');\n\n  // Get an interval that covers all of the hex digits.\n  const digitIntervals = applyWrapper.children.slice(1, -1).map(d => d.source);\n  const fullInterval = digitIntervals[0].coverageWith(...digitIntervals.slice(1));\n  return createError(\n      `U+${fullInterval.contents} is not a valid Unicode code point`,\n      fullInterval,\n  );\n}\n\n// ----------------- Kleene operators -----------------\n\nfunction kleeneExprHasNullableOperand(kleeneExpr, applicationStack) {\n  const actuals =\n    applicationStack.length > 0 ? applicationStack[applicationStack.length - 1].args : [];\n  const expr = kleeneExpr.expr.substituteParams(actuals);\n  let message =\n    'Nullable expression ' +\n    expr +\n    \" is not allowed inside '\" +\n    kleeneExpr.operator +\n    \"' (possible infinite loop)\";\n  if (applicationStack.length > 0) {\n    const stackTrace = applicationStack\n        .map(app => new Apply(app.ruleName, app.args))\n        .join('\\n');\n    message += '\\nApplication stack (most recent application last):\\n' + stackTrace;\n  }\n  return createError(message, kleeneExpr.expr.source);\n}\n\n// ----------------- arity -----------------\n\nfunction inconsistentArity(ruleName, expected, actual, expr) {\n  return createError(\n      'Rule ' +\n      ruleName +\n      ' involves an alternation which has inconsistent arity ' +\n      '(expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n      expr.source,\n  );\n}\n\n// ----------------- convenience -----------------\n\nfunction multipleErrors(errors) {\n  const messages = errors.map(e => e.message);\n  return createError(['Errors:'].concat(messages).join('\\n- '), errors[0].interval);\n}\n\n// ----------------- semantic -----------------\n\nfunction missingSemanticAction(ctorName, name, type, stack) {\n  let stackTrace = stack\n      .slice(0, -1)\n      .map(info => {\n        const ans = '  ' + info[0].name + ' > ' + info[1];\n        return info.length === 3 ? ans + \" for '\" + info[2] + \"'\" : ans;\n      })\n      .join('\\n');\n  stackTrace += '\\n  ' + name + ' > ' + ctorName;\n\n  let moreInfo = '';\n  if (ctorName === '_iter') {\n    moreInfo = [\n      '\\nNOTE: as of Ohm v16, there is no default action for iteration nodes  see ',\n      '  https://ohmjs.org/d/dsa for details.',\n    ].join('\\n');\n  }\n\n  const message = [\n    `Missing semantic action for '${ctorName}' in ${type} '${name}'.${moreInfo}`,\n    'Action stack (most recent call last):',\n    stackTrace,\n  ].join('\\n');\n\n  const e = createError(message);\n  e.name = 'missingSemanticAction';\n  return e;\n}\n\nfunction throwErrors(errors) {\n  if (errors.length === 1) {\n    throw errors[0];\n  }\n  if (errors.length > 1) {\n    throw multipleErrors(errors);\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// Given an array of numbers `arr`, return an array of the numbers as strings,\n// right-justified and padded to the same length.\nfunction padNumbersToEqualLength(arr) {\n  let maxLen = 0;\n  const strings = arr.map(n => {\n    const str = n.toString();\n    maxLen = Math.max(maxLen, str.length);\n    return str;\n  });\n  return strings.map(s => padLeft(s, maxLen));\n}\n\n// Produce a new string that would be the result of copying the contents\n// of the string `src` onto `dest` at offset `offest`.\nfunction strcpy(dest, src, offset) {\n  const origDestLen = dest.length;\n  const start = dest.slice(0, offset);\n  const end = dest.slice(offset + src.length);\n  return (start + src + end).substr(0, origDestLen);\n}\n\n// Casts the underlying lineAndCol object to a formatted message string,\n// highlighting `ranges`.\nfunction lineAndColumnToMessage(...ranges) {\n  const lineAndCol = this;\n  const {offset} = lineAndCol;\n  const {repeatStr} = common;\n\n  const sb = new StringBuffer();\n  sb.append('Line ' + lineAndCol.lineNum + ', col ' + lineAndCol.colNum + ':\\n');\n\n  // An array of the previous, current, and next line numbers as strings of equal length.\n  const lineNumbers = padNumbersToEqualLength([\n    lineAndCol.prevLine == null ? 0 : lineAndCol.lineNum - 1,\n    lineAndCol.lineNum,\n    lineAndCol.nextLine == null ? 0 : lineAndCol.lineNum + 1,\n  ]);\n\n  // Helper for appending formatting input lines to the buffer.\n  const appendLine = (num, content, prefix) => {\n    sb.append(prefix + lineNumbers[num] + ' | ' + content + '\\n');\n  };\n\n  // Include the previous line for context if possible.\n  if (lineAndCol.prevLine != null) {\n    appendLine(0, lineAndCol.prevLine, '  ');\n  }\n  // Line that the error occurred on.\n  appendLine(1, lineAndCol.line, '> ');\n\n  // Build up the line that points to the offset and possible indicates one or more ranges.\n  // Start with a blank line, and indicate each range by overlaying a string of `~` chars.\n  const lineLen = lineAndCol.line.length;\n  let indicationLine = repeatStr(' ', lineLen + 1);\n  for (let i = 0; i < ranges.length; ++i) {\n    let startIdx = ranges[i][0];\n    let endIdx = ranges[i][1];\n    assert(startIdx >= 0 && startIdx <= endIdx, 'range start must be >= 0 and <= end');\n\n    const lineStartOffset = offset - lineAndCol.colNum + 1;\n    startIdx = Math.max(0, startIdx - lineStartOffset);\n    endIdx = Math.min(endIdx - lineStartOffset, lineLen);\n\n    indicationLine = strcpy(indicationLine, repeatStr('~', endIdx - startIdx), startIdx);\n  }\n  const gutterWidth = 2 + lineNumbers[1].length + 3;\n  sb.append(repeatStr(' ', gutterWidth));\n  indicationLine = strcpy(indicationLine, '^', lineAndCol.colNum - 1);\n  sb.append(indicationLine.replace(/ +$/, '') + '\\n');\n\n  // Include the next line for context if possible.\n  if (lineAndCol.nextLine != null) {\n    appendLine(2, lineAndCol.nextLine, '  ');\n  }\n  return sb.contents();\n}\n\n// --------------------------------------------------------------------\n// Exports\n// --------------------------------------------------------------------\n\nlet builtInRulesCallbacks = [];\n\n// Since Grammar.BuiltInRules is bootstrapped, most of Ohm can't directly depend it.\n// This function allows modules that do depend on the built-in rules to register a callback\n// that will be called later in the initialization process.\nfunction awaitBuiltInRules(cb) {\n  builtInRulesCallbacks.push(cb);\n}\n\nfunction announceBuiltInRules(grammar) {\n  builtInRulesCallbacks.forEach(cb => {\n    cb(grammar);\n  });\n  builtInRulesCallbacks = null;\n}\n\n// Return an object with the line and column information for the given\n// offset in `str`.\nfunction getLineAndColumn(str, offset) {\n  let lineNum = 1;\n  let colNum = 1;\n\n  let currOffset = 0;\n  let lineStartOffset = 0;\n\n  let nextLine = null;\n  let prevLine = null;\n  let prevLineStartOffset = -1;\n\n  while (currOffset < offset) {\n    const c = str.charAt(currOffset++);\n    if (c === '\\n') {\n      lineNum++;\n      colNum = 1;\n      prevLineStartOffset = lineStartOffset;\n      lineStartOffset = currOffset;\n    } else if (c !== '\\r') {\n      colNum++;\n    }\n  }\n\n  // Find the end of the target line.\n  let lineEndOffset = str.indexOf('\\n', lineStartOffset);\n  if (lineEndOffset === -1) {\n    lineEndOffset = str.length;\n  } else {\n    // Get the next line.\n    const nextLineEndOffset = str.indexOf('\\n', lineEndOffset + 1);\n    nextLine =\n      nextLineEndOffset === -1 ?\n        str.slice(lineEndOffset) :\n        str.slice(lineEndOffset, nextLineEndOffset);\n    // Strip leading and trailing EOL char(s).\n    nextLine = nextLine.replace(/^\\r?\\n/, '').replace(/\\r$/, '');\n  }\n\n  // Get the previous line.\n  if (prevLineStartOffset >= 0) {\n    // Strip trailing EOL char(s).\n    prevLine = str.slice(prevLineStartOffset, lineStartOffset).replace(/\\r?\\n$/, '');\n  }\n\n  // Get the target line, stripping a trailing carriage return if necessary.\n  const line = str.slice(lineStartOffset, lineEndOffset).replace(/\\r$/, '');\n\n  return {\n    offset,\n    lineNum,\n    colNum,\n    line,\n    prevLine,\n    nextLine,\n    toString: lineAndColumnToMessage,\n  };\n}\n\n// Return a nicely-formatted string describing the line and column for the\n// given offset in `str` highlighting `ranges`.\nfunction getLineAndColumnMessage(str, offset, ...ranges) {\n  return getLineAndColumn(str, offset).toString(...ranges);\n}\n\nconst uniqueId = (() => {\n  let idCounter = 0;\n  return prefix => '' + prefix + idCounter++;\n})();\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass Interval {\n  constructor(sourceString, startIdx, endIdx) {\n    this.sourceString = sourceString;\n    this.startIdx = startIdx;\n    this.endIdx = endIdx;\n  }\n\n  get contents() {\n    if (this._contents === undefined) {\n      this._contents = this.sourceString.slice(this.startIdx, this.endIdx);\n    }\n    return this._contents;\n  }\n\n  get length() {\n    return this.endIdx - this.startIdx;\n  }\n\n  coverageWith(...intervals) {\n    return Interval.coverage(...intervals, this);\n  }\n\n  collapsedLeft() {\n    return new Interval(this.sourceString, this.startIdx, this.startIdx);\n  }\n\n  collapsedRight() {\n    return new Interval(this.sourceString, this.endIdx, this.endIdx);\n  }\n\n  getLineAndColumn() {\n    return getLineAndColumn(this.sourceString, this.startIdx);\n  }\n\n  getLineAndColumnMessage() {\n    const range = [this.startIdx, this.endIdx];\n    return getLineAndColumnMessage(this.sourceString, this.startIdx, range);\n  }\n\n  // Returns an array of 0, 1, or 2 intervals that represents the result of the\n  // interval difference operation.\n  minus(that) {\n    if (this.sourceString !== that.sourceString) {\n      throw intervalSourcesDontMatch();\n    } else if (this.startIdx === that.startIdx && this.endIdx === that.endIdx) {\n      // `this` and `that` are the same interval!\n      return [];\n    } else if (this.startIdx < that.startIdx && that.endIdx < this.endIdx) {\n      // `that` splits `this` into two intervals\n      return [\n        new Interval(this.sourceString, this.startIdx, that.startIdx),\n        new Interval(this.sourceString, that.endIdx, this.endIdx),\n      ];\n    } else if (this.startIdx < that.endIdx && that.endIdx < this.endIdx) {\n      // `that` contains a prefix of `this`\n      return [new Interval(this.sourceString, that.endIdx, this.endIdx)];\n    } else if (this.startIdx < that.startIdx && that.startIdx < this.endIdx) {\n      // `that` contains a suffix of `this`\n      return [new Interval(this.sourceString, this.startIdx, that.startIdx)];\n    } else {\n      // `that` and `this` do not overlap\n      return [this];\n    }\n  }\n\n  // Returns a new Interval that has the same extent as this one, but which is relative\n  // to `that`, an Interval that fully covers this one.\n  relativeTo(that) {\n    if (this.sourceString !== that.sourceString) {\n      throw intervalSourcesDontMatch();\n    }\n    assert(\n        this.startIdx >= that.startIdx && this.endIdx <= that.endIdx,\n        'other interval does not cover this one',\n    );\n    return new Interval(\n        this.sourceString,\n        this.startIdx - that.startIdx,\n        this.endIdx - that.startIdx,\n    );\n  }\n\n  // Returns a new Interval which contains the same contents as this one,\n  // but with whitespace trimmed from both ends.\n  trimmed() {\n    const {contents} = this;\n    const startIdx = this.startIdx + contents.match(/^\\s*/)[0].length;\n    const endIdx = this.endIdx - contents.match(/\\s*$/)[0].length;\n    return new Interval(this.sourceString, startIdx, endIdx);\n  }\n\n  subInterval(offset, len) {\n    const newStartIdx = this.startIdx + offset;\n    return new Interval(this.sourceString, newStartIdx, newStartIdx + len);\n  }\n}\n\nInterval.coverage = function(firstInterval, ...intervals) {\n  let {startIdx, endIdx} = firstInterval;\n  for (const interval of intervals) {\n    if (interval.sourceString !== firstInterval.sourceString) {\n      throw intervalSourcesDontMatch();\n    } else {\n      startIdx = Math.min(startIdx, interval.startIdx);\n      endIdx = Math.max(endIdx, interval.endIdx);\n    }\n  }\n  return new Interval(firstInterval.sourceString, startIdx, endIdx);\n};\n\nconst MAX_CHAR_CODE = 0xffff;\n\nclass InputStream {\n  constructor(source) {\n    this.source = source;\n    this.pos = 0;\n    this.examinedLength = 0;\n  }\n\n  atEnd() {\n    const ans = this.pos >= this.source.length;\n    this.examinedLength = Math.max(this.examinedLength, this.pos + 1);\n    return ans;\n  }\n\n  next() {\n    const ans = this.source[this.pos++];\n    this.examinedLength = Math.max(this.examinedLength, this.pos);\n    return ans;\n  }\n\n  nextCharCode() {\n    const nextChar = this.next();\n    return nextChar && nextChar.charCodeAt(0);\n  }\n\n  nextCodePoint() {\n    const cp = this.source.slice(this.pos++).codePointAt(0);\n    // If the code point is beyond plane 0, it takes up two characters.\n    if (cp > MAX_CHAR_CODE) {\n      this.pos += 1;\n    }\n    this.examinedLength = Math.max(this.examinedLength, this.pos);\n    return cp;\n  }\n\n  matchString(s, optIgnoreCase) {\n    let idx;\n    if (optIgnoreCase) {\n      /*\n        Case-insensitive comparison is a tricky business. Some notable gotchas include the\n        \"Turkish I\" problem (http://www.i18nguy.com/unicode/turkish-i18n.html) and the fact\n        that the German Esszet () turns into \"SS\" in upper case.\n\n        This is intended to be a locale-invariant comparison, which means it may not obey\n        locale-specific expectations (e.g. \"i\" => \"\").\n       */\n      for (idx = 0; idx < s.length; idx++) {\n        const actual = this.next();\n        const expected = s[idx];\n        if (actual == null || actual.toUpperCase() !== expected.toUpperCase()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    // Default is case-sensitive comparison.\n    for (idx = 0; idx < s.length; idx++) {\n      if (this.next() !== s[idx]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  sourceSlice(startIdx, endIdx) {\n    return this.source.slice(startIdx, endIdx);\n  }\n\n  interval(startIdx, optEndIdx) {\n    return new Interval(this.source, startIdx, optEndIdx ? optEndIdx : this.pos);\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass MatchResult {\n  constructor(\n      matcher,\n      input,\n      startExpr,\n      cst,\n      cstOffset,\n      rightmostFailurePosition,\n      optRecordedFailures,\n  ) {\n    this.matcher = matcher;\n    this.input = input;\n    this.startExpr = startExpr;\n    this._cst = cst;\n    this._cstOffset = cstOffset;\n    this._rightmostFailurePosition = rightmostFailurePosition;\n    this._rightmostFailures = optRecordedFailures;\n\n    if (this.failed()) {\n      /* eslint-disable no-invalid-this */\n      defineLazyProperty(this, 'message', function() {\n        const detail = 'Expected ' + this.getExpectedText();\n        return (\n          getLineAndColumnMessage(this.input, this.getRightmostFailurePosition()) + detail\n        );\n      });\n      defineLazyProperty(this, 'shortMessage', function() {\n        const detail = 'expected ' + this.getExpectedText();\n        const errorInfo = getLineAndColumn(\n            this.input,\n            this.getRightmostFailurePosition(),\n        );\n        return 'Line ' + errorInfo.lineNum + ', col ' + errorInfo.colNum + ': ' + detail;\n      });\n      /* eslint-enable no-invalid-this */\n    }\n  }\n\n  succeeded() {\n    return !!this._cst;\n  }\n\n  failed() {\n    return !this.succeeded();\n  }\n\n  getRightmostFailurePosition() {\n    return this._rightmostFailurePosition;\n  }\n\n  getRightmostFailures() {\n    if (!this._rightmostFailures) {\n      this.matcher.setInput(this.input);\n      const matchResultWithFailures = this.matcher._match(this.startExpr, {\n        tracing: false,\n        positionToRecordFailures: this.getRightmostFailurePosition(),\n      });\n      this._rightmostFailures = matchResultWithFailures.getRightmostFailures();\n    }\n    return this._rightmostFailures;\n  }\n\n  toString() {\n    return this.succeeded() ?\n      '[match succeeded]' :\n      '[match failed at position ' + this.getRightmostFailurePosition() + ']';\n  }\n\n  // Return a string summarizing the expected contents of the input stream when\n  // the match failure occurred.\n  getExpectedText() {\n    if (this.succeeded()) {\n      throw new Error('cannot get expected text of a successful MatchResult');\n    }\n\n    const sb = new StringBuffer();\n    let failures = this.getRightmostFailures();\n\n    // Filter out the fluffy failures to make the default error messages more useful\n    failures = failures.filter(failure => !failure.isFluffy());\n\n    for (let idx = 0; idx < failures.length; idx++) {\n      if (idx > 0) {\n        if (idx === failures.length - 1) {\n          sb.append(failures.length > 2 ? ', or ' : ' or ');\n        } else {\n          sb.append(', ');\n        }\n      }\n      sb.append(failures[idx].toString());\n    }\n    return sb.contents();\n  }\n\n  getInterval() {\n    const pos = this.getRightmostFailurePosition();\n    return new Interval(this.input, pos, pos);\n  }\n}\n\nclass PosInfo {\n  constructor() {\n    this.applicationMemoKeyStack = []; // active applications at this position\n    this.memo = {};\n    this.maxExaminedLength = 0;\n    this.maxRightmostFailureOffset = -1;\n    this.currentLeftRecursion = undefined;\n  }\n\n  isActive(application) {\n    return this.applicationMemoKeyStack.indexOf(application.toMemoKey()) >= 0;\n  }\n\n  enter(application) {\n    this.applicationMemoKeyStack.push(application.toMemoKey());\n  }\n\n  exit() {\n    this.applicationMemoKeyStack.pop();\n  }\n\n  startLeftRecursion(headApplication, memoRec) {\n    memoRec.isLeftRecursion = true;\n    memoRec.headApplication = headApplication;\n    memoRec.nextLeftRecursion = this.currentLeftRecursion;\n    this.currentLeftRecursion = memoRec;\n\n    const {applicationMemoKeyStack} = this;\n    const indexOfFirstInvolvedRule =\n      applicationMemoKeyStack.indexOf(headApplication.toMemoKey()) + 1;\n    const involvedApplicationMemoKeys = applicationMemoKeyStack.slice(\n        indexOfFirstInvolvedRule,\n    );\n\n    memoRec.isInvolved = function(applicationMemoKey) {\n      return involvedApplicationMemoKeys.indexOf(applicationMemoKey) >= 0;\n    };\n\n    memoRec.updateInvolvedApplicationMemoKeys = function() {\n      for (let idx = indexOfFirstInvolvedRule; idx < applicationMemoKeyStack.length; idx++) {\n        const applicationMemoKey = applicationMemoKeyStack[idx];\n        if (!this.isInvolved(applicationMemoKey)) {\n          involvedApplicationMemoKeys.push(applicationMemoKey);\n        }\n      }\n    };\n  }\n\n  endLeftRecursion() {\n    this.currentLeftRecursion = this.currentLeftRecursion.nextLeftRecursion;\n  }\n\n  // Note: this method doesn't get called for the \"head\" of a left recursion -- for LR heads,\n  // the memoized result (which starts out being a failure) is always used.\n  shouldUseMemoizedResult(memoRec) {\n    if (!memoRec.isLeftRecursion) {\n      return true;\n    }\n    const {applicationMemoKeyStack} = this;\n    for (let idx = 0; idx < applicationMemoKeyStack.length; idx++) {\n      const applicationMemoKey = applicationMemoKeyStack[idx];\n      if (memoRec.isInvolved(applicationMemoKey)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  memoize(memoKey, memoRec) {\n    this.memo[memoKey] = memoRec;\n    this.maxExaminedLength = Math.max(this.maxExaminedLength, memoRec.examinedLength);\n    this.maxRightmostFailureOffset = Math.max(\n        this.maxRightmostFailureOffset,\n        memoRec.rightmostFailureOffset,\n    );\n    return memoRec;\n  }\n\n  clearObsoleteEntries(pos, invalidatedIdx) {\n    if (pos + this.maxExaminedLength <= invalidatedIdx) {\n      // Optimization: none of the rule applications that were memoized here examined the\n      // interval of the input that changed, so nothing has to be invalidated.\n      return;\n    }\n\n    const {memo} = this;\n    this.maxExaminedLength = 0;\n    this.maxRightmostFailureOffset = -1;\n    Object.keys(memo).forEach(k => {\n      const memoRec = memo[k];\n      if (pos + memoRec.examinedLength > invalidatedIdx) {\n        delete memo[k];\n      } else {\n        this.maxExaminedLength = Math.max(this.maxExaminedLength, memoRec.examinedLength);\n        this.maxRightmostFailureOffset = Math.max(\n            this.maxRightmostFailureOffset,\n            memoRec.rightmostFailureOffset,\n        );\n      }\n    });\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// Unicode characters that are used in the `toString` output.\nconst BALLOT_X = '\\u2717';\nconst CHECK_MARK = '\\u2713';\nconst DOT_OPERATOR = '\\u22C5';\nconst RIGHTWARDS_DOUBLE_ARROW = '\\u21D2';\nconst SYMBOL_FOR_HORIZONTAL_TABULATION = '\\u2409';\nconst SYMBOL_FOR_LINE_FEED = '\\u240A';\nconst SYMBOL_FOR_CARRIAGE_RETURN = '\\u240D';\n\nconst Flags = {\n  succeeded: 1 << 0,\n  isRootNode: 1 << 1,\n  isImplicitSpaces: 1 << 2,\n  isMemoized: 1 << 3,\n  isHeadOfLeftRecursion: 1 << 4,\n  terminatesLR: 1 << 5,\n};\n\nfunction spaces(n) {\n  return repeat(' ', n).join('');\n}\n\n// Return a string representation of a portion of `input` at offset `pos`.\n// The result will contain exactly `len` characters.\nfunction getInputExcerpt(input, pos, len) {\n  const excerpt = asEscapedString(input.slice(pos, pos + len));\n\n  // Pad the output if necessary.\n  if (excerpt.length < len) {\n    return excerpt + repeat(' ', len - excerpt.length).join('');\n  }\n  return excerpt;\n}\n\nfunction asEscapedString(obj) {\n  if (typeof obj === 'string') {\n    // Replace non-printable characters with visible symbols.\n    return obj\n        .replace(/ /g, DOT_OPERATOR)\n        .replace(/\\t/g, SYMBOL_FOR_HORIZONTAL_TABULATION)\n        .replace(/\\n/g, SYMBOL_FOR_LINE_FEED)\n        .replace(/\\r/g, SYMBOL_FOR_CARRIAGE_RETURN);\n  }\n  return String(obj);\n}\n\n// ----------------- Trace -----------------\n\nclass Trace {\n  constructor(input, pos1, pos2, expr, succeeded, bindings, optChildren) {\n    this.input = input;\n    this.pos = this.pos1 = pos1;\n    this.pos2 = pos2;\n    this.source = new Interval(input, pos1, pos2);\n    this.expr = expr;\n    this.bindings = bindings;\n    this.children = optChildren || [];\n    this.terminatingLREntry = null;\n\n    this._flags = succeeded ? Flags.succeeded : 0;\n  }\n\n  get displayString() {\n    return this.expr.toDisplayString();\n  }\n\n  clone() {\n    return this.cloneWithExpr(this.expr);\n  }\n\n  cloneWithExpr(expr) {\n    const ans = new Trace(\n        this.input,\n        this.pos,\n        this.pos2,\n        expr,\n        this.succeeded,\n        this.bindings,\n        this.children,\n    );\n\n    ans.isHeadOfLeftRecursion = this.isHeadOfLeftRecursion;\n    ans.isImplicitSpaces = this.isImplicitSpaces;\n    ans.isMemoized = this.isMemoized;\n    ans.isRootNode = this.isRootNode;\n    ans.terminatesLR = this.terminatesLR;\n    ans.terminatingLREntry = this.terminatingLREntry;\n    return ans;\n  }\n\n  // Record the trace information for the terminating condition of the LR loop.\n  recordLRTermination(ruleBodyTrace, value) {\n    this.terminatingLREntry = new Trace(\n        this.input,\n        this.pos,\n        this.pos2,\n        this.expr,\n        false,\n        [value],\n        [ruleBodyTrace],\n    );\n    this.terminatingLREntry.terminatesLR = true;\n  }\n\n  // Recursively traverse this trace node and all its descendents, calling a visitor function\n  // for each node that is visited. If `vistorObjOrFn` is an object, then its 'enter' property\n  // is a function to call before visiting the children of a node, and its 'exit' property is\n  // a function to call afterwards. If `visitorObjOrFn` is a function, it represents the 'enter'\n  // function.\n  //\n  // The functions are called with three arguments: the Trace node, its parent Trace, and a number\n  // representing the depth of the node in the tree. (The root node has depth 0.) `optThisArg`, if\n  // specified, is the value to use for `this` when executing the visitor functions.\n  walk(visitorObjOrFn, optThisArg) {\n    let visitor = visitorObjOrFn;\n    if (typeof visitor === 'function') {\n      visitor = {enter: visitor};\n    }\n\n    function _walk(node, parent, depth) {\n      let recurse = true;\n      if (visitor.enter) {\n        if (visitor.enter.call(optThisArg, node, parent, depth) === Trace.prototype.SKIP) {\n          recurse = false;\n        }\n      }\n      if (recurse) {\n        node.children.forEach(child => {\n          _walk(child, node, depth + 1);\n        });\n        if (visitor.exit) {\n          visitor.exit.call(optThisArg, node, parent, depth);\n        }\n      }\n    }\n    if (this.isRootNode) {\n      // Don't visit the root node itself, only its children.\n      this.children.forEach(c => {\n        _walk(c, null, 0);\n      });\n    } else {\n      _walk(this, null, 0);\n    }\n  }\n\n  // Return a string representation of the trace.\n  // Sample:\n  //     12+2*3  exp   \"12\"\n  //     12+2*3    addExp (LR)   \"12\"\n  //     12+2*3        addExp_plus\n  toString() {\n    const sb = new StringBuffer();\n    this.walk((node, parent, depth) => {\n      if (!node) {\n        return this.SKIP;\n      }\n      const ctorName = node.expr.constructor.name;\n      // Don't print anything for Alt nodes.\n      if (ctorName === 'Alt') {\n        return; // eslint-disable-line consistent-return\n      }\n      sb.append(getInputExcerpt(node.input, node.pos, 10) + spaces(depth * 2 + 1));\n      sb.append((node.succeeded ? CHECK_MARK : BALLOT_X) + ' ' + node.displayString);\n      if (node.isHeadOfLeftRecursion) {\n        sb.append(' (LR)');\n      }\n      if (node.succeeded) {\n        const contents = asEscapedString(node.source.contents);\n        sb.append(' ' + RIGHTWARDS_DOUBLE_ARROW + '  ');\n        sb.append(typeof contents === 'string' ? '\"' + contents + '\"' : contents);\n      }\n      sb.append('\\n');\n    });\n    return sb.contents();\n  }\n}\n\n// A value that can be returned from visitor functions to indicate that a\n// node should not be recursed into.\nTrace.prototype.SKIP = {};\n\n// For convenience, create a getter and setter for the boolean flags in `Flags`.\nObject.keys(Flags).forEach(name => {\n  const mask = Flags[name];\n  Object.defineProperty(Trace.prototype, name, {\n    get() {\n      return (this._flags & mask) !== 0;\n    },\n    set(val) {\n      if (val) {\n        this._flags |= mask;\n      } else {\n        this._flags &= ~mask;\n      }\n    },\n  });\n});\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Return true if we should skip spaces preceding this expression in a syntactic context.\n*/\nPExpr.prototype.allowsSkippingPrecedingSpace = abstract('allowsSkippingPrecedingSpace');\n\n/*\n  Generally, these are all first-order expressions and (with the exception of Apply)\n  directly read from the input stream.\n*/\nany.allowsSkippingPrecedingSpace =\n  end.allowsSkippingPrecedingSpace =\n  Apply.prototype.allowsSkippingPrecedingSpace =\n  Terminal.prototype.allowsSkippingPrecedingSpace =\n  Range.prototype.allowsSkippingPrecedingSpace =\n  UnicodeChar.prototype.allowsSkippingPrecedingSpace =\n    function() {\n      return true;\n    };\n\n/*\n  Higher-order expressions that don't directly consume input.\n*/\nAlt.prototype.allowsSkippingPrecedingSpace =\n  Iter.prototype.allowsSkippingPrecedingSpace =\n  Lex.prototype.allowsSkippingPrecedingSpace =\n  Lookahead.prototype.allowsSkippingPrecedingSpace =\n  Not.prototype.allowsSkippingPrecedingSpace =\n  Param.prototype.allowsSkippingPrecedingSpace =\n  Seq.prototype.allowsSkippingPrecedingSpace =\n    function() {\n      return false;\n    };\n\nlet BuiltInRules$1;\n\nawaitBuiltInRules(g => {\n  BuiltInRules$1 = g;\n});\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nlet lexifyCount;\n\nPExpr.prototype.assertAllApplicationsAreValid = function(ruleName, grammar) {\n  lexifyCount = 0;\n  this._assertAllApplicationsAreValid(ruleName, grammar);\n};\n\nPExpr.prototype._assertAllApplicationsAreValid = abstract(\n    '_assertAllApplicationsAreValid',\n);\n\nany._assertAllApplicationsAreValid =\n  end._assertAllApplicationsAreValid =\n  Terminal.prototype._assertAllApplicationsAreValid =\n  Range.prototype._assertAllApplicationsAreValid =\n  Param.prototype._assertAllApplicationsAreValid =\n  UnicodeChar.prototype._assertAllApplicationsAreValid =\n    function(ruleName, grammar) {\n      // no-op\n    };\n\nLex.prototype._assertAllApplicationsAreValid = function(ruleName, grammar) {\n  lexifyCount++;\n  this.expr._assertAllApplicationsAreValid(ruleName, grammar);\n  lexifyCount--;\n};\n\nAlt.prototype._assertAllApplicationsAreValid = function(ruleName, grammar) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    this.terms[idx]._assertAllApplicationsAreValid(ruleName, grammar);\n  }\n};\n\nSeq.prototype._assertAllApplicationsAreValid = function(ruleName, grammar) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx]._assertAllApplicationsAreValid(ruleName, grammar);\n  }\n};\n\nIter.prototype._assertAllApplicationsAreValid =\n  Not.prototype._assertAllApplicationsAreValid =\n  Lookahead.prototype._assertAllApplicationsAreValid =\n    function(ruleName, grammar) {\n      this.expr._assertAllApplicationsAreValid(ruleName, grammar);\n    };\n\nApply.prototype._assertAllApplicationsAreValid = function(\n    ruleName,\n    grammar,\n    skipSyntacticCheck = false,\n) {\n  const ruleInfo = grammar.rules[this.ruleName];\n  const isContextSyntactic = isSyntactic(ruleName) && lexifyCount === 0;\n\n  // Make sure that the rule exists...\n  if (!ruleInfo) {\n    throw undeclaredRule(this.ruleName, grammar.name, this.source);\n  }\n\n  // ...and that this application is allowed\n  if (!skipSyntacticCheck && isSyntactic(this.ruleName) && !isContextSyntactic) {\n    throw applicationOfSyntacticRuleFromLexicalContext(this.ruleName, this);\n  }\n\n  // ...and that this application has the correct number of arguments.\n  const actual = this.args.length;\n  const expected = ruleInfo.formals.length;\n  if (actual !== expected) {\n    throw wrongNumberOfArguments(this.ruleName, expected, actual, this.source);\n  }\n\n  const isBuiltInApplySyntactic =\n    BuiltInRules$1 && ruleInfo === BuiltInRules$1.rules.applySyntactic;\n  const isBuiltInCaseInsensitive =\n    BuiltInRules$1 && ruleInfo === BuiltInRules$1.rules.caseInsensitive;\n\n  // If it's an application of 'caseInsensitive', ensure that the argument is a Terminal.\n  if (isBuiltInCaseInsensitive) {\n    if (!(this.args[0] instanceof Terminal)) {\n      throw incorrectArgumentType('a Terminal (e.g. \"abc\")', this.args[0]);\n    }\n  }\n\n  if (isBuiltInApplySyntactic) {\n    const arg = this.args[0];\n    if (!(arg instanceof Apply)) {\n      throw incorrectArgumentType('a syntactic rule application', arg);\n    }\n    if (!isSyntactic(arg.ruleName)) {\n      throw applySyntacticWithLexicalRuleApplication(arg);\n    }\n    if (isContextSyntactic) {\n      throw unnecessaryExperimentalApplySyntactic(this);\n    }\n  }\n\n  // ...and that all of the argument expressions only have valid applications and have arity 1.\n  // If `this` is an application of the built-in applySyntactic rule, then its arg is\n  // allowed (and expected) to be a syntactic rule, even if we're in a lexical context.\n  this.args.forEach(arg => {\n    arg._assertAllApplicationsAreValid(ruleName, grammar, isBuiltInApplySyntactic);\n    if (arg.getArity() !== 1) {\n      throw invalidParameter(this.ruleName, arg);\n    }\n  });\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.assertChoicesHaveUniformArity = abstract(\n    'assertChoicesHaveUniformArity',\n);\n\nany.assertChoicesHaveUniformArity =\n  end.assertChoicesHaveUniformArity =\n  Terminal.prototype.assertChoicesHaveUniformArity =\n  Range.prototype.assertChoicesHaveUniformArity =\n  Param.prototype.assertChoicesHaveUniformArity =\n  Lex.prototype.assertChoicesHaveUniformArity =\n  UnicodeChar.prototype.assertChoicesHaveUniformArity =\n    function(ruleName) {\n      // no-op\n    };\n\nAlt.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  if (this.terms.length === 0) {\n    return;\n  }\n  const arity = this.terms[0].getArity();\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    const term = this.terms[idx];\n    term.assertChoicesHaveUniformArity();\n    const otherArity = term.getArity();\n    if (arity !== otherArity) {\n      throw inconsistentArity(ruleName, arity, otherArity, term);\n    }\n  }\n};\n\nExtend.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  // Extend is a special case of Alt that's guaranteed to have exactly two\n  // cases: [extensions, origBody].\n  const actualArity = this.terms[0].getArity();\n  const expectedArity = this.terms[1].getArity();\n  if (actualArity !== expectedArity) {\n    throw inconsistentArity(ruleName, expectedArity, actualArity, this.terms[0]);\n  }\n};\n\nSeq.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx].assertChoicesHaveUniformArity(ruleName);\n  }\n};\n\nIter.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  this.expr.assertChoicesHaveUniformArity(ruleName);\n};\n\nNot.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  // no-op (not required b/c the nested expr doesn't show up in the CST)\n};\n\nLookahead.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  this.expr.assertChoicesHaveUniformArity(ruleName);\n};\n\nApply.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  // The arities of the parameter expressions is required to be 1 by\n  // `assertAllApplicationsAreValid()`.\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.assertIteratedExprsAreNotNullable = abstract(\n    'assertIteratedExprsAreNotNullable',\n);\n\nany.assertIteratedExprsAreNotNullable =\n  end.assertIteratedExprsAreNotNullable =\n  Terminal.prototype.assertIteratedExprsAreNotNullable =\n  Range.prototype.assertIteratedExprsAreNotNullable =\n  Param.prototype.assertIteratedExprsAreNotNullable =\n  UnicodeChar.prototype.assertIteratedExprsAreNotNullable =\n    function(grammar) {\n      // no-op\n    };\n\nAlt.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    this.terms[idx].assertIteratedExprsAreNotNullable(grammar);\n  }\n};\n\nSeq.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx].assertIteratedExprsAreNotNullable(grammar);\n  }\n};\n\nIter.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  // Note: this is the implementation of this method for `Star` and `Plus` expressions.\n  // It is overridden for `Opt` below.\n  this.expr.assertIteratedExprsAreNotNullable(grammar);\n  if (this.expr.isNullable(grammar)) {\n    throw kleeneExprHasNullableOperand(this, []);\n  }\n};\n\nOpt.prototype.assertIteratedExprsAreNotNullable =\n  Not.prototype.assertIteratedExprsAreNotNullable =\n  Lookahead.prototype.assertIteratedExprsAreNotNullable =\n  Lex.prototype.assertIteratedExprsAreNotNullable =\n    function(grammar) {\n      this.expr.assertIteratedExprsAreNotNullable(grammar);\n    };\n\nApply.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  this.args.forEach(arg => {\n    arg.assertIteratedExprsAreNotNullable(grammar);\n  });\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass Node {\n  constructor(matchLength) {\n    this.matchLength = matchLength;\n  }\n\n  get ctorName() {\n    throw new Error('subclass responsibility');\n  }\n\n  numChildren() {\n    return this.children ? this.children.length : 0;\n  }\n\n  childAt(idx) {\n    if (this.children) {\n      return this.children[idx];\n    }\n  }\n\n  indexOfChild(arg) {\n    return this.children.indexOf(arg);\n  }\n\n  hasChildren() {\n    return this.numChildren() > 0;\n  }\n\n  hasNoChildren() {\n    return !this.hasChildren();\n  }\n\n  onlyChild() {\n    if (this.numChildren() !== 1) {\n      throw new Error(\n          'cannot get only child of a node of type ' +\n          this.ctorName +\n          ' (it has ' +\n          this.numChildren() +\n          ' children)',\n      );\n    } else {\n      return this.firstChild();\n    }\n  }\n\n  firstChild() {\n    if (this.hasNoChildren()) {\n      throw new Error(\n          'cannot get first child of a ' + this.ctorName + ' node, which has no children',\n      );\n    } else {\n      return this.childAt(0);\n    }\n  }\n\n  lastChild() {\n    if (this.hasNoChildren()) {\n      throw new Error(\n          'cannot get last child of a ' + this.ctorName + ' node, which has no children',\n      );\n    } else {\n      return this.childAt(this.numChildren() - 1);\n    }\n  }\n\n  childBefore(child) {\n    const childIdx = this.indexOfChild(child);\n    if (childIdx < 0) {\n      throw new Error('Node.childBefore() called w/ an argument that is not a child');\n    } else if (childIdx === 0) {\n      throw new Error('cannot get child before first child');\n    } else {\n      return this.childAt(childIdx - 1);\n    }\n  }\n\n  childAfter(child) {\n    const childIdx = this.indexOfChild(child);\n    if (childIdx < 0) {\n      throw new Error('Node.childAfter() called w/ an argument that is not a child');\n    } else if (childIdx === this.numChildren() - 1) {\n      throw new Error('cannot get child after last child');\n    } else {\n      return this.childAt(childIdx + 1);\n    }\n  }\n\n  isTerminal() {\n    return false;\n  }\n\n  isNonterminal() {\n    return false;\n  }\n\n  isIteration() {\n    return false;\n  }\n\n  isOptional() {\n    return false;\n  }\n}\n\n// Terminals\n\nclass TerminalNode extends Node {\n  get ctorName() {\n    return '_terminal';\n  }\n\n  isTerminal() {\n    return true;\n  }\n\n  get primitiveValue() {\n    throw new Error('The `primitiveValue` property was removed in Ohm v17.');\n  }\n}\n\n// Nonterminals\n\nclass NonterminalNode extends Node {\n  constructor(ruleName, children, childOffsets, matchLength) {\n    super(matchLength);\n    this.ruleName = ruleName;\n    this.children = children;\n    this.childOffsets = childOffsets;\n  }\n\n  get ctorName() {\n    return this.ruleName;\n  }\n\n  isNonterminal() {\n    return true;\n  }\n\n  isLexical() {\n    return isLexical(this.ctorName);\n  }\n\n  isSyntactic() {\n    return isSyntactic(this.ctorName);\n  }\n}\n\n// Iterations\n\nclass IterationNode extends Node {\n  constructor(children, childOffsets, matchLength, isOptional) {\n    super(matchLength);\n    this.children = children;\n    this.childOffsets = childOffsets;\n    this.optional = isOptional;\n  }\n\n  get ctorName() {\n    return '_iter';\n  }\n\n  isIteration() {\n    return true;\n  }\n\n  isOptional() {\n    return this.optional;\n  }\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Evaluate the expression and return `true` if it succeeds, `false` otherwise. This method should\n  only be called directly by `State.prototype.eval(expr)`, which also updates the data structures\n  that are used for tracing. (Making those updates in a method of `State` enables the trace-specific\n  data structures to be \"secrets\" of that class, which is good for modularity.)\n\n  The contract of this method is as follows:\n  * When the return value is `true`,\n    - the state object will have `expr.getArity()` more bindings than it did before the call.\n  * When the return value is `false`,\n    - the state object may have more bindings than it did before the call, and\n    - its input stream's position may be anywhere.\n\n  Note that `State.prototype.eval(expr)`, unlike this method, guarantees that neither the state\n  object's bindings nor its input stream's position will change if the expression fails to match.\n*/\nPExpr.prototype.eval = abstract('eval'); // function(state) { ... }\n\nany.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const cp = inputStream.nextCodePoint();\n  if (cp !== undefined) {\n    state.pushBinding(new TerminalNode(String.fromCodePoint(cp).length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\nend.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (inputStream.atEnd()) {\n    state.pushBinding(new TerminalNode(0), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\nTerminal.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (!inputStream.matchString(this.obj)) {\n    state.processFailure(origPos, this);\n    return false;\n  } else {\n    state.pushBinding(new TerminalNode(this.obj.length), origPos);\n    return true;\n  }\n};\n\nRange.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n\n  // A range can operate in one of two modes: matching a single, 16-bit _code unit_,\n  // or matching a _code point_. (Code points over 0xFFFF take up two 16-bit code units.)\n  const cp = this.matchCodePoint ? inputStream.nextCodePoint() : inputStream.nextCharCode();\n\n  // Always compare by code point value to get the correct result in all scenarios.\n  // Note that for strings of length 1, codePointAt(0) and charPointAt(0) are equivalent.\n  if (cp !== undefined && this.from.codePointAt(0) <= cp && cp <= this.to.codePointAt(0)) {\n    state.pushBinding(new TerminalNode(String.fromCodePoint(cp).length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\nParam.prototype.eval = function(state) {\n  return state.eval(state.currentApplication().args[this.index]);\n};\n\nLex.prototype.eval = function(state) {\n  state.enterLexifiedContext();\n  const ans = state.eval(this.expr);\n  state.exitLexifiedContext();\n  return ans;\n};\n\nAlt.prototype.eval = function(state) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    if (state.eval(this.terms[idx])) {\n      return true;\n    }\n  }\n  return false;\n};\n\nSeq.prototype.eval = function(state) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    const factor = this.factors[idx];\n    if (!state.eval(factor)) {\n      return false;\n    }\n  }\n  return true;\n};\n\nIter.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const arity = this.getArity();\n  const cols = [];\n  const colOffsets = [];\n  while (cols.length < arity) {\n    cols.push([]);\n    colOffsets.push([]);\n  }\n\n  let numMatches = 0;\n  let prevPos = origPos;\n  let idx;\n  while (numMatches < this.maxNumMatches && state.eval(this.expr)) {\n    if (inputStream.pos === prevPos) {\n      throw kleeneExprHasNullableOperand(this, state._applicationStack);\n    }\n    prevPos = inputStream.pos;\n    numMatches++;\n    const row = state._bindings.splice(state._bindings.length - arity, arity);\n    const rowOffsets = state._bindingOffsets.splice(\n        state._bindingOffsets.length - arity,\n        arity,\n    );\n    for (idx = 0; idx < row.length; idx++) {\n      cols[idx].push(row[idx]);\n      colOffsets[idx].push(rowOffsets[idx]);\n    }\n  }\n  if (numMatches < this.minNumMatches) {\n    return false;\n  }\n  let offset = state.posToOffset(origPos);\n  let matchLength = 0;\n  if (numMatches > 0) {\n    const lastCol = cols[arity - 1];\n    const lastColOffsets = colOffsets[arity - 1];\n\n    const endOffset =\n      lastColOffsets[lastColOffsets.length - 1] + lastCol[lastCol.length - 1].matchLength;\n    offset = colOffsets[0][0];\n    matchLength = endOffset - offset;\n  }\n  const isOptional = this instanceof Opt;\n  for (idx = 0; idx < cols.length; idx++) {\n    state._bindings.push(\n        new IterationNode(cols[idx], colOffsets[idx], matchLength, isOptional),\n    );\n    state._bindingOffsets.push(offset);\n  }\n  return true;\n};\n\nNot.prototype.eval = function(state) {\n  /*\n    TODO:\n    - Right now we're just throwing away all of the failures that happen inside a `not`, and\n      recording `this` as a failed expression.\n    - Double negation should be equivalent to lookahead, but that's not the case right now wrt\n      failures. E.g., ~~'foo' produces a failure for ~~'foo', but maybe it should produce\n      a failure for 'foo' instead.\n  */\n\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  state.pushFailuresInfo();\n\n  const ans = state.eval(this.expr);\n\n  state.popFailuresInfo();\n  if (ans) {\n    state.processFailure(origPos, this);\n    return false;\n  }\n\n  inputStream.pos = origPos;\n  return true;\n};\n\nLookahead.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (state.eval(this.expr)) {\n    inputStream.pos = origPos;\n    return true;\n  } else {\n    return false;\n  }\n};\n\nApply.prototype.eval = function(state) {\n  const caller = state.currentApplication();\n  const actuals = caller ? caller.args : [];\n  const app = this.substituteParams(actuals);\n\n  const posInfo = state.getCurrentPosInfo();\n  if (posInfo.isActive(app)) {\n    // This rule is already active at this position, i.e., it is left-recursive.\n    return app.handleCycle(state);\n  }\n\n  const memoKey = app.toMemoKey();\n  const memoRec = posInfo.memo[memoKey];\n\n  if (memoRec && posInfo.shouldUseMemoizedResult(memoRec)) {\n    if (state.hasNecessaryInfo(memoRec)) {\n      return state.useMemoizedResult(state.inputStream.pos, memoRec);\n    }\n    delete posInfo.memo[memoKey];\n  }\n  return app.reallyEval(state);\n};\n\nApply.prototype.handleCycle = function(state) {\n  const posInfo = state.getCurrentPosInfo();\n  const {currentLeftRecursion} = posInfo;\n  const memoKey = this.toMemoKey();\n  let memoRec = posInfo.memo[memoKey];\n\n  if (currentLeftRecursion && currentLeftRecursion.headApplication.toMemoKey() === memoKey) {\n    // We already know about this left recursion, but it's possible there are \"involved\n    // applications\" that we don't already know about, so...\n    memoRec.updateInvolvedApplicationMemoKeys();\n  } else if (!memoRec) {\n    // New left recursion detected! Memoize a failure to try to get a seed parse.\n    memoRec = posInfo.memoize(memoKey, {\n      matchLength: 0,\n      examinedLength: 0,\n      value: false,\n      rightmostFailureOffset: -1,\n    });\n    posInfo.startLeftRecursion(this, memoRec);\n  }\n  return state.useMemoizedResult(state.inputStream.pos, memoRec);\n};\n\nApply.prototype.reallyEval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const origPosInfo = state.getCurrentPosInfo();\n  const ruleInfo = state.grammar.rules[this.ruleName];\n  const {body} = ruleInfo;\n  const {description} = ruleInfo;\n\n  state.enterApplication(origPosInfo, this);\n\n  if (description) {\n    state.pushFailuresInfo();\n  }\n\n  // Reset the input stream's examinedLength property so that we can track\n  // the examined length of this particular application.\n  const origInputStreamExaminedLength = inputStream.examinedLength;\n  inputStream.examinedLength = 0;\n\n  let value = this.evalOnce(body, state);\n  const currentLR = origPosInfo.currentLeftRecursion;\n  const memoKey = this.toMemoKey();\n  const isHeadOfLeftRecursion = currentLR && currentLR.headApplication.toMemoKey() === memoKey;\n  let memoRec;\n\n  if (state.doNotMemoize) {\n    state.doNotMemoize = false;\n  } else if (isHeadOfLeftRecursion) {\n    value = this.growSeedResult(body, state, origPos, currentLR, value);\n    origPosInfo.endLeftRecursion();\n    memoRec = currentLR;\n    memoRec.examinedLength = inputStream.examinedLength - origPos;\n    memoRec.rightmostFailureOffset = state._getRightmostFailureOffset();\n    origPosInfo.memoize(memoKey, memoRec); // updates origPosInfo's maxExaminedLength\n  } else if (!currentLR || !currentLR.isInvolved(memoKey)) {\n    // This application is not involved in left recursion, so it's ok to memoize it.\n    memoRec = origPosInfo.memoize(memoKey, {\n      matchLength: inputStream.pos - origPos,\n      examinedLength: inputStream.examinedLength - origPos,\n      value,\n      failuresAtRightmostPosition: state.cloneRecordedFailures(),\n      rightmostFailureOffset: state._getRightmostFailureOffset(),\n    });\n  }\n  const succeeded = !!value;\n\n  if (description) {\n    state.popFailuresInfo();\n    if (!succeeded) {\n      state.processFailure(origPos, this);\n    }\n    if (memoRec) {\n      memoRec.failuresAtRightmostPosition = state.cloneRecordedFailures();\n    }\n  }\n\n  // Record trace information in the memo table, so that it is available if the memoized result\n  // is used later.\n  if (state.isTracing() && memoRec) {\n    const entry = state.getTraceEntry(origPos, this, succeeded, succeeded ? [value] : []);\n    if (isHeadOfLeftRecursion) {\n      assert(entry.terminatingLREntry != null || !succeeded);\n      entry.isHeadOfLeftRecursion = true;\n    }\n    memoRec.traceEntry = entry;\n  }\n\n  // Fix the input stream's examinedLength -- it should be the maximum examined length\n  // across all applications, not just this one.\n  inputStream.examinedLength = Math.max(\n      inputStream.examinedLength,\n      origInputStreamExaminedLength,\n  );\n\n  state.exitApplication(origPosInfo, value);\n\n  return succeeded;\n};\n\nApply.prototype.evalOnce = function(expr, state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n\n  if (state.eval(expr)) {\n    const arity = expr.getArity();\n    const bindings = state._bindings.splice(state._bindings.length - arity, arity);\n    const offsets = state._bindingOffsets.splice(state._bindingOffsets.length - arity, arity);\n    const matchLength = inputStream.pos - origPos;\n    return new NonterminalNode(this.ruleName, bindings, offsets, matchLength);\n  } else {\n    return false;\n  }\n};\n\nApply.prototype.growSeedResult = function(body, state, origPos, lrMemoRec, newValue) {\n  if (!newValue) {\n    return false;\n  }\n\n  const {inputStream} = state;\n\n  while (true) {\n    lrMemoRec.matchLength = inputStream.pos - origPos;\n    lrMemoRec.value = newValue;\n    lrMemoRec.failuresAtRightmostPosition = state.cloneRecordedFailures();\n\n    if (state.isTracing()) {\n      // Before evaluating the body again, add a trace node for this application to the memo entry.\n      // Its only child is a copy of the trace node from `newValue`, which will always be the last\n      // element in `state.trace`.\n      const seedTrace = state.trace[state.trace.length - 1];\n      lrMemoRec.traceEntry = new Trace(\n          state.input,\n          origPos,\n          inputStream.pos,\n          this,\n          true,\n          [newValue],\n          [seedTrace.clone()],\n      );\n    }\n    inputStream.pos = origPos;\n    newValue = this.evalOnce(body, state);\n    if (inputStream.pos - origPos <= lrMemoRec.matchLength) {\n      break;\n    }\n    if (state.isTracing()) {\n      state.trace.splice(-2, 1); // Drop the trace for the old seed.\n    }\n  }\n  if (state.isTracing()) {\n    // The last entry is for an unused result -- pop it and save it in the \"real\" entry.\n    lrMemoRec.traceEntry.recordLRTermination(state.trace.pop(), newValue);\n  }\n  inputStream.pos = origPos + lrMemoRec.matchLength;\n  return lrMemoRec.value;\n};\n\nUnicodeChar.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const ch = inputStream.next();\n  if (ch && this.pattern.test(ch)) {\n    state.pushBinding(new TerminalNode(ch.length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.getArity = abstract('getArity');\n\nany.getArity =\n  end.getArity =\n  Terminal.prototype.getArity =\n  Range.prototype.getArity =\n  Param.prototype.getArity =\n  Apply.prototype.getArity =\n  UnicodeChar.prototype.getArity =\n    function() {\n      return 1;\n    };\n\nAlt.prototype.getArity = function() {\n  // This is ok b/c all terms must have the same arity -- this property is\n  // checked by the Grammar constructor.\n  return this.terms.length === 0 ? 0 : this.terms[0].getArity();\n};\n\nSeq.prototype.getArity = function() {\n  let arity = 0;\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    arity += this.factors[idx].getArity();\n  }\n  return arity;\n};\n\nIter.prototype.getArity = function() {\n  return this.expr.getArity();\n};\n\nNot.prototype.getArity = function() {\n  return 0;\n};\n\nLookahead.prototype.getArity = Lex.prototype.getArity = function() {\n  return this.expr.getArity();\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction getMetaInfo(expr, grammarInterval) {\n  const metaInfo = {};\n  if (expr.source && grammarInterval) {\n    const adjusted = expr.source.relativeTo(grammarInterval);\n    metaInfo.sourceInterval = [adjusted.startIdx, adjusted.endIdx];\n  }\n  return metaInfo;\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.outputRecipe = abstract('outputRecipe');\n\nany.outputRecipe = function(formals, grammarInterval) {\n  return ['any', getMetaInfo(this, grammarInterval)];\n};\n\nend.outputRecipe = function(formals, grammarInterval) {\n  return ['end', getMetaInfo(this, grammarInterval)];\n};\n\nTerminal.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['terminal', getMetaInfo(this, grammarInterval), this.obj];\n};\n\nRange.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['range', getMetaInfo(this, grammarInterval), this.from, this.to];\n};\n\nParam.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['param', getMetaInfo(this, grammarInterval), this.index];\n};\n\nAlt.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['alt', getMetaInfo(this, grammarInterval)].concat(\n      this.terms.map(term => term.outputRecipe(formals, grammarInterval)),\n  );\n};\n\nExtend.prototype.outputRecipe = function(formals, grammarInterval) {\n  const extension = this.terms[0]; // [extension, original]\n  return extension.outputRecipe(formals, grammarInterval);\n};\n\nSplice.prototype.outputRecipe = function(formals, grammarInterval) {\n  const beforeTerms = this.terms.slice(0, this.expansionPos);\n  const afterTerms = this.terms.slice(this.expansionPos + 1);\n  return [\n    'splice',\n    getMetaInfo(this, grammarInterval),\n    beforeTerms.map(term => term.outputRecipe(formals, grammarInterval)),\n    afterTerms.map(term => term.outputRecipe(formals, grammarInterval)),\n  ];\n};\n\nSeq.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['seq', getMetaInfo(this, grammarInterval)].concat(\n      this.factors.map(factor => factor.outputRecipe(formals, grammarInterval)),\n  );\n};\n\nStar.prototype.outputRecipe =\n  Plus.prototype.outputRecipe =\n  Opt.prototype.outputRecipe =\n  Not.prototype.outputRecipe =\n  Lookahead.prototype.outputRecipe =\n  Lex.prototype.outputRecipe =\n    function(formals, grammarInterval) {\n      return [\n        this.constructor.name.toLowerCase(),\n        getMetaInfo(this, grammarInterval),\n        this.expr.outputRecipe(formals, grammarInterval),\n      ];\n    };\n\nApply.prototype.outputRecipe = function(formals, grammarInterval) {\n  return [\n    'app',\n    getMetaInfo(this, grammarInterval),\n    this.ruleName,\n    this.args.map(arg => arg.outputRecipe(formals, grammarInterval)),\n  ];\n};\n\nUnicodeChar.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['unicodeChar', getMetaInfo(this, grammarInterval), this.category];\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Called at grammar creation time to rewrite a rule body, replacing each reference to a formal\n  parameter with a `Param` node. Returns a PExpr -- either a new one, or the original one if\n  it was modified in place.\n*/\nPExpr.prototype.introduceParams = abstract('introduceParams');\n\nany.introduceParams =\n  end.introduceParams =\n  Terminal.prototype.introduceParams =\n  Range.prototype.introduceParams =\n  Param.prototype.introduceParams =\n  UnicodeChar.prototype.introduceParams =\n    function(formals) {\n      return this;\n    };\n\nAlt.prototype.introduceParams = function(formals) {\n  this.terms.forEach((term, idx, terms) => {\n    terms[idx] = term.introduceParams(formals);\n  });\n  return this;\n};\n\nSeq.prototype.introduceParams = function(formals) {\n  this.factors.forEach((factor, idx, factors) => {\n    factors[idx] = factor.introduceParams(formals);\n  });\n  return this;\n};\n\nIter.prototype.introduceParams =\n  Not.prototype.introduceParams =\n  Lookahead.prototype.introduceParams =\n  Lex.prototype.introduceParams =\n    function(formals) {\n      this.expr = this.expr.introduceParams(formals);\n      return this;\n    };\n\nApply.prototype.introduceParams = function(formals) {\n  const index = formals.indexOf(this.ruleName);\n  if (index >= 0) {\n    if (this.args.length > 0) {\n      // TODO: Should this be supported? See issue #64.\n      throw new Error('Parameterized rules cannot be passed as arguments to another rule.');\n    }\n    return new Param(index).withSource(this.source);\n  } else {\n    this.args.forEach((arg, idx, args) => {\n      args[idx] = arg.introduceParams(formals);\n    });\n    return this;\n  }\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n// Returns `true` if this parsing expression may accept without consuming any input.\nPExpr.prototype.isNullable = function(grammar) {\n  return this._isNullable(grammar, Object.create(null));\n};\n\nPExpr.prototype._isNullable = abstract('_isNullable');\n\nany._isNullable =\n  Range.prototype._isNullable =\n  Param.prototype._isNullable =\n  Plus.prototype._isNullable =\n  UnicodeChar.prototype._isNullable =\n    function(grammar, memo) {\n      return false;\n    };\n\nend._isNullable = function(grammar, memo) {\n  return true;\n};\n\nTerminal.prototype._isNullable = function(grammar, memo) {\n  if (typeof this.obj === 'string') {\n    // This is an over-simplification: it's only correct if the input is a string. If it's an array\n    // or an object, then the empty string parsing expression is not nullable.\n    return this.obj === '';\n  } else {\n    return false;\n  }\n};\n\nAlt.prototype._isNullable = function(grammar, memo) {\n  return this.terms.length === 0 || this.terms.some(term => term._isNullable(grammar, memo));\n};\n\nSeq.prototype._isNullable = function(grammar, memo) {\n  return this.factors.every(factor => factor._isNullable(grammar, memo));\n};\n\nStar.prototype._isNullable =\n  Opt.prototype._isNullable =\n  Not.prototype._isNullable =\n  Lookahead.prototype._isNullable =\n    function(grammar, memo) {\n      return true;\n    };\n\nLex.prototype._isNullable = function(grammar, memo) {\n  return this.expr._isNullable(grammar, memo);\n};\n\nApply.prototype._isNullable = function(grammar, memo) {\n  const key = this.toMemoKey();\n  if (!Object.prototype.hasOwnProperty.call(memo, key)) {\n    const {body} = grammar.rules[this.ruleName];\n    const inlined = body.substituteParams(this.args);\n    memo[key] = false; // Prevent infinite recursion for recursive rules.\n    memo[key] = inlined._isNullable(grammar, memo);\n  }\n  return memo[key];\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Returns a PExpr that results from recursively replacing every formal parameter (i.e., instance\n  of `Param`) inside this PExpr with its actual value from `actuals` (an Array).\n\n  The receiver must not be modified; a new PExpr must be returned if any replacement is necessary.\n*/\n// function(actuals) { ... }\nPExpr.prototype.substituteParams = abstract('substituteParams');\n\nany.substituteParams =\n  end.substituteParams =\n  Terminal.prototype.substituteParams =\n  Range.prototype.substituteParams =\n  UnicodeChar.prototype.substituteParams =\n    function(actuals) {\n      return this;\n    };\n\nParam.prototype.substituteParams = function(actuals) {\n  return actuals[this.index];\n};\n\nAlt.prototype.substituteParams = function(actuals) {\n  return new Alt(this.terms.map(term => term.substituteParams(actuals)));\n};\n\nSeq.prototype.substituteParams = function(actuals) {\n  return new Seq(this.factors.map(factor => factor.substituteParams(actuals)));\n};\n\nIter.prototype.substituteParams =\n  Not.prototype.substituteParams =\n  Lookahead.prototype.substituteParams =\n  Lex.prototype.substituteParams =\n    function(actuals) {\n      return new this.constructor(this.expr.substituteParams(actuals));\n    };\n\nApply.prototype.substituteParams = function(actuals) {\n  if (this.args.length === 0) {\n    // Avoid making a copy of this application, as an optimization\n    return this;\n  } else {\n    const args = this.args.map(arg => arg.substituteParams(actuals));\n    return new Apply(this.ruleName, args);\n  }\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction isRestrictedJSIdentifier(str) {\n  return /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(str);\n}\n\nfunction resolveDuplicatedNames(argumentNameList) {\n  // `count` is used to record the number of times each argument name occurs in the list,\n  // this is useful for checking duplicated argument name. It maps argument names to ints.\n  const count = Object.create(null);\n  argumentNameList.forEach(argName => {\n    count[argName] = (count[argName] || 0) + 1;\n  });\n\n  // Append subscripts ('_1', '_2', ...) to duplicate argument names.\n  Object.keys(count).forEach(dupArgName => {\n    if (count[dupArgName] <= 1) {\n      return;\n    }\n\n    // This name shows up more than once, so add subscripts.\n    let subscript = 1;\n    argumentNameList.forEach((argName, idx) => {\n      if (argName === dupArgName) {\n        argumentNameList[idx] = argName + '_' + subscript++;\n      }\n    });\n  });\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Returns a list of strings that will be used as the default argument names for its receiver\n  (a pexpr) in a semantic action. This is used exclusively by the Semantics Editor.\n\n  `firstArgIndex` is the 1-based index of the first argument name that will be generated for this\n  pexpr. It enables us to name arguments positionally, e.g., if the second argument is a\n  non-alphanumeric terminal like \"+\", it will be named '$2'.\n\n  `noDupCheck` is true if the caller of `toArgumentNameList` is not a top level caller. It enables\n  us to avoid nested duplication subscripts appending, e.g., '_1_1', '_1_2', by only checking\n  duplicates at the top level.\n\n  Here is a more elaborate example that illustrates how this method works:\n  `(a \"+\" b).toArgumentNameList(1)` evaluates to `['a', '$2', 'b']` with the following recursive\n  calls:\n\n    (a).toArgumentNameList(1) -> ['a'],\n    (\"+\").toArgumentNameList(2) -> ['$2'],\n    (b).toArgumentNameList(3) -> ['b']\n\n  Notes:\n  * This method must only be called on well-formed expressions, e.g., the receiver must\n    not have any Alt sub-expressions with inconsistent arities.\n  * e.getArity() === e.toArgumentNameList(1).length\n*/\n// function(firstArgIndex, noDupCheck) { ... }\nPExpr.prototype.toArgumentNameList = abstract('toArgumentNameList');\n\nany.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['any'];\n};\n\nend.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['end'];\n};\n\nTerminal.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  if (typeof this.obj === 'string' && /^[_a-zA-Z0-9]+$/.test(this.obj)) {\n    // If this terminal is a valid suffix for a JS identifier, just prepend it with '_'\n    return ['_' + this.obj];\n  } else {\n    // Otherwise, name it positionally.\n    return ['$' + firstArgIndex];\n  }\n};\n\nRange.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  let argName = this.from + '_to_' + this.to;\n  // If the `argName` is not valid then try to prepend a `_`.\n  if (!isRestrictedJSIdentifier(argName)) {\n    argName = '_' + argName;\n  }\n  // If the `argName` still not valid after prepending a `_`, then name it positionally.\n  if (!isRestrictedJSIdentifier(argName)) {\n    argName = '$' + firstArgIndex;\n  }\n  return [argName];\n};\n\nAlt.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  // `termArgNameLists` is an array of arrays where each row is the\n  // argument name list that corresponds to a term in this alternation.\n  const termArgNameLists = this.terms.map(term =>\n    term.toArgumentNameList(firstArgIndex, true),\n  );\n\n  const argumentNameList = [];\n  const numArgs = termArgNameLists[0].length;\n  for (let colIdx = 0; colIdx < numArgs; colIdx++) {\n    const col = [];\n    for (let rowIdx = 0; rowIdx < this.terms.length; rowIdx++) {\n      col.push(termArgNameLists[rowIdx][colIdx]);\n    }\n    const uniqueNames = copyWithoutDuplicates(col);\n    argumentNameList.push(uniqueNames.join('_or_'));\n  }\n\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\nSeq.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  // Generate the argument name list, without worrying about duplicates.\n  let argumentNameList = [];\n  this.factors.forEach(factor => {\n    const factorArgumentNameList = factor.toArgumentNameList(firstArgIndex, true);\n    argumentNameList = argumentNameList.concat(factorArgumentNameList);\n\n    // Shift the firstArgIndex to take this factor's argument names into account.\n    firstArgIndex += factorArgumentNameList.length;\n  });\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\nIter.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  const argumentNameList = this.expr\n      .toArgumentNameList(firstArgIndex, noDupCheck)\n      .map(exprArgumentString =>\n      exprArgumentString[exprArgumentString.length - 1] === 's' ?\n        exprArgumentString + 'es' :\n        exprArgumentString + 's',\n      );\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\nOpt.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return this.expr.toArgumentNameList(firstArgIndex, noDupCheck).map(argName => {\n    return 'opt' + argName[0].toUpperCase() + argName.slice(1);\n  });\n};\n\nNot.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return [];\n};\n\nLookahead.prototype.toArgumentNameList = Lex.prototype.toArgumentNameList =\n  function(firstArgIndex, noDupCheck) {\n    return this.expr.toArgumentNameList(firstArgIndex, noDupCheck);\n  };\n\nApply.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return [this.ruleName];\n};\n\nUnicodeChar.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['$' + firstArgIndex];\n};\n\nParam.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['param' + this.index];\n};\n\n// \"Value pexprs\" (Value, Str, Arr, Obj) are going away soon, so we don't worry about them here.\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n// Returns a string representing the PExpr, for use as a UI label, etc.\nPExpr.prototype.toDisplayString = abstract('toDisplayString');\n\nAlt.prototype.toDisplayString = Seq.prototype.toDisplayString = function() {\n  if (this.source) {\n    return this.source.trimmed().contents;\n  }\n  return '[' + this.constructor.name + ']';\n};\n\nany.toDisplayString =\n  end.toDisplayString =\n  Iter.prototype.toDisplayString =\n  Not.prototype.toDisplayString =\n  Lookahead.prototype.toDisplayString =\n  Lex.prototype.toDisplayString =\n  Terminal.prototype.toDisplayString =\n  Range.prototype.toDisplayString =\n  Param.prototype.toDisplayString =\n    function() {\n      return this.toString();\n    };\n\nApply.prototype.toDisplayString = function() {\n  if (this.args.length > 0) {\n    const ps = this.args.map(arg => arg.toDisplayString());\n    return this.ruleName + '<' + ps.join(',') + '>';\n  } else {\n    return this.ruleName;\n  }\n};\n\nUnicodeChar.prototype.toDisplayString = function() {\n  return 'Unicode [' + this.category + '] character';\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n/*\n  `Failure`s represent expressions that weren't matched while parsing. They are used to generate\n  error messages automatically. The interface of `Failure`s includes the collowing methods:\n\n  - getText() : String\n  - getType() : String  (one of {\"description\", \"string\", \"code\"})\n  - isDescription() : bool\n  - isStringTerminal() : bool\n  - isCode() : bool\n  - isFluffy() : bool\n  - makeFluffy() : void\n  - subsumes(Failure) : bool\n*/\n\nfunction isValidType(type) {\n  return type === 'description' || type === 'string' || type === 'code';\n}\n\nclass Failure {\n  constructor(pexpr, text, type) {\n    if (!isValidType(type)) {\n      throw new Error('invalid Failure type: ' + type);\n    }\n    this.pexpr = pexpr;\n    this.text = text;\n    this.type = type;\n    this.fluffy = false;\n  }\n\n  getPExpr() {\n    return this.pexpr;\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  isDescription() {\n    return this.type === 'description';\n  }\n\n  isStringTerminal() {\n    return this.type === 'string';\n  }\n\n  isCode() {\n    return this.type === 'code';\n  }\n\n  isFluffy() {\n    return this.fluffy;\n  }\n\n  makeFluffy() {\n    this.fluffy = true;\n  }\n\n  clearFluffy() {\n    this.fluffy = false;\n  }\n\n  subsumes(that) {\n    return (\n      this.getText() === that.getText() &&\n      this.type === that.type &&\n      (!this.isFluffy() || (this.isFluffy() && that.isFluffy()))\n    );\n  }\n\n  toString() {\n    return this.type === 'string' ? JSON.stringify(this.getText()) : this.getText();\n  }\n\n  clone() {\n    const failure = new Failure(this.pexpr, this.text, this.type);\n    if (this.isFluffy()) {\n      failure.makeFluffy();\n    }\n    return failure;\n  }\n\n  toKey() {\n    return this.toString() + '#' + this.type;\n  }\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.toFailure = abstract('toFailure');\n\nany.toFailure = function(grammar) {\n  return new Failure(this, 'any object', 'description');\n};\n\nend.toFailure = function(grammar) {\n  return new Failure(this, 'end of input', 'description');\n};\n\nTerminal.prototype.toFailure = function(grammar) {\n  return new Failure(this, this.obj, 'string');\n};\n\nRange.prototype.toFailure = function(grammar) {\n  // TODO: come up with something better\n  return new Failure(this, JSON.stringify(this.from) + '..' + JSON.stringify(this.to), 'code');\n};\n\nNot.prototype.toFailure = function(grammar) {\n  const description =\n    this.expr === any ? 'nothing' : 'not ' + this.expr.toFailure(grammar);\n  return new Failure(this, description, 'description');\n};\n\nLookahead.prototype.toFailure = function(grammar) {\n  return this.expr.toFailure(grammar);\n};\n\nApply.prototype.toFailure = function(grammar) {\n  let {description} = grammar.rules[this.ruleName];\n  if (!description) {\n    const article = /^[aeiouAEIOU]/.test(this.ruleName) ? 'an' : 'a';\n    description = article + ' ' + this.ruleName;\n  }\n  return new Failure(this, description, 'description');\n};\n\nUnicodeChar.prototype.toFailure = function(grammar) {\n  return new Failure(this, 'a Unicode [' + this.category + '] character', 'description');\n};\n\nAlt.prototype.toFailure = function(grammar) {\n  const fs = this.terms.map(t => t.toFailure(grammar));\n  const description = '(' + fs.join(' or ') + ')';\n  return new Failure(this, description, 'description');\n};\n\nSeq.prototype.toFailure = function(grammar) {\n  const fs = this.factors.map(f => f.toFailure(grammar));\n  const description = '(' + fs.join(' ') + ')';\n  return new Failure(this, description, 'description');\n};\n\nIter.prototype.toFailure = function(grammar) {\n  const description = '(' + this.expr.toFailure(grammar) + this.operator + ')';\n  return new Failure(this, description, 'description');\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  e1.toString() === e2.toString() ==> e1 and e2 are semantically equivalent.\n  Note that this is not an iff (<==>): e.g.,\n  (~\"b\" \"a\").toString() !== (\"a\").toString(), even though\n  ~\"b\" \"a\" and \"a\" are interchangeable in any grammar,\n  both in terms of the languages they accept and their arities.\n*/\nPExpr.prototype.toString = abstract('toString');\n\nany.toString = function() {\n  return 'any';\n};\n\nend.toString = function() {\n  return 'end';\n};\n\nTerminal.prototype.toString = function() {\n  return JSON.stringify(this.obj);\n};\n\nRange.prototype.toString = function() {\n  return JSON.stringify(this.from) + '..' + JSON.stringify(this.to);\n};\n\nParam.prototype.toString = function() {\n  return '$' + this.index;\n};\n\nLex.prototype.toString = function() {\n  return '#(' + this.expr.toString() + ')';\n};\n\nAlt.prototype.toString = function() {\n  return this.terms.length === 1 ?\n    this.terms[0].toString() :\n    '(' + this.terms.map(term => term.toString()).join(' | ') + ')';\n};\n\nSeq.prototype.toString = function() {\n  return this.factors.length === 1 ?\n    this.factors[0].toString() :\n    '(' + this.factors.map(factor => factor.toString()).join(' ') + ')';\n};\n\nIter.prototype.toString = function() {\n  return this.expr + this.operator;\n};\n\nNot.prototype.toString = function() {\n  return '~' + this.expr;\n};\n\nLookahead.prototype.toString = function() {\n  return '&' + this.expr;\n};\n\nApply.prototype.toString = function() {\n  if (this.args.length > 0) {\n    const ps = this.args.map(arg => arg.toString());\n    return this.ruleName + '<' + ps.join(',') + '>';\n  } else {\n    return this.ruleName;\n  }\n};\n\nUnicodeChar.prototype.toString = function() {\n  return '\\\\p{' + this.category + '}';\n};\n\nclass CaseInsensitiveTerminal extends PExpr {\n  constructor(param) {\n    super();\n    this.obj = param;\n  }\n\n  _getString(state) {\n    const terminal = state.currentApplication().args[this.obj.index];\n    assert(terminal instanceof Terminal, 'expected a Terminal expression');\n    return terminal.obj;\n  }\n\n  // Implementation of the PExpr API\n\n  allowsSkippingPrecedingSpace() {\n    return true;\n  }\n\n  eval(state) {\n    const {inputStream} = state;\n    const origPos = inputStream.pos;\n    const matchStr = this._getString(state);\n    if (!inputStream.matchString(matchStr, true)) {\n      state.processFailure(origPos, this);\n      return false;\n    } else {\n      state.pushBinding(new TerminalNode(matchStr.length), origPos);\n      return true;\n    }\n  }\n\n  getArity() {\n    return 1;\n  }\n\n  substituteParams(actuals) {\n    return new CaseInsensitiveTerminal(this.obj.substituteParams(actuals));\n  }\n\n  toDisplayString() {\n    return this.obj.toDisplayString() + ' (case-insensitive)';\n  }\n\n  toFailure(grammar) {\n    return new Failure(\n        this,\n        this.obj.toFailure(grammar) + ' (case-insensitive)',\n        'description',\n    );\n  }\n\n  _isNullable(grammar, memo) {\n    return this.obj._isNullable(grammar, memo);\n  }\n}\n\n// --------------------------------------------------------------------\n\nvar pexprs = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  CaseInsensitiveTerminal: CaseInsensitiveTerminal,\n  PExpr: PExpr,\n  any: any,\n  end: end,\n  Terminal: Terminal,\n  Range: Range,\n  Param: Param,\n  Alt: Alt,\n  Extend: Extend,\n  Splice: Splice,\n  Seq: Seq,\n  Iter: Iter,\n  Star: Star,\n  Plus: Plus,\n  Opt: Opt,\n  Not: Not,\n  Lookahead: Lookahead,\n  Lex: Lex,\n  Apply: Apply,\n  UnicodeChar: UnicodeChar\n});\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nlet builtInApplySyntacticBody;\n\nawaitBuiltInRules(builtInRules => {\n  builtInApplySyntacticBody = builtInRules.rules.applySyntactic.body;\n});\n\nconst applySpaces = new Apply('spaces');\n\nclass MatchState {\n  constructor(matcher, startExpr, optPositionToRecordFailures) {\n    this.matcher = matcher;\n    this.startExpr = startExpr;\n\n    this.grammar = matcher.grammar;\n    this.input = matcher.getInput();\n    this.inputStream = new InputStream(this.input);\n    this.memoTable = matcher._memoTable;\n\n    this.userData = undefined;\n    this.doNotMemoize = false;\n\n    this._bindings = [];\n    this._bindingOffsets = [];\n    this._applicationStack = [];\n    this._posStack = [0];\n    this.inLexifiedContextStack = [false];\n\n    this.rightmostFailurePosition = -1;\n    this._rightmostFailurePositionStack = [];\n    this._recordedFailuresStack = [];\n\n    if (optPositionToRecordFailures !== undefined) {\n      this.positionToRecordFailures = optPositionToRecordFailures;\n      this.recordedFailures = Object.create(null);\n    }\n  }\n\n  posToOffset(pos) {\n    return pos - this._posStack[this._posStack.length - 1];\n  }\n\n  enterApplication(posInfo, app) {\n    this._posStack.push(this.inputStream.pos);\n    this._applicationStack.push(app);\n    this.inLexifiedContextStack.push(false);\n    posInfo.enter(app);\n    this._rightmostFailurePositionStack.push(this.rightmostFailurePosition);\n    this.rightmostFailurePosition = -1;\n  }\n\n  exitApplication(posInfo, optNode) {\n    const origPos = this._posStack.pop();\n    this._applicationStack.pop();\n    this.inLexifiedContextStack.pop();\n    posInfo.exit();\n\n    this.rightmostFailurePosition = Math.max(\n        this.rightmostFailurePosition,\n        this._rightmostFailurePositionStack.pop(),\n    );\n\n    if (optNode) {\n      this.pushBinding(optNode, origPos);\n    }\n  }\n\n  enterLexifiedContext() {\n    this.inLexifiedContextStack.push(true);\n  }\n\n  exitLexifiedContext() {\n    this.inLexifiedContextStack.pop();\n  }\n\n  currentApplication() {\n    return this._applicationStack[this._applicationStack.length - 1];\n  }\n\n  inSyntacticContext() {\n    const currentApplication = this.currentApplication();\n    if (currentApplication) {\n      return currentApplication.isSyntactic() && !this.inLexifiedContext();\n    } else {\n      // The top-level context is syntactic if the start application is.\n      return this.startExpr.factors[0].isSyntactic();\n    }\n  }\n\n  inLexifiedContext() {\n    return this.inLexifiedContextStack[this.inLexifiedContextStack.length - 1];\n  }\n\n  skipSpaces() {\n    this.pushFailuresInfo();\n    this.eval(applySpaces);\n    this.popBinding();\n    this.popFailuresInfo();\n    return this.inputStream.pos;\n  }\n\n  skipSpacesIfInSyntacticContext() {\n    return this.inSyntacticContext() ? this.skipSpaces() : this.inputStream.pos;\n  }\n\n  maybeSkipSpacesBefore(expr) {\n    if (expr.allowsSkippingPrecedingSpace() && expr !== applySpaces) {\n      return this.skipSpacesIfInSyntacticContext();\n    } else {\n      return this.inputStream.pos;\n    }\n  }\n\n  pushBinding(node, origPos) {\n    this._bindings.push(node);\n    this._bindingOffsets.push(this.posToOffset(origPos));\n  }\n\n  popBinding() {\n    this._bindings.pop();\n    this._bindingOffsets.pop();\n  }\n\n  numBindings() {\n    return this._bindings.length;\n  }\n\n  truncateBindings(newLength) {\n    // Yes, this is this really faster than setting the `length` property (tested with\n    // bin/es5bench on Node v6.1.0).\n    // Update 2021-10-25: still true on v14.15.5  it's ~20% speedup on es5bench.\n    while (this._bindings.length > newLength) {\n      this.popBinding();\n    }\n  }\n\n  getCurrentPosInfo() {\n    return this.getPosInfo(this.inputStream.pos);\n  }\n\n  getPosInfo(pos) {\n    let posInfo = this.memoTable[pos];\n    if (!posInfo) {\n      posInfo = this.memoTable[pos] = new PosInfo();\n    }\n    return posInfo;\n  }\n\n  processFailure(pos, expr) {\n    this.rightmostFailurePosition = Math.max(this.rightmostFailurePosition, pos);\n\n    if (this.recordedFailures && pos === this.positionToRecordFailures) {\n      const app = this.currentApplication();\n      if (app) {\n        // Substitute parameters with the actual pexprs that were passed to\n        // the current rule.\n        expr = expr.substituteParams(app.args);\n      }\n\n      this.recordFailure(expr.toFailure(this.grammar), false);\n    }\n  }\n\n  recordFailure(failure, shouldCloneIfNew) {\n    const key = failure.toKey();\n    if (!this.recordedFailures[key]) {\n      this.recordedFailures[key] = shouldCloneIfNew ? failure.clone() : failure;\n    } else if (this.recordedFailures[key].isFluffy() && !failure.isFluffy()) {\n      this.recordedFailures[key].clearFluffy();\n    }\n  }\n\n  recordFailures(failures, shouldCloneIfNew) {\n    Object.keys(failures).forEach(key => {\n      this.recordFailure(failures[key], shouldCloneIfNew);\n    });\n  }\n\n  cloneRecordedFailures() {\n    if (!this.recordedFailures) {\n      return undefined;\n    }\n\n    const ans = Object.create(null);\n    Object.keys(this.recordedFailures).forEach(key => {\n      ans[key] = this.recordedFailures[key].clone();\n    });\n    return ans;\n  }\n\n  getRightmostFailurePosition() {\n    return this.rightmostFailurePosition;\n  }\n\n  _getRightmostFailureOffset() {\n    return this.rightmostFailurePosition >= 0 ?\n      this.posToOffset(this.rightmostFailurePosition) :\n      -1;\n  }\n\n  // Returns the memoized trace entry for `expr` at `pos`, if one exists, `null` otherwise.\n  getMemoizedTraceEntry(pos, expr) {\n    const posInfo = this.memoTable[pos];\n    if (posInfo && expr instanceof Apply) {\n      const memoRec = posInfo.memo[expr.toMemoKey()];\n      if (memoRec && memoRec.traceEntry) {\n        const entry = memoRec.traceEntry.cloneWithExpr(expr);\n        entry.isMemoized = true;\n        return entry;\n      }\n    }\n    return null;\n  }\n\n  // Returns a new trace entry, with the currently active trace array as its children.\n  getTraceEntry(pos, expr, succeeded, bindings) {\n    if (expr instanceof Apply) {\n      const app = this.currentApplication();\n      const actuals = app ? app.args : [];\n      expr = expr.substituteParams(actuals);\n    }\n    return (\n      this.getMemoizedTraceEntry(pos, expr) ||\n      new Trace(this.input, pos, this.inputStream.pos, expr, succeeded, bindings, this.trace)\n    );\n  }\n\n  isTracing() {\n    return !!this.trace;\n  }\n\n  hasNecessaryInfo(memoRec) {\n    if (this.trace && !memoRec.traceEntry) {\n      return false;\n    }\n\n    if (\n      this.recordedFailures &&\n      this.inputStream.pos + memoRec.rightmostFailureOffset === this.positionToRecordFailures\n    ) {\n      return !!memoRec.failuresAtRightmostPosition;\n    }\n\n    return true;\n  }\n\n  useMemoizedResult(origPos, memoRec) {\n    if (this.trace) {\n      this.trace.push(memoRec.traceEntry);\n    }\n\n    const memoRecRightmostFailurePosition =\n      this.inputStream.pos + memoRec.rightmostFailureOffset;\n    this.rightmostFailurePosition = Math.max(\n        this.rightmostFailurePosition,\n        memoRecRightmostFailurePosition,\n    );\n    if (\n      this.recordedFailures &&\n      this.positionToRecordFailures === memoRecRightmostFailurePosition &&\n      memoRec.failuresAtRightmostPosition\n    ) {\n      this.recordFailures(memoRec.failuresAtRightmostPosition, true);\n    }\n\n    this.inputStream.examinedLength = Math.max(\n        this.inputStream.examinedLength,\n        memoRec.examinedLength + origPos,\n    );\n\n    if (memoRec.value) {\n      this.inputStream.pos += memoRec.matchLength;\n      this.pushBinding(memoRec.value, origPos);\n      return true;\n    }\n    return false;\n  }\n\n  // Evaluate `expr` and return `true` if it succeeded, `false` otherwise. On success, `bindings`\n  // will have `expr.getArity()` more elements than before, and the input stream's position may\n  // have increased. On failure, `bindings` and position will be unchanged.\n  eval(expr) {\n    const {inputStream} = this;\n    const origNumBindings = this._bindings.length;\n    const origUserData = this.userData;\n\n    let origRecordedFailures;\n    if (this.recordedFailures) {\n      origRecordedFailures = this.recordedFailures;\n      this.recordedFailures = Object.create(null);\n    }\n\n    const origPos = inputStream.pos;\n    const memoPos = this.maybeSkipSpacesBefore(expr);\n\n    let origTrace;\n    if (this.trace) {\n      origTrace = this.trace;\n      this.trace = [];\n    }\n\n    // Do the actual evaluation.\n    const ans = expr.eval(this);\n\n    if (this.trace) {\n      const bindings = this._bindings.slice(origNumBindings);\n      const traceEntry = this.getTraceEntry(memoPos, expr, ans, bindings);\n      traceEntry.isImplicitSpaces = expr === applySpaces;\n      traceEntry.isRootNode = expr === this.startExpr;\n      origTrace.push(traceEntry);\n      this.trace = origTrace;\n    }\n\n    if (ans) {\n      if (this.recordedFailures && inputStream.pos === this.positionToRecordFailures) {\n        Object.keys(this.recordedFailures).forEach(key => {\n          this.recordedFailures[key].makeFluffy();\n        });\n      }\n    } else {\n      // Reset the position, bindings, and userData.\n      inputStream.pos = origPos;\n      this.truncateBindings(origNumBindings);\n      this.userData = origUserData;\n    }\n\n    if (this.recordedFailures) {\n      this.recordFailures(origRecordedFailures, false);\n    }\n\n    // The built-in applySyntactic rule needs special handling: we want to skip\n    // trailing spaces, just as with the top-level application of a syntactic rule.\n    if (expr === builtInApplySyntacticBody) {\n      this.skipSpaces();\n    }\n\n    return ans;\n  }\n\n  getMatchResult() {\n    this.grammar._setUpMatchState(this);\n    this.eval(this.startExpr);\n    let rightmostFailures;\n    if (this.recordedFailures) {\n      rightmostFailures = Object.keys(this.recordedFailures).map(\n          key => this.recordedFailures[key],\n      );\n    }\n    const cst = this._bindings[0];\n    if (cst) {\n      cst.grammar = this.grammar;\n    }\n    return new MatchResult(\n        this.matcher,\n        this.input,\n        this.startExpr,\n        cst,\n        this._bindingOffsets[0],\n        this.rightmostFailurePosition,\n        rightmostFailures,\n    );\n  }\n\n  getTrace() {\n    this.trace = [];\n    const matchResult = this.getMatchResult();\n\n    // The trace node for the start rule is always the last entry. If it is a syntactic rule,\n    // the first entry is for an application of 'spaces'.\n    // TODO(pdubroy): Clean this up by introducing a special `Match<startAppl>` rule, which will\n    // ensure that there is always a single root trace node.\n    const rootTrace = this.trace[this.trace.length - 1];\n    rootTrace.result = matchResult;\n    return rootTrace;\n  }\n\n  pushFailuresInfo() {\n    this._rightmostFailurePositionStack.push(this.rightmostFailurePosition);\n    this._recordedFailuresStack.push(this.recordedFailures);\n  }\n\n  popFailuresInfo() {\n    this.rightmostFailurePosition = this._rightmostFailurePositionStack.pop();\n    this.recordedFailures = this._recordedFailuresStack.pop();\n  }\n}\n\nclass Matcher {\n  constructor(grammar) {\n    this.grammar = grammar;\n    this._memoTable = [];\n    this._input = '';\n    this._isMemoTableStale = false;\n  }\n\n  _resetMemoTable() {\n    this._memoTable = [];\n    this._isMemoTableStale = false;\n  }\n\n  getInput() {\n    return this._input;\n  }\n\n  setInput(str) {\n    if (this._input !== str) {\n      this.replaceInputRange(0, this._input.length, str);\n    }\n    return this;\n  }\n\n  replaceInputRange(startIdx, endIdx, str) {\n    const prevInput = this._input;\n    const memoTable = this._memoTable;\n    if (\n      startIdx < 0 ||\n      startIdx > prevInput.length ||\n      endIdx < 0 ||\n      endIdx > prevInput.length ||\n      startIdx > endIdx\n    ) {\n      throw new Error('Invalid indices: ' + startIdx + ' and ' + endIdx);\n    }\n\n    // update input\n    this._input = prevInput.slice(0, startIdx) + str + prevInput.slice(endIdx);\n    if (this._input !== prevInput && memoTable.length > 0) {\n      this._isMemoTableStale = true;\n    }\n\n    // update memo table (similar to the above)\n    const restOfMemoTable = memoTable.slice(endIdx);\n    memoTable.length = startIdx;\n    for (let idx = 0; idx < str.length; idx++) {\n      memoTable.push(undefined);\n    }\n    for (const posInfo of restOfMemoTable) {\n      memoTable.push(posInfo);\n    }\n\n    // Invalidate memoRecs\n    for (let pos = 0; pos < startIdx; pos++) {\n      const posInfo = memoTable[pos];\n      if (posInfo) {\n        posInfo.clearObsoleteEntries(pos, startIdx);\n      }\n    }\n\n    return this;\n  }\n\n  match(optStartApplicationStr, options = {incremental: true}) {\n    return this._match(this._getStartExpr(optStartApplicationStr), {\n      incremental: options.incremental,\n      tracing: false,\n    });\n  }\n\n  trace(optStartApplicationStr, options = {incremental: true}) {\n    return this._match(this._getStartExpr(optStartApplicationStr), {\n      incremental: options.incremental,\n      tracing: true,\n    });\n  }\n\n  _match(startExpr, options = {}) {\n    const opts = {\n      tracing: false,\n      incremental: true,\n      positionToRecordFailures: undefined,\n      ...options,\n    };\n    if (!opts.incremental) {\n      this._resetMemoTable();\n    } else if (this._isMemoTableStale && !this.grammar.supportsIncrementalParsing) {\n      throw grammarDoesNotSupportIncrementalParsing(this.grammar);\n    }\n\n    const state = new MatchState(this, startExpr, opts.positionToRecordFailures);\n    return opts.tracing ? state.getTrace() : state.getMatchResult();\n  }\n\n  /*\n    Returns the starting expression for this Matcher's associated grammar. If\n    `optStartApplicationStr` is specified, it is a string expressing a rule application in the\n    grammar. If not specified, the grammar's default start rule will be used.\n  */\n  _getStartExpr(optStartApplicationStr) {\n    const applicationStr = optStartApplicationStr || this.grammar.defaultStartRule;\n    if (!applicationStr) {\n      throw new Error('Missing start rule argument -- the grammar has no default start rule.');\n    }\n\n    const startApp = this.grammar.parseApplication(applicationStr);\n    return new Seq([startApp, end]);\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nconst globalActionStack = [];\n\nconst hasOwnProperty = (x, prop) => Object.prototype.hasOwnProperty.call(x, prop);\n\n// ----------------- Wrappers -----------------\n\n// Wrappers decorate CST nodes with all of the functionality (i.e., operations and attributes)\n// provided by a Semantics (see below). `Wrapper` is the abstract superclass of all wrappers. A\n// `Wrapper` must have `_node` and `_semantics` instance variables, which refer to the CST node and\n// Semantics (resp.) for which it was created, and a `_childWrappers` instance variable which is\n// used to cache the wrapper instances that are created for its child nodes. Setting these instance\n// variables is the responsibility of the constructor of each Semantics-specific subclass of\n// `Wrapper`.\nclass Wrapper {\n  constructor(node, sourceInterval, baseInterval) {\n    this._node = node;\n    this.source = sourceInterval;\n\n    // The interval that the childOffsets of `node` are relative to. It should be the source\n    // of the closest Nonterminal node.\n    this._baseInterval = baseInterval;\n\n    if (node.isNonterminal()) {\n      assert(sourceInterval === baseInterval);\n    }\n    this._childWrappers = [];\n  }\n\n  _forgetMemoizedResultFor(attributeName) {\n    // Remove the memoized attribute from the cstNode and all its children.\n    delete this._node[this._semantics.attributeKeys[attributeName]];\n    this.children.forEach(child => {\n      child._forgetMemoizedResultFor(attributeName);\n    });\n  }\n\n  // Returns the wrapper of the specified child node. Child wrappers are created lazily and\n  // cached in the parent wrapper's `_childWrappers` instance variable.\n  child(idx) {\n    if (!(0 <= idx && idx < this._node.numChildren())) {\n      // TODO: Consider throwing an exception here.\n      return undefined;\n    }\n    let childWrapper = this._childWrappers[idx];\n    if (!childWrapper) {\n      const childNode = this._node.childAt(idx);\n      const offset = this._node.childOffsets[idx];\n\n      const source = this._baseInterval.subInterval(offset, childNode.matchLength);\n      const base = childNode.isNonterminal() ? source : this._baseInterval;\n      childWrapper = this._childWrappers[idx] = this._semantics.wrap(childNode, source, base);\n    }\n    return childWrapper;\n  }\n\n  // Returns an array containing the wrappers of all of the children of the node associated\n  // with this wrapper.\n  _children() {\n    // Force the creation of all child wrappers\n    for (let idx = 0; idx < this._node.numChildren(); idx++) {\n      this.child(idx);\n    }\n    return this._childWrappers;\n  }\n\n  // Returns `true` if the CST node associated with this wrapper corresponds to an iteration\n  // expression, i.e., a Kleene-*, Kleene-+, or an optional. Returns `false` otherwise.\n  isIteration() {\n    return this._node.isIteration();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a terminal node, `false`\n  // otherwise.\n  isTerminal() {\n    return this._node.isTerminal();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node, `false`\n  // otherwise.\n  isNonterminal() {\n    return this._node.isNonterminal();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node\n  // corresponding to a syntactic rule, `false` otherwise.\n  isSyntactic() {\n    return this.isNonterminal() && this._node.isSyntactic();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node\n  // corresponding to a lexical rule, `false` otherwise.\n  isLexical() {\n    return this.isNonterminal() && this._node.isLexical();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is an iterator node\n  // having either one or no child (? operator), `false` otherwise.\n  // Otherwise, throws an exception.\n  isOptional() {\n    return this._node.isOptional();\n  }\n\n  // Create a new _iter wrapper in the same semantics as this wrapper.\n  iteration(optChildWrappers) {\n    const childWrappers = optChildWrappers || [];\n\n    const childNodes = childWrappers.map(c => c._node);\n    const iter = new IterationNode(childNodes, [], -1, false);\n\n    const wrapper = this._semantics.wrap(iter, null, null);\n    wrapper._childWrappers = childWrappers;\n    return wrapper;\n  }\n\n  // Returns an array containing the children of this CST node.\n  get children() {\n    return this._children();\n  }\n\n  // Returns the name of grammar rule that created this CST node.\n  get ctorName() {\n    return this._node.ctorName;\n  }\n\n  // Returns the number of children of this CST node.\n  get numChildren() {\n    return this._node.numChildren();\n  }\n\n  // Returns the contents of the input stream consumed by this CST node.\n  get sourceString() {\n    return this.source.contents;\n  }\n}\n\n// ----------------- Semantics -----------------\n\n// A Semantics is a container for a family of Operations and Attributes for a given grammar.\n// Semantics enable modularity (different clients of a grammar can create their set of operations\n// and attributes in isolation) and extensibility even when operations and attributes are mutually-\n// recursive. This constructor should not be called directly except from\n// `Semantics.createSemantics`. The normal ways to create a Semantics, given a grammar 'g', are\n// `g.createSemantics()` and `g.extendSemantics(parentSemantics)`.\nclass Semantics {\n  constructor(grammar, superSemantics) {\n    const self = this;\n    this.grammar = grammar;\n    this.checkedActionDicts = false;\n\n    // Constructor for wrapper instances, which are passed as the arguments to the semantic actions\n    // of an operation or attribute. Operations and attributes require double dispatch: the semantic\n    // action is chosen based on both the node's type and the semantics. Wrappers ensure that\n    // the `execute` method is called with the correct (most specific) semantics object as an\n    // argument.\n    this.Wrapper = class extends (superSemantics ? superSemantics.Wrapper : Wrapper) {\n      constructor(node, sourceInterval, baseInterval) {\n        super(node, sourceInterval, baseInterval);\n        self.checkActionDictsIfHaventAlready();\n        this._semantics = self;\n      }\n\n      toString() {\n        return '[semantics wrapper for ' + self.grammar.name + ']';\n      }\n    };\n\n    this.super = superSemantics;\n    if (superSemantics) {\n      if (!(grammar.equals(this.super.grammar) || grammar._inheritsFrom(this.super.grammar))) {\n        throw new Error(\n            \"Cannot extend a semantics for grammar '\" +\n            this.super.grammar.name +\n            \"' for use with grammar '\" +\n            grammar.name +\n            \"' (not a sub-grammar)\",\n        );\n      }\n      this.operations = Object.create(this.super.operations);\n      this.attributes = Object.create(this.super.attributes);\n      this.attributeKeys = Object.create(null);\n\n      // Assign unique symbols for each of the attributes inherited from the super-semantics so that\n      // they are memoized independently.\n      // eslint-disable-next-line guard-for-in\n      for (const attributeName in this.attributes) {\n        Object.defineProperty(this.attributeKeys, attributeName, {\n          value: uniqueId(attributeName),\n        });\n      }\n    } else {\n      this.operations = Object.create(null);\n      this.attributes = Object.create(null);\n      this.attributeKeys = Object.create(null);\n    }\n  }\n\n  toString() {\n    return '[semantics for ' + this.grammar.name + ']';\n  }\n\n  checkActionDictsIfHaventAlready() {\n    if (!this.checkedActionDicts) {\n      this.checkActionDicts();\n      this.checkedActionDicts = true;\n    }\n  }\n\n  // Checks that the action dictionaries for all operations and attributes in this semantics,\n  // including the ones that were inherited from the super-semantics, agree with the grammar.\n  // Throws an exception if one or more of them doesn't.\n  checkActionDicts() {\n    let name;\n    // eslint-disable-next-line guard-for-in\n    for (name in this.operations) {\n      this.operations[name].checkActionDict(this.grammar);\n    }\n    // eslint-disable-next-line guard-for-in\n    for (name in this.attributes) {\n      this.attributes[name].checkActionDict(this.grammar);\n    }\n  }\n\n  toRecipe(semanticsOnly) {\n    function hasSuperSemantics(s) {\n      return s.super !== Semantics.BuiltInSemantics._getSemantics();\n    }\n\n    let str = '(function(g) {\\n';\n    if (hasSuperSemantics(this)) {\n      str += '  var semantics = ' + this.super.toRecipe(true) + '(g';\n\n      const superSemanticsGrammar = this.super.grammar;\n      let relatedGrammar = this.grammar;\n      while (relatedGrammar !== superSemanticsGrammar) {\n        str += '.superGrammar';\n        relatedGrammar = relatedGrammar.superGrammar;\n      }\n\n      str += ');\\n';\n      str += '  return g.extendSemantics(semantics)';\n    } else {\n      str += '  return g.createSemantics()';\n    }\n    ['Operation', 'Attribute'].forEach(type => {\n      const semanticOperations = this[type.toLowerCase() + 's'];\n      Object.keys(semanticOperations).forEach(name => {\n        const {actionDict, formals, builtInDefault} = semanticOperations[name];\n\n        let signature = name;\n        if (formals.length > 0) {\n          signature += '(' + formals.join(', ') + ')';\n        }\n\n        let method;\n        if (hasSuperSemantics(this) && this.super[type.toLowerCase() + 's'][name]) {\n          method = 'extend' + type;\n        } else {\n          method = 'add' + type;\n        }\n        str += '\\n    .' + method + '(' + JSON.stringify(signature) + ', {';\n\n        const srcArray = [];\n        Object.keys(actionDict).forEach(actionName => {\n          if (actionDict[actionName] !== builtInDefault) {\n            let source = actionDict[actionName].toString().trim();\n\n            // Convert method shorthand to plain old function syntax.\n            // https://github.com/ohmjs/ohm/issues/263\n            source = source.replace(/^.*\\(/, 'function(');\n\n            srcArray.push('\\n      ' + JSON.stringify(actionName) + ': ' + source);\n          }\n        });\n        str += srcArray.join(',') + '\\n    })';\n      });\n    });\n    str += ';\\n  })';\n\n    if (!semanticsOnly) {\n      str =\n        '(function() {\\n' +\n        '  var grammar = this.fromRecipe(' +\n        this.grammar.toRecipe() +\n        ');\\n' +\n        '  var semantics = ' +\n        str +\n        '(grammar);\\n' +\n        '  return semantics;\\n' +\n        '});\\n';\n    }\n\n    return str;\n  }\n\n  addOperationOrAttribute(type, signature, actionDict) {\n    const typePlural = type + 's';\n\n    const parsedNameAndFormalArgs = parseSignature(signature, type);\n    const {name} = parsedNameAndFormalArgs;\n    const {formals} = parsedNameAndFormalArgs;\n\n    // TODO: check that there are no duplicate formal arguments\n\n    this.assertNewName(name, type);\n\n    // Create the action dictionary for this operation / attribute that contains a `_default` action\n    // which defines the default behavior of iteration, terminal, and non-terminal nodes...\n    const builtInDefault = newDefaultAction(type, name, doIt);\n    const realActionDict = {_default: builtInDefault};\n    // ... and add in the actions supplied by the programmer, which may override some or all of the\n    // default ones.\n    Object.keys(actionDict).forEach(name => {\n      realActionDict[name] = actionDict[name];\n    });\n\n    const entry =\n      type === 'operation' ?\n        new Operation(name, formals, realActionDict, builtInDefault) :\n        new Attribute(name, realActionDict, builtInDefault);\n\n    // The following check is not strictly necessary (it will happen later anyway) but it's better\n    // to catch errors early.\n    entry.checkActionDict(this.grammar);\n\n    this[typePlural][name] = entry;\n\n    function doIt(...args) {\n      // Dispatch to most specific version of this operation / attribute -- it may have been\n      // overridden by a sub-semantics.\n      const thisThing = this._semantics[typePlural][name];\n\n      // Check that the caller passed the correct number of arguments.\n      if (arguments.length !== thisThing.formals.length) {\n        throw new Error(\n            'Invalid number of arguments passed to ' +\n            name +\n            ' ' +\n            type +\n            ' (expected ' +\n            thisThing.formals.length +\n            ', got ' +\n            arguments.length +\n            ')',\n        );\n      }\n\n      // Create an \"arguments object\" from the arguments that were passed to this\n      // operation / attribute.\n      const argsObj = Object.create(null);\n      for (const [idx, val] of Object.entries(args)) {\n        const formal = thisThing.formals[idx];\n        argsObj[formal] = val;\n      }\n\n      const oldArgs = this.args;\n      this.args = argsObj;\n      const ans = thisThing.execute(this._semantics, this);\n      this.args = oldArgs;\n      return ans;\n    }\n\n    if (type === 'operation') {\n      this.Wrapper.prototype[name] = doIt;\n      this.Wrapper.prototype[name].toString = function() {\n        return '[' + name + ' operation]';\n      };\n    } else {\n      Object.defineProperty(this.Wrapper.prototype, name, {\n        get: doIt,\n        configurable: true, // So the property can be deleted.\n      });\n      Object.defineProperty(this.attributeKeys, name, {\n        value: uniqueId(name),\n      });\n    }\n  }\n\n  extendOperationOrAttribute(type, name, actionDict) {\n    const typePlural = type + 's';\n\n    // Make sure that `name` really is just a name, i.e., that it doesn't also contain formals.\n    parseSignature(name, 'attribute');\n\n    if (!(this.super && name in this.super[typePlural])) {\n      throw new Error(\n          'Cannot extend ' +\n          type +\n          \" '\" +\n          name +\n          \"': did not inherit an \" +\n          type +\n          ' with that name',\n      );\n    }\n    if (hasOwnProperty(this[typePlural], name)) {\n      throw new Error('Cannot extend ' + type + \" '\" + name + \"' again\");\n    }\n\n    // Create a new operation / attribute whose actionDict delegates to the super operation /\n    // attribute's actionDict, and which has all the keys from `inheritedActionDict`.\n    const inheritedFormals = this[typePlural][name].formals;\n    const inheritedActionDict = this[typePlural][name].actionDict;\n    const newActionDict = Object.create(inheritedActionDict);\n    Object.keys(actionDict).forEach(name => {\n      newActionDict[name] = actionDict[name];\n    });\n\n    this[typePlural][name] =\n      type === 'operation' ?\n        new Operation(name, inheritedFormals, newActionDict) :\n        new Attribute(name, newActionDict);\n\n    // The following check is not strictly necessary (it will happen later anyway) but it's better\n    // to catch errors early.\n    this[typePlural][name].checkActionDict(this.grammar);\n  }\n\n  assertNewName(name, type) {\n    if (hasOwnProperty(Wrapper.prototype, name)) {\n      throw new Error('Cannot add ' + type + \" '\" + name + \"': that's a reserved name\");\n    }\n    if (name in this.operations) {\n      throw new Error(\n          'Cannot add ' + type + \" '\" + name + \"': an operation with that name already exists\",\n      );\n    }\n    if (name in this.attributes) {\n      throw new Error(\n          'Cannot add ' + type + \" '\" + name + \"': an attribute with that name already exists\",\n      );\n    }\n  }\n\n  // Returns a wrapper for the given CST `node` in this semantics.\n  // If `node` is already a wrapper, returns `node` itself.  // TODO: why is this needed?\n  wrap(node, source, optBaseInterval) {\n    const baseInterval = optBaseInterval || source;\n    return node instanceof this.Wrapper ? node : new this.Wrapper(node, source, baseInterval);\n  }\n}\n\nfunction parseSignature(signature, type) {\n  if (!Semantics.prototypeGrammar) {\n    // The Operations and Attributes grammar won't be available while Ohm is loading,\n    // but we can get away the following simplification b/c none of the operations\n    // that are used while loading take arguments.\n    assert(signature.indexOf('(') === -1);\n    return {\n      name: signature,\n      formals: [],\n    };\n  }\n\n  const r = Semantics.prototypeGrammar.match(\n      signature,\n    type === 'operation' ? 'OperationSignature' : 'AttributeSignature',\n  );\n  if (r.failed()) {\n    throw new Error(r.message);\n  }\n\n  return Semantics.prototypeGrammarSemantics(r).parse();\n}\n\nfunction newDefaultAction(type, name, doIt) {\n  return function(...children) {\n    const thisThing = this._semantics.operations[name] || this._semantics.attributes[name];\n    const args = thisThing.formals.map(formal => this.args[formal]);\n\n    if (!this.isIteration() && children.length === 1) {\n      // This CST node corresponds to a non-terminal in the grammar (e.g., AddExpr). The fact that\n      // we got here means that this action dictionary doesn't have an action for this particular\n      // non-terminal or a generic `_nonterminal` action.\n      // As a convenience, if this node only has one child, we just return the result of applying\n      // this operation / attribute to the child node.\n      return doIt.apply(children[0], args);\n    } else {\n      // Otherwise, we throw an exception to let the programmer know that we don't know what\n      // to do with this node.\n      throw missingSemanticAction(this.ctorName, name, type, globalActionStack);\n    }\n  };\n}\n\n// Creates a new Semantics instance for `grammar`, inheriting operations and attributes from\n// `optSuperSemantics`, if it is specified. Returns a function that acts as a proxy for the new\n// Semantics instance. When that function is invoked with a CST node as an argument, it returns\n// a wrapper for that node which gives access to the operations and attributes provided by this\n// semantics.\nSemantics.createSemantics = function(grammar, optSuperSemantics) {\n  const s = new Semantics(\n      grammar,\n    optSuperSemantics !== undefined ?\n      optSuperSemantics :\n      Semantics.BuiltInSemantics._getSemantics(),\n  );\n\n  // To enable clients to invoke a semantics like a function, return a function that acts as a proxy\n  // for `s`, which is the real `Semantics` instance.\n  const proxy = function ASemantics(matchResult) {\n    if (!(matchResult instanceof MatchResult)) {\n      throw new TypeError(\n          'Semantics expected a MatchResult, but got ' +\n          unexpectedObjToString(matchResult),\n      );\n    }\n    if (matchResult.failed()) {\n      throw new TypeError('cannot apply Semantics to ' + matchResult.toString());\n    }\n\n    const cst = matchResult._cst;\n    if (cst.grammar !== grammar) {\n      throw new Error(\n          \"Cannot use a MatchResult from grammar '\" +\n          cst.grammar.name +\n          \"' with a semantics for '\" +\n          grammar.name +\n          \"'\",\n      );\n    }\n    const inputStream = new InputStream(matchResult.input);\n    return s.wrap(cst, inputStream.interval(matchResult._cstOffset, matchResult.input.length));\n  };\n\n  // Forward public methods from the proxy to the semantics instance.\n  proxy.addOperation = function(signature, actionDict) {\n    s.addOperationOrAttribute('operation', signature, actionDict);\n    return proxy;\n  };\n  proxy.extendOperation = function(name, actionDict) {\n    s.extendOperationOrAttribute('operation', name, actionDict);\n    return proxy;\n  };\n  proxy.addAttribute = function(name, actionDict) {\n    s.addOperationOrAttribute('attribute', name, actionDict);\n    return proxy;\n  };\n  proxy.extendAttribute = function(name, actionDict) {\n    s.extendOperationOrAttribute('attribute', name, actionDict);\n    return proxy;\n  };\n  proxy._getActionDict = function(operationOrAttributeName) {\n    const action =\n      s.operations[operationOrAttributeName] || s.attributes[operationOrAttributeName];\n    if (!action) {\n      throw new Error(\n          '\"' +\n          operationOrAttributeName +\n          '\" is not a valid operation or attribute ' +\n          'name in this semantics for \"' +\n          grammar.name +\n          '\"',\n      );\n    }\n    return action.actionDict;\n  };\n  proxy._remove = function(operationOrAttributeName) {\n    let semantic;\n    if (operationOrAttributeName in s.operations) {\n      semantic = s.operations[operationOrAttributeName];\n      delete s.operations[operationOrAttributeName];\n    } else if (operationOrAttributeName in s.attributes) {\n      semantic = s.attributes[operationOrAttributeName];\n      delete s.attributes[operationOrAttributeName];\n    }\n    delete s.Wrapper.prototype[operationOrAttributeName];\n    return semantic;\n  };\n  proxy.getOperationNames = function() {\n    return Object.keys(s.operations);\n  };\n  proxy.getAttributeNames = function() {\n    return Object.keys(s.attributes);\n  };\n  proxy.getGrammar = function() {\n    return s.grammar;\n  };\n  proxy.toRecipe = function(semanticsOnly) {\n    return s.toRecipe(semanticsOnly);\n  };\n\n  // Make the proxy's toString() work.\n  proxy.toString = s.toString.bind(s);\n\n  // Returns the semantics for the proxy.\n  proxy._getSemantics = function() {\n    return s;\n  };\n\n  return proxy;\n};\n\n// ----------------- Operation -----------------\n\n// An Operation represents a function to be applied to a concrete syntax tree (CST) -- it's very\n// similar to a Visitor (http://en.wikipedia.org/wiki/Visitor_pattern). An operation is executed by\n// recursively walking the CST, and at each node, invoking the matching semantic action from\n// `actionDict`. See `Operation.prototype.execute` for details of how a CST node's matching semantic\n// action is found.\nclass Operation {\n  constructor(name, formals, actionDict, builtInDefault) {\n    this.name = name;\n    this.formals = formals;\n    this.actionDict = actionDict;\n    this.builtInDefault = builtInDefault;\n  }\n\n  checkActionDict(grammar) {\n    grammar._checkTopDownActionDict(this.typeName, this.name, this.actionDict);\n  }\n\n  // Execute this operation on the CST node associated with `nodeWrapper` in the context of the\n  // given Semantics instance.\n  execute(semantics, nodeWrapper) {\n    try {\n      // Look for a semantic action whose name matches the node's constructor name, which is either\n      // the name of a rule in the grammar, or '_terminal' (for a terminal node), or '_iter' (for an\n      // iteration node).\n      const {ctorName} = nodeWrapper._node;\n      let actionFn = this.actionDict[ctorName];\n      if (actionFn) {\n        globalActionStack.push([this, ctorName]);\n        return actionFn.apply(nodeWrapper, nodeWrapper._children());\n      }\n\n      // The action dictionary does not contain a semantic action for this specific type of node.\n      // If this is a nonterminal node and the programmer has provided a `_nonterminal` semantic\n      // action, we invoke it:\n      if (nodeWrapper.isNonterminal()) {\n        actionFn = this.actionDict._nonterminal;\n        if (actionFn) {\n          globalActionStack.push([this, '_nonterminal', ctorName]);\n          return actionFn.apply(nodeWrapper, nodeWrapper._children());\n        }\n      }\n\n      // Otherwise, we invoke the '_default' semantic action.\n      globalActionStack.push([this, 'default action', ctorName]);\n      return this.actionDict._default.apply(nodeWrapper, nodeWrapper._children());\n    } finally {\n      globalActionStack.pop();\n    }\n  }\n}\n\nOperation.prototype.typeName = 'operation';\n\n// ----------------- Attribute -----------------\n\n// Attributes are Operations whose results are memoized. This means that, for any given semantics,\n// the semantic action for a CST node will be invoked no more than once.\nclass Attribute extends Operation {\n  constructor(name, actionDict, builtInDefault) {\n    super(name, [], actionDict, builtInDefault);\n  }\n\n  execute(semantics, nodeWrapper) {\n    const node = nodeWrapper._node;\n    const key = semantics.attributeKeys[this.name];\n    if (!hasOwnProperty(node, key)) {\n      // The following is a super-send -- isn't JS beautiful? :/\n      node[key] = Operation.prototype.execute.call(this, semantics, nodeWrapper);\n    }\n    return node[key];\n  }\n}\n\nAttribute.prototype.typeName = 'attribute';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nconst SPECIAL_ACTION_NAMES = ['_iter', '_terminal', '_nonterminal', '_default'];\n\nfunction getSortedRuleValues(grammar) {\n  return Object.keys(grammar.rules)\n      .sort()\n      .map(name => grammar.rules[name]);\n}\n\n// Until ES2019, JSON was not a valid subset of JavaScript because U+2028 (line separator)\n// and U+2029 (paragraph separator) are allowed in JSON string literals, but not in JS.\n// This function properly encodes those two characters so that the resulting string is\n// represents both valid JSON, and valid JavaScript (for ES2018 and below).\n// See https://v8.dev/features/subsume-json for more details.\nconst jsonToJS = str => str.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n\nlet ohmGrammar$1;\nlet buildGrammar$1;\n\nclass Grammar {\n  constructor(name, superGrammar, rules, optDefaultStartRule) {\n    this.name = name;\n    this.superGrammar = superGrammar;\n    this.rules = rules;\n    if (optDefaultStartRule) {\n      if (!(optDefaultStartRule in rules)) {\n        throw new Error(\n            \"Invalid start rule: '\" +\n            optDefaultStartRule +\n            \"' is not a rule in grammar '\" +\n            name +\n            \"'\",\n        );\n      }\n      this.defaultStartRule = optDefaultStartRule;\n    }\n    this._matchStateInitializer = undefined;\n    this.supportsIncrementalParsing = true;\n  }\n\n  matcher() {\n    return new Matcher(this);\n  }\n\n  // Return true if the grammar is a built-in grammar, otherwise false.\n  // NOTE: This might give an unexpected result if called before BuiltInRules is defined!\n  isBuiltIn() {\n    return this === Grammar.ProtoBuiltInRules || this === Grammar.BuiltInRules;\n  }\n\n  equals(g) {\n    if (this === g) {\n      return true;\n    }\n    // Do the cheapest comparisons first.\n    if (\n      g == null ||\n      this.name !== g.name ||\n      this.defaultStartRule !== g.defaultStartRule ||\n      !(this.superGrammar === g.superGrammar || this.superGrammar.equals(g.superGrammar))\n    ) {\n      return false;\n    }\n    const myRules = getSortedRuleValues(this);\n    const otherRules = getSortedRuleValues(g);\n    return (\n      myRules.length === otherRules.length &&\n      myRules.every((rule, i) => {\n        return (\n          rule.description === otherRules[i].description &&\n          rule.formals.join(',') === otherRules[i].formals.join(',') &&\n          rule.body.toString() === otherRules[i].body.toString()\n        );\n      })\n    );\n  }\n\n  match(input, optStartApplication) {\n    const m = this.matcher();\n    m.replaceInputRange(0, 0, input);\n    return m.match(optStartApplication);\n  }\n\n  trace(input, optStartApplication) {\n    const m = this.matcher();\n    m.replaceInputRange(0, 0, input);\n    return m.trace(optStartApplication);\n  }\n\n  createSemantics() {\n    return Semantics.createSemantics(this);\n  }\n\n  extendSemantics(superSemantics) {\n    return Semantics.createSemantics(this, superSemantics._getSemantics());\n  }\n\n  // Check that every key in `actionDict` corresponds to a semantic action, and that it maps to\n  // a function of the correct arity. If not, throw an exception.\n  _checkTopDownActionDict(what, name, actionDict) {\n    const problems = [];\n\n    // eslint-disable-next-line guard-for-in\n    for (const k in actionDict) {\n      const v = actionDict[k];\n      const isSpecialAction = SPECIAL_ACTION_NAMES.includes(k);\n\n      if (!isSpecialAction && !(k in this.rules)) {\n        problems.push(`'${k}' is not a valid semantic action for '${this.name}'`);\n        continue;\n      }\n      if (typeof v !== 'function') {\n        problems.push(`'${k}' must be a function in an action dictionary for '${this.name}'`);\n        continue;\n      }\n      const actual = v.length;\n      const expected = this._topDownActionArity(k);\n      if (actual !== expected) {\n        let details;\n        if (k === '_iter' || k === '_nonterminal') {\n          details =\n            `it should use a rest parameter, e.g. \\`${k}(...children) {}\\`. ` +\n            'NOTE: this is new in Ohm v16  see https://ohmjs.org/d/ati for details.';\n        } else {\n          details = `expected ${expected}, got ${actual}`;\n        }\n        problems.push(`Semantic action '${k}' has the wrong arity: ${details}`);\n      }\n    }\n    if (problems.length > 0) {\n      const prettyProblems = problems.map(problem => '- ' + problem);\n      const error = new Error(\n          [\n            `Found errors in the action dictionary of the '${name}' ${what}:`,\n            ...prettyProblems,\n          ].join('\\n'),\n      );\n      error.problems = problems;\n      throw error;\n    }\n  }\n\n  // Return the expected arity for a semantic action named `actionName`, which\n  // is either a rule name or a special action name like '_nonterminal'.\n  _topDownActionArity(actionName) {\n    // All special actions have an expected arity of 0, though all but _terminal\n    // are expected to use the rest parameter syntax (e.g. `_iter(...children)`).\n    // This is considered to have arity 0, i.e. `((...args) => {}).length` is 0.\n    return SPECIAL_ACTION_NAMES.includes(actionName) ?\n      0 :\n      this.rules[actionName].body.getArity();\n  }\n\n  _inheritsFrom(grammar) {\n    let g = this.superGrammar;\n    while (g) {\n      if (g.equals(grammar, true)) {\n        return true;\n      }\n      g = g.superGrammar;\n    }\n    return false;\n  }\n\n  toRecipe(superGrammarExpr = undefined) {\n    const metaInfo = {};\n    // Include the grammar source if it is available.\n    if (this.source) {\n      metaInfo.source = this.source.contents;\n    }\n\n    let startRule = null;\n    if (this.defaultStartRule) {\n      startRule = this.defaultStartRule;\n    }\n\n    const rules = {};\n    Object.keys(this.rules).forEach(ruleName => {\n      const ruleInfo = this.rules[ruleName];\n      const {body} = ruleInfo;\n      const isDefinition = !this.superGrammar || !this.superGrammar.rules[ruleName];\n\n      let operation;\n      if (isDefinition) {\n        operation = 'define';\n      } else {\n        operation = body instanceof Extend ? 'extend' : 'override';\n      }\n\n      const metaInfo = {};\n      if (ruleInfo.source && this.source) {\n        const adjusted = ruleInfo.source.relativeTo(this.source);\n        metaInfo.sourceInterval = [adjusted.startIdx, adjusted.endIdx];\n      }\n\n      const description = isDefinition ? ruleInfo.description : null;\n      const bodyRecipe = body.outputRecipe(ruleInfo.formals, this.source);\n\n      rules[ruleName] = [\n        operation, // \"define\"/\"extend\"/\"override\"\n        metaInfo,\n        description,\n        ruleInfo.formals,\n        bodyRecipe,\n      ];\n    });\n\n    // If the caller provided an expression to use for the supergrammar, use that.\n    // Otherwise, if the supergrammar is a user grammar, use its recipe inline.\n    let superGrammarOutput = 'null';\n    if (superGrammarExpr) {\n      superGrammarOutput = superGrammarExpr;\n    } else if (this.superGrammar && !this.superGrammar.isBuiltIn()) {\n      superGrammarOutput = this.superGrammar.toRecipe();\n    }\n\n    const recipeElements = [\n      ...['grammar', metaInfo, this.name].map(JSON.stringify),\n      superGrammarOutput,\n      ...[startRule, rules].map(JSON.stringify),\n    ];\n    return jsonToJS(`[${recipeElements.join(',')}]`);\n  }\n\n  // TODO: Come up with better names for these methods.\n  // TODO: Write the analog of these methods for inherited attributes.\n  toOperationActionDictionaryTemplate() {\n    return this._toOperationOrAttributeActionDictionaryTemplate();\n  }\n  toAttributeActionDictionaryTemplate() {\n    return this._toOperationOrAttributeActionDictionaryTemplate();\n  }\n\n  _toOperationOrAttributeActionDictionaryTemplate() {\n    // TODO: add the super-grammar's templates at the right place, e.g., a case for AddExpr_plus\n    // should appear next to other cases of AddExpr.\n\n    const sb = new StringBuffer();\n    sb.append('{');\n\n    let first = true;\n    // eslint-disable-next-line guard-for-in\n    for (const ruleName in this.rules) {\n      const {body} = this.rules[ruleName];\n      if (first) {\n        first = false;\n      } else {\n        sb.append(',');\n      }\n      sb.append('\\n');\n      sb.append('  ');\n      this.addSemanticActionTemplate(ruleName, body, sb);\n    }\n\n    sb.append('\\n}');\n    return sb.contents();\n  }\n\n  addSemanticActionTemplate(ruleName, body, sb) {\n    sb.append(ruleName);\n    sb.append(': function(');\n    const arity = this._topDownActionArity(ruleName);\n    sb.append(repeat('_', arity).join(', '));\n    sb.append(') {\\n');\n    sb.append('  }');\n  }\n\n  // Parse a string which expresses a rule application in this grammar, and return the\n  // resulting Apply node.\n  parseApplication(str) {\n    let app;\n    if (str.indexOf('<') === -1) {\n      // simple application\n      app = new Apply(str);\n    } else {\n      // parameterized application\n      const cst = ohmGrammar$1.match(str, 'Base_application');\n      app = buildGrammar$1(cst, {});\n    }\n\n    // Ensure that the application is valid.\n    if (!(app.ruleName in this.rules)) {\n      throw undeclaredRule(app.ruleName, this.name);\n    }\n    const {formals} = this.rules[app.ruleName];\n    if (formals.length !== app.args.length) {\n      const {source} = this.rules[app.ruleName];\n      throw wrongNumberOfParameters(\n          app.ruleName,\n          formals.length,\n          app.args.length,\n          source,\n      );\n    }\n    return app;\n  }\n\n  _setUpMatchState(state) {\n    if (this._matchStateInitializer) {\n      this._matchStateInitializer(state);\n    }\n  }\n}\n\n// The following grammar contains a few rules that couldn't be written  in \"userland\".\n// At the bottom of src/main.js, we create a sub-grammar of this grammar that's called\n// `BuiltInRules`. That grammar contains several convenience rules, e.g., `letter` and\n// `digit`, and is implicitly the super-grammar of any grammar whose super-grammar\n// isn't specified.\nGrammar.ProtoBuiltInRules = new Grammar(\n    'ProtoBuiltInRules', // name\n    undefined, // supergrammar\n    {\n      any: {\n        body: any,\n        formals: [],\n        description: 'any character',\n        primitive: true,\n      },\n      end: {\n        body: end,\n        formals: [],\n        description: 'end of input',\n        primitive: true,\n      },\n\n      caseInsensitive: {\n        body: new CaseInsensitiveTerminal(new Param(0)),\n        formals: ['str'],\n        primitive: true,\n      },\n      lower: {\n        body: new UnicodeChar('Ll'),\n        formals: [],\n        description: 'a lowercase letter',\n        primitive: true,\n      },\n      upper: {\n        body: new UnicodeChar('Lu'),\n        formals: [],\n        description: 'an uppercase letter',\n        primitive: true,\n      },\n      // Union of Lt (titlecase), Lm (modifier), and Lo (other), i.e. any letter not in Ll or Lu.\n      unicodeLtmo: {\n        body: new UnicodeChar('Ltmo'),\n        formals: [],\n        description: 'a Unicode character in Lt, Lm, or Lo',\n        primitive: true,\n      },\n\n      // These rules are not truly primitive (they could be written in userland) but are defined\n      // here for bootstrapping purposes.\n      spaces: {\n        body: new Star(new Apply('space')),\n        formals: [],\n      },\n      space: {\n        body: new Range('\\x00', ' '),\n        formals: [],\n        description: 'a space',\n      },\n    },\n);\n\n// This method is called from main.js once Ohm has loaded.\nGrammar.initApplicationParser = function(grammar, builderFn) {\n  ohmGrammar$1 = grammar;\n  buildGrammar$1 = builderFn;\n};\n\n// --------------------------------------------------------------------\n// Private Stuff\n// --------------------------------------------------------------------\n\n// Constructors\n\nclass GrammarDecl {\n  constructor(name) {\n    this.name = name;\n  }\n\n  // Helpers\n\n  sourceInterval(startIdx, endIdx) {\n    return this.source.subInterval(startIdx, endIdx - startIdx);\n  }\n\n  ensureSuperGrammar() {\n    if (!this.superGrammar) {\n      this.withSuperGrammar(\n        // TODO: The conditional expression below is an ugly hack. It's kind of ok because\n        // I doubt anyone will ever try to declare a grammar called `BuiltInRules`. Still,\n        // we should try to find a better way to do this.\n        this.name === 'BuiltInRules' ? Grammar.ProtoBuiltInRules : Grammar.BuiltInRules,\n      );\n    }\n    return this.superGrammar;\n  }\n\n  ensureSuperGrammarRuleForOverriding(name, source) {\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    if (!ruleInfo) {\n      throw cannotOverrideUndeclaredRule(name, this.superGrammar.name, source);\n    }\n    return ruleInfo;\n  }\n\n  installOverriddenOrExtendedRule(name, formals, body, source) {\n    const duplicateParameterNames$1 = getDuplicates(formals);\n    if (duplicateParameterNames$1.length > 0) {\n      throw duplicateParameterNames(name, duplicateParameterNames$1, source);\n    }\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    const expectedFormals = ruleInfo.formals;\n    const expectedNumFormals = expectedFormals ? expectedFormals.length : 0;\n    if (formals.length !== expectedNumFormals) {\n      throw wrongNumberOfParameters(name, expectedNumFormals, formals.length, source);\n    }\n    return this.install(name, formals, body, ruleInfo.description, source);\n  }\n\n  install(name, formals, body, description, source, primitive = false) {\n    this.rules[name] = {\n      body: body.introduceParams(formals),\n      formals,\n      description,\n      source,\n      primitive,\n    };\n    return this;\n  }\n\n  // Stuff that you should only do once\n\n  withSuperGrammar(superGrammar) {\n    if (this.superGrammar) {\n      throw new Error('the super grammar of a GrammarDecl cannot be set more than once');\n    }\n    this.superGrammar = superGrammar;\n    this.rules = Object.create(superGrammar.rules);\n\n    // Grammars with an explicit supergrammar inherit a default start rule.\n    if (!superGrammar.isBuiltIn()) {\n      this.defaultStartRule = superGrammar.defaultStartRule;\n    }\n    return this;\n  }\n\n  withDefaultStartRule(ruleName) {\n    this.defaultStartRule = ruleName;\n    return this;\n  }\n\n  withSource(source) {\n    this.source = new InputStream(source).interval(0, source.length);\n    return this;\n  }\n\n  // Creates a Grammar instance, and if it passes the sanity checks, returns it.\n  build() {\n    const grammar = new Grammar(\n        this.name,\n        this.ensureSuperGrammar(),\n        this.rules,\n        this.defaultStartRule,\n    );\n    // Initialize internal props that are inherited from the super grammar.\n    grammar._matchStateInitializer = grammar.superGrammar._matchStateInitializer;\n    grammar.supportsIncrementalParsing = grammar.superGrammar.supportsIncrementalParsing;\n\n    // TODO: change the pexpr.prototype.assert... methods to make them add\n    // exceptions to an array that's provided as an arg. Then we'll be able to\n    // show more than one error of the same type at a time.\n    // TODO: include the offending pexpr in the errors, that way we can show\n    // the part of the source that caused it.\n    const grammarErrors = [];\n    let grammarHasInvalidApplications = false;\n    Object.keys(grammar.rules).forEach(ruleName => {\n      const {body} = grammar.rules[ruleName];\n      try {\n        body.assertChoicesHaveUniformArity(ruleName);\n      } catch (e) {\n        grammarErrors.push(e);\n      }\n      try {\n        body.assertAllApplicationsAreValid(ruleName, grammar);\n      } catch (e) {\n        grammarErrors.push(e);\n        grammarHasInvalidApplications = true;\n      }\n    });\n    if (!grammarHasInvalidApplications) {\n      // The following check can only be done if the grammar has no invalid applications.\n      Object.keys(grammar.rules).forEach(ruleName => {\n        const {body} = grammar.rules[ruleName];\n        try {\n          body.assertIteratedExprsAreNotNullable(grammar, []);\n        } catch (e) {\n          grammarErrors.push(e);\n        }\n      });\n    }\n    if (grammarErrors.length > 0) {\n      throwErrors(grammarErrors);\n    }\n    if (this.source) {\n      grammar.source = this.source;\n    }\n\n    return grammar;\n  }\n\n  // Rule declarations\n\n  define(name, formals, body, description, source, primitive) {\n    this.ensureSuperGrammar();\n    if (this.superGrammar.rules[name]) {\n      throw duplicateRuleDeclaration(name, this.name, this.superGrammar.name, source);\n    } else if (this.rules[name]) {\n      throw duplicateRuleDeclaration(name, this.name, this.name, source);\n    }\n    const duplicateParameterNames$1 = getDuplicates(formals);\n    if (duplicateParameterNames$1.length > 0) {\n      throw duplicateParameterNames(name, duplicateParameterNames$1, source);\n    }\n    return this.install(name, formals, body, description, source, primitive);\n  }\n\n  override(name, formals, body, descIgnored, source) {\n    this.ensureSuperGrammarRuleForOverriding(name, source);\n    this.installOverriddenOrExtendedRule(name, formals, body, source);\n    return this;\n  }\n\n  extend(name, formals, fragment, descIgnored, source) {\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    if (!ruleInfo) {\n      throw cannotExtendUndeclaredRule(name, this.superGrammar.name, source);\n    }\n    const body = new Extend(this.superGrammar, name, fragment);\n    body.source = fragment.source;\n    this.installOverriddenOrExtendedRule(name, formals, body, source);\n    return this;\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass Builder {\n  constructor() {\n    this.currentDecl = null;\n    this.currentRuleName = null;\n  }\n\n  newGrammar(name) {\n    return new GrammarDecl(name);\n  }\n\n  grammar(metaInfo, name, superGrammar, defaultStartRule, rules) {\n    const gDecl = new GrammarDecl(name);\n    if (superGrammar) {\n      // `superGrammar` may be a recipe (i.e. an Array), or an actual grammar instance.\n      gDecl.withSuperGrammar(\n        superGrammar instanceof Grammar ? superGrammar : this.fromRecipe(superGrammar),\n      );\n    }\n    if (defaultStartRule) {\n      gDecl.withDefaultStartRule(defaultStartRule);\n    }\n    if (metaInfo && metaInfo.source) {\n      gDecl.withSource(metaInfo.source);\n    }\n\n    this.currentDecl = gDecl;\n    Object.keys(rules).forEach(ruleName => {\n      this.currentRuleName = ruleName;\n      const ruleRecipe = rules[ruleName];\n\n      const action = ruleRecipe[0]; // define/extend/override\n      const metaInfo = ruleRecipe[1];\n      const description = ruleRecipe[2];\n      const formals = ruleRecipe[3];\n      const body = this.fromRecipe(ruleRecipe[4]);\n\n      let source;\n      if (gDecl.source && metaInfo && metaInfo.sourceInterval) {\n        source = gDecl.source.subInterval(\n            metaInfo.sourceInterval[0],\n            metaInfo.sourceInterval[1] - metaInfo.sourceInterval[0],\n        );\n      }\n      gDecl[action](ruleName, formals, body, description, source);\n    });\n    this.currentRuleName = this.currentDecl = null;\n    return gDecl.build();\n  }\n\n  terminal(x) {\n    return new Terminal(x);\n  }\n\n  range(from, to) {\n    return new Range(from, to);\n  }\n\n  param(index) {\n    return new Param(index);\n  }\n\n  alt(...termArgs) {\n    let terms = [];\n    for (let arg of termArgs) {\n      if (!(arg instanceof PExpr)) {\n        arg = this.fromRecipe(arg);\n      }\n      if (arg instanceof Alt) {\n        terms = terms.concat(arg.terms);\n      } else {\n        terms.push(arg);\n      }\n    }\n    return terms.length === 1 ? terms[0] : new Alt(terms);\n  }\n\n  seq(...factorArgs) {\n    let factors = [];\n    for (let arg of factorArgs) {\n      if (!(arg instanceof PExpr)) {\n        arg = this.fromRecipe(arg);\n      }\n      if (arg instanceof Seq) {\n        factors = factors.concat(arg.factors);\n      } else {\n        factors.push(arg);\n      }\n    }\n    return factors.length === 1 ? factors[0] : new Seq(factors);\n  }\n\n  star(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Star(expr);\n  }\n\n  plus(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Plus(expr);\n  }\n\n  opt(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Opt(expr);\n  }\n\n  not(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Not(expr);\n  }\n\n  lookahead(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Lookahead(expr);\n  }\n\n  lex(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Lex(expr);\n  }\n\n  app(ruleName, optParams) {\n    if (optParams && optParams.length > 0) {\n      optParams = optParams.map(function(param) {\n        return param instanceof PExpr ? param : this.fromRecipe(param);\n      }, this);\n    }\n    return new Apply(ruleName, optParams);\n  }\n\n  // Note that unlike other methods in this class, this method cannot be used as a\n  // convenience constructor. It only works with recipes, because it relies on\n  // `this.currentDecl` and `this.currentRuleName` being set.\n  splice(beforeTerms, afterTerms) {\n    return new Splice(\n        this.currentDecl.superGrammar,\n        this.currentRuleName,\n        beforeTerms.map(term => this.fromRecipe(term)),\n        afterTerms.map(term => this.fromRecipe(term)),\n    );\n  }\n\n  fromRecipe(recipe) {\n    // the meta-info of 'grammar' is processed in Builder.grammar\n    const args = recipe[0] === 'grammar' ? recipe.slice(1) : recipe.slice(2);\n    const result = this[recipe[0]](...args);\n\n    const metaInfo = recipe[1];\n    if (metaInfo) {\n      if (metaInfo.sourceInterval && this.currentDecl) {\n        result.withSource(this.currentDecl.sourceInterval(...metaInfo.sourceInterval));\n      }\n    }\n    return result;\n  }\n}\n\nfunction makeRecipe(recipe) {\n  if (typeof recipe === 'function') {\n    return recipe.call(new Builder());\n  } else {\n    if (typeof recipe === 'string') {\n      // stringified JSON recipe\n      recipe = JSON.parse(recipe);\n    }\n    return new Builder().fromRecipe(recipe);\n  }\n}\n\nvar BuiltInRules = makeRecipe([\"grammar\",{\"source\":\"BuiltInRules {\\n\\n  alnum  (an alpha-numeric character)\\n    = letter\\n    | digit\\n\\n  letter  (a letter)\\n    = lower\\n    | upper\\n    | unicodeLtmo\\n\\n  digit  (a digit)\\n    = \\\"0\\\"..\\\"9\\\"\\n\\n  hexDigit  (a hexadecimal digit)\\n    = digit\\n    | \\\"a\\\"..\\\"f\\\"\\n    | \\\"A\\\"..\\\"F\\\"\\n\\n  ListOf<elem, sep>\\n    = NonemptyListOf<elem, sep>\\n    | EmptyListOf<elem, sep>\\n\\n  NonemptyListOf<elem, sep>\\n    = elem (sep elem)*\\n\\n  EmptyListOf<elem, sep>\\n    = /* nothing */\\n\\n  listOf<elem, sep>\\n    = nonemptyListOf<elem, sep>\\n    | emptyListOf<elem, sep>\\n\\n  nonemptyListOf<elem, sep>\\n    = elem (sep elem)*\\n\\n  emptyListOf<elem, sep>\\n    = /* nothing */\\n\\n  // Allows a syntactic rule application within a lexical context.\\n  applySyntactic<app> = app\\n}\"},\"BuiltInRules\",null,null,{\"alnum\":[\"define\",{\"sourceInterval\":[18,78]},\"an alpha-numeric character\",[],[\"alt\",{\"sourceInterval\":[60,78]},[\"app\",{\"sourceInterval\":[60,66]},\"letter\",[]],[\"app\",{\"sourceInterval\":[73,78]},\"digit\",[]]]],\"letter\":[\"define\",{\"sourceInterval\":[82,142]},\"a letter\",[],[\"alt\",{\"sourceInterval\":[107,142]},[\"app\",{\"sourceInterval\":[107,112]},\"lower\",[]],[\"app\",{\"sourceInterval\":[119,124]},\"upper\",[]],[\"app\",{\"sourceInterval\":[131,142]},\"unicodeLtmo\",[]]]],\"digit\":[\"define\",{\"sourceInterval\":[146,177]},\"a digit\",[],[\"range\",{\"sourceInterval\":[169,177]},\"0\",\"9\"]],\"hexDigit\":[\"define\",{\"sourceInterval\":[181,254]},\"a hexadecimal digit\",[],[\"alt\",{\"sourceInterval\":[219,254]},[\"app\",{\"sourceInterval\":[219,224]},\"digit\",[]],[\"range\",{\"sourceInterval\":[231,239]},\"a\",\"f\"],[\"range\",{\"sourceInterval\":[246,254]},\"A\",\"F\"]]],\"ListOf\":[\"define\",{\"sourceInterval\":[258,336]},null,[\"elem\",\"sep\"],[\"alt\",{\"sourceInterval\":[282,336]},[\"app\",{\"sourceInterval\":[282,307]},\"NonemptyListOf\",[[\"param\",{\"sourceInterval\":[297,301]},0],[\"param\",{\"sourceInterval\":[303,306]},1]]],[\"app\",{\"sourceInterval\":[314,336]},\"EmptyListOf\",[[\"param\",{\"sourceInterval\":[326,330]},0],[\"param\",{\"sourceInterval\":[332,335]},1]]]]],\"NonemptyListOf\":[\"define\",{\"sourceInterval\":[340,388]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[372,388]},[\"param\",{\"sourceInterval\":[372,376]},0],[\"star\",{\"sourceInterval\":[377,388]},[\"seq\",{\"sourceInterval\":[378,386]},[\"param\",{\"sourceInterval\":[378,381]},1],[\"param\",{\"sourceInterval\":[382,386]},0]]]]],\"EmptyListOf\":[\"define\",{\"sourceInterval\":[392,434]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[438,438]}]],\"listOf\":[\"define\",{\"sourceInterval\":[438,516]},null,[\"elem\",\"sep\"],[\"alt\",{\"sourceInterval\":[462,516]},[\"app\",{\"sourceInterval\":[462,487]},\"nonemptyListOf\",[[\"param\",{\"sourceInterval\":[477,481]},0],[\"param\",{\"sourceInterval\":[483,486]},1]]],[\"app\",{\"sourceInterval\":[494,516]},\"emptyListOf\",[[\"param\",{\"sourceInterval\":[506,510]},0],[\"param\",{\"sourceInterval\":[512,515]},1]]]]],\"nonemptyListOf\":[\"define\",{\"sourceInterval\":[520,568]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[552,568]},[\"param\",{\"sourceInterval\":[552,556]},0],[\"star\",{\"sourceInterval\":[557,568]},[\"seq\",{\"sourceInterval\":[558,566]},[\"param\",{\"sourceInterval\":[558,561]},1],[\"param\",{\"sourceInterval\":[562,566]},0]]]]],\"emptyListOf\":[\"define\",{\"sourceInterval\":[572,682]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[685,685]}]],\"applySyntactic\":[\"define\",{\"sourceInterval\":[685,710]},null,[\"app\"],[\"param\",{\"sourceInterval\":[707,710]},0]]}]);\n\nGrammar.BuiltInRules = BuiltInRules;\nannounceBuiltInRules(Grammar.BuiltInRules);\n\nvar ohmGrammar = makeRecipe([\"grammar\",{\"source\":\"Ohm {\\n\\n  Grammars\\n    = Grammar*\\n\\n  Grammar\\n    = ident SuperGrammar? \\\"{\\\" Rule* \\\"}\\\"\\n\\n  SuperGrammar\\n    = \\\"<:\\\" ident\\n\\n  Rule\\n    = ident Formals? ruleDescr? \\\"=\\\"  RuleBody  -- define\\n    | ident Formals?            \\\":=\\\" OverrideRuleBody  -- override\\n    | ident Formals?            \\\"+=\\\" RuleBody  -- extend\\n\\n  RuleBody\\n    = \\\"|\\\"? NonemptyListOf<TopLevelTerm, \\\"|\\\">\\n\\n  TopLevelTerm\\n    = Seq caseName  -- inline\\n    | Seq\\n\\n  OverrideRuleBody\\n    = \\\"|\\\"? NonemptyListOf<OverrideTopLevelTerm, \\\"|\\\">\\n\\n  OverrideTopLevelTerm\\n    = \\\"...\\\"  -- superSplice\\n    | TopLevelTerm\\n\\n  Formals\\n    = \\\"<\\\" ListOf<ident, \\\",\\\"> \\\">\\\"\\n\\n  Params\\n    = \\\"<\\\" ListOf<Seq, \\\",\\\"> \\\">\\\"\\n\\n  Alt\\n    = NonemptyListOf<Seq, \\\"|\\\">\\n\\n  Seq\\n    = Iter*\\n\\n  Iter\\n    = Pred \\\"*\\\"  -- star\\n    | Pred \\\"+\\\"  -- plus\\n    | Pred \\\"?\\\"  -- opt\\n    | Pred\\n\\n  Pred\\n    = \\\"~\\\" Lex  -- not\\n    | \\\"&\\\" Lex  -- lookahead\\n    | Lex\\n\\n  Lex\\n    = \\\"#\\\" Base  -- lex\\n    | Base\\n\\n  Base\\n    = ident Params? ~(ruleDescr? \\\"=\\\" | \\\":=\\\" | \\\"+=\\\")  -- application\\n    | oneCharTerminal \\\"..\\\" oneCharTerminal           -- range\\n    | terminal                                       -- terminal\\n    | \\\"(\\\" Alt \\\")\\\"                                    -- paren\\n\\n  ruleDescr  (a rule description)\\n    = \\\"(\\\" ruleDescrText \\\")\\\"\\n\\n  ruleDescrText\\n    = (~\\\")\\\" any)*\\n\\n  caseName\\n    = \\\"--\\\" (~\\\"\\\\n\\\" space)* name (~\\\"\\\\n\\\" space)* (\\\"\\\\n\\\" | &\\\"}\\\")\\n\\n  name  (a name)\\n    = nameFirst nameRest*\\n\\n  nameFirst\\n    = \\\"_\\\"\\n    | letter\\n\\n  nameRest\\n    = \\\"_\\\"\\n    | alnum\\n\\n  ident  (an identifier)\\n    = name\\n\\n  terminal\\n    = \\\"\\\\\\\"\\\" terminalChar* \\\"\\\\\\\"\\\"\\n\\n  oneCharTerminal\\n    = \\\"\\\\\\\"\\\" terminalChar \\\"\\\\\\\"\\\"\\n\\n  terminalChar\\n    = escapeChar\\n      | ~\\\"\\\\\\\\\\\" ~\\\"\\\\\\\"\\\" ~\\\"\\\\n\\\" \\\"\\\\u{0}\\\"..\\\"\\\\u{10FFFF}\\\"\\n\\n  escapeChar  (an escape sequence)\\n    = \\\"\\\\\\\\\\\\\\\\\\\"                                     -- backslash\\n    | \\\"\\\\\\\\\\\\\\\"\\\"                                     -- doubleQuote\\n    | \\\"\\\\\\\\\\\\'\\\"                                     -- singleQuote\\n    | \\\"\\\\\\\\b\\\"                                      -- backspace\\n    | \\\"\\\\\\\\n\\\"                                      -- lineFeed\\n    | \\\"\\\\\\\\r\\\"                                      -- carriageReturn\\n    | \\\"\\\\\\\\t\\\"                                      -- tab\\n    | \\\"\\\\\\\\u{\\\" hexDigit hexDigit? hexDigit?\\n             hexDigit? hexDigit? hexDigit? \\\"}\\\"   -- unicodeCodePoint\\n    | \\\"\\\\\\\\u\\\" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\\n    | \\\"\\\\\\\\x\\\" hexDigit hexDigit                    -- hexEscape\\n\\n  space\\n   += comment\\n\\n  comment\\n    = \\\"//\\\" (~\\\"\\\\n\\\" any)* &(\\\"\\\\n\\\" | end)  -- singleLine\\n    | \\\"/*\\\" (~\\\"*/\\\" any)* \\\"*/\\\"  -- multiLine\\n\\n  tokens = token*\\n\\n  token = caseName | comment | ident | operator | punctuation | terminal | any\\n\\n  operator = \\\"<:\\\" | \\\"=\\\" | \\\":=\\\" | \\\"+=\\\" | \\\"*\\\" | \\\"+\\\" | \\\"?\\\" | \\\"~\\\" | \\\"&\\\"\\n\\n  punctuation = \\\"<\\\" | \\\">\\\" | \\\",\\\" | \\\"--\\\"\\n}\"},\"Ohm\",null,\"Grammars\",{\"Grammars\":[\"define\",{\"sourceInterval\":[9,32]},null,[],[\"star\",{\"sourceInterval\":[24,32]},[\"app\",{\"sourceInterval\":[24,31]},\"Grammar\",[]]]],\"Grammar\":[\"define\",{\"sourceInterval\":[36,83]},null,[],[\"seq\",{\"sourceInterval\":[50,83]},[\"app\",{\"sourceInterval\":[50,55]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[56,69]},[\"app\",{\"sourceInterval\":[56,68]},\"SuperGrammar\",[]]],[\"terminal\",{\"sourceInterval\":[70,73]},\"{\"],[\"star\",{\"sourceInterval\":[74,79]},[\"app\",{\"sourceInterval\":[74,78]},\"Rule\",[]]],[\"terminal\",{\"sourceInterval\":[80,83]},\"}\"]]],\"SuperGrammar\":[\"define\",{\"sourceInterval\":[87,116]},null,[],[\"seq\",{\"sourceInterval\":[106,116]},[\"terminal\",{\"sourceInterval\":[106,110]},\"<:\"],[\"app\",{\"sourceInterval\":[111,116]},\"ident\",[]]]],\"Rule_define\":[\"define\",{\"sourceInterval\":[131,181]},null,[],[\"seq\",{\"sourceInterval\":[131,170]},[\"app\",{\"sourceInterval\":[131,136]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[137,145]},[\"app\",{\"sourceInterval\":[137,144]},\"Formals\",[]]],[\"opt\",{\"sourceInterval\":[146,156]},[\"app\",{\"sourceInterval\":[146,155]},\"ruleDescr\",[]]],[\"terminal\",{\"sourceInterval\":[157,160]},\"=\"],[\"app\",{\"sourceInterval\":[162,170]},\"RuleBody\",[]]]],\"Rule_override\":[\"define\",{\"sourceInterval\":[188,248]},null,[],[\"seq\",{\"sourceInterval\":[188,235]},[\"app\",{\"sourceInterval\":[188,193]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[194,202]},[\"app\",{\"sourceInterval\":[194,201]},\"Formals\",[]]],[\"terminal\",{\"sourceInterval\":[214,218]},\":=\"],[\"app\",{\"sourceInterval\":[219,235]},\"OverrideRuleBody\",[]]]],\"Rule_extend\":[\"define\",{\"sourceInterval\":[255,305]},null,[],[\"seq\",{\"sourceInterval\":[255,294]},[\"app\",{\"sourceInterval\":[255,260]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[261,269]},[\"app\",{\"sourceInterval\":[261,268]},\"Formals\",[]]],[\"terminal\",{\"sourceInterval\":[281,285]},\"+=\"],[\"app\",{\"sourceInterval\":[286,294]},\"RuleBody\",[]]]],\"Rule\":[\"define\",{\"sourceInterval\":[120,305]},null,[],[\"alt\",{\"sourceInterval\":[131,305]},[\"app\",{\"sourceInterval\":[131,170]},\"Rule_define\",[]],[\"app\",{\"sourceInterval\":[188,235]},\"Rule_override\",[]],[\"app\",{\"sourceInterval\":[255,294]},\"Rule_extend\",[]]]],\"RuleBody\":[\"define\",{\"sourceInterval\":[309,362]},null,[],[\"seq\",{\"sourceInterval\":[324,362]},[\"opt\",{\"sourceInterval\":[324,328]},[\"terminal\",{\"sourceInterval\":[324,327]},\"|\"]],[\"app\",{\"sourceInterval\":[329,362]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[344,356]},\"TopLevelTerm\",[]],[\"terminal\",{\"sourceInterval\":[358,361]},\"|\"]]]]],\"TopLevelTerm_inline\":[\"define\",{\"sourceInterval\":[385,408]},null,[],[\"seq\",{\"sourceInterval\":[385,397]},[\"app\",{\"sourceInterval\":[385,388]},\"Seq\",[]],[\"app\",{\"sourceInterval\":[389,397]},\"caseName\",[]]]],\"TopLevelTerm\":[\"define\",{\"sourceInterval\":[366,418]},null,[],[\"alt\",{\"sourceInterval\":[385,418]},[\"app\",{\"sourceInterval\":[385,397]},\"TopLevelTerm_inline\",[]],[\"app\",{\"sourceInterval\":[415,418]},\"Seq\",[]]]],\"OverrideRuleBody\":[\"define\",{\"sourceInterval\":[422,491]},null,[],[\"seq\",{\"sourceInterval\":[445,491]},[\"opt\",{\"sourceInterval\":[445,449]},[\"terminal\",{\"sourceInterval\":[445,448]},\"|\"]],[\"app\",{\"sourceInterval\":[450,491]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[465,485]},\"OverrideTopLevelTerm\",[]],[\"terminal\",{\"sourceInterval\":[487,490]},\"|\"]]]]],\"OverrideTopLevelTerm_superSplice\":[\"define\",{\"sourceInterval\":[522,543]},null,[],[\"terminal\",{\"sourceInterval\":[522,527]},\"...\"]],\"OverrideTopLevelTerm\":[\"define\",{\"sourceInterval\":[495,562]},null,[],[\"alt\",{\"sourceInterval\":[522,562]},[\"app\",{\"sourceInterval\":[522,527]},\"OverrideTopLevelTerm_superSplice\",[]],[\"app\",{\"sourceInterval\":[550,562]},\"TopLevelTerm\",[]]]],\"Formals\":[\"define\",{\"sourceInterval\":[566,606]},null,[],[\"seq\",{\"sourceInterval\":[580,606]},[\"terminal\",{\"sourceInterval\":[580,583]},\"<\"],[\"app\",{\"sourceInterval\":[584,602]},\"ListOf\",[[\"app\",{\"sourceInterval\":[591,596]},\"ident\",[]],[\"terminal\",{\"sourceInterval\":[598,601]},\",\"]]],[\"terminal\",{\"sourceInterval\":[603,606]},\">\"]]],\"Params\":[\"define\",{\"sourceInterval\":[610,647]},null,[],[\"seq\",{\"sourceInterval\":[623,647]},[\"terminal\",{\"sourceInterval\":[623,626]},\"<\"],[\"app\",{\"sourceInterval\":[627,643]},\"ListOf\",[[\"app\",{\"sourceInterval\":[634,637]},\"Seq\",[]],[\"terminal\",{\"sourceInterval\":[639,642]},\",\"]]],[\"terminal\",{\"sourceInterval\":[644,647]},\">\"]]],\"Alt\":[\"define\",{\"sourceInterval\":[651,685]},null,[],[\"app\",{\"sourceInterval\":[661,685]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[676,679]},\"Seq\",[]],[\"terminal\",{\"sourceInterval\":[681,684]},\"|\"]]]],\"Seq\":[\"define\",{\"sourceInterval\":[689,704]},null,[],[\"star\",{\"sourceInterval\":[699,704]},[\"app\",{\"sourceInterval\":[699,703]},\"Iter\",[]]]],\"Iter_star\":[\"define\",{\"sourceInterval\":[719,736]},null,[],[\"seq\",{\"sourceInterval\":[719,727]},[\"app\",{\"sourceInterval\":[719,723]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[724,727]},\"*\"]]],\"Iter_plus\":[\"define\",{\"sourceInterval\":[743,760]},null,[],[\"seq\",{\"sourceInterval\":[743,751]},[\"app\",{\"sourceInterval\":[743,747]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[748,751]},\"+\"]]],\"Iter_opt\":[\"define\",{\"sourceInterval\":[767,783]},null,[],[\"seq\",{\"sourceInterval\":[767,775]},[\"app\",{\"sourceInterval\":[767,771]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[772,775]},\"?\"]]],\"Iter\":[\"define\",{\"sourceInterval\":[708,794]},null,[],[\"alt\",{\"sourceInterval\":[719,794]},[\"app\",{\"sourceInterval\":[719,727]},\"Iter_star\",[]],[\"app\",{\"sourceInterval\":[743,751]},\"Iter_plus\",[]],[\"app\",{\"sourceInterval\":[767,775]},\"Iter_opt\",[]],[\"app\",{\"sourceInterval\":[790,794]},\"Pred\",[]]]],\"Pred_not\":[\"define\",{\"sourceInterval\":[809,824]},null,[],[\"seq\",{\"sourceInterval\":[809,816]},[\"terminal\",{\"sourceInterval\":[809,812]},\"~\"],[\"app\",{\"sourceInterval\":[813,816]},\"Lex\",[]]]],\"Pred_lookahead\":[\"define\",{\"sourceInterval\":[831,852]},null,[],[\"seq\",{\"sourceInterval\":[831,838]},[\"terminal\",{\"sourceInterval\":[831,834]},\"&\"],[\"app\",{\"sourceInterval\":[835,838]},\"Lex\",[]]]],\"Pred\":[\"define\",{\"sourceInterval\":[798,862]},null,[],[\"alt\",{\"sourceInterval\":[809,862]},[\"app\",{\"sourceInterval\":[809,816]},\"Pred_not\",[]],[\"app\",{\"sourceInterval\":[831,838]},\"Pred_lookahead\",[]],[\"app\",{\"sourceInterval\":[859,862]},\"Lex\",[]]]],\"Lex_lex\":[\"define\",{\"sourceInterval\":[876,892]},null,[],[\"seq\",{\"sourceInterval\":[876,884]},[\"terminal\",{\"sourceInterval\":[876,879]},\"#\"],[\"app\",{\"sourceInterval\":[880,884]},\"Base\",[]]]],\"Lex\":[\"define\",{\"sourceInterval\":[866,903]},null,[],[\"alt\",{\"sourceInterval\":[876,903]},[\"app\",{\"sourceInterval\":[876,884]},\"Lex_lex\",[]],[\"app\",{\"sourceInterval\":[899,903]},\"Base\",[]]]],\"Base_application\":[\"define\",{\"sourceInterval\":[918,979]},null,[],[\"seq\",{\"sourceInterval\":[918,963]},[\"app\",{\"sourceInterval\":[918,923]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[924,931]},[\"app\",{\"sourceInterval\":[924,930]},\"Params\",[]]],[\"not\",{\"sourceInterval\":[932,963]},[\"alt\",{\"sourceInterval\":[934,962]},[\"seq\",{\"sourceInterval\":[934,948]},[\"opt\",{\"sourceInterval\":[934,944]},[\"app\",{\"sourceInterval\":[934,943]},\"ruleDescr\",[]]],[\"terminal\",{\"sourceInterval\":[945,948]},\"=\"]],[\"terminal\",{\"sourceInterval\":[951,955]},\":=\"],[\"terminal\",{\"sourceInterval\":[958,962]},\"+=\"]]]]],\"Base_range\":[\"define\",{\"sourceInterval\":[986,1041]},null,[],[\"seq\",{\"sourceInterval\":[986,1022]},[\"app\",{\"sourceInterval\":[986,1001]},\"oneCharTerminal\",[]],[\"terminal\",{\"sourceInterval\":[1002,1006]},\"..\"],[\"app\",{\"sourceInterval\":[1007,1022]},\"oneCharTerminal\",[]]]],\"Base_terminal\":[\"define\",{\"sourceInterval\":[1048,1106]},null,[],[\"app\",{\"sourceInterval\":[1048,1056]},\"terminal\",[]]],\"Base_paren\":[\"define\",{\"sourceInterval\":[1113,1168]},null,[],[\"seq\",{\"sourceInterval\":[1113,1124]},[\"terminal\",{\"sourceInterval\":[1113,1116]},\"(\"],[\"app\",{\"sourceInterval\":[1117,1120]},\"Alt\",[]],[\"terminal\",{\"sourceInterval\":[1121,1124]},\")\"]]],\"Base\":[\"define\",{\"sourceInterval\":[907,1168]},null,[],[\"alt\",{\"sourceInterval\":[918,1168]},[\"app\",{\"sourceInterval\":[918,963]},\"Base_application\",[]],[\"app\",{\"sourceInterval\":[986,1022]},\"Base_range\",[]],[\"app\",{\"sourceInterval\":[1048,1056]},\"Base_terminal\",[]],[\"app\",{\"sourceInterval\":[1113,1124]},\"Base_paren\",[]]]],\"ruleDescr\":[\"define\",{\"sourceInterval\":[1172,1231]},\"a rule description\",[],[\"seq\",{\"sourceInterval\":[1210,1231]},[\"terminal\",{\"sourceInterval\":[1210,1213]},\"(\"],[\"app\",{\"sourceInterval\":[1214,1227]},\"ruleDescrText\",[]],[\"terminal\",{\"sourceInterval\":[1228,1231]},\")\"]]],\"ruleDescrText\":[\"define\",{\"sourceInterval\":[1235,1266]},null,[],[\"star\",{\"sourceInterval\":[1255,1266]},[\"seq\",{\"sourceInterval\":[1256,1264]},[\"not\",{\"sourceInterval\":[1256,1260]},[\"terminal\",{\"sourceInterval\":[1257,1260]},\")\"]],[\"app\",{\"sourceInterval\":[1261,1264]},\"any\",[]]]]],\"caseName\":[\"define\",{\"sourceInterval\":[1270,1338]},null,[],[\"seq\",{\"sourceInterval\":[1285,1338]},[\"terminal\",{\"sourceInterval\":[1285,1289]},\"--\"],[\"star\",{\"sourceInterval\":[1290,1304]},[\"seq\",{\"sourceInterval\":[1291,1302]},[\"not\",{\"sourceInterval\":[1291,1296]},[\"terminal\",{\"sourceInterval\":[1292,1296]},\"\\n\"]],[\"app\",{\"sourceInterval\":[1297,1302]},\"space\",[]]]],[\"app\",{\"sourceInterval\":[1305,1309]},\"name\",[]],[\"star\",{\"sourceInterval\":[1310,1324]},[\"seq\",{\"sourceInterval\":[1311,1322]},[\"not\",{\"sourceInterval\":[1311,1316]},[\"terminal\",{\"sourceInterval\":[1312,1316]},\"\\n\"]],[\"app\",{\"sourceInterval\":[1317,1322]},\"space\",[]]]],[\"alt\",{\"sourceInterval\":[1326,1337]},[\"terminal\",{\"sourceInterval\":[1326,1330]},\"\\n\"],[\"lookahead\",{\"sourceInterval\":[1333,1337]},[\"terminal\",{\"sourceInterval\":[1334,1337]},\"}\"]]]]],\"name\":[\"define\",{\"sourceInterval\":[1342,1382]},\"a name\",[],[\"seq\",{\"sourceInterval\":[1363,1382]},[\"app\",{\"sourceInterval\":[1363,1372]},\"nameFirst\",[]],[\"star\",{\"sourceInterval\":[1373,1382]},[\"app\",{\"sourceInterval\":[1373,1381]},\"nameRest\",[]]]]],\"nameFirst\":[\"define\",{\"sourceInterval\":[1386,1418]},null,[],[\"alt\",{\"sourceInterval\":[1402,1418]},[\"terminal\",{\"sourceInterval\":[1402,1405]},\"_\"],[\"app\",{\"sourceInterval\":[1412,1418]},\"letter\",[]]]],\"nameRest\":[\"define\",{\"sourceInterval\":[1422,1452]},null,[],[\"alt\",{\"sourceInterval\":[1437,1452]},[\"terminal\",{\"sourceInterval\":[1437,1440]},\"_\"],[\"app\",{\"sourceInterval\":[1447,1452]},\"alnum\",[]]]],\"ident\":[\"define\",{\"sourceInterval\":[1456,1489]},\"an identifier\",[],[\"app\",{\"sourceInterval\":[1485,1489]},\"name\",[]]],\"terminal\":[\"define\",{\"sourceInterval\":[1493,1531]},null,[],[\"seq\",{\"sourceInterval\":[1508,1531]},[\"terminal\",{\"sourceInterval\":[1508,1512]},\"\\\"\"],[\"star\",{\"sourceInterval\":[1513,1526]},[\"app\",{\"sourceInterval\":[1513,1525]},\"terminalChar\",[]]],[\"terminal\",{\"sourceInterval\":[1527,1531]},\"\\\"\"]]],\"oneCharTerminal\":[\"define\",{\"sourceInterval\":[1535,1579]},null,[],[\"seq\",{\"sourceInterval\":[1557,1579]},[\"terminal\",{\"sourceInterval\":[1557,1561]},\"\\\"\"],[\"app\",{\"sourceInterval\":[1562,1574]},\"terminalChar\",[]],[\"terminal\",{\"sourceInterval\":[1575,1579]},\"\\\"\"]]],\"terminalChar\":[\"define\",{\"sourceInterval\":[1583,1660]},null,[],[\"alt\",{\"sourceInterval\":[1602,1660]},[\"app\",{\"sourceInterval\":[1602,1612]},\"escapeChar\",[]],[\"seq\",{\"sourceInterval\":[1621,1660]},[\"not\",{\"sourceInterval\":[1621,1626]},[\"terminal\",{\"sourceInterval\":[1622,1626]},\"\\\\\"]],[\"not\",{\"sourceInterval\":[1627,1632]},[\"terminal\",{\"sourceInterval\":[1628,1632]},\"\\\"\"]],[\"not\",{\"sourceInterval\":[1633,1638]},[\"terminal\",{\"sourceInterval\":[1634,1638]},\"\\n\"]],[\"range\",{\"sourceInterval\":[1639,1660]},\"\\u0000\",\"\"]]]],\"escapeChar_backslash\":[\"define\",{\"sourceInterval\":[1703,1758]},null,[],[\"terminal\",{\"sourceInterval\":[1703,1709]},\"\\\\\\\\\"]],\"escapeChar_doubleQuote\":[\"define\",{\"sourceInterval\":[1765,1822]},null,[],[\"terminal\",{\"sourceInterval\":[1765,1771]},\"\\\\\\\"\"]],\"escapeChar_singleQuote\":[\"define\",{\"sourceInterval\":[1829,1886]},null,[],[\"terminal\",{\"sourceInterval\":[1829,1835]},\"\\\\'\"]],\"escapeChar_backspace\":[\"define\",{\"sourceInterval\":[1893,1948]},null,[],[\"terminal\",{\"sourceInterval\":[1893,1898]},\"\\\\b\"]],\"escapeChar_lineFeed\":[\"define\",{\"sourceInterval\":[1955,2009]},null,[],[\"terminal\",{\"sourceInterval\":[1955,1960]},\"\\\\n\"]],\"escapeChar_carriageReturn\":[\"define\",{\"sourceInterval\":[2016,2076]},null,[],[\"terminal\",{\"sourceInterval\":[2016,2021]},\"\\\\r\"]],\"escapeChar_tab\":[\"define\",{\"sourceInterval\":[2083,2132]},null,[],[\"terminal\",{\"sourceInterval\":[2083,2088]},\"\\\\t\"]],\"escapeChar_unicodeCodePoint\":[\"define\",{\"sourceInterval\":[2139,2243]},null,[],[\"seq\",{\"sourceInterval\":[2139,2221]},[\"terminal\",{\"sourceInterval\":[2139,2145]},\"\\\\u{\"],[\"app\",{\"sourceInterval\":[2146,2154]},\"hexDigit\",[]],[\"opt\",{\"sourceInterval\":[2155,2164]},[\"app\",{\"sourceInterval\":[2155,2163]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2165,2174]},[\"app\",{\"sourceInterval\":[2165,2173]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2188,2197]},[\"app\",{\"sourceInterval\":[2188,2196]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2198,2207]},[\"app\",{\"sourceInterval\":[2198,2206]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2208,2217]},[\"app\",{\"sourceInterval\":[2208,2216]},\"hexDigit\",[]]],[\"terminal\",{\"sourceInterval\":[2218,2221]},\"}\"]]],\"escapeChar_unicodeEscape\":[\"define\",{\"sourceInterval\":[2250,2309]},null,[],[\"seq\",{\"sourceInterval\":[2250,2291]},[\"terminal\",{\"sourceInterval\":[2250,2255]},\"\\\\u\"],[\"app\",{\"sourceInterval\":[2256,2264]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2265,2273]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2274,2282]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2283,2291]},\"hexDigit\",[]]]],\"escapeChar_hexEscape\":[\"define\",{\"sourceInterval\":[2316,2371]},null,[],[\"seq\",{\"sourceInterval\":[2316,2339]},[\"terminal\",{\"sourceInterval\":[2316,2321]},\"\\\\x\"],[\"app\",{\"sourceInterval\":[2322,2330]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2331,2339]},\"hexDigit\",[]]]],\"escapeChar\":[\"define\",{\"sourceInterval\":[1664,2371]},\"an escape sequence\",[],[\"alt\",{\"sourceInterval\":[1703,2371]},[\"app\",{\"sourceInterval\":[1703,1709]},\"escapeChar_backslash\",[]],[\"app\",{\"sourceInterval\":[1765,1771]},\"escapeChar_doubleQuote\",[]],[\"app\",{\"sourceInterval\":[1829,1835]},\"escapeChar_singleQuote\",[]],[\"app\",{\"sourceInterval\":[1893,1898]},\"escapeChar_backspace\",[]],[\"app\",{\"sourceInterval\":[1955,1960]},\"escapeChar_lineFeed\",[]],[\"app\",{\"sourceInterval\":[2016,2021]},\"escapeChar_carriageReturn\",[]],[\"app\",{\"sourceInterval\":[2083,2088]},\"escapeChar_tab\",[]],[\"app\",{\"sourceInterval\":[2139,2221]},\"escapeChar_unicodeCodePoint\",[]],[\"app\",{\"sourceInterval\":[2250,2291]},\"escapeChar_unicodeEscape\",[]],[\"app\",{\"sourceInterval\":[2316,2339]},\"escapeChar_hexEscape\",[]]]],\"space\":[\"extend\",{\"sourceInterval\":[2375,2394]},null,[],[\"app\",{\"sourceInterval\":[2387,2394]},\"comment\",[]]],\"comment_singleLine\":[\"define\",{\"sourceInterval\":[2412,2458]},null,[],[\"seq\",{\"sourceInterval\":[2412,2443]},[\"terminal\",{\"sourceInterval\":[2412,2416]},\"//\"],[\"star\",{\"sourceInterval\":[2417,2429]},[\"seq\",{\"sourceInterval\":[2418,2427]},[\"not\",{\"sourceInterval\":[2418,2423]},[\"terminal\",{\"sourceInterval\":[2419,2423]},\"\\n\"]],[\"app\",{\"sourceInterval\":[2424,2427]},\"any\",[]]]],[\"lookahead\",{\"sourceInterval\":[2430,2443]},[\"alt\",{\"sourceInterval\":[2432,2442]},[\"terminal\",{\"sourceInterval\":[2432,2436]},\"\\n\"],[\"app\",{\"sourceInterval\":[2439,2442]},\"end\",[]]]]]],\"comment_multiLine\":[\"define\",{\"sourceInterval\":[2465,2501]},null,[],[\"seq\",{\"sourceInterval\":[2465,2487]},[\"terminal\",{\"sourceInterval\":[2465,2469]},\"/*\"],[\"star\",{\"sourceInterval\":[2470,2482]},[\"seq\",{\"sourceInterval\":[2471,2480]},[\"not\",{\"sourceInterval\":[2471,2476]},[\"terminal\",{\"sourceInterval\":[2472,2476]},\"*/\"]],[\"app\",{\"sourceInterval\":[2477,2480]},\"any\",[]]]],[\"terminal\",{\"sourceInterval\":[2483,2487]},\"*/\"]]],\"comment\":[\"define\",{\"sourceInterval\":[2398,2501]},null,[],[\"alt\",{\"sourceInterval\":[2412,2501]},[\"app\",{\"sourceInterval\":[2412,2443]},\"comment_singleLine\",[]],[\"app\",{\"sourceInterval\":[2465,2487]},\"comment_multiLine\",[]]]],\"tokens\":[\"define\",{\"sourceInterval\":[2505,2520]},null,[],[\"star\",{\"sourceInterval\":[2514,2520]},[\"app\",{\"sourceInterval\":[2514,2519]},\"token\",[]]]],\"token\":[\"define\",{\"sourceInterval\":[2524,2600]},null,[],[\"alt\",{\"sourceInterval\":[2532,2600]},[\"app\",{\"sourceInterval\":[2532,2540]},\"caseName\",[]],[\"app\",{\"sourceInterval\":[2543,2550]},\"comment\",[]],[\"app\",{\"sourceInterval\":[2553,2558]},\"ident\",[]],[\"app\",{\"sourceInterval\":[2561,2569]},\"operator\",[]],[\"app\",{\"sourceInterval\":[2572,2583]},\"punctuation\",[]],[\"app\",{\"sourceInterval\":[2586,2594]},\"terminal\",[]],[\"app\",{\"sourceInterval\":[2597,2600]},\"any\",[]]]],\"operator\":[\"define\",{\"sourceInterval\":[2604,2669]},null,[],[\"alt\",{\"sourceInterval\":[2615,2669]},[\"terminal\",{\"sourceInterval\":[2615,2619]},\"<:\"],[\"terminal\",{\"sourceInterval\":[2622,2625]},\"=\"],[\"terminal\",{\"sourceInterval\":[2628,2632]},\":=\"],[\"terminal\",{\"sourceInterval\":[2635,2639]},\"+=\"],[\"terminal\",{\"sourceInterval\":[2642,2645]},\"*\"],[\"terminal\",{\"sourceInterval\":[2648,2651]},\"+\"],[\"terminal\",{\"sourceInterval\":[2654,2657]},\"?\"],[\"terminal\",{\"sourceInterval\":[2660,2663]},\"~\"],[\"terminal\",{\"sourceInterval\":[2666,2669]},\"&\"]]],\"punctuation\":[\"define\",{\"sourceInterval\":[2673,2709]},null,[],[\"alt\",{\"sourceInterval\":[2687,2709]},[\"terminal\",{\"sourceInterval\":[2687,2690]},\"<\"],[\"terminal\",{\"sourceInterval\":[2693,2696]},\">\"],[\"terminal\",{\"sourceInterval\":[2699,2702]},\",\"],[\"terminal\",{\"sourceInterval\":[2705,2709]},\"--\"]]]}]);\n\nconst superSplicePlaceholder = Object.create(PExpr.prototype);\n\nfunction namespaceHas(ns, name) {\n  // Look for an enumerable property, anywhere in the prototype chain.\n  for (const prop in ns) {\n    if (prop === name) return true;\n  }\n  return false;\n}\n\n// Returns a Grammar instance (i.e., an object with a `match` method) for\n// `tree`, which is the concrete syntax tree of a user-written grammar.\n// The grammar will be assigned into `namespace` under the name of the grammar\n// as specified in the source.\nfunction buildGrammar(match, namespace, optOhmGrammarForTesting) {\n  const builder = new Builder();\n  let decl;\n  let currentRuleName;\n  let currentRuleFormals;\n  let overriding = false;\n  const metaGrammar = optOhmGrammarForTesting || ohmGrammar;\n\n  // A visitor that produces a Grammar instance from the CST.\n  const helpers = metaGrammar.createSemantics().addOperation('visit', {\n    Grammars(grammarIter) {\n      return grammarIter.children.map(c => c.visit());\n    },\n    Grammar(id, s, _open, rules, _close) {\n      const grammarName = id.visit();\n      decl = builder.newGrammar(grammarName);\n      s.child(0) && s.child(0).visit();\n      rules.children.map(c => c.visit());\n      const g = decl.build();\n      g.source = this.source.trimmed();\n      if (namespaceHas(namespace, grammarName)) {\n        throw duplicateGrammarDeclaration(g);\n      }\n      namespace[grammarName] = g;\n      return g;\n    },\n\n    SuperGrammar(_, n) {\n      const superGrammarName = n.visit();\n      if (superGrammarName === 'null') {\n        decl.withSuperGrammar(null);\n      } else {\n        if (!namespace || !namespaceHas(namespace, superGrammarName)) {\n          throw undeclaredGrammar(superGrammarName, namespace, n.source);\n        }\n        decl.withSuperGrammar(namespace[superGrammarName]);\n      }\n    },\n\n    Rule_define(n, fs, d, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n      // If there is no default start rule yet, set it now. This must be done before visiting\n      // the body, because it might contain an inline rule definition.\n      if (!decl.defaultStartRule && decl.ensureSuperGrammar() !== Grammar.ProtoBuiltInRules) {\n        decl.withDefaultStartRule(currentRuleName);\n      }\n      const body = b.visit();\n      const description = d.children.map(c => c.visit())[0];\n      const source = this.source.trimmed();\n      return decl.define(currentRuleName, currentRuleFormals, body, description, source);\n    },\n    Rule_override(n, fs, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n\n      const source = this.source.trimmed();\n      decl.ensureSuperGrammarRuleForOverriding(currentRuleName, source);\n\n      overriding = true;\n      const body = b.visit();\n      overriding = false;\n      return decl.override(currentRuleName, currentRuleFormals, body, null, source);\n    },\n    Rule_extend(n, fs, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n      const body = b.visit();\n      const source = this.source.trimmed();\n      return decl.extend(currentRuleName, currentRuleFormals, body, null, source);\n    },\n    RuleBody(_, terms) {\n      return builder.alt(...terms.visit()).withSource(this.source);\n    },\n    OverrideRuleBody(_, terms) {\n      const args = terms.visit();\n\n      // Check if the super-splice operator (`...`) appears in the terms.\n      const expansionPos = args.indexOf(superSplicePlaceholder);\n      if (expansionPos >= 0) {\n        const beforeTerms = args.slice(0, expansionPos);\n        const afterTerms = args.slice(expansionPos + 1);\n\n        // Ensure it appears no more than once.\n        afterTerms.forEach(t => {\n          if (t === superSplicePlaceholder) throw multipleSuperSplices(t);\n        });\n\n        return new Splice(\n            decl.superGrammar,\n            currentRuleName,\n            beforeTerms,\n            afterTerms,\n        ).withSource(this.source);\n      } else {\n        return builder.alt(...args).withSource(this.source);\n      }\n    },\n    Formals(opointy, fs, cpointy) {\n      return fs.visit();\n    },\n\n    Params(opointy, ps, cpointy) {\n      return ps.visit();\n    },\n\n    Alt(seqs) {\n      return builder.alt(...seqs.visit()).withSource(this.source);\n    },\n\n    TopLevelTerm_inline(b, n) {\n      const inlineRuleName = currentRuleName + '_' + n.visit();\n      const body = b.visit();\n      const source = this.source.trimmed();\n      const isNewRuleDeclaration = !(\n        decl.superGrammar && decl.superGrammar.rules[inlineRuleName]\n      );\n      if (overriding && !isNewRuleDeclaration) {\n        decl.override(inlineRuleName, currentRuleFormals, body, null, source);\n      } else {\n        decl.define(inlineRuleName, currentRuleFormals, body, null, source);\n      }\n      const params = currentRuleFormals.map(formal => builder.app(formal));\n      return builder.app(inlineRuleName, params).withSource(body.source);\n    },\n    OverrideTopLevelTerm_superSplice(_) {\n      return superSplicePlaceholder;\n    },\n\n    Seq(expr) {\n      return builder.seq(...expr.children.map(c => c.visit())).withSource(this.source);\n    },\n\n    Iter_star(x, _) {\n      return builder.star(x.visit()).withSource(this.source);\n    },\n    Iter_plus(x, _) {\n      return builder.plus(x.visit()).withSource(this.source);\n    },\n    Iter_opt(x, _) {\n      return builder.opt(x.visit()).withSource(this.source);\n    },\n\n    Pred_not(_, x) {\n      return builder.not(x.visit()).withSource(this.source);\n    },\n    Pred_lookahead(_, x) {\n      return builder.lookahead(x.visit()).withSource(this.source);\n    },\n\n    Lex_lex(_, x) {\n      return builder.lex(x.visit()).withSource(this.source);\n    },\n\n    Base_application(rule, ps) {\n      const params = ps.children.map(c => c.visit())[0] || [];\n      return builder.app(rule.visit(), params).withSource(this.source);\n    },\n    Base_range(from, _, to) {\n      return builder.range(from.visit(), to.visit()).withSource(this.source);\n    },\n    Base_terminal(expr) {\n      return builder.terminal(expr.visit()).withSource(this.source);\n    },\n    Base_paren(open, x, close) {\n      return x.visit();\n    },\n\n    ruleDescr(open, t, close) {\n      return t.visit();\n    },\n    ruleDescrText(_) {\n      return this.sourceString.trim();\n    },\n\n    caseName(_, space1, n, space2, end) {\n      return n.visit();\n    },\n\n    name(first, rest) {\n      return this.sourceString;\n    },\n    nameFirst(expr) {},\n    nameRest(expr) {},\n\n    terminal(open, cs, close) {\n      return cs.children.map(c => c.visit()).join('');\n    },\n\n    oneCharTerminal(open, c, close) {\n      return c.visit();\n    },\n\n    escapeChar(c) {\n      try {\n        return unescapeCodePoint(this.sourceString);\n      } catch (err) {\n        if (err instanceof RangeError && err.message.startsWith('Invalid code point ')) {\n          throw invalidCodePoint(c);\n        }\n        throw err; // Rethrow\n      }\n    },\n\n    NonemptyListOf(x, _, xs) {\n      return [x.visit()].concat(xs.children.map(c => c.visit()));\n    },\n    EmptyListOf() {\n      return [];\n    },\n\n    _terminal() {\n      return this.sourceString;\n    },\n  });\n  return helpers(match).visit();\n}\n\nvar operationsAndAttributesGrammar = makeRecipe([\"grammar\",{\"source\":\"OperationsAndAttributes {\\n\\n  AttributeSignature =\\n    name\\n\\n  OperationSignature =\\n    name Formals?\\n\\n  Formals\\n    = \\\"(\\\" ListOf<name, \\\",\\\"> \\\")\\\"\\n\\n  name  (a name)\\n    = nameFirst nameRest*\\n\\n  nameFirst\\n    = \\\"_\\\"\\n    | letter\\n\\n  nameRest\\n    = \\\"_\\\"\\n    | alnum\\n\\n}\"},\"OperationsAndAttributes\",null,\"AttributeSignature\",{\"AttributeSignature\":[\"define\",{\"sourceInterval\":[29,58]},null,[],[\"app\",{\"sourceInterval\":[54,58]},\"name\",[]]],\"OperationSignature\":[\"define\",{\"sourceInterval\":[62,100]},null,[],[\"seq\",{\"sourceInterval\":[87,100]},[\"app\",{\"sourceInterval\":[87,91]},\"name\",[]],[\"opt\",{\"sourceInterval\":[92,100]},[\"app\",{\"sourceInterval\":[92,99]},\"Formals\",[]]]]],\"Formals\":[\"define\",{\"sourceInterval\":[104,143]},null,[],[\"seq\",{\"sourceInterval\":[118,143]},[\"terminal\",{\"sourceInterval\":[118,121]},\"(\"],[\"app\",{\"sourceInterval\":[122,139]},\"ListOf\",[[\"app\",{\"sourceInterval\":[129,133]},\"name\",[]],[\"terminal\",{\"sourceInterval\":[135,138]},\",\"]]],[\"terminal\",{\"sourceInterval\":[140,143]},\")\"]]],\"name\":[\"define\",{\"sourceInterval\":[147,187]},\"a name\",[],[\"seq\",{\"sourceInterval\":[168,187]},[\"app\",{\"sourceInterval\":[168,177]},\"nameFirst\",[]],[\"star\",{\"sourceInterval\":[178,187]},[\"app\",{\"sourceInterval\":[178,186]},\"nameRest\",[]]]]],\"nameFirst\":[\"define\",{\"sourceInterval\":[191,223]},null,[],[\"alt\",{\"sourceInterval\":[207,223]},[\"terminal\",{\"sourceInterval\":[207,210]},\"_\"],[\"app\",{\"sourceInterval\":[217,223]},\"letter\",[]]]],\"nameRest\":[\"define\",{\"sourceInterval\":[227,257]},null,[],[\"alt\",{\"sourceInterval\":[242,257]},[\"terminal\",{\"sourceInterval\":[242,245]},\"_\"],[\"app\",{\"sourceInterval\":[252,257]},\"alnum\",[]]]]}]);\n\ninitBuiltInSemantics(Grammar.BuiltInRules);\ninitPrototypeParser(operationsAndAttributesGrammar); // requires BuiltInSemantics\n\nfunction initBuiltInSemantics(builtInRules) {\n  const actions = {\n    empty() {\n      return this.iteration();\n    },\n    nonEmpty(first, _, rest) {\n      return this.iteration([first].concat(rest.children));\n    },\n  };\n\n  Semantics.BuiltInSemantics = Semantics.createSemantics(builtInRules, null).addOperation(\n      'asIteration',\n      {\n        emptyListOf: actions.empty,\n        nonemptyListOf: actions.nonEmpty,\n        EmptyListOf: actions.empty,\n        NonemptyListOf: actions.nonEmpty,\n      },\n  );\n}\n\nfunction initPrototypeParser(grammar) {\n  Semantics.prototypeGrammarSemantics = grammar.createSemantics().addOperation('parse', {\n    AttributeSignature(name) {\n      return {\n        name: name.parse(),\n        formals: [],\n      };\n    },\n    OperationSignature(name, optFormals) {\n      return {\n        name: name.parse(),\n        formals: optFormals.children.map(c => c.parse())[0] || [],\n      };\n    },\n    Formals(oparen, fs, cparen) {\n      return fs.asIteration().children.map(c => c.parse());\n    },\n    name(first, rest) {\n      return this.sourceString;\n    },\n  });\n  Semantics.prototypeGrammar = grammar;\n}\n\nfunction findIndentation(input) {\n  let pos = 0;\n  const stack = [0];\n  const topOfStack = () => stack[stack.length - 1];\n\n  const result = {};\n\n  const regex = /( *).*(?:$|\\r?\\n|\\r)/g;\n  let match;\n  while ((match = regex.exec(input)) != null) {\n    const [line, indent] = match;\n\n    // The last match will always have length 0. In every other case, some\n    // characters will be matched (possibly only the end of line chars).\n    if (line.length === 0) break;\n\n    const indentSize = indent.length;\n    const prevSize = topOfStack();\n\n    const indentPos = pos + indentSize;\n\n    if (indentSize > prevSize) {\n      // Indent -- always only 1.\n      stack.push(indentSize);\n      result[indentPos] = 1;\n    } else if (indentSize < prevSize) {\n      // Dedent -- can be multiple levels.\n      const prevLength = stack.length;\n      while (topOfStack() !== indentSize) {\n        stack.pop();\n      }\n      result[indentPos] = -1 * (prevLength - stack.length);\n    }\n    pos += line.length;\n  }\n  // Ensure that there is a matching DEDENT for every remaining INDENT.\n  if (stack.length > 1) {\n    result[pos] = 1 - stack.length;\n  }\n  return result;\n}\n\nconst INDENT_DESCRIPTION = 'an indented block';\nconst DEDENT_DESCRIPTION = 'a dedent';\n\n// A sentinel value that is out of range for both charCodeAt() and codePointAt().\nconst INVALID_CODE_POINT = 0x10ffff + 1;\n\nclass InputStreamWithIndentation extends InputStream {\n  constructor(state) {\n    super(state.input);\n    this.state = state;\n  }\n\n  _indentationAt(pos) {\n    return this.state.userData[pos] || 0;\n  }\n\n  atEnd() {\n    return super.atEnd() && this._indentationAt(this.pos) === 0;\n  }\n\n  next() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return undefined;\n    }\n    return super.next();\n  }\n\n  nextCharCode() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return INVALID_CODE_POINT;\n    }\n    return super.nextCharCode();\n  }\n\n  nextCodePoint() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return INVALID_CODE_POINT;\n    }\n    return super.nextCodePoint();\n  }\n}\n\nclass Indentation extends PExpr {\n  constructor(isIndent = true) {\n    super();\n    this.isIndent = isIndent;\n  }\n\n  allowsSkippingPrecedingSpace() {\n    return true;\n  }\n\n  eval(state) {\n    const {inputStream} = state;\n    const pseudoTokens = state.userData;\n    state.doNotMemoize = true;\n\n    const origPos = inputStream.pos;\n\n    const sign = this.isIndent ? 1 : -1;\n    const count = (pseudoTokens[origPos] || 0) * sign;\n    if (count > 0) {\n      // Update the count to consume the pseudotoken.\n      state.userData = Object.create(pseudoTokens);\n      state.userData[origPos] -= sign;\n\n      state.pushBinding(new TerminalNode(0), origPos);\n      return true;\n    } else {\n      state.processFailure(origPos, this);\n      return false;\n    }\n  }\n\n  getArity() {\n    return 1;\n  }\n\n  _assertAllApplicationsAreValid(ruleName, grammar) {}\n\n  _isNullable(grammar, memo) {\n    return false;\n  }\n\n  assertChoicesHaveUniformArity(ruleName) {}\n\n  assertIteratedExprsAreNotNullable(grammar) {}\n\n  introduceParams(formals) {\n    return this;\n  }\n\n  substituteParams(actuals) {\n    return this;\n  }\n\n  toString() {\n    return this.isIndent ? 'indent' : 'dedent';\n  }\n\n  toDisplayString() {\n    return this.toString();\n  }\n\n  toFailure(grammar) {\n    const description = this.isIndent ? INDENT_DESCRIPTION : DEDENT_DESCRIPTION;\n    return new Failure(this, description, 'description');\n  }\n}\n\n// Create a new definition for `any` that can consume indent & dedent.\nconst applyIndent = new Apply('indent');\nconst applyDedent = new Apply('dedent');\nconst newAnyBody = new Splice(BuiltInRules, 'any', [applyIndent, applyDedent], []);\n\nconst IndentationSensitive = new Builder()\n    .newGrammar('IndentationSensitive')\n    .withSuperGrammar(BuiltInRules)\n    .define('indent', [], new Indentation(true), INDENT_DESCRIPTION, undefined, true)\n    .define('dedent', [], new Indentation(false), DEDENT_DESCRIPTION, undefined, true)\n    .extend('any', [], newAnyBody, 'any character', undefined)\n    .build();\n\nObject.assign(IndentationSensitive, {\n  _matchStateInitializer(state) {\n    state.userData = findIndentation(state.input);\n    state.inputStream = new InputStreamWithIndentation(state);\n  },\n  supportsIncrementalParsing: false,\n});\n\n// Generated by scripts/prebuild.js\nconst version = '17.1.0';\n\nGrammar.initApplicationParser(ohmGrammar, buildGrammar);\n\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj);\n\nfunction compileAndLoad(source, namespace) {\n  const m = ohmGrammar.match(source, 'Grammars');\n  if (m.failed()) {\n    throw grammarSyntaxError(m);\n  }\n  return buildGrammar(m, namespace);\n}\n\nfunction grammar(source, optNamespace) {\n  const ns = grammars(source, optNamespace);\n\n  // Ensure that the source contained no more than one grammar definition.\n  const grammarNames = Object.keys(ns);\n  if (grammarNames.length === 0) {\n    throw new Error('Missing grammar definition');\n  } else if (grammarNames.length > 1) {\n    const secondGrammar = ns[grammarNames[1]];\n    const interval = secondGrammar.source;\n    throw new Error(\n        getLineAndColumnMessage(interval.sourceString, interval.startIdx) +\n        'Found more than one grammar definition -- use ohm.grammars() instead.',\n    );\n  }\n  return ns[grammarNames[0]]; // Return the one and only grammar.\n}\n\nfunction grammars(source, optNamespace) {\n  const ns = Object.create(optNamespace || {});\n  if (typeof source !== 'string') {\n    // For convenience, detect Node.js Buffer objects and automatically call toString().\n    if (isBuffer(source)) {\n      source = source.toString();\n    } else {\n      throw new TypeError(\n          'Expected string as first argument, got ' + unexpectedObjToString(source),\n      );\n    }\n  }\n  compileAndLoad(source, ns);\n  return ns;\n}\n\nexports.ExperimentalIndentationSensitive = IndentationSensitive;\nexports._buildGrammar = buildGrammar;\nexports.grammar = grammar;\nexports.grammars = grammars;\nexports.makeRecipe = makeRecipe;\nexports.ohmGrammar = ohmGrammar;\nexports.pexprs = pexprs;\nexports.version = version;\n//# sourceMappingURL=ohm.cjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(341);\n"],"sourceRoot":""}