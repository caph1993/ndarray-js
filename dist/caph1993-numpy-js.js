!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,n=t();for(r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,()=>(()=>{"use strict";var n={209:function(e,t,r){var n=this&&this.__generator||function(n,i){var a,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(r){return function(e){var t=[r,e];if(a)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(a=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=i.call(n,u)}catch(e){t=[6,e],o=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.NDArray=void 0,Object.defineProperty(i.prototype,"size",{get:function(){return null==this._simpleIndexes?this._flat.length:this._simpleIndexes.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flat",{get:function(){var t=this;return null==this._simpleIndexes?this._flat:this._simpleIndexes.indices.map(function(e){return t._flat[e]})},set:function(e){if(e.length!=this.size)throw new Error("Length mismatch. Can't write ".concat(e.length," values into ").concat(this.size," available positions."));var t=this.size;if(null==this._simpleIndexes)for(var r=0;r<t;r++)this._flat[r]=e[r];else for(var n=this._simpleIndexes.indices,r=0;r<t;r++)this._flat[n[r]]=e[r]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"T",{get:function(){return this.transpose()},enumerable:!1,configurable:!0}),i.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.shape[0]?[4,this.index(t)]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},Object.defineProperty(i.prototype,"length",{get:function(){return this.shape[0]||0},enumerable:!1,configurable:!0}),i.prototype.item=function(){if(1!=this.size)throw new Error("Can't convert array of size ".concat(this.size," to scalar"));return this._flat[0]},i);function i(e,t,r){void 0===r&&(r=Number),this.shape=t,this._flat=e,this.dtype=r,this._simpleIndexes=null}t.NDArray=s;r(92).GLOBALS.NDArray=s;var u=r(350),l=(s.prototype.modules=u.modules,u.modules.basic);function c(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,o([this],a(e),!1))}}s.prototype.reshape=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return l.reshape.apply(l,o([this,e],a(t),!1))},s.prototype.ravel=function(){return l.ravel(this)},s.prototype.copy=function(){return l.copy(this)},s.prototype.index=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.modules.indexes.index(this,e)},s.prototype.toString=function(){return u.modules.print.humanReadable(this)},s.prototype.any=u.modules.reduce.kw_reducers.any.as_method,s.prototype.all=u.modules.reduce.kw_reducers.all.as_method,s.prototype.sum=u.modules.reduce.kw_reducers.sum.as_method,s.prototype.product=u.modules.reduce.kw_reducers.product.as_method,s.prototype.max=u.modules.reduce.kw_reducers.max.as_method,s.prototype.min=u.modules.reduce.kw_reducers.min.as_method,s.prototype.argmax=u.modules.reduce.kw_reducers.argmax.as_method,s.prototype.argmin=u.modules.reduce.kw_reducers.argmin.as_method,s.prototype.mean=u.modules.reduce.kw_reducers.mean.as_method,s.prototype.var=u.modules.reduce.kw_reducers.var.as_method,s.prototype.std=u.modules.reduce.kw_reducers.std.as_method,s.prototype.norm=u.modules.reduce.kw_reducers.norm.as_method,s.prototype.add=u.modules.operators.kw_op_binary["+"].as_method,s.prototype.subtract=u.modules.operators.kw_op_binary["-"].as_method,s.prototype.multiply=u.modules.operators.kw_op_binary["*"].as_method,s.prototype.divide=u.modules.operators.kw_op_binary["/"].as_method,s.prototype.mod=u.modules.operators.kw_op_binary["%"].as_method,s.prototype.divide_int=u.modules.operators.kw_op_binary["//"].as_method,s.prototype.pow=u.modules.operators.kw_op_binary["**"].as_method,s.prototype.maximum=u.modules.operators.kw_op_binary.max.as_method,s.prototype.minimum=u.modules.operators.kw_op_binary.min.as_method,s.prototype.bitwise_or=u.modules.operators.kw_op_binary["|"].as_method,s.prototype.bitwise_and=u.modules.operators.kw_op_binary["&"].as_method,s.prototype.bitwise_or=u.modules.operators.kw_op_binary["^"].as_method,s.prototype.bitwise_shift_right=u.modules.operators.kw_op_binary["<<"].as_method,s.prototype.bitwise_shift_right=u.modules.operators.kw_op_binary[">>"].as_method,s.prototype.logical_or=u.modules.operators.kw_op_binary.or.as_method,s.prototype.logical_and=u.modules.operators.kw_op_binary.and.as_method,s.prototype.logical_xor=u.modules.operators.kw_op_binary.xor.as_method,s.prototype.greater=u.modules.operators.kw_op_binary[">"].as_method,s.prototype.less=u.modules.operators.kw_op_binary["<"].as_method,s.prototype.greater_equal=u.modules.operators.kw_op_binary[">="].as_method,s.prototype.less_equal=u.modules.operators.kw_op_binary["<="].as_method,s.prototype.equal=u.modules.operators.kw_op_binary["=="].as_method,s.prototype.not_equal=u.modules.operators.kw_op_binary["!="].as_method,s.prototype.bitwise_not=u.modules.elementwise.kw_ops.bitwise_not.as_method,s.prototype.logical_not=u.modules.elementwise.kw_ops.logical_not.as_method,s.prototype.negative=u.modules.elementwise.kw_ops.negative.as_method,s.prototype.abs=u.modules.elementwise.kw_ops.abs.as_method,s.prototype.isclose=u.modules.operators.isclose,s.prototype.allclose=u.modules.operators.allclose,s.prototype.assign=c(u.modules.operators.op_assign["="]),s.prototype.add_assign=c(u.modules.operators.op_assign["+="]),s.prototype.subtract_assign=c(u.modules.operators.op_assign["-="]),s.prototype.multiply_assign=c(u.modules.operators.op_assign["*="]),s.prototype.divide_assign=c(u.modules.operators.op_assign["/="]),s.prototype.mod_assign=c(u.modules.operators.op_assign["%="]),s.prototype.divide_int_assign=c(u.modules.operators.op_assign["//="]),s.prototype.pow_assign=c(u.modules.operators.op_assign["**="]),s.prototype.maximum_assign=c(u.modules.operators.op_assign["↑="]),s.prototype.minimum_assign=c(u.modules.operators.op_assign["↓="]),s.prototype.bitwise_or_assign=c(u.modules.operators.op_assign["|="]),s.prototype.bitwise_and_assign=c(u.modules.operators.op_assign["&="]),s.prototype.bitwise_shift_left_assign=c(u.modules.operators.op_assign["<<="]),s.prototype.bitwise_shift_right_assign=c(u.modules.operators.op_assign[">>="]),s.prototype.logical_or_assign=c(u.modules.operators.op_assign["or="]),s.prototype.logical_and_assign=c(u.modules.operators.op_assign["and="]),s.prototype.tolist=function(){return u.modules.jsInterface.tolist(this)},s.prototype.round=u.modules.elementwise.kw_ops.round.as_method,s.prototype.transpose=function(e){return u.modules.transform.transpose(this,e=void 0===e?null:e)},s.prototype.sort=function(e){return u.modules.transform.sort(this,e=void 0===e?-1:e),null};s.prototype.op=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e.length)return this;if("string"==typeof e[0]){var r=e[0];if(1==e.length){var n=u.modules.elementwise.ops[r];if(n)return n(this,r);throw new Error('Unknown unary operator "'.concat(r,'". Options:').concat(o([],a(Object.keys(u.modules.elementwise.ops)),!1)))}if(2<e.length)throw new Error("Too many arguments provided: ".concat(o([],a(e),!1)));var n=e[1],i=u.modules.operators.op_binary[r];if(i)return i(this,n);if(i=u.modules.operators.op_assign[r])return i(this,n);if(r.includes(":"))throw new Error('Expected index or operator symbol. Found "'.concat(r,'". Did you mean ').concat([r],"?"));throw new Error('Expected index or operator symbol. Found "'.concat(r,'"'))}i=e[0];if(i instanceof s)throw new Error("Expected operator or index. Found numpy array");if(1==e.length)return this.index(i);n=e[1],r=u.modules.operators.op_assign[n];if(!r)throw new Error('Unknown assign operator "'.concat(n,'". Options:').concat(o([],a(Object.keys(u.modules.operators.op_assign)),!1)));if(3<e.length)throw new Error("Too many arguments provided: ".concat(o([],a(e),!1)));return r(this,i,e[2])},t.default=s},290:function(e,n,t){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},t=(Object.defineProperty(n,"__esModule",{value:!0}),n.array=n.asarray=n.new_NDArray=n.isarray=n._NDArray=void 0,t(92)),a=t.GLOBALS.np,t=t.GLOBALS.NDArray;if(!t)throw new Error("Programming error: NDArray not defined");function o(e){return e instanceof n._NDArray}n._NDArray=t,n.isarray=o;function s(e){return o(e)?e:a.fromlist(e)}n.new_NDArray=function(e,t,r){return new n._NDArray(e,t,r)},n.asarray=s,n.array=function(e){var t;return o(e)?(t=null==e._simpleIndexes?i([],r(e.flat),!1):e.flat,(0,n.new_NDArray)(t,e.shape,e.dtype)):s(e)}},870:function(e,t,r){var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.copy=t.empty=t.new_from=t.ravel=t.reshape=t.parse_shape=t.shape_shifts=t.as_number=t.as_boolean=t.number_collapse=t._NDArray=t.new_NDArray=t.array=t.asarray=t.isarray=void 0,r(290));function n(e,t){if(!e.shape.length)return e.flat[0];if(t=void 0===t?!1:t)throw new Error("Expected constant. Got array with shape ".concat(e.shape));return e}function c(e){if((0,l.isarray)(e))e=n(e,!0);else if("string"==typeof e)throw new Error("'string' object can not be interpreted as boolean: ".concat(e));return parseFloat(e)}function p(e){if("number"==typeof e)return[e];if((0,l.isarray)(e)){if(1<e.shape.length)throw new Error("Expected flat list. Got array with shape ".concat(e.shape));return e.flat}if(Array.isArray(e))return e;throw new Error("Expected list. Got ".concat(e))}function i(e,t,r){void 0===t&&(t=void 0),void 0===r&&(r=Number);var n=(e=p(e)).reduce(function(e,t){return e*t},1),n=Array.from({length:n},t);return(0,l.new_NDArray)(n,e,r)}Object.defineProperty(t,"isarray",{enumerable:!0,get:function(){return l.isarray}}),Object.defineProperty(t,"asarray",{enumerable:!0,get:function(){return l.asarray}}),Object.defineProperty(t,"array",{enumerable:!0,get:function(){return l.array}}),Object.defineProperty(t,"new_NDArray",{enumerable:!0,get:function(){return l.new_NDArray}}),Object.defineProperty(t,"_NDArray",{enumerable:!0,get:function(){return l._NDArray}}),t.number_collapse=n,t.as_boolean=function(e){if((0,l.isarray)(e))e=n(e,!0);else if("string"==typeof e)throw new Error("'string' object can not be interpreted as boolean: ".concat(e));return!!(0+e)},t.as_number=c,t.shape_shifts=function(e){var t=Array.from({length:e.length},function(e){return 0});t[e.length-1]=1;for(var r=e.length-2;0<=r;r--)t[r]=t[r+1]*e[r+1];return t},t.parse_shape=p,t.reshape=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];e=(0,l.asarray)(e);var t=r.length?u([t],s(r),!1).map(c):p(t),i=e.size,a=t.indexOf(-1);if(-1!==a){var o=t.filter(function(e){return-1!==e}).reduce(function(e,t){return e*t},1);if(i%o!=0)throw new Error("Invalid shape. The total number of elements must match the product of the known dimensions.");t[a]=i/o}return(0,l.new_NDArray)(e.flat,t,e.dtype)},t.ravel=function(e){return e=(0,l.asarray)(e),(0,l.new_NDArray)(e.flat,[e.size],e.dtype)},t.new_from=i,t.empty=function(e,t){return i(e,function(e){},t=void 0===t?Number:t)},t.copy=function(e){return(0,l.new_NDArray)(u([],s(e.flat),!1),e.shape,e.dtype)}},525:function(e,t,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.kw_ops=t.ops=t.funcs=t.elementwise=void 0,r(870)),r=r(380);function a(e,t,r,n){return void 0===n&&(n=null),e=(0,i.asarray)(e),n?(n.flat=e.flat.map(t),n):(0,i.new_NDArray)(e.flat.map(t),e.shape,r)}function o(r,n){return function(e,t){return a(e,r,n,t=void 0===t?null:t)}}t.elementwise=a,t.funcs={sign:o(Math.sign,Number),sqrt:o(Math.sqrt,Number),square:o(function(e){return e*e},Number),exp:o(Math.exp,Number),log:o(Math.log,Number),log2:o(Math.log2,Number),log10:o(Math.log10,Number),log1p:o(Math.log1p,Number),sin:o(Math.sin,Number),cos:o(Math.cos,Number),tan:o(Math.tan,Number),asin:o(Math.asin,Number),acos:o(Math.acos,Number),atan:o(Math.atan,Number),cosh:o(Math.cosh,Number),sinh:o(Math.sinh,Number),tanh:o(Math.tanh,Number),acosh:o(Math.acosh,Number),asinh:o(Math.asinh,Number),atanh:o(Math.atanh,Number)};var s={round:function(e,t,r){return void 0===r&&(r=null),0==t&&a(e,Math.round,Number,r),a(e,function(e){return parseFloat(e.toFixed(t))},Number,r)},negative:o(function(e){return-e},Number),bitwise_not:o(function(e){return~e},Number),logical_not:o(function(e){return!e},Boolean),valueOf:o(function(e){return+e},Number),abs:o(Math.abs,Number)},s=(t.ops=n(n({},s),{"~":s.bitwise_not,not:s.logical_not,"+":s.valueOf,"-":s.negative}),{bitwise_not:(0,r.kwDecorators)({defaults:[["out",null]],func:t.ops.bitwise_not}),logical_not:(0,r.kwDecorators)({defaults:[["out",null]],func:t.ops.logical_not}),negative:(0,r.kwDecorators)({defaults:[["out",null]],func:t.ops.negative}),abs:(0,r.kwDecorators)({defaults:[["out",null]],func:t.ops.abs}),round:(0,r.kwDecorators)({defaults:[["decimals",0],["out",null]],func:t.ops.round})});t.kw_ops=n({},s)},350:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modules=void 0,r(290);var n=r(870),i=r(591),a=r(545),o=r(525),s=r(194),u=r(307),l=r(737),r=r(728);t.modules={basic:n,jsInterface:a,indexes:i,elementwise:o,print:s,reduce:u,operators:l,transform:r}},591:function(e,t,r){var y=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},m=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},g=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},f=(Object.defineProperty(t,"__esModule",{value:!0}),t.AxisIndex=t.__parse_sliceRange=t.AxesIndex=t.index=void 0,r(870));t.index=function(e,t){var r,n,i;if((0,f.isarray)(e))return(t=v.prototype.parse(e.shape,t)).isConstant?(n=y(t.indices,1)[0],e.flat[n]):(t.isSimple?(n=function(e,t){if(null==e)return t;for(var r=[],n=0,i=0;i<e.axisIndexes.length;i++){var a=e.axisIndexes[i].spec,o=t.axisIndexes[n].spec;if("array"==a.type)throw new Error("Expected simple index. Found advanced: ".concat(a.type));if("array"==o.type)throw new Error("Expected simple index. Found advanced: ".concat(o.type));var s=void 0;if("number"==a.type)s=a;else if(n++,":"==a.type)s=o;else if(":"==o.type)s=a;else{var a=a.range,u=a.start,l=a.step,a=a.nSteps;if("number"==o.type){var c=o.index;if((c=c<0?a+c:c)<0||a<=c)throw new Error("Index ".concat(c," out of bounds [0..").concat(a,")"));s={type:"number",index:c=u+c*l}}else{var c=o.range,o=c.start,p=c.step,h=c.nSteps,a=_.prototype.parse_range(a,o,o+h*p,p),o=a.step*l,h=u+a.start*o,p=a.nSteps;s={type:"range",range:{start:h,step:o,nSteps:p}}}}r.push(new _(s))}if(n<t.axisIndexes.length)throw new Error("Index too long. Expected ".concat(n," axes. Found ").concat(t.axisIndexes.length));var m=t.shape,f=e.internalShape;return new v(m,f,r)}(e._simpleIndexes,t),(i=(0,f.new_NDArray)(e._flat,t.shape,e.dtype))._simpleIndexes=n,e.__warnAssignments&&(i.__warnAssignments=!0)):(r=e.flat,n=t.indices.map(function(e){return r[e]}),(i=(0,f.new_NDArray)(n,t.shape,e.dtype)).__warnAssignments=!0),i);throw new Error("Expected NDArray. Found ".concat(typeof e,": ").concat(e))};Object.defineProperty(n.prototype,"indices",{get:function(){var e;return this._indices||(e=function(e,t){var r,n;try{for(var i=m(t),a=i.next();!a.done;a=i.next())if(0==a.value.length)return[]}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}var o=(0,f.shape_shifts)(e),s=t.map(function(e,t){for(var r=[],n=e.length,i=0;i<n-1;i++)r.push(o[t]*(e[i+1]-e[i]));return r[n-1]=o[t]*(e[0]-e[n-1]),r}),u=[],l=e.length-1,c=new Array(e.length).fill(0),p=t.map(function(e,t){return e[c[t]]*o[t]}).reduce(function(e,t){return e+t},0);for(;;){if(!isFinite(p))throw new Error("Programming error");u.push(p);for(var h=l;0<=h&&(p+=s[h][c[h]++],!(c[h]<s[h].length));)c[h--]=0;if(h<0)break}return u}(this.internalShape,this.__slices),this._indices=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"__slices",{get:function(){return this.axisIndexes.map(function(e){return e.indices})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size||(this._size=this.axisIndexes.map(function(e){return e.size}).reduce(function(e,t){return e*t},0))},enumerable:!1,configurable:!0});var v=n;function n(e,t,r){this.shape=e,this.internalShape=t,this.axisIndexes=r,this._indices=null,this._size=null,this.isSimple=this.axisIndexes.map(function(e){return e.isSimple}).reduce(function(e,t){return e&&t},!0),this.isConstant=this.axisIndexes.map(function(e){return e.isConstant}).reduce(function(e,t){return e&&t},!0)}t.AxesIndex=v,t.__parse_sliceRange=function(e,t){var r=t.start,n=t.stop,i=t.step;if(null==r?r=0:r<0&&(r=e+r),null==n?n=e:n<0&&(n=e+n),null==i)i=1;else if(0==i)throw new Error("Slice range with step size of zero");if(!isFinite(r)||!isFinite(n)||!isFinite(i))throw new Error("Invalid slice ".concat([r,n,i],". Axis size ").concat(e));var a=[];if(0<i)for(var r=Math.max(r,0),n=Math.min(n,e),o=r;o<n;o+=i)a.push(o);else{n=Math.max(n,0);for(o=r=Math.min(r,e);n<o;o+=i)a.push(o)}return a};Object.defineProperty(i.prototype,"indices",{get:function(){if(this._indices)return this._indices;if(":"==this.spec.type)i=Array.from({length:this.spec.size},function(e,t){return t});else if("number"===this.spec.type)i=[this.spec.index];else if("array"===this.spec.type)i=this.spec.indices;else{if("range"!=this.spec.type)throw new Error("Unknown spec type ".concat(this.spec.type));var e=this.spec.range,t=e.nSteps,r=e.step,n=e.start,i=Array.from({length:t},function(e,t){return n+t*r})}return this._indices=i},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){if(":"==this.spec.type)return this.spec.size;if("number"===this.spec.type)return 1;if("array"===this.spec.type)return this.spec.indices.length;if("range"==this.spec.type)return this.spec.range.nSteps;throw new Error("Unknown spec type ".concat(this.spec.type))},enumerable:!1,configurable:!0});var _=i;function i(e){this.spec=e,this._indices=null,this.isSimple="array"!=this.spec.type,this.isConstant="number"==this.spec.type}(t.AxisIndex=_).prototype.parse_range=function(i,e,t,r){if(void 0===e&&(e=null),void 0===t&&(t=null),null==(r=void 0===r?null:r))r=1;else if(0==r)throw new Error("Index specification error. Step must be different from zero.");function n(e,t,r,n){return null==e?t:(e<0&&(e=Math.max(0,i-e)),Math.min(n,Math.max(r,e)))}return t=0<r?(e=n(e,0,0,i-1),n(t,i,0,i)):(e=n(e,i-1,0,i-1),n(t,i-1,-1,i-1)),t=Math.max(t,e),{start:e,step:r,nSteps:Math.floor(Math.abs(t-e)/r)}},_.prototype.parse_range_spec=function(e){var t=e.split(":").map(function(e){if(""==(e=e.trim()))return null;var t=parseInt(e);if(Number.isInteger(t))return t;throw new Error("Wrong input. Slice index unrecognized: ".concat(e))});if(0==t.length)throw new Error("Unexpected empty index. Expected colons.");if(3<t.length)throw new Error("Too many colons in index ".concat(e));var e=y(g(g([],y(t),!1),[null,null,null],!1)),t=e[0],r=e[1],n=e[2];e.slice(3);return{start:t,stop:r,step:n}},_.prototype.parse=function(e,t){var r=1;if(":"==e||void 0===e)o={type:":",size:t};else if("number"==typeof e){var n=e;if((n=n<0?t+n:n)<0||t<=n)throw new Error("Index ".concat(n," out of bounds [0..").concat(t,")"));o={type:"number",index:n}}else if((0,f.isarray)(e)||Array.isArray(e)){var i,n=(0,f.asarray)(e);if(n.dtype==Number){if(1<n.shape.length)throw new Error("Expected 1D array of indices or nD array of booleans. "+"Found shape=".concat(n.shape," and dtype=").concat(n.dtype));i=n.flat}else i=[],n.flat.forEach(function(e,t){return e&&i.push(t)}),r=Math.max(1,n.shape.length);o={type:"array",indices:i}}else{if("string"!=typeof e)throw new Error("Unknown index type. Found ".concat(typeof e,": ").concat(e));var n=_.prototype.parse_range_spec(e),e=n.start,a=n.stop,n=n.step,e=_.prototype.parse_range(t,e,a,n),o=0==e.start&&e.nSteps==t&&1==e.step?{type:":",size:t}:{type:"range",range:e}}return{axisIndex:new _(o),span:r}},v.prototype.parse=function(e,t){for(var r=null==t?[]:g([],y(t),!1),n={axisIndexes:[],apparentShape:[],internalShape:[]},i=1,a={axisIndexes:NaN,apparentShape:NaN,internalShape:NaN},o=0,s=0,u=e.length,l=r.length;0<l||0<u;){var c=r[s];if(0<l){if((s<0||s>=r.length)&&(c=":"),l--,s+=i,"None"==c||null===c){n.apparentShape.push(1);continue}if("..."==c){if(-1==i)throw new Error("Index can only have a single ellipsis. Found index(".concat(t,")"));for(var p in i=-1,a)a[p]=n[p].length;s=r.length-1,o=e.length-1;continue}}else c=":";for(var c=_.prototype.parse(c,e[o]),h=c.axisIndex,m=c.span,f=(u-=m,1),d=0;d<m;d++){if(o<0||o>=e.length)throw new Error("Index spans over more dimensions than available in shape [".concat(e,"]: index(").concat(t,")"));f*=e[o],o+=i}n.axisIndexes.push(h),"number"!=h.spec.type&&n.apparentShape.push(h.size),n.internalShape.push(f)}if(-1==i)for(var p in n)n[p].splice(0,a[p]).concat(n[p].reverse());return new v(n.apparentShape,n.internalShape,n.axisIndexes)}},545:function(e,t,r){var d=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.tolist=t.fromlist=void 0,r(870));t.fromlist=function(e,t){if(void 0===t&&(t=null),(0,a.isarray)(e))return e;if("number"==typeof e)return(0,a.new_NDArray)([e],[],Number);if("boolean"==typeof e)return(0,a.new_NDArray)([e?1:0],[],Boolean);if(e===a._NDArray.prototype)throw new Error("Programming error");if(!Array.isArray(e))throw new Error("Can't parse input of type ".concat(typeof e,": ").concat(e));for(var h=[],r=e;Array.isArray(r);)if(h.push(r.length),r=r[0],256<h.length)throw new Error("Circular reference or excessive array depth");function m(e,t){var r,n,i,a;if(t==h.length-1)try{for(var o=d(e),s=o.next();!s.done;s=o.next()){var u=s.value;if(Array.isArray(u))throw new Error("Inconsistent shape");f.push(u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else{if(!Array.isArray(e))throw new Error("Inconsistent shape");try{for(var l=d(e),c=l.next();!c.done;c=l.next()){var p=c.value;if(p.length!=h[t+1])throw new Error("Inconsistent shape: found sibling arrays of lengths ".concat(p.length," and ").concat(h[t+1]));m(p,t+1)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}}t=null!==t?t:"boolean"==typeof r?Boolean:Number;var f=[];return m(e,0),(0,a.new_NDArray)(f,h,t)},t.tolist=function e(t){if((0,a.isarray)(this))return e;if(null===t||"number"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t))return t.map(e);if((0,a.isarray)(t))return t=(0,a.number_collapse)(t),(0,a.isarray)(t)?function e(t,r){if(0===r.length)return t.shift();for(var n=r.slice(1),i=r[0],a=[],o=0;o<i;o++)a.push(e(t,n));return a}(i([],n(t.flat),!1),t.shape):t;throw new Error("Expected MyArray. Got ".concat(typeof t,": ").concat(t))}},380:function(e,t,r){var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.KwParser=t.kwDecorator=t.kwDecorators=void 0,r(290));t.kwDecorators=function(e){var t=e.defaults,e=e.func;return new n(t).decorators(e)},t.kwDecorator=function(e){var t=e.defaults,e=e.func;return new n(t).as_function(e)};i.prototype.parse=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var a=this.defaults,o=Object.assign(Object.fromEntries(a)),t=0;t<i.length;t++){var r=i[t];r instanceof Object&&!(0,u.isarray)(r)?Object.assign(o,r):void 0!==r&&(o[a[t][0]]=r)}return a.map(function(e,t){var r=a[t][0],n=o[r];if(void 0===n)throw new Error("Missing argument ".concat(r," in ").concat(i));return n=3===a[t].length?a[t][2](n):n})},i.prototype.as_arr_function=function(i){var a=this;return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=a.parse.apply(a,s([],o(t),!1));return i.apply(void 0,s([(0,u.asarray)(e)],o(n),!1))}},i.prototype.as_arr_method=function(n){var i=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.parse.apply(i,s([],o(e),!1));return n.apply(void 0,s([this],o(r),!1))}},i.prototype.decorators=function(e){return{as_function:this.as_arr_function(e),as_method:this.as_arr_method(e)}},i.prototype.as_function=function(n){var i=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.parse.apply(i,s([],o(e),!1));return n.apply(void 0,s([],o(r),!1))}};var n=i;function i(e){this.defaults=e}t.KwParser=n},737:function(e,t,r){var n,_=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},b=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},p=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=(Object.defineProperty(t,"__esModule",{value:!0}),t.atan2=t.kw_op_binary=t.allclose=t.isclose=t.op_assign=t.__make_assignment_operator=t._assign_operation_toJS=t.assign_operation=t.op_binary=t.__make_operator_special=t.__make_operator=t._broadcast_shapes=t.binary_operation=void 0,r(591)),w=r(870),o=r(545),r=r(380);function m(e,t,r,n,i){if(void 0===i&&(i=null),(0,w.isarray)(this))return r.bind(w._NDArray.prototype).apply(void 0,b([this],_(arguments),!1));e=(0,w.asarray)(e),t=(0,w.asarray)(t);var a=_(x(e.shape,t.shape),3),o=a[0],s=a[1],u=a[2];if(null==i)i=(0,w.new_from)(o,function(e){},n);else if(!(0,w.isarray)(i))throw new Error("Out must be of type ".concat(w._NDArray,". Got ").concat(typeof i));for(var l=[],c=(0,w.shape_shifts)(s),p=(0,w.shape_shifts)(u),h=e.flat,m=t.flat,f=0;f<i.size;f++){for(var d=0,y=0,g=f,v=o.length-1;0<=v;v--)d+=c[v]*(g%s[v]),y+=p[v]*(g%u[v]),g=Math.floor(g/o[v]);l.push(r(h[d],m[y]))}return i.flat=l,(0,w.number_collapse)(i)}function x(e,t){var r=[],n=Math.max(e.length,t.length);e=b(b([],_(Array.from({length:n-e.length},function(){return 1})),!1),_(e),!1),t=b(b([],_(Array.from({length:n-t.length},function(){return 1})),!1),_(t),!1);for(var i=n-1;0<=i;i--){var a=e[i],o=t[i];if(1!==a&&1!==o&&a!==o)throw new Error("Can not broadcast axis ".concat(i," with sizes ").concat(a," and ").concat(o));r.unshift(Math.max(a,o))}return[r,e,t]}function i(n,i){return function(e,t,r){return m(e,t,i,n,r=void 0===r?null:r)}}function a(i,a){return function(e,t,r){void 0===r&&(r=null),e=(0,w.asarray)(e),t=(0,w.asarray)(t);var n=e.dtype;return e.dtype!=t.dtype&&console.warn("Warning: operating arrays of different dtypes. Using ".concat(n)),m(e,t,n==Boolean?a:i,n,r)}}function s(t,e,r,n,i){var a,o;if(t.__warnAssignment&&(console.warn("Warning: You are assigning on a copy that resulted from an advanced index on a source array.\nIf this is intentional, use yourArray = source.withKwArgs({copy:true}).index(...yourIndex) to make explicit your awareness of the copy operation.\nInstead, if you want to assign to the source array, use source.op('=', other) or source.op(['::3', -1, '...', [5,4]], '*=', other).\n"),delete t.__warnAssignment),!(0,w.isarray)(t))return f(t,e,r,n,i);if(r){e=(0,w.asarray)(e);var r=h.AxesIndex.prototype.parse(t.shape,r).indices,s=void 0;m(s=null==n?(n=function(e,t){return t},(0,w.new_from)(r.length,function(){},t.dtype)):(0,w.asarray)(r.map(function(e){return t._flat[e]})),(0,w.ravel)(e),n,i,s);try{for(var u=p(r),l=u.next();!l.done;l=u.next()){var c=l.value;t._flat[c]=s._flat[c]}}catch(e){a={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}}else m(t,e,n,i,t)}function f(e,t,r,n,i){if(!Array.isArray(e))throw new Error("Can not assign to a non-array. Found ".concat(typeof e,": ").concat(e));console.warn("Assignment to JS array is experimental and slow.");for(var a=(0,w.asarray)(e),t=(s(a,t,r,n,i),(0,o.tolist)(a));e.length;)e.pop();e.push.apply(e,b([],_(t),!1))}function u(r,n){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if((0,w.isarray)(this))return i.bind(w._NDArray.prototype).apply(void 0,b([this],_(e),!1));if(e.length<2)throw new Error("Not enough arguments for assignment operator");if(3<e.length)throw new Error("Too many arguments for assignment operator");return s(e[0],e[3==e.length?2:1],3==e.length?e[1]:null,n,r)}return i}t.binary_operation=m,t._broadcast_shapes=x,t.__make_operator=i,t.__make_operator_special=a,t.op_binary={"+":i(Number,function(e,t){return e+t}),"-":i(Number,function(e,t){return e-t}),"*":i(Number,function(e,t){return e*t}),"/":i(Number,function(e,t){return e/t}),"%":i(Number,function(e,t){return e%t}),"//":i(Number,function(e,t){return Math.floor(e/t)}),"**":i(Number,function(e,t){return Math.pow(e,t)}),"<":i(Boolean,function(e,t){return e<t}),">":i(Boolean,function(e,t){return t<e}),">=":i(Boolean,function(e,t){return t<=e}),"<=":i(Boolean,function(e,t){return e<=t}),"==":i(Boolean,function(e,t){return e==t}),"!=":i(Boolean,function(e,t){return e!=t}),"|":a(function(e,t){return e|t},function(e,t){return e||t}),"&":a(function(e,t){return e&t},function(e,t){return e&&t}),"^":i(Number,function(e,t){return e^t}),"<<":i(Number,function(e,t){return e<<t}),">>":i(Number,function(e,t){return e>>t}),or:i(Boolean,function(e,t){return e||t}),and:i(Boolean,function(e,t){return e&&t}),xor:i(Boolean,function(e,t){return!e!=!t}),max:i(Number,function(e,t){return Math.max(e,t)}),min:i(Number,function(e,t){return Math.min(e,t)})},t.op_binary["↑"]=t.op_binary.max,t.op_binary["↓"]=t.op_binary.min,t.op_binary["≤"]=t.op_binary.leq,t.op_binary["≥"]=t.op_binary.geq,t.op_binary["≠"]=t.op_binary.neq,t.assign_operation=s,t._assign_operation_toJS=f,t.__make_assignment_operator=u,t.op_assign={"=":u(Number,function(e,t){return t}),"+=":u(Number,function(e,t){return e+t}),"-=":u(Number,function(e,t){return e-t}),"*=":u(Number,function(e,t){return e*t}),"/=":u(Number,function(e,t){return e/t}),"%=":u(Number,function(e,t){return e%t}),"//=":u(Number,function(e,t){return Math.floor(e/t)}),"**=":u(Number,function(e,t){return Math.pow(e,t)}),"|=":u(Number,function(e,t){return e|t}),"&=":u(Number,function(e,t){return e&t}),"^=":u(Number,function(e,t){return e^t}),"<<=":u(Number,function(e,t){return e<<t}),">>=":u(Number,function(e,t){return e>>t}),"max=":u(Number,function(e,t){return Math.max(e,t)}),"min=":u(Number,function(e,t){return Math.min(e,t)}),"or=":u(Boolean,function(e,t){return e||t}),"and=":u(Boolean,function(e,t){return e&&t})},t.op_assign["↑="]=t.op_assign["max="],t.op_assign["↓="]=t.op_assign["min="],t.isclose=function(e,t,r,n,i){var a;return void 0===r&&(r=1e-5),void 0===n&&(n=1e-8),void 0===i&&(i=!1),a=Object.assign({rtol:r,atol:n,equal_nan:i},this),r=a.rtol,n=a.atol,i=a.equal_nan,m(e,t,function(e,t){return Number.isFinite(e)&&Number.isFinite(t)?Math.abs(e-t)<=n+r*t:e==t||i&&Number.isNaN(e)&&Number.isNaN(t)},Boolean)},t.allclose=function(e,t,r,n,i){void 0===r&&(r=1e-5),void 0===n&&(n=1e-8),void 0===i&&(i=!1),a=Object.assign({rtol:r,atol:n,equal_nan:i},this),r=a.rtol,n=a.atol,i=a.equal_nan;var a,o=function(e,t){return Number.isFinite(e)&&Number.isFinite(t)?Math.abs(e-t)<=n+r*t:e==t||i&&Number.isNaN(e)&&Number.isNaN(t)},s=new Error("");try{m(e,t,function(e,t){if(o(e,t))return 0;throw s},Number)}catch(e){if(e===s)return!1;throw e}return!0},t.kw_op_binary={"+":(n=t.op_binary["+"],(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:n})),"-":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["-"]}),"*":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["*"]}),"/":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["/"]}),"%":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["%"]}),"//":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["//"]}),"**":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["**"]}),"<":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["<"]}),">":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary[">"]}),">=":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary[">="]}),"<=":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["<="]}),"==":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["=="]}),"!=":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["!="]}),"|":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["|"]}),"&":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["&"]}),"^":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["^"]}),"<<":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary["<<"]}),">>":(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary[">>"]}),max:(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary.max}),min:(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary.min}),or:(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary.or}),and:(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary.and}),xor:(0,r.kwDecorators)({defaults:[["other",void 0,w.asarray],["out",null]],func:t.op_binary.xor})},t.atan2=(0,r.kwDecorator)({defaults:[["y",void 0,w.asarray],["x",void 0,w.asarray],["out",null]],func:i(Number,function(e,t){return Math.atan2(e,t)})})},194:function(e,t,r){var s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},f=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.humanReadable=void 0,r(525)),p=r(545),h=n.ops.round;t.humanReadable=function(u){if(0==u.shape.length)return u.flat[0].toString();for(var i=u.shape.map(function(e){return 1}),e=30,t=0;t<u.shape.length;t++){var r=i[t];i[t]=Math.min(u.shape[t],e),i[t]>r&&(e=Math.floor(e/(i[t]-r)))}for(var n=30,t=u.shape.length-1;0<=t;t--){r=i[t];i[t]=Math.min(u.shape[t],n),i[t]>r&&(n=Math.floor(n/(i[t]-r)))}for(var l=u.shape.length-1;0<l&&1==u.shape[l];)l--;u.dtype==Number&&(u=h(u,2));var a=(0,p.tolist)(u),o=", shape=(".concat(u.shape,"), dtype=").concat(u.dtype.name);return a=(a=function e(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=0),"..."==t||n>=u.shape.length)return t;if(n==u.shape.length-1)return"[".concat(t.join(", "),"]");for(var i=l<=n?" ":"\n"+" ".repeat(r+1),a=[],o=0;o<t.length;o++){var s=e(t[o],r+1,n+1)+",";a.push(o<t.length-1?s:s.slice(0,-1))}return"[".concat(a.join(i),"]")}(function t(e,r){var n;return(r=void 0===r?0:r)==u.shape.length?e:2*i[r]>=e.length?e.map(function(e){return t(e,r+1)}):(n=e.slice(0,i[r]).map(function(e){return t(e,r+1)}),e=e.slice(-i[r]).map(function(e){return t(e,r+1)}),c(c(c([],s(n),!1),["..."],!1),s(e),!1))}(a),1+"np".length)).replace(/.*?(\n|$)/g,function(e){return e.replace(/(.{60,}?,)/g,"$1\n")}).replace(/\n+/g,"\n"),a=function(e,i){void 0===i&&(i=",");var t,r,n,a,e=e.split("\n"),o=Array(e[0].split(i).length).fill(0);try{for(var s=f(e),u=s.next();!u.done;u=s.next())for(var l=u.value.split(i),c=0;c<l.length;c++)o[c]=Math.max(o[c],l[c].trim().length)}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}var p="";try{for(var h=f(e),m=h.next();!m.done;m=h.next())!function(e){for(var r=(r=e.split(i)).map(function(e,t){return t==r.length-1?e:e+i}),t=0;t<r.length;t++){var n=r[t].trim();p+=n.padStart(o[t]+1).padEnd(o[t]+2)}p+="\n"}(m.value)}catch(e){n={error:e}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return p}("".concat("np","(").concat(a)).trim(),a="".concat(a).concat(o,")")}},307:function(e,a,t){var y=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},g=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},v=(Object.defineProperty(a,"__esModule",{value:!0}),a.kw_reducers=a.reducers=void 0,t(870)),s=t(737),t=t(380),n=s.op_binary["*"],i=s.op_binary["-"],u=s.op_binary["**"];function r(f,d){return void 0===d&&(d=Number),function(e,t,r){var n=f,i=d,a=t,t=r;if(null==a)return n(e.flat);a<0&&(a=e.shape.length-1);for(var o=e.shape[a],s=(0,v.shape_shifts)(e.shape)[a],u=Array.from({length:o},function(e){return[]}),l=(e.flat.forEach(function(e,t){return u[Math.floor(t/s)%o].push(e)}),e.size/o),c=[],p=0;p<l;p++){for(var h=[],m=0;m<o;m++)h.push(u[m][p]);c.push(h)}return n=c.map(n),e=g([],y(e.shape),!1),t?e[a]=1:e=e.filter(function(e,t){return t!=a}),1==(t=(0,v.new_NDArray)(n,e,i)).size?t.flat[0]:t}}a.reducers={sum:r(function(e){return e.reduce(function(e,t){return e+t},0)}),product:r(function(e){return e.reduce(function(e,t){return e*t},1)}),mean:r(function(e){return e.reduce(function(e,t){return e+t},0)/e.length}),max:r(function(e){return Math.max.apply(Math,g([],y(e),!1))}),min:r(function(e){return Math.min.apply(Math,g([],y(e),!1))}),argmax:r(function(e){return e.indexOf(Math.max.apply(Math,g([],y(e),!1)))}),argmin:r(function(e){return e.indexOf(Math.min.apply(Math,g([],y(e),!1)))}),len:r(function(e){return e.length}),any:r(function(e){var t,r;try{for(var n=o(e),i=n.next();!i.done;i=n.next())if(i.value)return!0}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},Boolean),all:r(function(e){var t,r;try{for(var n=o(e),i=n.next();!i.done;i=n.next())if(!i.value)return!1}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!0},Boolean),norm:function(e,t,r,n){return n%2!=0&&(e=e.abs()),n==1/0?a.reducers.max(e,t,r):1==n?a.reducers.sum(e,t,r):u(a.reducers.sum(u(e,n),t,r),1/n)},var:function(e,t,r){return e=i(e,a.reducers.mean(e,t,!0)),(e=n(e,e)).mean({axis:t,keepdims:r})},std:function(e,t,r,n){var i;return 0==n?u(e.var(t,r),.5):(i=a.reducers.sum(u(e,2),t,r),e=a.reducers.len(e,t,r),u(s.op_binary["/"](i,s.op_binary["-"](e,n)),.5))}},a.kw_reducers={sum:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.sum}),product:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.product}),mean:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.mean}),max:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.max}),min:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.min}),argmax:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.argmax}),argmin:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.argmin}),len:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.len}),any:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.any}),all:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.all}),norm:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1],["ord",2]],func:a.reducers.norm}),var:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1]],func:a.reducers.var}),std:(0,t.kwDecorators)({defaults:[["axis",null],["keepdims",!1],["ddof",0]],func:a.reducers.std})}},728:function(e,t,r){var m=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},f=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},p=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=(Object.defineProperty(t,"__esModule",{value:!0}),t.stack=t.concatenate=t.swapAxes=t.transpose=t.sort=t.apply_along_axis=void 0,r(870)),y=r(545),h=r(3);function g(e,t,r,n){if(void 0===n&&(n=Number),e=(0,d.asarray)(e),null==t)return r(e.flat);var i=e.shape.length;if((t=t<0?i+t:t)!==i-1)return i=_(e,t,-1),_(g(i,-1,r,n),t,-1);for(var a=e.shape[t],o=(0,d.shape_shifts)(e.shape)[t],s=Array.from({length:a},function(e){return[]}),u=(e.flat.forEach(function(e,t){return s[Math.floor(t/o)%a].push(e)}),e.size/a),l=[],c=0;c<u;c++){for(var p=[],h=0;h<a;h++)p.push(s[h][c]);l.push(p)}i=l.map(r),r=(0,y.fromlist)(i),i=f(f(f([],m(e.shape.slice(0,t)),!1),m(r.shape.slice(1)),!1),m(e.shape.slice(t+1)),!1),e=(0,d.new_NDArray)(r.flat,i,n);return(0,d.number_collapse)(e)}function v(t,e){void 0===e&&(e=null),null!==(e=Object.assign({axes:e},this).axes)&&e.axes&&(e=e.axes);var r=t.shape.length;if(null==e)return v(t,Array.from({length:r},function(e,t){return t}).reverse());if(e.length!==r)throw new Error("Axes must have length ".concat(r,". Found ").concat(e.length));for(var n=Array.from({length:r},function(){return-1}),i=0;i<r;i++){if(e[i]<0||e[i]>=r)throw new Error("Expected axis in [0..".concat(r,"). Found ").concat(e[i]));n[e[i]]=i}for(i=0;i<r;i++)if(-1==n[i])throw new Error("Axes must contain all dimensions. [".concat(e.join(", "),"] is missing ").concat(i,"."));for(var a=(0,d.shape_shifts)(t.shape),o=e.map(function(e){return t.shape[e]}),s=e.map(function(e){return a[e]}),u=[],l=new Array(o.length).fill(0),c=0;;){if(!isFinite(c))throw new Error("Programming error");u.push(c);for(var p=r-1;0<=p&&(l[p]++,c+=s[p],!(l[p]<o[p]));)c-=s[p]*o[p],l[p]=0,p--;if(p<0)break}var h=t.flat;return(0,d.new_NDArray)(u.map(function(e){return h[e]}),o,t.dtype)}function _(e,t,r){var n=(e=(0,d.asarray)(e)).shape.length,n=(t<0&&(t=n+t),r<0&&(r=n+r),Array.from({length:n},function(e,t){return t}));return n[t]=r,n[r]=t,v(e,n)}function c(e,r){var t,n;if((r=void 0===r?null:r)instanceof Object&&(r=r.axis),e=(e=(0,d.isarray)(e)?f([],m(e),!1):e).map(d.asarray),null==r&&(e=e.map(function(e){return(0,d.ravel)(e)}),r=0),!e.length)throw new Error("Expected at least two arrays");var i=e[0].shape.length,a=(r<0&&(r=i+r),f([],m(e[0].shape),!1)),o=[],s=a.map(function(e,t){return 0==t?0:a[t==r?0:t]});try{for(var u=p(e),l=u.next();!l.done;l=u.next()){var c=l.value;if(!(0,h.allEq)(c.shape.filter(function(e,t){return t!=r}),a.filter(function(e,t){return t!=r})))throw new Error("Inconsistent input shape ".concat(a," with respect to ").concat(c.shape.map(function(e,t){return t==r?"?":e})));s[0]+=c.shape[r],c=0==r?c:_(c,r,0),o.push.apply(o,f([],m(c.flat),!1))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}i=(0,d.new_NDArray)(o,s,e[0].dtype);return 0==r?i:_(i,r,0)}t.apply_along_axis=g,t.sort=function(e,t){return void 0===t&&(t=-1),g(e,t=(t=Object.assign({axis:t},this).axis)instanceof Object?t.axis:t,function(e){e=f([],m(e),!1);return e.sort(function(e,t){return e-t}),e},e.dtype)},t.transpose=v,t.swapAxes=_,t.concatenate=c,t.stack=function(e,t){var r,n;if((t=void 0===t?0:t)instanceof Object&&(t=t.axis),(0,d.isarray)(e)&&(e=f([],m(e),!1)),!Array.isArray(e))throw new Error("Expected list of arrays. Found ".concat(typeof e));if(!(e=e.map(d.asarray)).length)throw new Error("Expected at least two arrays");var i=f([],m(e[0].shape),!1),a=(t<0&&(t=i.length+1+t),f(f(f([],m(i.slice(0,t)),!1),[1],!1),m(i.slice(t)),!1)),o=[];try{for(var s=p(e),u=s.next();!u.done;u=s.next()){var l=u.value;if(!(0,h.allEq)(l.shape,i))throw new Error("Inconsistent input shape ".concat(l.shape," with respect to ").concat(l.shape));o.push((0,d.reshape)(l,a))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return c(o,t)}},92:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBALS=void 0;t.GLOBALS={NDArray:null,np:null}},341:function(e,t,r){var a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.np=void 0,function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i="Usage example: np`np.arange(10)+${5}` or np([0,1,2]).";if("number"==typeof e)return e;if(e instanceof s.NDArray)return e;if(!Array.isArray(e))throw new Error("Expected template or array. ".concat(i));if(!e.length)throw new Error("Expected argument. ".concat(i));if("string"==typeof e[0]){if(r.length+1!=e.length)throw new Error("Wrong input. ".concat(i));return(t=s.modules.grammar).parse.apply(t,o([e],a(r),!1))}if(r.length)throw new Error("Wrong input. ".concat(i));return s.asarray(e)});t.np=s;r(92).GLOBALS.np=s;var t=r(209),n=(s.NDArray=t.default,t.default.prototype.modules.jsInterface.tolist),i=(s.tolist=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n(s.apply(void 0,o([e],a(t),!1)))},s.fromlist=t.default.prototype.modules.jsInterface.fromlist,s.ravel=t.default.prototype.modules.basic.ravel,s.reshape=t.default.prototype.modules.basic.reshape,s.array=t.default.prototype.modules.basic.array,s.asarray=t.default.prototype.modules.basic.asarray,t.default.prototype.modules.reduce),i=(s.sum=i.kw_reducers.sum.as_function,s.product=i.kw_reducers.product.as_function,s.prod=s.product,s.any=i.kw_reducers.any.as_function,s.all=i.kw_reducers.all.as_function,s.max=i.kw_reducers.max.as_function,s.min=i.kw_reducers.min.as_function,s.argmax=i.kw_reducers.argmax.as_function,s.argmin=i.kw_reducers.argmin.as_function,s.mean=i.kw_reducers.mean.as_function,s.norm=i.kw_reducers.norm.as_function,s.var=i.kw_reducers.var.as_function,s.std=i.kw_reducers.std.as_function,t.default.prototype.modules.transform),i=(s.transpose=i.transpose,s.apply_along_axis=i.apply_along_axis,s.sort=i.sort,s.concatenate=i.concatenate,s.stack=i.stack,t.default.prototype.modules.operators),i=(s.add=i.kw_op_binary["+"].as_function,s.subtract=i.kw_op_binary["-"].as_function,s.multiply=i.kw_op_binary["*"].as_function,s.divide=i.kw_op_binary["/"].as_function,s.mod=i.kw_op_binary["%"].as_function,s.divide_int=i.kw_op_binary["//"].as_function,s.pow=i.kw_op_binary["**"].as_function,s.bitwise_or=i.kw_op_binary["|"].as_function,s.bitwise_and=i.kw_op_binary["&"].as_function,s.bitwise_xor=i.kw_op_binary["^"].as_function,s.bitwise_shift_left=i.kw_op_binary["<<"].as_function,s.bitwise_shift_right=i.kw_op_binary[">>"].as_function,s.greater=i.kw_op_binary[">"].as_function,s.less=i.kw_op_binary["<"].as_function,s.greater_equal=i.kw_op_binary[">="].as_function,s.less_equal=i.kw_op_binary["<="].as_function,s.equal=i.kw_op_binary["=="].as_function,s.not_equal=i.kw_op_binary["!="].as_function,s.maximum=i.kw_op_binary.max.as_function,s.minimum=i.kw_op_binary.min.as_function,s.logical_or=i.kw_op_binary.or.as_function,s.logical_and=i.kw_op_binary.and.as_function,s.atan2=i.atan2,s.allclose=i.allclose,s.isclose=i.isclose,t.default.prototype.modules.elementwise),t=(s.sign=i.funcs.sign,s.sqrt=i.funcs.sqrt,s.square=i.funcs.square,s.exp=i.funcs.exp,s.log=i.funcs.log,s.log2=i.funcs.log2,s.log10=i.funcs.log10,s.log1p=i.funcs.log1p,s.sin=i.funcs.sin,s.cos=i.funcs.cos,s.tan=i.funcs.tan,s.asin=i.funcs.asin,s.acos=i.funcs.acos,s.atan=i.funcs.atan,s.cosh=i.funcs.cosh,s.sinh=i.funcs.sinh,s.tanh=i.funcs.tanh,s.acosh=i.funcs.acosh,s.asinh=i.funcs.asinh,s.atanh=i.funcs.atanh,s.abs=i.kw_ops.abs.as_function,s.bitwise_not=i.kw_ops.bitwise_not.as_function,s.logical_not=i.kw_ops.logical_not.as_function,s.abs=i.kw_ops.abs.as_function,s.negative=i.kw_ops.negative.as_function,s.round=i.kw_ops.round.as_function,r(735));s.modules=t.modules,s.empty=s.modules.constructors.empty,s.zeros=s.modules.constructors.zeros,s.ones=s.modules.constructors.ones,s.arange=s.modules.constructors.arange,s.linspace=s.modules.constructors.linspace,s.geomspace=s.modules.constructors.geomspace,s.random=s.modules.random,s.pi=Math.PI,s.e=Math.E},167:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nd_modules=t.np=void 0;var r=r(92),n=r.GLOBALS.np,r=r.GLOBALS.NDArray;if(!(t.np=n))throw new Error("Programming error: np not defined");t.nd_modules=r.prototype.modules},942:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.geomspace=t.linspace=t.arange=t.ones=t.zeros=t.empty=void 0;var r=r(209).default.prototype.modules,a=r.basic,o=r.elementwise;function s(e,t){var r,e=null===(t=void 0===t?null:t)?(r=0,e):(r=e,t);return a.new_from(e-r,function(e,t){return r+t},Number)}function u(e,t,r,n){void 0===r&&(r=50),void 0===n&&(n=!0),t=(i=Object.assign({stop:t,num:r,endpoint:n},this)).stop,r=i.num,n=i.endpoint,e=a.as_number(e),t=a.as_number(t);var i=r-(n?1:0);return s(r).multiply((t-e)/i).add(e)}t.empty=function(e,t){return void 0===t&&(t=Number),a.new_from(e,void 0,t)},t.zeros=function(e,t){var r=(t=void 0===t?Number:t)!=Boolean&&0;return a.new_from(e,function(e){return r},t)},t.ones=function(e,t){var r=(t=void 0===t?Number:t)==Boolean||1;return a.new_from(e,function(e){return r},t)},t.arange=s,t.linspace=u,t.geomspace=function(e,t,r,n){var i;return void 0===r&&(r=50),void 0===n&&(n=!0),t=(i=Object.assign({stop:t,num:r,endpoint:n},this)).stop,r=i.num,n=i.endpoint,e=o.funcs.log(e),t=o.funcs.log(t),o.funcs.exp(u(e,t,r,n))}},70:function(e,o,t){var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},l=(Object.defineProperty(o,"__esModule",{value:!0}),o.parse=o.__parser_pool=o.__makeSemantics=o.ohmGrammar=o.grammar=void 0,t(167)),t=t(636);o.grammar=String.raw(r(['\nArrayGrammar {\n  Instruction\n  = Variable "[" Slice "]" AssignSymbol ArithmeticLogicExp -- sliceAssignment\n  | ArithmeticLogicExp                       -- expression\n  \n  Variable\n   = "#" digit+ "#"\n  \n  AssignSymbol\n  ="="|"+="|"-="|"*="|"/="|"%="|"&="|"|="|"^="|"@="|"**="|"<<="|">>="|"//="|"or="|"and="|"xor="|"max="|"min="\n  \n  /* Declaration in precedence order (weakest first) */\n  ArithmeticLogicExp = Precedence11\n\n  /* https://docs.python.org/3/reference/expressions.html */\n  Operator11 = "<" | "<=" | ">" | ">=" | "!=" | "=="\n  Operator10 = "|"\n  Operator09 = "^"\n  Operator08 = "&"\n  Operator07 = "<<" | ">>"\n  Operator06 = "+" | "-"\n  Operator05 = "*" | "@" | "/" | "//" | "%"\n  Operator04 = "~" /* Unary */\n  Operator03 = "+" | "-" /* Unary. Special treatment to prevent "-1.3" to be "-(array of 1.3)" */\n  Operator02 = "**"\n  /* Operator01 = "x[index]" | "x[index:index]" | "x(arguments...)" | "x.attribute" */\n  /* Operator00 = "(expressions...)" */\n\n  Precedence11 = Precedence11 Operator11 Precedence10 | "" "" Precedence10\n  Precedence10 = Precedence10 Operator10 Precedence09 | "" "" Precedence09\n  Precedence09 = Precedence09 Operator09 Precedence08 | "" "" Precedence08\n  Precedence08 = Precedence08 Operator08 Precedence07 | "" "" Precedence07\n  Precedence07 = Precedence07 Operator07 Precedence06 | "" "" Precedence06\n  Precedence06 = Precedence06 Operator06 Precedence05 | "" "" Precedence05\n  Precedence05 = Precedence05 Operator05 Precedence04 | "" "" Precedence04\n  Precedence04 = ""           Operator04 Precedence03 | "" "" Precedence03 /* Unary */\n  Precedence03 = ""           Operator03 Precedence02 | "" "" Precedence02 /* Special */\n  Precedence02 = Precedence02 Operator02 Precedence03 | "" "" Precedence01\n  Precedence01 = Arr\n  \n  Parenthesis = "(" ArithmeticLogicExp ")"\n  Arr\n    = Arr "." Name CallArgs     -- method\n    | Arr "." Name              -- attribute\n    | Arr "[" Slice "]"         -- slice\n    | Parenthesis\n    | Name ("." Name)* CallArgs -- call\n    | number\n    | Variable\n\n  Name  (an identifier)\n    = (letter|"_") (letter|"_"|digit)*\n\n  number  (a number)\n    = ("+"|"-")? digit* "." digit+ "E" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+ "e" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+  ""  ""        ""\n    | ("+"|"-")? digit+ ""  ""      ""  ""        ""\n  \n  int (an integer) = ""  digit+ | "-" digit+ | "+" digit+\n\n  CallArgs // Using empty strings instead of separate rules\n   = "(" Args ","  KwArgs ","? ")"\n   | "(" Args ","? ""      ""  ")"\n   | "(" ""   ","? KwArgs ","? ")"\n   | "(" ""    ""  ""      ""  ")"\n   \n  Args = NonemptyListOf<ArgValue, ",">\n  KwArgs = NonemptyListOf<KwArg, ",">\n  KwArg = Name "=" ArgValue\n\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\n  Constant = "True" | "False" | "None" | "np.nan" | "np.inf"\n  JsArray\n    = "[" ListOf<ArgValue, ","> ","? "]"\n    | "(" ListOf<ArgValue, ","> ","? ")"\n\n  String = "\'" any* "\'" | """ any* """\n   \n  Slice = NonemptyListOf<SliceTerm, ",">\n  SliceTerm\n    = SliceRange\n    | (":" | "..." | "None") -- constant\n    | JsArray\n    | ArithmeticLogicExp\n  \n  SliceRange\n    = int ":" int ":" int\n    | int ":" int ""  ""\n    | int ":" ""  ":" int\n    | int ":" ""  ""  ""\n    | ""  ":" int ":" int\n    | ""  ":" int ""  ""\n    | ""  ":" ""  ":" int\n    | ""  ":" ""  ""  ""\n}\n'],['\nArrayGrammar {\n  Instruction\n  = Variable "[" Slice "]" AssignSymbol ArithmeticLogicExp -- sliceAssignment\n  | ArithmeticLogicExp                       -- expression\n  \n  Variable\n   = "#" digit+ "#"\n  \n  AssignSymbol\n  ="="|"+="|"-="|"*="|"/="|"%="|"&="|"|="|"^="|"@="|"**="|"<<="|">>="|"//="|"or="|"and="|"xor="|"max="|"min="\n  \n  /* Declaration in precedence order (weakest first) */\n  ArithmeticLogicExp = Precedence11\n\n  /* https://docs.python.org/3/reference/expressions.html */\n  Operator11 = "<" | "<=" | ">" | ">=" | "!=" | "=="\n  Operator10 = "|"\n  Operator09 = "^"\n  Operator08 = "&"\n  Operator07 = "<<" | ">>"\n  Operator06 = "+" | "-"\n  Operator05 = "*" | "@" | "/" | "//" | "%"\n  Operator04 = "~" /* Unary */\n  Operator03 = "+" | "-" /* Unary. Special treatment to prevent "-1.3" to be "-(array of 1.3)" */\n  Operator02 = "**"\n  /* Operator01 = "x[index]" | "x[index:index]" | "x(arguments...)" | "x.attribute" */\n  /* Operator00 = "(expressions...)" */\n\n  Precedence11 = Precedence11 Operator11 Precedence10 | "" "" Precedence10\n  Precedence10 = Precedence10 Operator10 Precedence09 | "" "" Precedence09\n  Precedence09 = Precedence09 Operator09 Precedence08 | "" "" Precedence08\n  Precedence08 = Precedence08 Operator08 Precedence07 | "" "" Precedence07\n  Precedence07 = Precedence07 Operator07 Precedence06 | "" "" Precedence06\n  Precedence06 = Precedence06 Operator06 Precedence05 | "" "" Precedence05\n  Precedence05 = Precedence05 Operator05 Precedence04 | "" "" Precedence04\n  Precedence04 = ""           Operator04 Precedence03 | "" "" Precedence03 /* Unary */\n  Precedence03 = ""           Operator03 Precedence02 | "" "" Precedence02 /* Special */\n  Precedence02 = Precedence02 Operator02 Precedence03 | "" "" Precedence01\n  Precedence01 = Arr\n  \n  Parenthesis = "(" ArithmeticLogicExp ")"\n  Arr\n    = Arr "." Name CallArgs     -- method\n    | Arr "." Name              -- attribute\n    | Arr "[" Slice "]"         -- slice\n    | Parenthesis\n    | Name ("." Name)* CallArgs -- call\n    | number\n    | Variable\n\n  Name  (an identifier)\n    = (letter|"_") (letter|"_"|digit)*\n\n  number  (a number)\n    = ("+"|"-")? digit* "." digit+ "E" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+ "e" ("+"|"-")? "digit+"\n    | ("+"|"-")? digit* "." digit+  ""  ""        ""\n    | ("+"|"-")? digit+ ""  ""      ""  ""        ""\n  \n  int (an integer) = ""  digit+ | "-" digit+ | "+" digit+\n\n  CallArgs // Using empty strings instead of separate rules\n   = "(" Args ","  KwArgs ","? ")"\n   | "(" Args ","? ""      ""  ")"\n   | "(" ""   ","? KwArgs ","? ")"\n   | "(" ""    ""  ""      ""  ")"\n   \n  Args = NonemptyListOf<ArgValue, ",">\n  KwArgs = NonemptyListOf<KwArg, ",">\n  KwArg = Name "=" ArgValue\n\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\n  Constant = "True" | "False" | "None" | "np.nan" | "np.inf"\n  JsArray\n    = "[" ListOf<ArgValue, ","> ","? "]"\n    | "(" ListOf<ArgValue, ","> ","? ")"\n\n  String = "\\\'" any* "\\\'" | "\\"" any* "\\""\n   \n  Slice = NonemptyListOf<SliceTerm, ",">\n  SliceTerm\n    = SliceRange\n    | (":" | "..." | "None") -- constant\n    | JsArray\n    | ArithmeticLogicExp\n  \n  SliceRange\n    = int ":" int ":" int\n    | int ":" int ""  ""\n    | int ":" ""  ":" int\n    | int ":" ""  ""  ""\n    | ""  ":" int ":" int\n    | ""  ":" int ""  ""\n    | ""  ":" ""  ":" int\n    | ""  ":" ""  ""  ""\n}\n'])),o.ohmGrammar=t.grammar(o.grammar),o.__makeSemantics=function(){var i=[],e={Instruction_sliceAssignment:function(e,t,r,n,i,a){var o=e.parse(),e=a.parse(),a=i.sourceString,i=r.parse(),r=l.nd_modules.basic.asarray(o);if(l.nd_modules.operators.op_assign[a](o,i,e),r!==o){for(l.nd_modules.jsInterface.tolist(r);o.length;)o.pop();o.push.apply(o,u([],s(o),!1))}return null},Instruction_expression:function(e){e=e.parse();return"number"==typeof e||"boolean"==typeof e||Array.isArray(e)||l.nd_modules.basic.isarray(e)&&(e=l.nd_modules.basic.number_collapse(e)),e},Precedence11:t,Precedence10:t,Precedence09:t,Precedence08:t,Precedence07:t,Precedence06:t,Precedence05:t,Precedence04:r,Precedence03:r,Precedence02:t,number:function(e,t,r,n,i,a,o){return parseFloat(this.sourceString)},Arr_slice:function(e,t,r,n){e=e.parse(),r=r.parse();return e.index.apply(e,u([],s(r),!1))},SliceTerm_constant:function(e){return e.sourceString},Arr_call:function(e,t,r,n){e=e.sourceString+t.sourceString,t=(e="np."==e.slice(0,3)?e.slice(3):e).split(".").reduce(function(e,t){return e[t]},l.np);if(void 0===t)throw new Error("Unrecognized function ".concat(e));e=n.parse(),n=e.args,e=e.kwArgs;return 0==Object.keys(e).length?t.apply(void 0,u([],s(n),!1)):t.apply(void 0,u(u([],s(n),!1),[e],!1))},Arr_method:function(e,t,r,n){var e=e.parse(),r=r.sourceString,n=n.parse(),i=n.args,n=n.kwArgs;if(void 0===e[r])throw new Error("Unrecognized method ".concat(r));return 0==Object.keys(n).length?e[r].apply(e,u([],s(i),!1)):e[r].apply(e,u(u([],s(i),!1),[n],!1))},Parenthesis:function(e,t,r){return t.parse()},Arr_attribute:function(e,t,r){return e.parse()[r.sourceString]},Variable:function(e,t,r){var t=parseInt(t.sourceString),t=i[t],n=Array.isArray(t)&&t.length&&l.nd_modules.basic.isarray(t[0]);return t=Array.isArray(t)&&!n?l.nd_modules.basic.array(t):t},int:function(e,t){t=parseInt(t.sourceString);return"-"==e.sourceString?-t:t},SliceRange:function(e,t,r,n,i){return this.sourceString},Constant:function(e){switch(e.sourceString){case"True":return!0;case"False":return!1;case"None":return null;case"np.nan":return Number.NaN;case"np.inf":return Number.POSITIVE_INFINITY}throw new Error("Unrecognized constant ".concat(e.sourceString))},String:function(e,t,r){return t.sourceString},CallArgs:function(e,t,r,n,i,a){t=t.parse()||[],n=n.parse()||[];return{args:t,kwArgs:Object.fromEntries(n.map(function(e){var e=s(e,2),t=e[0],e=e[1];return[t,e=l.nd_modules.basic.isarray(e)?l.nd_modules.basic.number_collapse(e):e]}))}},KwArg:function(e,t,r){return[e.sourceString,r.parse()]},NonemptyListOf:function(e,t,r){return u([e],s(r.children),!1).map(function(e){return e.parse()})},JsArray:function(e,t,r,n){var i,a=t.parse(),o=l.nd_modules.jsInterface.tolist;for(i in a)l.nd_modules.basic.isarray(a[i])&&(a[i]=o(a[i]));return a},_terminal:function(){return null}};function t(e,t,r){e=e.parse(),r=r.parse(),t=t.sourceString;return""==t&&null===e?r:l.nd_modules.operators.op_binary[t](e,r)}function r(e,t,r){var n=r.parse(),r=t.sourceString;if(""==r)return n;var i=l.nd_modules.elementwise.ops;switch(r){case"+":return i["+"](n);case"-":return i["-"](n);case"~":return i["~"](n);case"!":return i.not(n)}throw new Error("Programming Error: ".concat(r))}var a=o.ohmGrammar.createSemantics();return a.addOperation("parse",e),{parse:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0,e=e.join("###").replace(/###/g,function(){return"#".concat(n++,"#")}),e=(i.length=0,i.push.apply(i,u([],s(t),!1)),o.ohmGrammar.match(e));if(e.succeeded())return a(e).parse();throw new Error(e.message)},ohmSemantics:a,semantics:e,semanticVariables:i,busy:0}},o.__parser_pool=[(0,o.__makeSemantics)()];o.parse=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=o.__parser_pool,i=0;i<n.length;i++){var a=n[i];if(0==a.busy++)try{return a.parse.apply(a,u([e],s(t),!1))}finally{a.busy=0}i==n.length&&n.push((0,o.__makeSemantics)())}}},735:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modules=void 0,r(167);var n=r(942),i=r(70),r=r(373);t.modules={constructors:n,grammar:i,random:r}},373:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.shuffle=t.shuffled=t._shuffled=t._shuffle=t.normal=t.randn=t.__normal=t.exponential=t.uniform=t.random=void 0,r(167));function o(e){return a.nd_modules.basic.new_from(e,function(e){return Math.random()},Number)}function s(e){for(var t=[];t.length<e;){var r=2*Math.random()-1,n=2*Math.random()-1,i=r*r+n*n;1<=i||(r=Math.sqrt(-2*Math.log(i)/i)*r,i=Math.sqrt(-2*Math.log(i)/i)*n,t.push(r),t.push(i))}return e<t.length&&t.pop(),t}function u(e){for(var t=e.length-1;0<=t;t--){var r=Math.floor(Math.random()*(t+1)),n=i([e[r],e[t]],2);e[t]=n[0],e[r]=n[1]}}function l(e){e=n([],i(e),!1);return u(e),e}function c(e){if(0==e.shape.length)return e;var t;if(1==e.shape.length)return t=l(e.flat),new a.np.NDArray(t,e.shape,e.dtype);for(var r=l(Array.from({length:e.length},function(e,t){return t})),n=a.np.empty(e.shape,e.dtype),i=0;i<e.length;i++)n.assign([i],e.index(r[i]));return n}t.random=o,t.uniform=function(e,t,r){return o(r).multiply(t-e).add(e)},t.exponential=function(e,t){return a.np.multiply(e,a.np.subtract(0,a.np.log(o(t))))},t.__normal=s,t.randn=function(e){var t=s(a.np.prod(e));return new a.np.NDArray(t,e,Number)},t.normal=function(e,t,r){return a.np.add(e,a.np.multiply(t,r))},t._shuffle=u,t._shuffled=l,t.shuffled=c,t.shuffle=function(e){e.assign(c(e))}},3:function(e,t){var h=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};function s(e,t,r){for(var n,i=[[e,t,[],0]];;){var a=i.pop();if(!a)return!0;var a=h(a,4),o=a[0],s=a[1],u=a[2],l=a[3];if(Array.isArray(o)&&Array.isArray(s)&&o.length==s.length)for(var c in o){var p=[];u.push(p),i.push([o[c],s[c],p,l+1])}else u.push(r(o,s));if(1e4<l&&Array.isArray(o)){if((n=n||[]).includes(o))throw new Error("Circular reference found. ".concat(o));n[l-1e4]=o}}}Object.defineProperty(t,"__esModule",{value:!0}),t.allClose=t.allEq=t.ravel=t.binary_operation=void 0,t.binary_operation=s,t.ravel=function(e){for(var n,i=[[e,0]],a=[];"break"!==function(){var e=i.pop();if(!e)return"break";var e=h(e,2),t=e[0],r=e[1];if(1e4<r&&Array.isArray(t)){if((n=n||[]).includes(t))throw new Error("Circular reference found. ".concat(t));n[r-1e4]=t}if(Array.isArray(t))return i.push.apply(i,o([],h(t.map(function(e){return[e,r+1]})),!1)),"continue";a.push(t)}(););return a},t.allEq=function(e,t,r){void 0===r&&(r=!1);var n=new Error("");try{s(e,t,function(e,t){if(e===t||r&&Number.isNaN(e)&&Number.isNaN(t))return 0;throw n})}catch(e){if(e===n)return!1;throw e}return!0},t.allClose=function(e,t,r,n,i){function a(e,t){if(e=e,t=t,Number.isFinite(e)&&Number.isFinite(t)?Math.abs(e-t)<=n+r*Math.abs(t):e===t||i&&Number.isNaN(e)&&Number.isNaN(t))return 0;throw o}void 0===r&&(r=1e-5),void 0===n&&(n=1e-8),void 0===i&&(i=!1);var o=new Error("");try{s(e,t,a)}catch(e){if(e===o)return!1;throw e}return!0}},636:(j,e)=>{function t(e){const t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}}function m(e,t){if(!e)throw new Error(t||"Assertion failed")}function C(e,t,r){let n;Object.defineProperty(e,t,{get(){return n=n||r.call(this)}})}function T(e,t){for(var r=[];0<t--;)r.push(e());return r}function B(e,t){return new Array(t+1).join(e)}function G(e,t){return T(()=>e,t)}function q(t){var r=[];for(let e=0;e<t.length;e++){var n=t[e];t.lastIndexOf(n)!==e&&r.indexOf(n)<0&&r.push(n)}return r}function z(e){const t=[];return e.forEach(e=>{t.indexOf(e)<0&&t.push(e)}),t}function l(e){e=e[0];return e===e.toUpperCase()}function U(e){return!l(e)}function K(e,t,r){return e.length<t?B(r||" ",t-e.length)+e:e}function f(){this.strings=[]}Object.defineProperty(e,"__esModule",{value:!0}),f.prototype.append=function(e){this.strings.push(e)},f.prototype.contents=function(){return this.strings.join("")};const V=e=>String.fromCodePoint(parseInt(e,16));function $(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return V(e.slice(2,4));case"u":return"{"===e.charAt(2)?V(e.slice(3,-1)):V(e.slice(2,6));default:return e.charAt(1)}}function H(t){if(null==t)return String(t);var r=Object.prototype.toString.call(t);try{let e;return(e=t.constructor&&t.constructor.name?t.constructor.name:0===r.indexOf("[object ")?r.slice(8,-1):typeof t)+": "+JSON.stringify(String(t))}catch(e){return r}}var W=Object.freeze({__proto__:null,abstract:t,assert:m,defineLazyProperty:C,clone:function(e){return e&&Object.assign({},e)},repeatFn:T,repeatStr:B,repeat:G,getDuplicates:q,copyWithoutDuplicates:z,isSyntactic:l,isLexical:U,padLeft:K,StringBuffer:f,unescapeCodePoint:$,unexpectedObjToString:H});const J={Lu:/\p{Lu}/u,Ll:/\p{Ll}/u,Lt:/\p{Lt}/u,Lm:/\p{Lm}/u,Lo:/\p{Lo}/u,Nl:/\p{Nl}/u,Nd:/\p{Nd}/u,Mn:/\p{Mn}/u,Mc:/\p{Mc}/u,Pc:/\p{Pc}/u,Zs:/\p{Zs}/u,L:/\p{Letter}/u,Ltmo:/\p{Lt}|\p{Lm}|\p{Lo}/u};class n{constructor(){if(this.constructor===n)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}const r=Object.create(n.prototype),i=Object.create(n.prototype);class c extends n{constructor(e){super(),this.obj=e}}class a extends n{constructor(e,t){super(),this.from=e,this.to=t,this.matchCodePoint=1<e.length||1<t.length}}class o extends n{constructor(e){super(),this.index=e}}class s extends n{constructor(e){super(),this.terms=e}}class u extends s{constructor(e,t,r){super([r,e.rules[t].body]),this.superGrammar=e,this.name=t,this.body=r}}class p extends s{constructor(e,t,r,n){var i=e.rules[t].body;super([...r,i,...n]),this.superGrammar=e,this.ruleName=t,this.expansionPos=r.length}}class h extends n{constructor(e){super(),this.factors=e}}class d extends n{constructor(e){super(),this.expr=e}}class y extends d{}class g extends d{}class v extends d{}y.prototype.operator="*",g.prototype.operator="+",v.prototype.operator="?",y.prototype.minNumMatches=0,g.prototype.minNumMatches=1,v.prototype.minNumMatches=0,y.prototype.maxNumMatches=Number.POSITIVE_INFINITY,g.prototype.maxNumMatches=Number.POSITIVE_INFINITY,v.prototype.maxNumMatches=1;class _ extends n{constructor(e){super(),this.expr=e}}class b extends n{constructor(e){super(),this.expr=e}}class w extends n{constructor(e){super(),this.expr=e}}class x extends n{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return l(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}}class I extends n{constructor(e){super(),this.category=e,this.pattern=J[e]}}function A(e,t){let r;return t?((r=new Error(t.getLineAndColumnMessage()+e)).shortMessage=e,r.interval=t):r=new Error(e),r}function Q(){return A("Interval sources don't match")}function Z(e,t,r){return A("Rule "+e+" is not declared in grammar "+t,r)}function Y(e,t,r,n){let i="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==r&&(i+=" (originally declared in '"+r+"')"),A(i,n)}function X(e,t,r,n){return A("Wrong number of parameters for rule "+e+" (expected "+t+", got "+r+")",n)}function ee(e,t,r){return A("Duplicate parameter names in rule "+e+": "+t.join(", "),r)}function te(e,t){return A("Incorrect argument type: expected "+e,t.source)}function re(e,t){var r=0<t.length?t[t.length-1].args:[];let n="Nullable expression "+e.expr.substituteParams(r)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";return 0<t.length&&(r=t.map(e=>new x(e.ruleName,e.args)).join("\n"),n+="\nApplication stack (most recent application last):\n"+r),A(n,e.expr.source)}function ne(e,t,r,n){return A("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+r+")",n.source)}function ie(e){if(1===e.length)throw e[0];if(1<e.length)throw t=(e=e).map(e=>e.message),A(["Errors:"].concat(t).join("\n- "),e[0].interval);var t}function ae(e,t,r){var n=e.length;return(e.slice(0,r)+t+e.slice(r+t.length)).substr(0,n)}function oe(...t){var r=this,n=r["offset"],i=W["repeatStr"];const a=new f,o=(a.append("Line "+r.lineNum+", col "+r.colNum+":\n"),function(e){let t=0;return e.map(e=>{e=e.toString();return t=Math.max(t,e.length),e}).map(e=>K(e,t))}([null==r.prevLine?0:r.lineNum-1,r.lineNum,null==r.nextLine?0:r.lineNum+1]));var e=(e,t,r)=>{a.append(r+o[e]+" | "+t+"\n")},s=(null!=r.prevLine&&e(0,r.prevLine,"  "),e(1,r.line,"> "),r.line.length);let u=i(" ",s+1);for(let e=0;e<t.length;++e){var l=t[e][0],c=t[e][1],p=(m(0<=l&&l<=c,"range start must be >= 0 and <= end"),n-r.colNum+1),l=Math.max(0,l-p),c=Math.min(c-p,s);u=ae(u,i("~",c-l),l)}var h=2+o[1].length+3;return a.append(i(" ",h)),u=ae(u,"^",r.colNum-1),a.append(u.replace(/ +$/,"")+"\n"),null!=r.nextLine&&e(2,r.nextLine,"  "),a.contents()}let se=[];function ue(e){se.push(e)}function le(e,t){let r=1,n=1,i=0,a=0,o=null,s=null,u=-1;for(;i<t;){var l=e.charAt(i++);"\n"===l?(r++,n=1,u=a,a=i):"\r"!==l&&n++}let c=e.indexOf("\n",a);-1===c?c=e.length:(p=e.indexOf("\n",c+1),o=(o=-1===p?e.slice(c):e.slice(c,p)).replace(/^\r?\n/,"").replace(/\r$/,"")),0<=u&&(s=e.slice(u,a).replace(/\r?\n$/,""));var p=e.slice(a,c).replace(/\r$/,"");return{offset:t,lineNum:r,colNum:n,line:p,prevLine:s,nextLine:o,toString:oe}}function ce(e,t,...r){return le(e,t).toString(...r)}const pe=(()=>{let t=0;return e=>""+e+t++})();class S{constructor(e,t,r){this.sourceString=e,this.startIdx=t,this.endIdx=r}get contents(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents}get length(){return this.endIdx-this.startIdx}coverageWith(...e){return S.coverage(...e,this)}collapsedLeft(){return new S(this.sourceString,this.startIdx,this.startIdx)}collapsedRight(){return new S(this.sourceString,this.endIdx,this.endIdx)}getLineAndColumn(){return le(this.sourceString,this.startIdx)}getLineAndColumnMessage(){var e=[this.startIdx,this.endIdx];return ce(this.sourceString,this.startIdx,e)}minus(e){if(this.sourceString!==e.sourceString)throw Q();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new S(this.sourceString,this.startIdx,e.startIdx),new S(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new S(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new S(this.sourceString,this.startIdx,e.startIdx)]:[this]}relativeTo(e){if(this.sourceString!==e.sourceString)throw Q();return m(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new S(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)}trimmed(){var e=this["contents"],t=this.startIdx+e.match(/^\s*/)[0].length,e=this.endIdx-e.match(/\s*$/)[0].length;return new S(this.sourceString,t,e)}subInterval(e,t){e=this.startIdx+e;return new S(this.sourceString,e,e+t)}}S.coverage=function(e,...t){let{startIdx:r,endIdx:n}=e;for(const i of t){if(i.sourceString!==e.sourceString)throw Q();r=Math.min(r,i.startIdx),n=Math.max(n,i.endIdx)}return new S(e.sourceString,r,n)};class he{constructor(e){this.source=e,this.pos=0,this.examinedLength=0}atEnd(){var e=this.pos>=this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e}next(){var e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e}nextCharCode(){var e=this.next();return e&&e.charCodeAt(0)}nextCodePoint(){var e=this.source.slice(this.pos++).codePointAt(0);return 65535<e&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e}matchString(e,t){let r;if(t)for(r=0;r<e.length;r++){var n=this.next(),i=e[r];if(null==n||n.toUpperCase()!==i.toUpperCase())return!1}else for(r=0;r<e.length;r++)if(this.next()!==e[r])return!1;return!0}sourceSlice(e,t){return this.source.slice(e,t)}interval(e,t){return new S(this.source,e,t||this.pos)}}class me{constructor(e,t,r,n,i,a,o){this.matcher=e,this.input=t,this.startExpr=r,this._cst=n,this._cstOffset=i,this._rightmostFailurePosition=a,this._rightmostFailures=o,this.failed()&&(C(this,"message",function(){var e="Expected "+this.getExpectedText();return ce(this.input,this.getRightmostFailurePosition())+e}),C(this,"shortMessage",function(){var e="expected "+this.getExpectedText(),t=le(this.input,this.getRightmostFailurePosition());return"Line "+t.lineNum+", col "+t.colNum+": "+e}))}succeeded(){return!!this._cst}failed(){return!this.succeeded()}getRightmostFailurePosition(){return this._rightmostFailurePosition}getRightmostFailures(){var e;return this._rightmostFailures||(this.matcher.setInput(this.input),e=this.matcher._match(this.startExpr,{tracing:!1,positionToRecordFailures:this.getRightmostFailurePosition()}),this._rightmostFailures=e.getRightmostFailures()),this._rightmostFailures}toString(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"}getExpectedText(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");var t=new f;let r=this.getRightmostFailures();r=r.filter(e=>!e.isFluffy());for(let e=0;e<r.length;e++)0<e&&(e===r.length-1?t.append(2<r.length?", or ":" or "):t.append(", ")),t.append(r[e].toString());return t.contents()}getInterval(){var e=this.getRightmostFailurePosition();return new S(this.input,e,e)}}class fe{constructor(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}isActive(e){return 0<=this.applicationMemoKeyStack.indexOf(e.toMemoKey())}enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())}exit(){this.applicationMemoKeyStack.pop()}startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;const r=this["applicationMemoKeyStack"],n=r.indexOf(e.toMemoKey())+1,i=r.slice(n);t.isInvolved=function(e){return 0<=i.indexOf(e)},t.updateInvolvedApplicationMemoKeys=function(){for(let e=n;e<r.length;e++){var t=r[e];this.isInvolved(t)||i.push(t)}}}endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion}shouldUseMemoizedResult(t){if(t.isLeftRecursion){var r=this["applicationMemoKeyStack"];for(let e=0;e<r.length;e++){var n=r[e];if(t.isInvolved(n))return!1}}return!0}memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t}clearObsoleteEntries(r,n){if(!(r+this.maxExaminedLength<=n)){const i=this["memo"];this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(i).forEach(e=>{var t=i[e];r+t.examinedLength>n?delete i[e]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset))})}}}const de="⋅",ye="␉",ge="␊",ve="␍",_e={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function be(e){return"string"==typeof e?e.replace(/ /g,de).replace(/\t/g,ye).replace(/\n/g,ge).replace(/\r/g,ve):String(e)}class N{constructor(e,t,r,n,i,a,o){this.input=e,this.pos=this.pos1=t,this.pos2=r,this.source=new S(e,t,r),this.expr=n,this.bindings=a,this.children=o||[],this.terminatingLREntry=null,this._flags=i?_e.succeeded:0}get displayString(){return this.expr.toDisplayString()}clone(){return this.cloneWithExpr(this.expr)}cloneWithExpr(e){e=new N(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return e.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,e.isImplicitSpaces=this.isImplicitSpaces,e.isMemoized=this.isMemoized,e.isRootNode=this.isRootNode,e.terminatesLR=this.terminatesLR,e.terminatingLREntry=this.terminatingLREntry,e}recordLRTermination(e,t){this.terminatingLREntry=new N(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0}walk(e,i){let a=e;function o(t,e,r){let n=!0;(n=a.enter&&a.enter.call(i,t,e,r)===N.prototype.SKIP?!1:n)&&(t.children.forEach(e=>{o(e,t,r+1)}),a.exit)&&a.exit.call(i,t,e,r)}"function"==typeof a&&(a={enter:a}),this.isRootNode?this.children.forEach(e=>{o(e,null,0)}):o(this,null,0)}toString(){const o=new f;return this.walk((e,t,r)=>{if(!e)return this.SKIP;var n,i,a;"Alt"!==e.expr.constructor.name&&(o.append((n=e.input,a=e.pos,i=10,((n=be(n.slice(a,a+i))).length<i?n+G(" ",i-n.length).join(""):n)+G(" ",2*r+1).join(""))),o.append((e.succeeded?"✓":"✗")+" "+e.displayString),e.isHeadOfLeftRecursion&&o.append(" (LR)"),e.succeeded&&(a=be(e.source.contents),o.append(" ⇒  "),o.append("string"==typeof a?'"'+a+'"':a)),o.append("\n"))}),o.contents()}}N.prototype.SKIP={},Object.keys(_e).forEach(e=>{const t=_e[e];Object.defineProperty(N.prototype,e,{get(){return 0!=(this._flags&t)},set(e){e?this._flags|=t:this._flags&=~t}})}),n.prototype.allowsSkippingPrecedingSpace=t("allowsSkippingPrecedingSpace"),r.allowsSkippingPrecedingSpace=i.allowsSkippingPrecedingSpace=x.prototype.allowsSkippingPrecedingSpace=c.prototype.allowsSkippingPrecedingSpace=a.prototype.allowsSkippingPrecedingSpace=I.prototype.allowsSkippingPrecedingSpace=function(){return!0},s.prototype.allowsSkippingPrecedingSpace=d.prototype.allowsSkippingPrecedingSpace=w.prototype.allowsSkippingPrecedingSpace=b.prototype.allowsSkippingPrecedingSpace=_.prototype.allowsSkippingPrecedingSpace=o.prototype.allowsSkippingPrecedingSpace=h.prototype.allowsSkippingPrecedingSpace=function(){return!1};let O;ue(e=>{O=e});let we;n.prototype.assertAllApplicationsAreValid=function(e,t){we=0,this._assertAllApplicationsAreValid(e,t)},n.prototype._assertAllApplicationsAreValid=t("_assertAllApplicationsAreValid"),r._assertAllApplicationsAreValid=i._assertAllApplicationsAreValid=c.prototype._assertAllApplicationsAreValid=a.prototype._assertAllApplicationsAreValid=o.prototype._assertAllApplicationsAreValid=I.prototype._assertAllApplicationsAreValid=function(e,t){},w.prototype._assertAllApplicationsAreValid=function(e,t){we++,this.expr._assertAllApplicationsAreValid(e,t),we--},s.prototype._assertAllApplicationsAreValid=function(t,r){for(let e=0;e<this.terms.length;e++)this.terms[e]._assertAllApplicationsAreValid(t,r)},h.prototype._assertAllApplicationsAreValid=function(t,r){for(let e=0;e<this.factors.length;e++)this.factors[e]._assertAllApplicationsAreValid(t,r)},d.prototype._assertAllApplicationsAreValid=_.prototype._assertAllApplicationsAreValid=b.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)},x.prototype._assertAllApplicationsAreValid=function(t,r,e=!1){var n=r.rules[this.ruleName],i=l(t)&&0===we;if(!n)throw Z(this.ruleName,r.name,this.source);if(!e&&l(this.ruleName)&&!i)throw A("Cannot apply syntactic rule "+this.ruleName+" from here (inside a lexical context)",this.source);var a,e=this.args.length,o=n.formals.length;if(e!==o)throw u=this.ruleName,a=this.source,A("Wrong number of arguments for rule "+u+" (expected "+o+", got "+e+")",a);const s=O&&n===O.rules.applySyntactic;var u=O&&n===O.rules.caseInsensitive;if(u&&!(this.args[0]instanceof c))throw te('a Terminal (e.g. "abc")',this.args[0]);if(s){o=this.args[0];if(!(o instanceof x))throw te("a syntactic rule application",o);if(!l(o.ruleName))throw A(`applySyntactic is for syntactic rules, but '${o.ruleName}' is a lexical rule. `+"NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.",o.source);if(i)throw A("applySyntactic is not required here (in a syntactic context)",this.source)}this.args.forEach(e=>{if(e._assertAllApplicationsAreValid(t,r,s),1!==e.getArity())throw A("Invalid parameter to rule "+this.ruleName+": "+(e=e)+" has arity "+e.getArity()+", but parameter expressions must have arity 1",e.source)})},n.prototype.assertChoicesHaveUniformArity=t("assertChoicesHaveUniformArity"),r.assertChoicesHaveUniformArity=i.assertChoicesHaveUniformArity=c.prototype.assertChoicesHaveUniformArity=a.prototype.assertChoicesHaveUniformArity=o.prototype.assertChoicesHaveUniformArity=w.prototype.assertChoicesHaveUniformArity=I.prototype.assertChoicesHaveUniformArity=function(e){},s.prototype.assertChoicesHaveUniformArity=function(t){if(0!==this.terms.length){var r=this.terms[0].getArity();for(let e=0;e<this.terms.length;e++){var n=this.terms[e],i=(n.assertChoicesHaveUniformArity(),n.getArity());if(r!==i)throw ne(t,r,i,n)}}},u.prototype.assertChoicesHaveUniformArity=function(e){var t=this.terms[0].getArity(),r=this.terms[1].getArity();if(t!==r)throw ne(e,r,t,this.terms[0])},h.prototype.assertChoicesHaveUniformArity=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertChoicesHaveUniformArity(t)},d.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},_.prototype.assertChoicesHaveUniformArity=function(e){},b.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},x.prototype.assertChoicesHaveUniformArity=function(e){},n.prototype.assertIteratedExprsAreNotNullable=t("assertIteratedExprsAreNotNullable"),r.assertIteratedExprsAreNotNullable=i.assertIteratedExprsAreNotNullable=c.prototype.assertIteratedExprsAreNotNullable=a.prototype.assertIteratedExprsAreNotNullable=o.prototype.assertIteratedExprsAreNotNullable=I.prototype.assertIteratedExprsAreNotNullable=function(e){},s.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.terms.length;e++)this.terms[e].assertIteratedExprsAreNotNullable(t)},h.prototype.assertIteratedExprsAreNotNullable=function(t){for(let e=0;e<this.factors.length;e++)this.factors[e].assertIteratedExprsAreNotNullable(t)},d.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw re(this,[])},v.prototype.assertIteratedExprsAreNotNullable=_.prototype.assertIteratedExprsAreNotNullable=b.prototype.assertIteratedExprsAreNotNullable=w.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)},x.prototype.assertIteratedExprsAreNotNullable=function(t){this.args.forEach(e=>{e.assertIteratedExprsAreNotNullable(t)})};class xe{constructor(e){this.matchLength=e}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return 0<this.numChildren()}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){e=this.indexOfChild(e);if(e<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===e)throw new Error("cannot get child before first child");return this.childAt(e-1)}childAfter(e){e=this.indexOfChild(e);if(e<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(e===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(e+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}}class P extends xe{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}}class Ie extends xe{constructor(e,t,r,n){super(n),this.ruleName=e,this.children=t,this.childOffsets=r}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return U(this.ctorName)}isSyntactic(){return l(this.ctorName)}}class Ae extends xe{constructor(e,t,r,n){super(r),this.children=e,this.childOffsets=t,this.optional=n}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}}function k(e,t){var r={};return e.source&&t&&(e=e.source.relativeTo(t),r.sourceInterval=[e.startIdx,e.endIdx]),r}function Se(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function Ne(i){const t=Object.create(null);i.forEach(e=>{t[e]=(t[e]||0)+1}),Object.keys(t).forEach(n=>{if(!(t[n]<=1)){let r=1;i.forEach((e,t)=>{e===n&&(i[t]=e+"_"+r++)})}})}n.prototype.eval=t("eval"),r.eval=function(e){var t=e["inputStream"],r=t.pos,t=t.nextCodePoint();return void 0!==t?(e.pushBinding(new P(String.fromCodePoint(t).length),r),!0):(e.processFailure(r,this),!1)},i.eval=function(e){var t=e["inputStream"],r=t.pos;return t.atEnd()?(e.pushBinding(new P(0),r),!0):(e.processFailure(r,this),!1)},c.prototype.eval=function(e){var t=e["inputStream"],r=t.pos;return t.matchString(this.obj)?(e.pushBinding(new P(this.obj.length),r),!0):(e.processFailure(r,this),!1)},a.prototype.eval=function(e){var t=e["inputStream"],r=t.pos,t=this.matchCodePoint?t.nextCodePoint():t.nextCharCode();return void 0!==t&&this.from.codePointAt(0)<=t&&t<=this.to.codePointAt(0)?(e.pushBinding(new P(String.fromCodePoint(t).length),r),!0):(e.processFailure(r,this),!1)},o.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])},w.prototype.eval=function(e){e.enterLexifiedContext();var t=e.eval(this.expr);return e.exitLexifiedContext(),t},s.prototype.eval=function(t){for(let e=0;e<this.terms.length;e++)if(t.eval(this.terms[e]))return!0;return!1},h.prototype.eval=function(t){for(let e=0;e<this.factors.length;e++){var r=this.factors[e];if(!t.eval(r))return!1}return!0},d.prototype.eval=function(e){for(var t=e["inputStream"],r=t.pos,n=this.getArity(),i=[],a=[];i.length<n;)i.push([]),a.push([]);let o=0,s=r,u;for(;o<this.maxNumMatches&&e.eval(this.expr);){if(t.pos===s)throw re(this,e._applicationStack);s=t.pos,o++;var l=e._bindings.splice(e._bindings.length-n,n),c=e._bindingOffsets.splice(e._bindingOffsets.length-n,n);for(u=0;u<l.length;u++)i[u].push(l[u]),a[u].push(c[u])}if(o<this.minNumMatches)return!1;let p=e.posToOffset(r),h=0;0<o&&(r=(r=a[n-1])[r.length-1]+(r=i[n-1])[r.length-1].matchLength,p=a[0][0],h=r-p);var m=this instanceof v;for(u=0;u<i.length;u++)e._bindings.push(new Ae(i[u],a[u],h,m)),e._bindingOffsets.push(p);return!0},_.prototype.eval=function(e){var t=e["inputStream"],r=t.pos,n=(e.pushFailuresInfo(),e.eval(this.expr));return e.popFailuresInfo(),n?(e.processFailure(r,this),!1):(t.pos=r,!0)},b.prototype.eval=function(e){var t=e["inputStream"],r=t.pos;return!!e.eval(this.expr)&&(t.pos=r,!0)},x.prototype.eval=function(e){var t=e.currentApplication(),t=t?t.args:[],t=this.substituteParams(t),r=e.getCurrentPosInfo();if(r.isActive(t))return t.handleCycle(e);var n=t.toMemoKey(),i=r.memo[n];if(i&&r.shouldUseMemoizedResult(i)){if(e.hasNecessaryInfo(i))return e.useMemoizedResult(e.inputStream.pos,i);delete r.memo[n]}return t.reallyEval(e)},x.prototype.handleCycle=function(e){var t=e.getCurrentPosInfo(),r=t["currentLeftRecursion"],n=this.toMemoKey();let i=t.memo[n];return r&&r.headApplication.toMemoKey()===n?i.updateInvolvedApplicationMemoKeys():i||(i=t.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,i)),e.useMemoizedResult(e.inputStream.pos,i)},x.prototype.reallyEval=function(e){var t=e["inputStream"],r=t.pos,n=e.getCurrentPosInfo(),i=e.grammar.rules[this.ruleName],a=i["body"],i=i["description"],o=(e.enterApplication(n,this),i&&e.pushFailuresInfo(),t.examinedLength);t.examinedLength=0;let s=this.evalOnce(a,e);var u=n.currentLeftRecursion,l=this.toMemoKey(),c=u&&u.headApplication.toMemoKey()===l;let p;e.doNotMemoize?e.doNotMemoize=!1:c?(s=this.growSeedResult(a,e,r,u,s),n.endLeftRecursion(),(p=u).examinedLength=t.examinedLength-r,p.rightmostFailureOffset=e._getRightmostFailureOffset(),n.memoize(l,p)):u&&u.isInvolved(l)||(p=n.memoize(l,{matchLength:t.pos-r,examinedLength:t.examinedLength-r,value:s,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));a=!!s;return i&&(e.popFailuresInfo(),a||e.processFailure(r,this),p)&&(p.failuresAtRightmostPosition=e.cloneRecordedFailures()),e.isTracing()&&p&&(u=e.getTraceEntry(r,this,a,a?[s]:[]),c&&(m(null!=u.terminatingLREntry||!a),u.isHeadOfLeftRecursion=!0),p.traceEntry=u),t.examinedLength=Math.max(t.examinedLength,o),e.exitApplication(n,s),a},x.prototype.evalOnce=function(e,t){var r,n=t["inputStream"],i=n.pos;return!!t.eval(e)&&(e=e.getArity(),r=t._bindings.splice(t._bindings.length-e,e),t=t._bindingOffsets.splice(t._bindingOffsets.length-e,e),e=n.pos-i,new Ie(this.ruleName,r,t,e))},x.prototype.growSeedResult=function(e,t,r,n,i){if(!i)return!1;for(var a,o=t["inputStream"];n.matchLength=o.pos-r,n.value=i,n.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()&&(a=t.trace[t.trace.length-1],n.traceEntry=new N(t.input,r,o.pos,this,!0,[i],[a.clone()])),o.pos=r,i=this.evalOnce(e,t),!(o.pos-r<=n.matchLength);)t.isTracing()&&t.trace.splice(-2,1);return t.isTracing()&&n.traceEntry.recordLRTermination(t.trace.pop(),i),o.pos=r+n.matchLength,n.value},I.prototype.eval=function(e){var t=e["inputStream"],r=t.pos,t=t.next();return t&&this.pattern.test(t)?(e.pushBinding(new P(t.length),r),!0):(e.processFailure(r,this),!1)},n.prototype.getArity=t("getArity"),r.getArity=i.getArity=c.prototype.getArity=a.prototype.getArity=o.prototype.getArity=x.prototype.getArity=I.prototype.getArity=function(){return 1},s.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},h.prototype.getArity=function(){let t=0;for(let e=0;e<this.factors.length;e++)t+=this.factors[e].getArity();return t},d.prototype.getArity=function(){return this.expr.getArity()},_.prototype.getArity=function(){return 0},b.prototype.getArity=w.prototype.getArity=function(){return this.expr.getArity()},n.prototype.outputRecipe=t("outputRecipe"),r.outputRecipe=function(e,t){return["any",k(this,t)]},i.outputRecipe=function(e,t){return["end",k(this,t)]},c.prototype.outputRecipe=function(e,t){return["terminal",k(this,t),this.obj]},a.prototype.outputRecipe=function(e,t){return["range",k(this,t),this.from,this.to]},o.prototype.outputRecipe=function(e,t){return["param",k(this,t),this.index]},s.prototype.outputRecipe=function(t,r){return["alt",k(this,r)].concat(this.terms.map(e=>e.outputRecipe(t,r)))},u.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)},p.prototype.outputRecipe=function(t,r){var e=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",k(this,r),e.map(e=>e.outputRecipe(t,r)),n.map(e=>e.outputRecipe(t,r))]},h.prototype.outputRecipe=function(t,r){return["seq",k(this,r)].concat(this.factors.map(e=>e.outputRecipe(t,r)))},y.prototype.outputRecipe=g.prototype.outputRecipe=v.prototype.outputRecipe=_.prototype.outputRecipe=b.prototype.outputRecipe=w.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),k(this,t),this.expr.outputRecipe(e,t)]},x.prototype.outputRecipe=function(t,r){return["app",k(this,r),this.ruleName,this.args.map(e=>e.outputRecipe(t,r))]},I.prototype.outputRecipe=function(e,t){return["unicodeChar",k(this,t),this.category]},n.prototype.introduceParams=t("introduceParams"),r.introduceParams=i.introduceParams=c.prototype.introduceParams=a.prototype.introduceParams=o.prototype.introduceParams=I.prototype.introduceParams=function(e){return this},s.prototype.introduceParams=function(n){return this.terms.forEach((e,t,r)=>{r[t]=e.introduceParams(n)}),this},h.prototype.introduceParams=function(n){return this.factors.forEach((e,t,r)=>{r[t]=e.introduceParams(n)}),this},d.prototype.introduceParams=_.prototype.introduceParams=b.prototype.introduceParams=w.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this},x.prototype.introduceParams=function(n){var e=n.indexOf(this.ruleName);if(0<=e){if(0<this.args.length)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new o(e).withSource(this.source)}return this.args.forEach((e,t,r)=>{r[t]=e.introduceParams(n)}),this},n.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))},n.prototype._isNullable=t("_isNullable"),r._isNullable=a.prototype._isNullable=o.prototype._isNullable=g.prototype._isNullable=I.prototype._isNullable=function(e,t){return!1},i._isNullable=function(e,t){return!0},c.prototype._isNullable=function(e,t){return"string"==typeof this.obj&&""===this.obj},s.prototype._isNullable=function(t,r){return 0===this.terms.length||this.terms.some(e=>e._isNullable(t,r))},h.prototype._isNullable=function(t,r){return this.factors.every(e=>e._isNullable(t,r))},y.prototype._isNullable=v.prototype._isNullable=_.prototype._isNullable=b.prototype._isNullable=function(e,t){return!0},w.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)},x.prototype._isNullable=function(e,t){var r,n=this.toMemoKey();return Object.prototype.hasOwnProperty.call(t,n)||(r=e.rules[this.ruleName]["body"],r=r.substituteParams(this.args),t[n]=!1,t[n]=r._isNullable(e,t)),t[n]},n.prototype.substituteParams=t("substituteParams"),r.substituteParams=i.substituteParams=c.prototype.substituteParams=a.prototype.substituteParams=I.prototype.substituteParams=function(e){return this},o.prototype.substituteParams=function(e){return e[this.index]},s.prototype.substituteParams=function(t){return new s(this.terms.map(e=>e.substituteParams(t)))},h.prototype.substituteParams=function(t){return new h(this.factors.map(e=>e.substituteParams(t)))},d.prototype.substituteParams=_.prototype.substituteParams=b.prototype.substituteParams=w.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))},x.prototype.substituteParams=function(t){var e;return 0===this.args.length?this:(e=this.args.map(e=>e.substituteParams(t)),new x(this.ruleName,e))},n.prototype.toArgumentNameList=t("toArgumentNameList"),r.toArgumentNameList=function(e,t){return["any"]},i.toArgumentNameList=function(e,t){return["end"]},c.prototype.toArgumentNameList=function(e,t){return"string"==typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]},a.prototype.toArgumentNameList=function(e,t){let r=this.from+"_to_"+this.to;return Se(r)||(r="_"+r),[r=Se(r)?r:"$"+e]},s.prototype.toArgumentNameList=function(t,e){var r=this.terms.map(e=>e.toArgumentNameList(t,!0)),n=[],i=r[0].length;for(let t=0;t<i;t++){var a=[];for(let e=0;e<this.terms.length;e++)a.push(r[e][t]);var o=z(a);n.push(o.join("_or_"))}return e||Ne(n),n},h.prototype.toArgumentNameList=function(t,e){let r=[];return this.factors.forEach(e=>{e=e.toArgumentNameList(t,!0);r=r.concat(e),t+=e.length}),e||Ne(r),r},d.prototype.toArgumentNameList=function(e,t){e=this.expr.toArgumentNameList(e,t).map(e=>"s"===e[e.length-1]?e+"es":e+"s");return t||Ne(e),e},v.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map(e=>"opt"+e[0].toUpperCase()+e.slice(1))},_.prototype.toArgumentNameList=function(e,t){return[]},b.prototype.toArgumentNameList=w.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)},x.prototype.toArgumentNameList=function(e,t){return[this.ruleName]},I.prototype.toArgumentNameList=function(e,t){return["$"+e]},o.prototype.toArgumentNameList=function(e,t){return["param"+this.index]},n.prototype.toDisplayString=t("toDisplayString"),s.prototype.toDisplayString=h.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},r.toDisplayString=i.toDisplayString=d.prototype.toDisplayString=_.prototype.toDisplayString=b.prototype.toDisplayString=w.prototype.toDisplayString=c.prototype.toDisplayString=a.prototype.toDisplayString=o.prototype.toDisplayString=function(){return this.toString()},x.prototype.toDisplayString=function(){var e;return 0<this.args.length?(e=this.args.map(e=>e.toDisplayString()),this.ruleName+"<"+e.join(",")+">"):this.ruleName},I.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};class E{constructor(e,t,r){if("description"!==(n=r)&&"string"!==n&&"code"!==n)throw new Error("invalid Failure type: "+r);var n;this.pexpr=e,this.text=t,this.type=r,this.fluffy=!1}getPExpr(){return this.pexpr}getText(){return this.text}getType(){return this.type}isDescription(){return"description"===this.type}isStringTerminal(){return"string"===this.type}isCode(){return"code"===this.type}isFluffy(){return this.fluffy}makeFluffy(){this.fluffy=!0}clearFluffy(){this.fluffy=!1}subsumes(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())}toString(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()}clone(){var e=new E(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e}toKey(){return this.toString()+"#"+this.type}}n.prototype.toFailure=t("toFailure"),r.toFailure=function(e){return new E(this,"any object","description")},i.toFailure=function(e){return new E(this,"end of input","description")},c.prototype.toFailure=function(e){return new E(this,this.obj,"string")},a.prototype.toFailure=function(e){return new E(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},_.prototype.toFailure=function(e){e=this.expr===r?"nothing":"not "+this.expr.toFailure(e);return new E(this,e,"description")},b.prototype.toFailure=function(e){return this.expr.toFailure(e)},x.prototype.toFailure=function(e){let t=e.rules[this.ruleName]["description"];return t||(e=/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a",t=e+" "+this.ruleName),new E(this,t,"description")},I.prototype.toFailure=function(e){return new E(this,"a Unicode ["+this.category+"] character","description")},s.prototype.toFailure=function(t){var e="("+this.terms.map(e=>e.toFailure(t)).join(" or ")+")";return new E(this,e,"description")},h.prototype.toFailure=function(t){var e="("+this.factors.map(e=>e.toFailure(t)).join(" ")+")";return new E(this,e,"description")},d.prototype.toFailure=function(e){e="("+this.expr.toFailure(e)+this.operator+")";return new E(this,e,"description")},n.prototype.toString=t("toString"),r.toString=function(){return"any"},i.toString=function(){return"end"},c.prototype.toString=function(){return JSON.stringify(this.obj)},a.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},o.prototype.toString=function(){return"$"+this.index},w.prototype.toString=function(){return"#("+this.expr.toString()+")"},s.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map(e=>e.toString()).join(" | ")+")"},h.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map(e=>e.toString()).join(" ")+")"},d.prototype.toString=function(){return this.expr+this.operator},_.prototype.toString=function(){return"~"+this.expr},b.prototype.toString=function(){return"&"+this.expr},x.prototype.toString=function(){var e;return 0<this.args.length?(e=this.args.map(e=>e.toString()),this.ruleName+"<"+e.join(",")+">"):this.ruleName},I.prototype.toString=function(){return"\\p{"+this.category+"}"};class Oe extends n{constructor(e){super(),this.obj=e}_getString(e){e=e.currentApplication().args[this.obj.index];return m(e instanceof c,"expected a Terminal expression"),e.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){var t=e["inputStream"],r=t.pos,n=this._getString(e);return t.matchString(n,!0)?(e.pushBinding(new P(n.length),r),!0):(e.processFailure(r,this),!1)}getArity(){return 1}substituteParams(e){return new Oe(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new E(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}var Pe=Object.freeze({__proto__:null,CaseInsensitiveTerminal:Oe,PExpr:n,any:r,end:i,Terminal:c,Range:a,Param:o,Alt:s,Extend:u,Splice:p,Seq:h,Iter:d,Star:y,Plus:g,Opt:v,Not:_,Lookahead:b,Lex:w,Apply:x,UnicodeChar:I});let ke;ue(e=>{ke=e.rules.applySyntactic.body});const Ee=new x("spaces");class Le{constructor(e,t,r){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.getInput(),this.inputStream=new he(this.input),this.memoTable=e._memoTable,this.userData=void 0,this.doNotMemoize=!1,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==r&&(this.positionToRecordFailures=r,this.recordedFailures=Object.create(null))}posToOffset(e){return e-this._posStack[this._posStack.length-1]}enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1}exitApplication(e,t){var r=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,r)}enterLexifiedContext(){this.inLexifiedContextStack.push(!0)}exitLexifiedContext(){this.inLexifiedContextStack.pop()}currentApplication(){return this._applicationStack[this._applicationStack.length-1]}inSyntacticContext(){var e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()}inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]}skipSpaces(){return this.pushFailuresInfo(),this.eval(Ee),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos}skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos}maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==Ee?this.skipSpacesIfInSyntacticContext():this.inputStream.pos}pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))}popBinding(){this._bindings.pop(),this._bindingOffsets.pop()}numBindings(){return this._bindings.length}truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()}getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)}getPosInfo(e){let t=this.memoTable[e];return t=t||(this.memoTable[e]=new fe)}processFailure(e,t){this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures&&((e=this.currentApplication())&&(t=t.substituteParams(e.args)),this.recordFailure(t.toFailure(this.grammar),!1))}recordFailure(e,t){var r=e.toKey();this.recordedFailures[r]?this.recordedFailures[r].isFluffy()&&!e.isFluffy()&&this.recordedFailures[r].clearFluffy():this.recordedFailures[r]=t?e.clone():e}recordFailures(t,r){Object.keys(t).forEach(e=>{this.recordFailure(t[e],r)})}cloneRecordedFailures(){if(this.recordedFailures){const t=Object.create(null);return Object.keys(this.recordedFailures).forEach(e=>{t[e]=this.recordedFailures[e].clone()}),t}}getRightmostFailurePosition(){return this.rightmostFailurePosition}_getRightmostFailureOffset(){return 0<=this.rightmostFailurePosition?this.posToOffset(this.rightmostFailurePosition):-1}getMemoizedTraceEntry(e,t){e=this.memoTable[e];if(e&&t instanceof x){var e=e.memo[t.toMemoKey()];if(e&&e.traceEntry)return(e=e.traceEntry.cloneWithExpr(t)).isMemoized=!0,e}return null}getTraceEntry(e,t,r,n){var i;return t instanceof x&&(i=(i=this.currentApplication())?i.args:[],t=t.substituteParams(i)),this.getMemoizedTraceEntry(e,t)||new N(this.input,e,this.inputStream.pos,t,r,n,this.trace)}isTracing(){return!!this.trace}hasNecessaryInfo(e){return!(this.trace&&!e.traceEntry||this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures&&!e.failuresAtRightmostPosition)}useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);var r=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,r),this.recordedFailures&&this.positionToRecordFailures===r&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),!!t.value&&(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0)}eval(e){var t=this["inputStream"],r=this._bindings.length,n=this.userData;let i;this.recordedFailures&&(i=this.recordedFailures,this.recordedFailures=Object.create(null));var a=t.pos,o=this.maybeSkipSpacesBefore(e);let s;this.trace&&(s=this.trace,this.trace=[]);var u,l=e.eval(this);return this.trace&&(u=this._bindings.slice(r),(o=this.getTraceEntry(o,e,l,u)).isImplicitSpaces=e===Ee,o.isRootNode=e===this.startExpr,s.push(o),this.trace=s),l?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(e=>{this.recordedFailures[e].makeFluffy()}):(t.pos=a,this.truncateBindings(r),this.userData=n),this.recordedFailures&&this.recordFailures(i,!1),e===ke&&this.skipSpaces(),l}getMatchResult(){this.grammar._setUpMatchState(this),this.eval(this.startExpr);let e;this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(e=>this.recordedFailures[e]));var t=this._bindings[0];return t&&(t.grammar=this.grammar),new me(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)}getTrace(){this.trace=[];var e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t}pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)}popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}}class Re{constructor(e){this.grammar=e,this._memoTable=[],this._input="",this._isMemoTableStale=!1}_resetMemoTable(){this._memoTable=[],this._isMemoTableStale=!1}getInput(){return this._input}setInput(e){return this._input!==e&&this.replaceInputRange(0,this._input.length,e),this}replaceInputRange(t,e,r){var n=this._input,i=this._memoTable;if(t<0||t>n.length||e<0||e>n.length||e<t)throw new Error("Invalid indices: "+t+" and "+e);this._input=n.slice(0,t)+r+n.slice(e),this._input!==n&&0<i.length&&(this._isMemoTableStale=!0);n=i.slice(e);i.length=t;for(let e=0;e<r.length;e++)i.push(void 0);for(const o of n)i.push(o);for(let e=0;e<t;e++){var a=i[e];a&&a.clearObsoleteEntries(e,t)}return this}match(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!1})}trace(e,t={incremental:!0}){return this._match(this._getStartExpr(e),{incremental:t.incremental,tracing:!0})}_match(e,t={}){t={tracing:!1,incremental:!0,positionToRecordFailures:void 0,...t};if(t.incremental){if(this._isMemoTableStale&&!this.grammar.supportsIncrementalParsing)throw A(`Grammar '${this.grammar.name}' does not support incremental parsing`)}else this._resetMemoTable();e=new Le(this,e,t.positionToRecordFailures);return t.tracing?e.getTrace():e.getMatchResult()}_getStartExpr(e){var e=e||this.grammar.defaultStartRule;if(e)return e=this.grammar.parseApplication(e),new h([e,i]);throw new Error("Missing start rule argument -- the grammar has no default start rule.")}}const L=[],Fe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class De{constructor(e,t,r){this._node=e,this.source=t,this._baseInterval=r,e.isNonterminal()&&m(t===r),this._childWrappers=[]}_forgetMemoizedResultFor(t){delete this._node[this._semantics.attributeKeys[t]],this.children.forEach(e=>{e._forgetMemoizedResultFor(t)})}child(t){if(0<=t&&t<this._node.numChildren()){let e=this._childWrappers[t];var r,n,i;return e||(r=this._node.childAt(t),n=this._node.childOffsets[t],n=this._baseInterval.subInterval(n,r.matchLength),i=r.isNonterminal()?n:this._baseInterval,e=this._childWrappers[t]=this._semantics.wrap(r,n,i)),e}}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){var e=e||[],t=e.map(e=>e._node),t=new Ae(t,[],-1,!1),t=this._semantics.wrap(t,null,null);return t._childWrappers=e,t}get children(){return this._children()}get ctorName(){return this._node.ctorName}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}}class R{constructor(e,t){const n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:De){constructor(e,t,r){super(e,t,r),n.checkActionDictsIfHaventAlready(),this._semantics=n}toString(){return"[semantics wrapper for "+n.grammar.name+"]"}},this.super=t){if(!e.equals(this.super.grammar)&&!e._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const r in this.attributes)Object.defineProperty(this.attributeKeys,r,{value:pe(r)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}toString(){return"[semantics for "+this.grammar.name+"]"}checkActionDictsIfHaventAlready(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)}checkActionDicts(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)}toRecipe(e){function l(e){return e.super!==R.BuiltInSemantics._getSemantics()}let c="(function(g) {\n";if(l(this)){c+="  var semantics = "+this.super.toRecipe(!0)+"(g";var t=this.super.grammar;let e=this.grammar;for(;e!==t;)c+=".superGrammar",e=e.superGrammar;c=c+");\n"+"  return g.extendSemantics(semantics)"}else c+="  return g.createSemantics()";return["Operation","Attribute"].forEach(s=>{const u=this[s.toLowerCase()+"s"];Object.keys(u).forEach(e=>{const{actionDict:r,formals:t,builtInDefault:n}=u[e];let i=e;0<t.length&&(i+="("+t.join(", ")+")");let a;a=l(this)&&this.super[s.toLowerCase()+"s"][e]?"extend"+s:"add"+s,c+="\n    ."+a+"("+JSON.stringify(i)+", {";const o=[];Object.keys(r).forEach(t=>{if(r[t]!==n){let e=r[t].toString().trim();e=e.replace(/^.*\(/,"function("),o.push("\n      "+JSON.stringify(t)+": "+e)}}),c+=o.join(",")+"\n    })"})}),c+=";\n  })",c=e?c:"(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+c+"(grammar);\n  return semantics;\n});\n"}addOperationOrAttribute(o,e,t){const s=o+"s";e=Me(e,o);const u=e["name"];function r(...e){var t=(this._semantics.operations[i]||this._semantics.attributes[i]).formals.map(e=>this.args[e]);if(this.isIteration()||1!==e.length)throw function(e,t,r,n){n=n.slice(0,-1).map(e=>{var t="  "+e[0].name+" > "+e[1];return 3===e.length?t+" for '"+e[2]+"'":t}).join("\n"),n+="\n  "+t+" > "+e;let i="";return(r=A([`Missing semantic action for '${e}' in ${r} '${t}'.`+(i="_iter"===e?["\nNOTE: as of Ohm v16, there is no default action for iteration nodes — see ","  https://ohmjs.org/d/dsa for details."].join("\n"):i),"Action stack (most recent call last):",n].join("\n"))).name="missingSemanticAction",r}(this.ctorName,i,n,L);return a.apply(e[0],t)}var n,i,a,e=e["formals"];this.assertNewName(u,o),n=o,i=u,a=c;const l={_default:r};Object.keys(t).forEach(e=>{l[e]=t[e]});e="operation"===o?new je(u,e,l,r):new Ce(u,l,r);function c(...e){var t=this._semantics[s][u];if(arguments.length!==t.formals.length)throw new Error("Invalid number of arguments passed to "+u+" "+o+" (expected "+t.formals.length+", got "+arguments.length+")");var r,n,i=Object.create(null);for([r,n]of Object.entries(e))i[t.formals[r]]=n;var e=this.args,a=(this.args=i,t.execute(this._semantics,this));return this.args=e,a}e.checkActionDict(this.grammar),this[s][u]=e,"operation"===o?(this.Wrapper.prototype[u]=c,this.Wrapper.prototype[u].toString=function(){return"["+u+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,u,{get:c,configurable:!0}),Object.defineProperty(this.attributeKeys,u,{value:pe(u)}))}extendOperationOrAttribute(e,t,r){var n=e+"s";if(Me(t,"attribute"),!(this.super&&t in this.super[n]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(Fe(this[n],t))throw new Error("Cannot extend "+e+" '"+t+"' again");var i=this[n][t].formals,a=this[n][t].actionDict;const o=Object.create(a);Object.keys(r).forEach(e=>{o[e]=r[e]}),this[n][t]="operation"===e?new je(t,i,o):new Ce(t,o),this[n][t].checkActionDict(this.grammar)}assertNewName(e,t){if(Fe(De.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")}wrap(e,t,r){r=r||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,r)}}function Me(e,t){if(!R.prototypeGrammar)return m(-1===e.indexOf("(")),{name:e,formals:[]};e=R.prototypeGrammar.match(e,"operation"===t?"OperationSignature":"AttributeSignature");if(e.failed())throw new Error(e.message);return R.prototypeGrammarSemantics(e).parse()}R.createSemantics=function(n,e){function r(e){if(!(e instanceof me))throw new TypeError("Semantics expected a MatchResult, but got "+H(e));if(e.failed())throw new TypeError("cannot apply Semantics to "+e.toString());var t=e._cst;if(t.grammar!==n)throw new Error("Cannot use a MatchResult from grammar '"+t.grammar.name+"' with a semantics for '"+n.name+"'");var r=new he(e.input);return i.wrap(t,r.interval(e._cstOffset,e.input.length))}const i=new R(n,void 0!==e?e:R.BuiltInSemantics._getSemantics());return r.addOperation=function(e,t){return i.addOperationOrAttribute("operation",e,t),r},r.extendOperation=function(e,t){return i.extendOperationOrAttribute("operation",e,t),r},r.addAttribute=function(e,t){return i.addOperationOrAttribute("attribute",e,t),r},r.extendAttribute=function(e,t){return i.extendOperationOrAttribute("attribute",e,t),r},r._getActionDict=function(e){var t=i.operations[e]||i.attributes[e];if(t)return t.actionDict;throw new Error('"'+e+'" is not a valid operation or attribute name in this semantics for "'+n.name+'"')},r._remove=function(e){let t;return e in i.operations?(t=i.operations[e],delete i.operations[e]):e in i.attributes&&(t=i.attributes[e],delete i.attributes[e]),delete i.Wrapper.prototype[e],t},r.getOperationNames=function(){return Object.keys(i.operations)},r.getAttributeNames=function(){return Object.keys(i.attributes)},r.getGrammar=function(){return i.grammar},r.toRecipe=function(e){return i.toRecipe(e)},r.toString=i.toString.bind(i),r._getSemantics=function(){return i},r};class je{constructor(e,t,r,n){this.name=e,this.formals=t,this.actionDict=r,this.builtInDefault=n}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{var r=t._node["ctorName"];let e=this.actionDict[r];return e?(L.push([this,r]),e.apply(t,t._children())):(t.isNonterminal()&&(e=this.actionDict._nonterminal)?(L.push([this,"_nonterminal",r]),e):(L.push([this,"default action",r]),this.actionDict._default)).apply(t,t._children())}finally{L.pop()}}}je.prototype.typeName="operation";class Ce extends je{constructor(e,t,r){super(e,[],t,r)}execute(e,t){var r=t._node,n=e.attributeKeys[this.name];return Fe(r,n)||(r[n]=je.prototype.execute.call(this,e,t)),r[n]}}Ce.prototype.typeName="attribute";const Te=["_iter","_terminal","_nonterminal","_default"];function Be(t){return Object.keys(t.rules).sort().map(e=>t.rules[e])}let Ge,qe;class F{constructor(e,t,r,n){if(this.name=e,this.superGrammar=t,this.rules=r,n){if(!(n in r))throw new Error("Invalid start rule: '"+n+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=n}this._matchStateInitializer=void 0,this.supportsIncrementalParsing=!0}matcher(){return new Re(this)}isBuiltIn(){return this===F.ProtoBuiltInRules||this===F.BuiltInRules}equals(e){if(this===e)return!0;if(null==e||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||this.superGrammar!==e.superGrammar&&!this.superGrammar.equals(e.superGrammar))return!1;var t=Be(this);const r=Be(e);return t.length===r.length&&t.every((e,t)=>e.description===r[t].description&&e.formals.join(",")===r[t].formals.join(",")&&e.body.toString()===r[t].body.toString())}match(e,t){var r=this.matcher();return r.replaceInputRange(0,0,e),r.match(t)}trace(e,t){var r=this.matcher();return r.replaceInputRange(0,0,e),r.trace(t)}createSemantics(){return R.createSemantics(this)}extendSemantics(e){return R.createSemantics(this,e._getSemantics())}_checkTopDownActionDict(e,t,r){var n,i=[];for(const s in r){var a=r[s];if(Te.includes(s)||s in this.rules)if("function"!=typeof a)i.push(`'${s}' must be a function in an action dictionary for '${this.name}'`);else{var a=a.length,o=this._topDownActionArity(s);if(a!==o){let e;e="_iter"===s||"_nonterminal"===s?`it should use a rest parameter, e.g. \`${s}(...children) {}\`. `+"NOTE: this is new in Ohm v16 — see https://ohmjs.org/d/ati for details.":`expected ${o}, got `+a,i.push(`Semantic action '${s}' has the wrong arity: `+e)}}else i.push(`'${s}' is not a valid semantic action for '${this.name}'`)}if(0<i.length)throw n=i.map(e=>"- "+e),(t=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...n].join("\n"))).problems=i,t}_topDownActionArity(e){return Te.includes(e)?0:this.rules[e].body.getArity()}_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1}toRecipe(e=void 0){var t={};this.source&&(t.source=this.source.contents);let r=null;this.defaultStartRule&&(r=this.defaultStartRule);const s={};Object.keys(this.rules).forEach(e=>{var t=this.rules[e],r=t["body"],n=!this.superGrammar||!this.superGrammar.rules[e];let i;i=n?"define":r instanceof u?"extend":"override";var a={},o=(t.source&&this.source&&(o=t.source.relativeTo(this.source),a.sourceInterval=[o.startIdx,o.endIdx]),n?t.description:null),n=r.outputRecipe(t.formals,this.source);s[e]=[i,a,o,t.formals,n]});let n="null";return e?n=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(n=this.superGrammar.toRecipe()),`[${[...["grammar",t,this.name].map(JSON.stringify),n,...[r,s].map(JSON.stringify)].join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()}_toOperationOrAttributeActionDictionaryTemplate(){var e=new f;e.append("{");let t=!0;for(const n in this.rules){var r=this.rules[n]["body"];t?t=!1:e.append(","),e.append("\n"),e.append("  "),this.addSemanticActionTemplate(n,r,e)}return e.append("\n}"),e.contents()}addSemanticActionTemplate(e,t,r){r.append(e),r.append(": function(");e=this._topDownActionArity(e);r.append(G("_",e).join(", ")),r.append(") {\n"),r.append("  }")}parseApplication(e){let t;if(!((t=-1===e.indexOf("<")?new x(e):(e=Ge.match(e,"Base_application"),qe(e,{}))).ruleName in this.rules))throw Z(t.ruleName,this.name);var r,e=this.rules[t.ruleName]["formals"];if(e.length!==t.args.length)throw r=this.rules[t.ruleName]["source"],X(t.ruleName,e.length,t.args.length,r);return t}_setUpMatchState(e){this._matchStateInitializer&&this._matchStateInitializer(e)}}F.ProtoBuiltInRules=new F("ProtoBuiltInRules",void 0,{any:{body:r,formals:[],description:"any character",primitive:!0},end:{body:i,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new Oe(new o(0)),formals:["str"],primitive:!0},lower:{body:new I("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new I("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new I("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new y(new x("space")),formals:[]},space:{body:new a("\0"," "),formals:[],description:"a space"}}),F.initApplicationParser=function(e,t){Ge=e,qe=t};class ze{constructor(e){this.name=e}sourceInterval(e,t){return this.source.subInterval(e,t-e)}ensureSuperGrammar(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?F.ProtoBuiltInRules:F.BuiltInRules),this.superGrammar}ensureSuperGrammarRuleForOverriding(e,t){var r=this.ensureSuperGrammar().rules[e];if(r)return r;throw r=this.superGrammar.name,A("Cannot override rule "+e+" because it is not declared in "+r,t)}installOverriddenOrExtendedRule(e,t,r,n){var i=q(t);if(0<i.length)throw ee(e,i,n);var i=this.ensureSuperGrammar().rules[e],a=i.formals,a=a?a.length:0;if(t.length!==a)throw X(e,a,t.length,n);return this.install(e,t,r,i.description,n)}install(e,t,r,n,i,a=!1){return this.rules[e]={body:r.introduceParams(t),formals:t,description:n,source:i,primitive:a},this}withSuperGrammar(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this}withDefaultStartRule(e){return this.defaultStartRule=e,this}withSource(e){return this.source=new he(e).interval(0,e.length),this}build(){const r=new F(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule),n=(r._matchStateInitializer=r.superGrammar._matchStateInitializer,r.supportsIncrementalParsing=r.superGrammar.supportsIncrementalParsing,[]);let i=!1;return Object.keys(r.rules).forEach(e=>{var t=r.rules[e]["body"];try{t.assertChoicesHaveUniformArity(e)}catch(e){n.push(e)}try{t.assertAllApplicationsAreValid(e,r)}catch(e){n.push(e),i=!0}}),i||Object.keys(r.rules).forEach(e=>{e=r.rules[e].body;try{e.assertIteratedExprsAreNotNullable(r,[])}catch(e){n.push(e)}}),0<n.length&&ie(n),this.source&&(r.source=this.source),r}define(e,t,r,n,i,a){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw Y(e,this.name,this.superGrammar.name,i);if(this.rules[e])throw Y(e,this.name,this.name,i);var o=q(t);if(0<o.length)throw ee(e,o,i);return this.install(e,t,r,n,i,a)}override(e,t,r,n,i){return this.ensureSuperGrammarRuleForOverriding(e,i),this.installOverriddenOrExtendedRule(e,t,r,i),this}extend(e,t,r,n,i){var a;if(this.ensureSuperGrammar().rules[e])return(a=new u(this.superGrammar,e,r)).source=r.source,this.installOverriddenOrExtendedRule(e,t,a,i),this;throw r=this.superGrammar.name,A("Cannot extend rule "+e+" because it is not declared in "+r,i)}}class Ue{constructor(){this.currentDecl=null,this.currentRuleName=null}newGrammar(e){return new ze(e)}grammar(e,t,r,n,s){const u=new ze(t);return r&&u.withSuperGrammar(r instanceof F?r:this.fromRecipe(r)),n&&u.withDefaultStartRule(n),e&&e.source&&u.withSource(e.source),this.currentDecl=u,Object.keys(s).forEach(e=>{this.currentRuleName=e;var t=s[e],r=t[0],n=t[1],i=t[2],a=t[3],t=this.fromRecipe(t[4]);let o;u.source&&n&&n.sourceInterval&&(o=u.source.subInterval(n.sourceInterval[0],n.sourceInterval[1]-n.sourceInterval[0])),u[r](e,a,t,i,o)}),this.currentRuleName=this.currentDecl=null,u.build()}terminal(e){return new c(e)}range(e,t){return new a(e,t)}param(e){return new o(e)}alt(...e){let t=[];for(var r of e)(r=r instanceof n?r:this.fromRecipe(r))instanceof s?t=t.concat(r.terms):t.push(r);return 1===t.length?t[0]:new s(t)}seq(...e){let t=[];for(var r of e)(r=r instanceof n?r:this.fromRecipe(r))instanceof h?t=t.concat(r.factors):t.push(r);return 1===t.length?t[0]:new h(t)}star(e){return e instanceof n||(e=this.fromRecipe(e)),new y(e)}plus(e){return e instanceof n||(e=this.fromRecipe(e)),new g(e)}opt(e){return e instanceof n||(e=this.fromRecipe(e)),new v(e)}not(e){return e instanceof n||(e=this.fromRecipe(e)),new _(e)}lookahead(e){return e instanceof n||(e=this.fromRecipe(e)),new b(e)}lex(e){return e instanceof n||(e=this.fromRecipe(e)),new w(e)}app(e,t){return t&&0<t.length&&(t=t.map(function(e){return e instanceof n?e:this.fromRecipe(e)},this)),new x(e,t)}splice(e,t){return new p(this.currentDecl.superGrammar,this.currentRuleName,e.map(e=>this.fromRecipe(e)),t.map(e=>this.fromRecipe(e)))}fromRecipe(e){var t="grammar"===e[0]?e.slice(1):e.slice(2),t=this[e[0]](...t),e=e[1];return e&&e.sourceInterval&&this.currentDecl&&t.withSource(this.currentDecl.sourceInterval(...e.sourceInterval)),t}}function Ke(e){return"function"==typeof e?e.call(new Ue):("string"==typeof e&&(e=JSON.parse(e)),(new Ue).fromRecipe(e))}var Ve,$e=Ke(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n  // Allows a syntactic rule application within a lexical context.\n  applySyntactic<app> = app\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]),He=(F.BuiltInRules=$e,Ve=F.BuiltInRules,se.forEach(e=>{e(Ve)}),Ke(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u{" hexDigit hexDigit? hexDigit?\n             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",se=null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},"\n"]],["range",{sourceInterval:[1639,1660]},"\0","􏿿"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},"\n"]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},"\n"],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]));const We=Object.create(n.prototype);function Je(e,t){for(const r in e)if(r===t)return 1}function Qe(e,a,t){const o=new Ue;let s,u,l,i=!1;return(t||He).createSemantics().addOperation("visit",{Grammars(e){return e.children.map(e=>e.visit())},Grammar(e,t,r,n,i){e=e.visit(),s=o.newGrammar(e),t.child(0)&&t.child(0).visit(),n.children.map(e=>e.visit()),t=s.build();if(t.source=this.source.trimmed(),Je(a,e))throw A("Grammar "+t.name+" is already declared in this namespace");return a[e]=t},SuperGrammar(e,t){var r,n,i=t.visit();if("null"===i)s.withSuperGrammar(null);else{if(!a||!Je(a,i))throw r=i,n=a,t=t.source,A(n?`Grammar ${r} is not declared in namespace '${n}'`:"Undeclared grammar "+r,t);s.withSuperGrammar(a[i])}},Rule_define(e,t,r,n,i){u=e.visit(),l=t.children.map(e=>e.visit())[0]||[],s.defaultStartRule||s.ensureSuperGrammar()===F.ProtoBuiltInRules||s.withDefaultStartRule(u);e=i.visit(),t=r.children.map(e=>e.visit())[0],i=this.source.trimmed();return s.define(u,l,e,t,i)},Rule_override(e,t,r,n){u=e.visit(),l=t.children.map(e=>e.visit())[0]||[];e=this.source.trimmed(),s.ensureSuperGrammarRuleForOverriding(u,e),i=!0,t=n.visit();return i=!1,s.override(u,l,t,null,e)},Rule_extend(e,t,r,n){u=e.visit(),l=t.children.map(e=>e.visit())[0]||[];e=n.visit(),t=this.source.trimmed();return s.extend(u,l,e,null,t)},RuleBody(e,t){return o.alt(...t.visit()).withSource(this.source)},OverrideRuleBody(e,t){var r,t=t.visit(),n=t.indexOf(We);return(0<=n?(r=t.slice(0,n),(n=t.slice(n+1)).forEach(e=>{if(e===We)throw A("'...' can appear at most once in a rule body",e.source)}),new p(s.superGrammar,u,r,n)):o.alt(...t)).withSource(this.source)},Formals(e,t,r){return t.visit()},Params(e,t,r){return t.visit()},Alt(e){return o.alt(...e.visit()).withSource(this.source)},TopLevelTerm_inline(e,t){var t=u+"_"+t.visit(),e=e.visit(),r=this.source.trimmed(),n=!(s.superGrammar&&s.superGrammar.rules[t]),n=(i&&!n?s.override(t,l,e,null,r):s.define(t,l,e,null,r),l.map(e=>o.app(e)));return o.app(t,n).withSource(e.source)},OverrideTopLevelTerm_superSplice(e){return We},Seq(e){return o.seq(...e.children.map(e=>e.visit())).withSource(this.source)},Iter_star(e,t){return o.star(e.visit()).withSource(this.source)},Iter_plus(e,t){return o.plus(e.visit()).withSource(this.source)},Iter_opt(e,t){return o.opt(e.visit()).withSource(this.source)},Pred_not(e,t){return o.not(t.visit()).withSource(this.source)},Pred_lookahead(e,t){return o.lookahead(t.visit()).withSource(this.source)},Lex_lex(e,t){return o.lex(t.visit()).withSource(this.source)},Base_application(e,t){t=t.children.map(e=>e.visit())[0]||[];return o.app(e.visit(),t).withSource(this.source)},Base_range(e,t,r){return o.range(e.visit(),r.visit()).withSource(this.source)},Base_terminal(e){return o.terminal(e.visit()).withSource(this.source)},Base_paren(e,t,r){return t.visit()},ruleDescr(e,t,r){return t.visit()},ruleDescrText(e){return this.sourceString.trim()},caseName(e,t,r,n,i){return r.visit()},name(e,t){return this.sourceString},nameFirst(e){},nameRest(e){},terminal(e,t,r){return t.children.map(e=>e.visit()).join("")},oneCharTerminal(e,t,r){return t.visit()},escapeChar(t){try{return $(this.sourceString)}catch(e){if(e instanceof RangeError&&e.message.startsWith("Invalid code point "))throw m((r=(t=t)._node)&&r.isNonterminal()&&"escapeChar_unicodeCodePoint"===r.ctorName),A(`U+${(t=(r=t.children.slice(1,-1).map(e=>e.source))[0].coverageWith(...r.slice(1))).contents} is not a valid Unicode code point`,t);throw e}var r},NonemptyListOf(e,t,r){return[e.visit()].concat(r.children.map(e=>e.visit()))},EmptyListOf(){return[]},_terminal(){return this.sourceString}})(e).visit()}var Ze=Ke(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]);M=F.BuiltInRules,D={empty(){return this.iteration()},nonEmpty(e,t,r){return this.iteration([e].concat(r.children))}},R.BuiltInSemantics=R.createSemantics(M,null).addOperation("asIteration",{emptyListOf:D.empty,nonemptyListOf:D.nonEmpty,EmptyListOf:D.empty,NonemptyListOf:D.nonEmpty}),M=Ze,R.prototypeGrammarSemantics=M.createSemantics().addOperation("parse",{AttributeSignature(e){return{name:e.parse(),formals:[]}},OperationSignature(e,t){return{name:e.parse(),formals:t.children.map(e=>e.parse())[0]||[]}},Formals(e,t,r){return t.asIteration().children.map(e=>e.parse())},name(e,t){return this.sourceString}}),R.prototypeGrammar=M;const Ye="an indented block",Xe="a dedent";class et extends he{constructor(e){super(e.input),this.state=e}_indentationAt(e){return this.state.userData[e]||0}atEnd(){return super.atEnd()&&0===this._indentationAt(this.pos)}next(){if(0===this._indentationAt(this.pos))return super.next();this.examinedLength=Math.max(this.examinedLength,this.pos)}nextCharCode(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCharCode()}nextCodePoint(){return 0!==this._indentationAt(this.pos)?(this.examinedLength=Math.max(this.examinedLength,this.pos),1114112):super.nextCodePoint()}}class tt extends n{constructor(e=!0){super(),this.isIndent=e}allowsSkippingPrecedingSpace(){return!0}eval(e){var t=e["inputStream"],r=e.userData,t=(e.doNotMemoize=!0,t.pos),n=this.isIndent?1:-1;return 0<(r[t]||0)*n?(e.userData=Object.create(r),e.userData[t]-=n,e.pushBinding(new P(0),t),!0):(e.processFailure(t,this),!1)}getArity(){return 1}_assertAllApplicationsAreValid(e,t){}_isNullable(e,t){return!1}assertChoicesHaveUniformArity(e){}assertIteratedExprsAreNotNullable(e){}introduceParams(e){return this}substituteParams(e){return this}toString(){return this.isIndent?"indent":"dedent"}toDisplayString(){return this.toString()}toFailure(e){var t=this.isIndent?Ye:Xe;return new E(this,t,"description")}}var D=new x("indent"),Ze=new x("dedent"),M=new p($e,"any",[D,Ze],[]),D=(new Ue).newGrammar("IndentationSensitive").withSuperGrammar($e).define("indent",[],new tt(!0),Ye,void 0,!0).define("dedent",[],new tt(!1),Xe,void 0,!0).extend("any",[],M,"any character",void 0).build();Object.assign(D,{_matchStateInitializer(e){e.userData=function(e){let t=0;const r=[0];for(var n=()=>r[r.length-1],i={},a=/( *).*(?:$|\r?\n|\r)/g;null!=(o=a.exec(e));){var[o,s]=o;if(0===o.length)break;var u=s.length,s=n(),l=t+u;if(s<u)r.push(u),i[l]=1;else if(u<s){for(s=r.length;n()!==u;)r.pop();i[l]=-1*(s-r.length)}t+=o.length}return 1<r.length&&(i[t]=1-r.length),i}(e.input),e.inputStream=new et(e)},supportsIncrementalParsing:!1});F.initApplicationParser(He,Qe);const rt=e=>!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e);function nt(e,t){var r,n,e=He.match(e,"Grammars");if(e.failed())throw r=e,n=new Error,Object.defineProperty(n,"message",{enumerable:!0,get(){return r.message}}),Object.defineProperty(n,"shortMessage",{enumerable:!0,get(){return"Expected "+r.getExpectedText()}}),n.interval=r.getInterval(),n;Qe(e,t)}function it(e,t){t=Object.create(t||{});if("string"!=typeof e){if(!rt(e))throw new TypeError("Expected string as first argument, got "+H(e));e=e.toString()}return nt(e,t),t}e.ExperimentalIndentationSensitive=D,e._buildGrammar=Qe,e.grammar=function(e,t){var r,e=it(e,t);if(0===(t=Object.keys(e)).length)throw new Error("Missing grammar definition");if(1<t.length)throw r=e[t[1]].source,new Error(ce(r.sourceString,r.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.");return e[t[0]]},e.grammars=it,e.makeRecipe=Ke,e.ohmGrammar=He,e.pexprs=Pe,e.version="17.1.0"}},i={};return function e(t){var r=i[t];return void 0===r&&(r=i[t]={exports:{}},n[t].call(r.exports,r,r.exports,e)),r.exports}(341)})());
//# sourceMappingURL=caph1993-numpy-js.js.map