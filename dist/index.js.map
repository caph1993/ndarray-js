{"version":3,"sources":["webpack://ndarray-js/webpack/universalModuleDefinition","webpack://ndarray-js/./src/NDArray.ts","webpack://ndarray-js/./src/_globals.ts","webpack://ndarray-js/./src/array/_globals.ts","webpack://ndarray-js/./src/array/basic.ts","webpack://ndarray-js/./src/array/elementwise.ts","webpack://ndarray-js/./src/array/index.ts","webpack://ndarray-js/./src/array/indexes.ts","webpack://ndarray-js/./src/array/js-interface.ts","webpack://ndarray-js/./src/array/kwargs.ts","webpack://ndarray-js/./src/array/operators.ts","webpack://ndarray-js/./src/array/print.ts","webpack://ndarray-js/./src/array/reduce.ts","webpack://ndarray-js/./src/array/transform.ts","webpack://ndarray-js/./src/dtypes.ts","webpack://ndarray-js/./src/index.ts","webpack://ndarray-js/./src/modules/_globals.ts","webpack://ndarray-js/./src/modules/constructors.ts","webpack://ndarray-js/./src/modules/grammar.ts","webpack://ndarray-js/./src/modules/index.ts","webpack://ndarray-js/./src/modules/indexing.ts","webpack://ndarray-js/./src/modules/random.ts","webpack://ndarray-js/./src/modules/statistics.ts","webpack://ndarray-js/./src/utils-js.ts","webpack://ndarray-js/./node_modules/.pnpm/ohm-js@17.1.0/node_modules/ohm-js/dist/ohm.cjs","webpack://ndarray-js/webpack/bootstrap","webpack://ndarray-js/webpack/startup"],"names":["root","factory","exports","module","define","amd","i","a","self","__generator","this","thisArg","body","f","y","t","_","label","sent","trys","ops","g","next","verb","Symbol","iterator","n","v","step","op","TypeError","call","done","value","pop","length","push","e","__read","o","m","r","ar","error","__spreadArray","to","from","pack","arguments","l","Array","prototype","slice","concat","dtypes_1","Object","defineProperty","NDArray","get","_flat","constructor","enumerable","configurable","_simpleIndexes","size","indices","_this","new_buffer","dtype","map","set","list","Error","transpose","_a","shape","index","item","Uint8Array","flat","GLOBALS","array_1","kwargs_1","basic","modules","reshape","more_shape","_i","apply","ravel","copy","where","indexes","toString","print","humanReadable","any","Method_a_axis_keepdims","defaultDecorator","reduce","reducers","all","sum","product","max","min","argmax","argmin","mean","var","Method_a_axis_ddof_keepdims","std","norm","Method_a_ord_axis_keepdims","add","Method_other_out","operators","op_binary","subtract","multiply","divide","mod","divide_int","pow","maximum","minimum","bitwise_or","bitwise_and","bitwise_shift_right","logical_or","logical_and","logical_xor","greater","less","greater_equal","less_equal","equal","not_equal","bitwise_not","Method_out","elementwise","funcs","logical_not","negative","abs","isclose","allclose","assign","Method_values_where","op_assign","add_assign","subtract_assign","multiply_assign","divide_assign","mod_assign","divide_int_assign","pow_assign","maximum_assign","minimum_assign","bitwise_or_assign","bitwise_and_assign","bitwise_shift_left_assign","bitwise_shift_right_assign","logical_or_assign","logical_and_assign","tolist","jsInterface","round","Method_a_decimals_out","axes","transform","sort","axis","args","symbol_1","func_1","keys","other_1","func_2","includes","symbol","func","np","_globals_1","broadcast_n_shapes","broadcast_shapes","array","asarray","new_NDArray","isarray","_NDArray","__NDArray","A","fromlist","shapeA","shapeB","maxDim","Math","dim1","dim2","unshift","shapes","broadcastShapes","outputShape","_loop_1","dims","dim","some","d","empty","new_from","parse_shape","shape_shifts","as_number","as_boolean","number_collapse","arr","expect","obj","parseFloat","isArray","undefined","Float32Array","b","buffer","shifts","shape_or_first","inferredIndex","indexOf","known","filter","acc","val","__assign","s","p","hasOwnProperty","basic_1","kw_funcs","out","out_buffer","dtype_leq","mk_elementwise","sign","Float64Array","sqrt","square","exp","log","log2","log10","log1p","sin","cos","tan","asin","acos","atan","cosh","sinh","tanh","acosh","asinh","atanh","floor","ceil","isfinite","isFinite","isnan","isNaN","decimals","x","toFixed","valueOf","Func_a_out","Func_a_decimals_out","__values","AxisIndex","__parse_sliceRange","AxesIndex","src_flat_1","axesIndex","parse","isConstant","index_1","isSimple","composition","first","second","axisIndexes","j","specA","spec","specB","type","range","startA","start","stepA","nStepsA","nSteps","index_2","_b","startB","stepB","nStepsB","sub","parse_range","apparentShape","internalShape","_indices","slices","e_1","slices_1","slices_1_1","e_1_1","return","iShifts","lastAxis","tuple","fill","cursor","__slices","idx","_size","axis_size","stop","step_1","start_1","ifNull","parse_range_spec","rangeString","numbers","split","trim","parseInt","Number","isInteger","indexSpec","span","index_3","indices_1","dtype_is_boolean","forEach","if_value","dtype_is_integer","new_indices","Int32Array","stop_1","axisIndex","_where","buffers","readDir","reversedAfter","NaN","remainingAxes","remainingWhere","axisWhere","key","refSize","JSON","stringify","splice","reverse","pushToFlat","e_2","arr_1","arr_1_1","elem","arr_2","arr_2_1","e_2_1","recursiveReshape","flatArr","shapeArr","shift","innerShape","outerSize","innerArray","Func_y_x_out","Func_a_axis_ddof_keepdims","Func_a_ord_axis_keepdims","Func_a_axis_keepdims","Func_a_values_where","Func_a_other_out","Func_a_lastAxis","Func_a_q_axis","kwargs_decorator","defaults","implementation","parsers","this_as_first_arg","kwParser","spreadKey","last","startsWith","shorten","defaultsDict","fromEntries","validKwargsNames","kwargs","parsers_1","parsers_1_1","parser","parsedArgs","frequently_used_parsers","ndims","keepdims","decorator","a_axis_flatten","q","isarray_or_null","is_integer_non_neg","is_pnorm","n_ary_operation","atan2","__make_assignment_operator","_assign_operation_toJS","assign_operation","__make_operator","binary_operation","js_interface_1","utils_js_1","transform_1","B","bind","flatOut","shiftsA","shiftsB","flatA","flatB","idxA","idxB","tgt","src","console","warn","tmpTgt","tgtJS","cpy","outJS","extend","values","rtol","atol","equal_nan","different","err","arrs","elem_shape","rawShapes","funcOutIsNDArray","_c","idxs","_d","_e","concatenate","elementwise_1","budgets","lBudget","before","rBudget","rLimit","dtype_is_float","suffix","name","str","indent","depth","join","sep","repeat","simplify","left","right","replace","match","inputString","delimiter","rows","columnWidths","rows_1","rows_1_1","columns","formattedString","rows_2","rows_2_1","row","column","padStart","padEnd","kw_reducers","operators_1","mk_reducer","flat_reduce","apply_on_axis","groups","nCols","groupsT","newRow","len","ord","Infinity","ddof","kw_exported","stack","swapAxes","cmp_nan_at_the_end","apply_along_axis","nDims","tmp_1","data","tmp","inv","srcShifts","axisA","axisB","perm","arrays","shapeIn","arrays_1","arrays_1_1","allEq","dtype_least_ancestor","is","shapeBroadcast","bArrays","arrays_2","arrays_2_1","dtype_lt","dtype_eq","dtypes","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Uint32Array","size_or_array","hierarchy_leq","hierarchy_lt","hierarchy_max","e_3","e_4","ltPairs","leqPairs","entries","BigInt64Array","BigUint64Array","_f","_g","pair","dtypes_1_1","dtypes_2","dtypes_2_1","lca","dtypes_3","dtypes_3_1","C","e_4_1","e_3_1","template","variables","usage","grammar","NDArray_1","default","prod","ew","bitwise_xor","bitwise_shift_left","modules_1","random","constructors","zeros","ones","arange","linspace","geomspace","take","indexing","nonzero","quantile","statistics","nanquantile","pi","PI","E","nd_modules","arg0","arg1","end","steps","endpoint","__makeTemplateObject","cooked","raw","__parser_pool","__makeSemantics","ohmGrammar","ohm","String","semanticVariables","semantics","Instruction_sliceAssignment","$tgt","_open","$where","_close","$symbol","$src","_tgt","_src","sourceString","Instruction_expression","$arr","Precedence11","BinaryOperation","Precedence10","Precedence09","Precedence08","Precedence07","Precedence06","Precedence05","Precedence04","UnaryOperation","Precedence03","Precedence02","number","arg2","arg3","arg4","arg5","arg6","arg7","Arr_slice","SliceTerm_constant","$x","SliceTerm_boolean_constant","Arr_call","$name","$names","$callArgs","kwArgs","Arr_method","_dot","Parenthesis","__","Arr_attribute","Variable","$i","isListOfArrays","int","$sign","$value","SliceRange","$start","$stop","$step","Constant","POSITIVE_INFINITY","$str","CallArgs","$args","_comma","$kwArgs","_trailing","k","KwArg","$key","_equals","NonemptyListOf","more","children","c","JsArray","$list","_terminal","$A","$B","ohmSemantics","createSemantics","addOperation","template_with_placeholders","succeeded","message","busy","pool","condition","raw_indices","pos","shuffle","shuffled","_shuffled","_shuffle","normal","randn","_normal_buffer","exponential","uniform","u","nanmedian","nanpercentile","average","median","percentile","_globals_2","_nan_handling","outer_shape","inner_shape","at","nrows","ncols","a_flat","q_flat","cum","hi","nq","lo","weights","denominator","numerator","weights_shape","seen","_next","c_i","listA","listB","chunkSize","i_1","allClose","nan_equal","wrapper","abstract","optMethodName","methodName","assert","cond","defineLazyProperty","propName","getterFn","let","memo","repeatFn","fn","repeatStr","getDuplicates","duplicates","lastIndexOf","copyWithoutDuplicates","noDuplicates","entry","isSyntactic","ruleName","firstChar","toUpperCase","isLexical","padLeft","optChar","StringBuffer","strings","append","contents","escapeUnicode","fromCodePoint","unescapeCodePoint","charAt","unexpectedObjToString","baseToString","typeName","common","freeze","__proto__","clone","UnicodeCategories","Lu","Ll","Lt","Lm","Lo","Nl","Nd","Mn","Mc","Pc","Zs","L","Ltmo","PExpr","withSource","interval","source","trimmed","create","Terminal","super","Range","matchCodePoint","Param","Alt","terms","Extend","superGrammar","rules","Splice","beforeTerms","afterTerms","origBody","expansionPos","Seq","factors","Iter","expr","Star","Plus","Opt","operator","minNumMatches","maxNumMatches","Not","Lookahead","Lex","Apply","toMemoKey","_memoKey","UnicodeChar","category","pattern","createError","optInterval","getLineAndColumnMessage","shortMessage","intervalSourcesDontMatch","undeclaredRule","grammarName","duplicateRuleDeclaration","declGrammarName","optSource","wrongNumberOfParameters","expected","actual","duplicateParameterNames","incorrectArgumentType","expectedType","kleeneExprHasNullableOperand","kleeneExpr","applicationStack","actuals","substituteParams","stackTrace","app","inconsistentArity","throwErrors","errors","messages","strcpy","dest","offset","origDestLen","substr","lineAndColumnToMessage","ranges","lineAndCol","sb","lineNumbers","lineNum","colNum","maxLen","prevLine","nextLine","appendLine","num","content","prefix","lineLen","line","indicationLine","startIdx","endIdx","lineStartOffset","gutterWidth","builtInRulesCallbacks","awaitBuiltInRules","cb","getLineAndColumn","currOffset","prevLineStartOffset","lineEndOffset","nextLineEndOffset","uniqueId","idCounter","Interval","_contents","coverageWith","intervals","coverage","collapsedLeft","collapsedRight","minus","that","relativeTo","subInterval","newStartIdx","firstInterval","InputStream","examinedLength","atEnd","ans","nextCharCode","nextChar","charCodeAt","nextCodePoint","cp","codePointAt","matchString","optIgnoreCase","sourceSlice","optEndIdx","MatchResult","matcher","input","startExpr","cst","cstOffset","rightmostFailurePosition","optRecordedFailures","_cst","_cstOffset","_rightmostFailurePosition","_rightmostFailures","failed","detail","getExpectedText","getRightmostFailurePosition","errorInfo","getRightmostFailures","matchResultWithFailures","setInput","_match","tracing","positionToRecordFailures","failures","failure","isFluffy","getInterval","PosInfo","applicationMemoKeyStack","maxExaminedLength","maxRightmostFailureOffset","currentLeftRecursion","isActive","application","enter","exit","startLeftRecursion","headApplication","memoRec","isLeftRecursion","nextLeftRecursion","indexOfFirstInvolvedRule","involvedApplicationMemoKeys","isInvolved","applicationMemoKey","updateInvolvedApplicationMemoKeys","endLeftRecursion","shouldUseMemoizedResult","memoize","memoKey","rightmostFailureOffset","clearObsoleteEntries","invalidatedIdx","DOT_OPERATOR","SYMBOL_FOR_HORIZONTAL_TABULATION","SYMBOL_FOR_LINE_FEED","SYMBOL_FOR_CARRIAGE_RETURN","Flags","isRootNode","isImplicitSpaces","isMemoized","isHeadOfLeftRecursion","terminatesLR","asEscapedString","Trace","pos1","pos2","bindings","optChildren","terminatingLREntry","_flags","toDisplayString","cloneWithExpr","recordLRTermination","ruleBodyTrace","walk","visitorObjOrFn","optThisArg","visitor","_walk","node","parent","recurse","SKIP","child","excerpt","displayString","mask","allowsSkippingPrecedingSpace","BuiltInRules$1","lexifyCount","assertAllApplicationsAreValid","_assertAllApplicationsAreValid","skipSyntacticCheck","ruleInfo","isContextSyntactic","formals","isBuiltInApplySyntactic","applySyntactic","isBuiltInCaseInsensitive","caseInsensitive","arg","getArity","assertChoicesHaveUniformArity","arity","term","otherArity","actualArity","expectedArity","assertIteratedExprsAreNotNullable","isNullable","Node","matchLength","numChildren","childAt","indexOfChild","hasChildren","hasNoChildren","onlyChild","ctorName","firstChild","lastChild","childBefore","childIdx","childAfter","isTerminal","isNonterminal","isIteration","isOptional","TerminalNode","NonterminalNode","childOffsets","IterationNode","optional","getMetaInfo","grammarInterval","metaInfo","adjusted","sourceInterval","isRestrictedJSIdentifier","test","resolveDuplicatedNames","argumentNameList","count","argName","dupArgName","subscript","eval","state","inputStream","origPos","pushBinding","processFailure","currentApplication","enterLexifiedContext","exitLexifiedContext","factor","cols","colOffsets","numMatches","prevPos","_applicationStack","_bindings","rowOffsets","_bindingOffsets","posToOffset","endOffset","lastColOffsets","lastCol","pushFailuresInfo","popFailuresInfo","caller","posInfo","getCurrentPosInfo","handleCycle","hasNecessaryInfo","useMemoizedResult","reallyEval","origPosInfo","description","origInputStreamExaminedLength","enterApplication","evalOnce","currentLR","doNotMemoize","growSeedResult","_getRightmostFailureOffset","failuresAtRightmostPosition","cloneRecordedFailures","isTracing","getTraceEntry","traceEntry","exitApplication","offsets","lrMemoRec","newValue","seedTrace","trace","ch","outputRecipe","toLowerCase","introduceParams","_isNullable","every","inlined","toArgumentNameList","firstArgIndex","noDupCheck","termArgNameLists","numArgs","colIdx","col","rowIdx","uniqueNames","factorArgumentNameList","exprArgumentString","ps","Failure","pexpr","text","fluffy","getPExpr","getText","getType","isDescription","isStringTerminal","isCode","makeFluffy","clearFluffy","subsumes","toKey","toFailure","article","CaseInsensitiveTerminal","param","_getString","terminal","matchStr","pexprs","builtInApplySyntacticBody","builtInRules","applySpaces","MatchState","optPositionToRecordFailures","getInput","memoTable","_memoTable","userData","_posStack","inLexifiedContextStack","_rightmostFailurePositionStack","_recordedFailuresStack","recordedFailures","optNode","inSyntacticContext","inLexifiedContext","skipSpaces","popBinding","skipSpacesIfInSyntacticContext","maybeSkipSpacesBefore","numBindings","truncateBindings","newLength","getPosInfo","recordFailure","shouldCloneIfNew","recordFailures","getMemoizedTraceEntry","memoRecRightmostFailurePosition","origNumBindings","origUserData","origRecordedFailures","memoPos","origTrace","getMatchResult","_setUpMatchState","rightmostFailures","getTrace","matchResult","rootTrace","result","Matcher","_input","_isMemoTableStale","_resetMemoTable","replaceInputRange","prevInput","restOfMemoTable","optStartApplicationStr","options","incremental","_getStartExpr","opts","supportsIncrementalParsing","applicationStr","defaultStartRule","startApp","parseApplication","globalActionStack","prop","Wrapper","baseInterval","_node","_baseInterval","_childWrappers","_forgetMemoizedResultFor","attributeName","_semantics","attributeKeys","childWrapper","childNode","base","wrap","_children","iteration","optChildWrappers","childWrappers","childNodes","iter","Semantics","superSemantics","checkedActionDicts","checkActionDictsIfHaventAlready","equals","_inheritsFrom","operations","attributes","checkActionDicts","checkActionDict","toRecipe","semanticsOnly","hasSuperSemantics","BuiltInSemantics","_getSemantics","superSemanticsGrammar","relatedGrammar","semanticOperations","actionDict","builtInDefault","signature","method","srcArray","actionName","addOperationOrAttribute","typePlural","parsedNameAndFormalArgs","parseSignature","formal","info","moreInfo","doIt","assertNewName","realActionDict","_default","Operation","Attribute","thisThing","argsObj","oldArgs","execute","extendOperationOrAttribute","inheritedFormals","inheritedActionDict","newActionDict","optBaseInterval","prototypeGrammar","prototypeGrammarSemantics","optSuperSemantics","proxy","extendOperation","addAttribute","extendAttribute","_getActionDict","operationOrAttributeName","action","_remove","semantic","getOperationNames","getAttributeNames","getGrammar","_checkTopDownActionDict","nodeWrapper","actionFn","_nonterminal","SPECIAL_ACTION_NAMES","getSortedRuleValues","ohmGrammar$1","buildGrammar$1","Grammar","optDefaultStartRule","_matchStateInitializer","isBuiltIn","ProtoBuiltInRules","BuiltInRules","myRules","otherRules","rule","optStartApplication","extendSemantics","what","prettyProblems","problems","_topDownActionArity","details","problem","superGrammarExpr","startRule","isDefinition","operation","bodyRecipe","superGrammarOutput","toOperationActionDictionaryTemplate","_toOperationOrAttributeActionDictionaryTemplate","toAttributeActionDictionaryTemplate","addSemanticActionTemplate","primitive","lower","upper","unicodeLtmo","spaces","space","initApplicationParser","builderFn","GrammarDecl","ensureSuperGrammar","withSuperGrammar","ensureSuperGrammarRuleForOverriding","installOverriddenOrExtendedRule","duplicateParameterNames$1","expectedFormals","expectedNumFormals","install","withDefaultStartRule","build","grammarErrors","grammarHasInvalidApplications","override","descIgnored","fragment","Builder","currentDecl","currentRuleName","newGrammar","gDecl","fromRecipe","ruleRecipe","alt","termArgs","seq","factorArgs","star","plus","opt","not","lookahead","lex","optParams","recipe","makeRecipe","superSplicePlaceholder","namespaceHas","ns","buildGrammar","namespace","optOhmGrammarForTesting","builder","decl","currentRuleFormals","overriding","Grammars","grammarIter","visit","id","SuperGrammar","superGrammarName","Rule_define","fs","Rule_override","Rule_extend","RuleBody","OverrideRuleBody","Formals","opointy","cpointy","Params","seqs","TopLevelTerm_inline","inlineRuleName","isNewRuleDeclaration","params","OverrideTopLevelTerm_superSplice","Iter_star","Iter_plus","Iter_opt","Pred_not","Pred_lookahead","Lex_lex","Base_application","Base_range","Base_terminal","Base_paren","open","close","ruleDescr","ruleDescrText","caseName","space1","space2","rest","nameFirst","nameRest","cs","oneCharTerminal","escapeChar","RangeError","applyWrapper","fullInterval","digitIntervals","xs","EmptyListOf","operationsAndAttributesGrammar","actions","nonEmpty","emptyListOf","nonemptyListOf","AttributeSignature","OperationSignature","optFormals","oparen","cparen","asIteration","INDENT_DESCRIPTION","DEDENT_DESCRIPTION","InputStreamWithIndentation","_indentationAt","Indentation","isIndent","pseudoTokens","applyIndent","applyDedent","newAnyBody","IndentationSensitive","topOfStack","regex","exec","indentSize","prevSize","indentPos","prevLength","isBuffer","compileAndLoad","matchFailure","grammars","optNamespace","ExperimentalIndentationSensitive","_buildGrammar","grammarNames","version","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","\"use strict\";\n//@ts-check\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NDArray = void 0;\nvar dtypes_1 = require(\"./dtypes\");\n/**\n * Multi dimensional array.\n */\nvar NDArray = /** @class */ (function () {\n    function NDArray(flat, shape) {\n        this.shape = shape || [flat.length]; // invariant: immutable\n        this._flat = flat;\n        this._simpleIndexes = null;\n    }\n    Object.defineProperty(NDArray.prototype, \"dtype\", {\n        /** @category Attributes @readonly */\n        get: function () {\n            //@ts-ignore\n            return this._flat.constructor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NDArray.prototype, \"size\", {\n        /** @category Attributes @readonly */\n        get: function () {\n            return this._simpleIndexes == null ? this._flat.length : this._simpleIndexes.size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NDArray.prototype, \"flat\", {\n        /** @category Attributes @readonly */\n        get: function () {\n            var _this = this;\n            if (this._simpleIndexes == null)\n                return this._flat;\n            var indices = this._simpleIndexes.indices;\n            //@ts-ignore\n            return (0, dtypes_1.new_buffer)(indices.length, this.dtype).map(function (_, i) { return _this._flat[indices[i]]; });\n        },\n        /** @internal */\n        set: function (list) {\n            if (list.length != this.size)\n                throw new Error(\"Length mismatch. Can't write \".concat(list.length, \" values into \").concat(this.size, \" available positions.\"));\n            var n = this.size;\n            if (this._simpleIndexes == null) {\n                for (var i = 0; i < n; i++)\n                    this._flat[i] = list[i];\n            }\n            else {\n                var indices = this._simpleIndexes.indices;\n                for (var i = 0; i < n; i++)\n                    this._flat[indices[i]] = list[i];\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NDArray.prototype, \"T\", {\n        /**\n         * @category Transformations\n         * Transpose.\n        */\n        get: function () {\n            return this.transpose();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Iterator over the first axis.\n     * For 1D arrays, yields numbers.\n     * For multidimensional arrays, yields array views.\n     */\n    NDArray.prototype[Symbol.iterator] = function () {\n        var i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    i = 0;\n                    _a.label = 1;\n                case 1:\n                    if (!(i < this.shape[0])) return [3 /*break*/, 4];\n                    return [4 /*yield*/, this.index(i)];\n                case 2:\n                    _a.sent();\n                    _a.label = 3;\n                case 3:\n                    i++;\n                    return [3 /*break*/, 1];\n                case 4: return [2 /*return*/];\n            }\n        });\n    };\n    Object.defineProperty(NDArray.prototype, \"length\", {\n        /** @category Attributes @readonly */\n        get: function () {\n            return this.shape[0] || 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** @category Casting */\n    NDArray.prototype.item = function () {\n        if (this.size != 1)\n            throw new Error(\"Can't convert array of size \".concat(this.size, \" to scalar\"));\n        return this.dtype == Uint8Array ? !!this._flat[0] : this._flat[0];\n    };\n    return NDArray;\n}());\nexports.NDArray = NDArray;\nvar _globals_1 = require(\"./_globals\");\n_globals_1.GLOBALS.NDArray = NDArray;\nvar array_1 = require(\"./array\");\n// import { AxisArg, ReduceKwArgs } from './NDArray/reduce';\nvar kwargs_1 = require(\"./array/kwargs\");\nNDArray.prototype.modules = array_1.modules;\n// const a = new NDArray(new Int32Array(20), [], Number)\n// ==============================\n//    Basic methods\n// ==============================\nvar basic = array_1.modules.basic;\nNDArray.prototype.reshape = function (shape) {\n    var more_shape = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        more_shape[_i - 1] = arguments[_i];\n    }\n    return basic.reshape.apply(basic, __spreadArray([this, shape], __read(more_shape), false));\n};\nNDArray.prototype.ravel = function () {\n    return basic.ravel(this);\n};\nNDArray.prototype.copy = function () {\n    return basic.copy(this);\n};\n// ==============================\n//    Indexing\n// ==============================\nNDArray.prototype.index = function () {\n    var where = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        where[_i] = arguments[_i];\n    }\n    return array_1.modules.indexes.index(this, where);\n};\n// ==============================\n//    Printing\n// ==============================\nNDArray.prototype.toString = function () {\n    return array_1.modules.print.humanReadable(this);\n};\n// ==============================\n//    Reduce\n// ==============================\nNDArray.prototype.any = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.any);\nNDArray.prototype.all = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.all);\nNDArray.prototype.sum = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.sum);\nNDArray.prototype.product = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.product);\nNDArray.prototype.max = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.max);\nNDArray.prototype.min = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.min);\nNDArray.prototype.argmax = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.argmax);\nNDArray.prototype.argmin = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.argmin);\nNDArray.prototype.mean = kwargs_1.Method_a_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.mean);\nNDArray.prototype.var = kwargs_1.Method_a_axis_ddof_keepdims.defaultDecorator(array_1.modules.reduce.reducers.var);\nNDArray.prototype.std = kwargs_1.Method_a_axis_ddof_keepdims.defaultDecorator(array_1.modules.reduce.reducers.std);\nNDArray.prototype.norm = kwargs_1.Method_a_ord_axis_keepdims.defaultDecorator(array_1.modules.reduce.reducers.norm);\nNDArray.prototype.add = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"+\"]);\nNDArray.prototype.subtract = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"-\"]);\nNDArray.prototype.multiply = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"*\"]);\nNDArray.prototype.divide = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"/\"]);\nNDArray.prototype.mod = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"%\"]);\nNDArray.prototype.divide_int = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"//\"]);\nNDArray.prototype.pow = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"**\"]);\nNDArray.prototype.maximum = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"max\"]);\nNDArray.prototype.minimum = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"min\"]);\nNDArray.prototype.bitwise_or = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"|\"]);\nNDArray.prototype.bitwise_and = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"&\"]);\nNDArray.prototype.bitwise_or = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"^\"]);\nNDArray.prototype.bitwise_shift_right = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"<<\"]);\nNDArray.prototype.bitwise_shift_right = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\">>\"]);\nNDArray.prototype.logical_or = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"or\"]);\nNDArray.prototype.logical_and = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"and\"]);\nNDArray.prototype.logical_xor = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"xor\"]);\nNDArray.prototype.greater = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\">\"]);\nNDArray.prototype.less = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"<\"]);\nNDArray.prototype.greater_equal = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\">=\"]);\nNDArray.prototype.less_equal = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"<=\"]);\nNDArray.prototype.equal = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"==\"]);\nNDArray.prototype.not_equal = kwargs_1.Method_other_out.defaultDecorator(array_1.modules.operators.op_binary[\"!=\"]);\n// Unary operations: only boolean_not. Positive is useless and negative is almost useless\nNDArray.prototype.bitwise_not = kwargs_1.Method_out.defaultDecorator(array_1.modules.elementwise.funcs.bitwise_not);\nNDArray.prototype.logical_not = kwargs_1.Method_out.defaultDecorator(array_1.modules.elementwise.funcs.logical_not);\nNDArray.prototype.negative = kwargs_1.Method_out.defaultDecorator(array_1.modules.elementwise.funcs.negative);\nNDArray.prototype.abs = kwargs_1.Method_out.defaultDecorator(array_1.modules.elementwise.funcs.abs);\nNDArray.prototype.isclose = array_1.modules.operators.isclose;\nNDArray.prototype.allclose = array_1.modules.operators.allclose;\nNDArray.prototype.assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"=\"]);\nNDArray.prototype.add_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"+=\"]);\nNDArray.prototype.subtract_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"-=\"]);\nNDArray.prototype.multiply_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"*=\"]);\nNDArray.prototype.divide_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"/=\"]);\nNDArray.prototype.mod_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"%=\"]);\nNDArray.prototype.divide_int_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"//=\"]);\nNDArray.prototype.pow_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"**=\"]);\nNDArray.prototype.maximum_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"max=\"]);\nNDArray.prototype.minimum_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"min=\"]);\nNDArray.prototype.bitwise_or_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"|=\"]);\nNDArray.prototype.bitwise_and_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"&=\"]);\nNDArray.prototype.bitwise_shift_left_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"<<=\"]);\nNDArray.prototype.bitwise_shift_right_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\">>=\"]);\nNDArray.prototype.logical_or_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"or=\"]);\nNDArray.prototype.logical_and_assign = kwargs_1.Method_values_where.defaultDecorator(array_1.modules.operators.op_assign[\"and=\"]);\n// ==============================\n//    array instantiation and reshaping\n// ==============================\nNDArray.prototype.tolist = function () {\n    return array_1.modules.jsInterface.tolist(this);\n};\n// NDArray.prototype.fromJS = function (A) {\n//   return modules.jsInterface.fromJS(A);\n// }\n// ==============================\n//    elementwise methods\n// ==============================\nNDArray.prototype.round = kwargs_1.Method_a_decimals_out.defaultDecorator(array_1.modules.elementwise.funcs.round);\n// ==============================\n//    transform methods\n// ==============================\n/** @param {null|number[]} axes */\nNDArray.prototype.transpose = function (axes) {\n    if (axes === void 0) { axes = null; }\n    return array_1.modules.transform.transpose(this, axes);\n};\nNDArray.prototype.sort = function (axis) {\n    if (axis === void 0) { axis = -1; }\n    array_1.modules.transform.sort(this, axis);\n    return null;\n};\nvar op = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (!args.length)\n        return this;\n    if (typeof args[0] == \"string\") {\n        var symbol_1 = args[0];\n        if (args.length == 1) {\n            var func_1 = array_1.modules.elementwise.ops[symbol_1];\n            if (!func_1)\n                throw new Error(\"Unknown unary operator \\\"\".concat(symbol_1, \"\\\". Options:\").concat(__spreadArray([], __read(Object.keys(array_1.modules.elementwise.ops)), false)));\n            return func_1(this, symbol_1);\n        }\n        if (args.length > 2)\n            throw new Error(\"Too many arguments provided: \".concat(__spreadArray([], __read(args), false)));\n        var other_1 = args[1];\n        var func_2 = array_1.modules.operators.op_binary[symbol_1];\n        if (func_2)\n            return func_2(this, other_1);\n        func_2 = array_1.modules.operators.op_assign[symbol_1];\n        if (func_2)\n            return func_2(this, other_1);\n        if (symbol_1.includes(':'))\n            throw new Error(\"Expected index or operator symbol. Found \\\"\".concat(symbol_1, \"\\\". Did you mean \").concat([symbol_1], \"?\"));\n        throw new Error(\"Expected index or operator symbol. Found \\\"\".concat(symbol_1, \"\\\"\"));\n    }\n    var where = args[0];\n    if (where instanceof NDArray)\n        throw new Error(\"Expected operator or index. Found numpy array\");\n    if (args.length == 1)\n        return this.index(where);\n    var symbol = args[1];\n    var func = array_1.modules.operators.op_assign[symbol];\n    if (!func)\n        throw new Error(\"Unknown assign operator \\\"\".concat(symbol, \"\\\". Options:\").concat(__spreadArray([], __read(Object.keys(array_1.modules.operators.op_assign)), false)));\n    if (args.length > 3)\n        throw new Error(\"Too many arguments provided: \".concat(__spreadArray([], __read(args), false)));\n    var other = args[2];\n    return func(this, where, other);\n};\nNDArray.prototype.op = op;\nexports.default = NDArray;\n","\"use strict\";\n//@ts-check\n/**\n * This file exists for the sole purpose splitting the class methods across multiple files\n * while preserving all features of intellisense or JSDoc without errors.\n * The main issue is that the implementation of the methods require NDArray very often.\n * It resolves circular dependencies by using a global variable imported in each module.\n * The main file must define `require('./core-globals').GLOBALS.NDArray = NDArray;` before\n * importing any of the files that use it.\n *\n * A template header for files importing NDArray from this file is given below.\n *    DO NOT use `const NDArray = require(\"./core-globals\").GLOBALS.NDArray;`.\n *    Use const {NDArray} = ... instead as indicated. (Intellisense stops working otherwise)\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GLOBALS = void 0;\n/** @ignore */\nvar _np = null, _array = null;\n/** @ignore */\nexports.GLOBALS = {\n    NDArray: _array,\n    np: _np,\n};\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.broadcast_n_shapes = exports.broadcast_shapes = exports.array = exports.asarray = exports.new_NDArray = exports.isarray = exports._NDArray = void 0;\nvar _globals_1 = require(\"../_globals\");\nvar np = _globals_1.GLOBALS.np, __NDArray = _globals_1.GLOBALS.NDArray;\nif (!__NDArray)\n    throw new Error(\"Programming error: NDArray not defined\");\n// Functions to avoid importing NDArray (because if I import NDArray, I can't use it as a type annotation in the same file)\nexports._NDArray = __NDArray;\nfunction isarray(A) {\n    return A instanceof exports._NDArray;\n}\nexports.isarray = isarray;\nfunction new_NDArray(flat, shape) {\n    return new exports._NDArray(flat, shape);\n}\nexports.new_NDArray = new_NDArray;\nfunction asarray(A) {\n    if (isarray(A))\n        return A;\n    else\n        return np.fromlist(A);\n}\nexports.asarray = asarray;\nfunction array(A) {\n    if (isarray(A)) { // copy if it's a view\n        var flat = A._simpleIndexes == null ? A.dtype.from(A.flat) : A.flat;\n        return new_NDArray(flat, A.shape);\n    }\n    else\n        return asarray(A);\n}\nexports.array = array;\nfunction broadcast_shapes(shapeA, shapeB) {\n    var shape = [];\n    var maxDim = Math.max(shapeA.length, shapeB.length);\n    shapeA = __spreadArray(__spreadArray([], __read(Array.from({ length: maxDim - shapeA.length }, function () { return 1; })), false), __read(shapeA), false);\n    shapeB = __spreadArray(__spreadArray([], __read(Array.from({ length: maxDim - shapeB.length }, function () { return 1; })), false), __read(shapeB), false);\n    for (var axis = maxDim - 1; axis >= 0; axis--) {\n        var dim1 = shapeA[axis];\n        var dim2 = shapeB[axis];\n        if (dim1 !== 1 && dim2 !== 1 && dim1 !== dim2)\n            throw new Error(\"Can not broadcast axis \".concat(axis, \" with sizes \").concat(dim1, \" and \").concat(dim2));\n        shape.unshift(Math.max(dim1, dim2));\n    }\n    return [shape, shapeA, shapeB];\n}\nexports.broadcast_shapes = broadcast_shapes;\nfunction broadcast_n_shapes() {\n    var shapes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        shapes[_i] = arguments[_i];\n    }\n    var maxDim = Math.max.apply(Math, __spreadArray([], __read(shapes.map(function (shape) { return shape.length; })), false));\n    var broadcastShapes = shapes.map(function (shape) {\n        return __spreadArray(__spreadArray([], __read(Array.from({ length: maxDim - shape.length }, function () { return 1; })), false), __read(shape), false);\n    });\n    var outputShape = [];\n    var _loop_1 = function (axis) {\n        var dims = broadcastShapes.map(function (shape) { return shape[axis]; });\n        var dim = Math.max.apply(Math, __spreadArray([], __read(dims), false));\n        if (dims.some(function (d) { return d !== 1 && d !== dim; }))\n            throw new Error(\"Can not broadcast axis \".concat(axis, \" with sizes \").concat(dims));\n        outputShape.unshift(dim);\n    };\n    for (var axis = maxDim - 1; axis >= 0; axis--) {\n        _loop_1(axis);\n    }\n    return [broadcastShapes, outputShape];\n}\nexports.broadcast_n_shapes = broadcast_n_shapes;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.copy = exports.empty = exports.new_from = exports.ravel = exports.reshape = exports.parse_shape = exports.shape_shifts = exports.as_number = exports.as_boolean = exports.number_collapse = exports._NDArray = exports.new_NDArray = exports.array = exports.asarray = exports.isarray = void 0;\nvar _globals_1 = require(\"./_globals\");\nObject.defineProperty(exports, \"isarray\", { enumerable: true, get: function () { return _globals_1.isarray; } });\nObject.defineProperty(exports, \"asarray\", { enumerable: true, get: function () { return _globals_1.asarray; } });\nObject.defineProperty(exports, \"array\", { enumerable: true, get: function () { return _globals_1.array; } });\nObject.defineProperty(exports, \"new_NDArray\", { enumerable: true, get: function () { return _globals_1.new_NDArray; } });\nObject.defineProperty(exports, \"_NDArray\", { enumerable: true, get: function () { return _globals_1._NDArray; } });\n// Functions to avoid importing NDArray (because if I import NDArray, I can't use it as a type annotation in the same file)\n/**\n * If the array is 0D, it returns it's unique element (number or boolean).\n * The signature is kept as NDArray for type consistency, even though the\n * output is a number or a boolean. This is consistent with the facts that\n * (1) all functions requiring arrays work with numbers as well because they call asarray,\n * and (2) semantically, a constant is an array.\n */\nfunction number_collapse(arr, expect) {\n    if (expect === void 0) { expect = false; }\n    if (!arr.shape.length)\n        return arr.flat[0];\n    if (expect)\n        throw new Error(\"Expected constant. Got array with shape \".concat(arr.shape));\n    return arr;\n}\nexports.number_collapse = number_collapse;\nfunction as_boolean(obj) {\n    if ((0, _globals_1.isarray)(obj))\n        obj = number_collapse(obj, true);\n    else if (typeof obj == 'string')\n        throw new Error(\"'string' object can not be interpreted as boolean: \".concat(obj));\n    return !!(0 + obj);\n}\nexports.as_boolean = as_boolean;\nfunction as_number(obj) {\n    if ((0, _globals_1.isarray)(obj))\n        obj = number_collapse(obj, true);\n    else if (typeof obj == 'string')\n        throw new Error(\"'string' object can not be interpreted as boolean: \".concat(obj));\n    return parseFloat(obj);\n}\nexports.as_number = as_number;\n// ====================\n// Reshape and shape shifts for indexing\n// ====================\nfunction shape_shifts(shape) {\n    // increasing one by one on a given axis is increasing by shifts[axis] in flat representation\n    var shifts = Array.from({ length: shape.length }, function (_) { return 0; });\n    shifts[shape.length - 1] = 1;\n    for (var i = shape.length - 2; i >= 0; i--)\n        shifts[i] = shifts[i + 1] * shape[i + 1];\n    return shifts;\n}\nexports.shape_shifts = shape_shifts;\nfunction parse_shape(list) {\n    if (typeof list == \"number\")\n        return [list];\n    if ((0, _globals_1.isarray)(list)) {\n        if (list.shape.length > 1) {\n            throw new Error(\"Expected flat list. Got array with shape \".concat(list.shape));\n        }\n        return __spreadArray([], __read(list.flat), false);\n    }\n    if (Array.isArray(list))\n        return list;\n    throw new Error(\"Expected list. Got \".concat(list));\n}\nexports.parse_shape = parse_shape;\nfunction reshape(A, shape_or_first) {\n    var more_shape = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        more_shape[_i - 2] = arguments[_i];\n    }\n    A = (0, _globals_1.asarray)(A);\n    var shape;\n    if (!more_shape.length)\n        shape = parse_shape(shape_or_first);\n    else\n        shape = __spreadArray([shape_or_first], __read(more_shape), false).map(as_number);\n    var n = A.size;\n    // Find -1\n    var inferredIndex = shape.indexOf(-1);\n    if (inferredIndex !== -1) {\n        var known = shape.filter(function (dim) { return dim !== -1; }).reduce(function (acc, val) { return acc * val; }, 1);\n        if (n % known !== 0) {\n            throw new Error(\"Invalid shape. The total number of elements must match the product of the known dimensions.\");\n        }\n        shape[inferredIndex] = n / known;\n    }\n    else {\n        var m = shape.reduce(function (a, b) { return a * b; }, 1);\n        if (n !== m) {\n            throw new Error(\"Invalid target shape [\".concat(shape, \"] from source [\").concat(A.shape, \"]. Expected size \").concat(n, \". Found \").concat(m, \".\"));\n        }\n    }\n    return (0, _globals_1.new_NDArray)(A.flat, shape);\n}\nexports.reshape = reshape;\n;\nfunction ravel(A) {\n    A = (0, _globals_1.asarray)(A);\n    return (0, _globals_1.new_NDArray)(A.flat, [A.size]);\n}\nexports.ravel = ravel;\n;\n// ====================\n// Constructors\n// ====================\nfunction new_from(shape, f, dtype) {\n    if (f === void 0) { f = undefined; }\n    if (dtype === void 0) { dtype = Float32Array; }\n    shape = parse_shape(shape);\n    var size = shape.reduce(function (a, b) { return a * b; }, 1);\n    //@ts-ignore\n    var buffer = f === undefined ? new dtype(size) : dtype.from({ length: size }, f);\n    return (0, _globals_1.new_NDArray)(buffer, shape);\n}\nexports.new_from = new_from;\n;\nfunction empty(shape, dtype) {\n    if (dtype === void 0) { dtype = Float32Array; }\n    return new_from(shape, undefined, dtype);\n}\nexports.empty = empty;\n;\nfunction copy(A) {\n    return (0, _globals_1.new_NDArray)(A.dtype.from(A.flat), A.shape);\n}\nexports.copy = copy;\n","\"use strict\";\n//@ts-check\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.kw_funcs = exports.ops = exports.funcs = exports.elementwise = void 0;\nvar basic_1 = require(\"./basic\");\nvar kwargs_1 = require(\"./kwargs\");\nvar dtypes_1 = require(\"../dtypes\");\n// Here, we declare only the core functions (those that are methods)\nfunction elementwise(A, func, dtype, out) {\n    if (out === void 0) { out = null; }\n    A = (0, basic_1.asarray)(A);\n    //@ts-ignore\n    if (out)\n        dtype = out.dtype;\n    //@ts-ignore\n    var in_buffer = (0, dtypes_1.dtype_leq)(dtype, A.dtype) ? A.flat : (0, dtypes_1.new_buffer)(A.flat, dtype);\n    var out_buffer = in_buffer.map(func);\n    if (out) {\n        //@ts-ignore\n        out.flat = out_buffer;\n        return out;\n    }\n    return (0, basic_1.new_NDArray)(out_buffer, A.shape);\n}\nexports.elementwise = elementwise;\nfunction mk_elementwise(op, dtype) {\n    return function (A, out) {\n        if (out === void 0) { out = null; }\n        return elementwise(A, op, dtype, out);\n    };\n}\nexports.funcs = {\n    sign: mk_elementwise(Math.sign, Float64Array),\n    sqrt: mk_elementwise(Math.sqrt, Float64Array),\n    square: mk_elementwise(function (a) { return a * a; }, Float64Array),\n    exp: mk_elementwise(Math.exp, Float64Array),\n    log: mk_elementwise(Math.log, Float64Array),\n    log2: mk_elementwise(Math.log2, Float64Array),\n    log10: mk_elementwise(Math.log10, Float64Array),\n    log1p: mk_elementwise(Math.log1p, Float64Array),\n    sin: mk_elementwise(Math.sin, Float64Array),\n    cos: mk_elementwise(Math.cos, Float64Array),\n    tan: mk_elementwise(Math.tan, Float64Array),\n    asin: mk_elementwise(Math.asin, Float64Array),\n    acos: mk_elementwise(Math.acos, Float64Array),\n    atan: mk_elementwise(Math.atan, Float64Array),\n    cosh: mk_elementwise(Math.cosh, Float64Array),\n    sinh: mk_elementwise(Math.sinh, Float64Array),\n    tanh: mk_elementwise(Math.tanh, Float64Array),\n    acosh: mk_elementwise(Math.acosh, Float64Array),\n    asinh: mk_elementwise(Math.asinh, Float64Array),\n    atanh: mk_elementwise(Math.atanh, Float64Array),\n    floor: mk_elementwise(Math.floor, Float64Array),\n    ceil: mk_elementwise(Math.ceil, Float64Array),\n    isfinite: mk_elementwise(isFinite, Uint8Array),\n    isnan: mk_elementwise(isNaN, Uint8Array),\n    round: function round(arr, decimals, out) {\n        if (out === void 0) { out = null; }\n        if (decimals == 0)\n            elementwise(arr, Math.round, Float64Array, out);\n        return elementwise(arr, function (x) { return parseFloat(x.toFixed(decimals)); }, Float64Array, out);\n    },\n    negative: mk_elementwise(function (x) { return -x; }, Float64Array),\n    bitwise_not: mk_elementwise(function (x) { return ~x; }, Float64Array),\n    logical_not: mk_elementwise(function (x) { return !x; }, Uint8Array),\n    valueOf: mk_elementwise(function (x) { return +x; }, Float64Array),\n    abs: mk_elementwise(Math.abs, Float64Array),\n};\nexports.ops = __assign(__assign({}, exports.funcs), { \"~\": exports.funcs.bitwise_not, \"not\": exports.funcs.logical_not, \"+\": exports.funcs.valueOf, \"-\": exports.funcs.negative });\nexports.kw_funcs = {\n    sign: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.sign),\n    sqrt: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.sqrt),\n    square: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.square),\n    exp: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.exp),\n    log: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.log),\n    log2: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.log2),\n    log10: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.log10),\n    log1p: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.log1p),\n    sin: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.sin),\n    cos: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.cos),\n    tan: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.tan),\n    asin: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.asin),\n    acos: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.acos),\n    atan: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.atan),\n    cosh: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.cosh),\n    sinh: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.sinh),\n    tanh: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.tanh),\n    acosh: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.acosh),\n    asinh: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.asinh),\n    atanh: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.atanh),\n    floor: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.floor),\n    ceil: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.ceil),\n    negative: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.negative),\n    bitwise_not: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.bitwise_not),\n    logical_not: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.logical_not),\n    valueOf: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.valueOf),\n    abs: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.abs),\n    isfinite: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.isfinite),\n    isnan: kwargs_1.Func_a_out.defaultDecorator(exports.funcs.isnan),\n    round: kwargs_1.Func_a_decimals_out.defaultDecorator(exports.funcs.round),\n};\n","\"use strict\";\n//@ts-check\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.modules = void 0;\n// Import core-globals first!\nrequire(\"./_globals\");\nvar basic = require(\"./basic\");\nvar indexes = require(\"./indexes\");\nvar jsInterface = require(\"./js-interface\");\nvar elementwise = require(\"./elementwise\");\nvar print = require(\"./print\");\nvar reduce = require(\"./reduce\");\nvar operators = require(\"./operators\");\nvar transform = require(\"./transform\");\nexports.modules = {\n    basic: basic,\n    jsInterface: jsInterface,\n    indexes: indexes,\n    elementwise: elementwise,\n    print: print,\n    reduce: reduce,\n    operators: operators,\n    transform: transform,\n};\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AxisIndex = exports.__parse_sliceRange = exports.AxesIndex = exports.index = void 0;\n//@ts-check\nvar basic_1 = require(\"./basic\");\nvar dtypes_1 = require(\"../dtypes\");\nfunction index(arr, where) {\n    // This can result either in a value, a view, a copy.\n    // The index is simple if there are only ranges, numbers, \":\" and at most one \"...\"\n    // If index is simple, don't call \".indices\" and make view\n    // If index is advanced, get indices and make copy\n    var copy = false;\n    if (!((0, basic_1.isarray)(arr)))\n        throw new Error(\"Expected NDArray. Found \".concat(typeof arr, \": \").concat(arr));\n    var axesIndex = AxesIndex.prototype.parse(arr.shape, where);\n    if (axesIndex.isConstant && arr.shape.length == 1) {\n        var _a = __read(axesIndex.indices, 1), index_1 = _a[0];\n        return arr.flat[index_1];\n    }\n    else if (axesIndex.isSimple) {\n        var composition = __compose_simpleIndexes(arr._simpleIndexes, axesIndex);\n        var out = (0, basic_1.new_NDArray)(arr._flat, axesIndex.shape);\n        out._simpleIndexes = composition;\n        if (arr['__warnAssignments'])\n            out['__warnAssignments'] = true;\n        return copy ? out.copy() : out;\n    }\n    else {\n        var src_flat_1 = arr.flat;\n        var buffer = arr.dtype.from(axesIndex.indices.map(function (i) { return src_flat_1[i]; }));\n        var out = (0, basic_1.new_NDArray)(buffer, axesIndex.shape);\n        if (!copy)\n            out['__warnAssignments'] = true;\n        return out;\n    }\n}\nexports.index = index;\n// type SimpleIndexes = null | { size: number, ranges: { refSize: number, range: null | number | [number, number, number] }[], indices: null | number[] };\nvar AxesIndex = /** @class */ (function () {\n    /**\n     * @param {AxisIndex[]} axisIndexes\n     */\n    function AxesIndex(apparentShape, internalShape, axisIndexes) {\n        this.shape = apparentShape;\n        this.internalShape = internalShape;\n        this.axisIndexes = axisIndexes;\n        this._indices = null;\n        this._size = null;\n        this.isSimple = this.axisIndexes.map(function (idx) { return idx.isSimple; }).reduce(function (a, b) { return a && b; }, true);\n        this.isConstant = this.axisIndexes.map(function (idx) { return idx.isConstant; }).reduce(function (a, b) { return a && b; }, true);\n    }\n    Object.defineProperty(AxesIndex.prototype, \"indices\", {\n        get: function () {\n            if (this._indices)\n                return this._indices;\n            var indices = __slices_to_indices(this.internalShape, this.__slices);\n            return this._indices = indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AxesIndex.prototype, \"__slices\", {\n        get: function () {\n            return this.axisIndexes.map(function (idx) { return idx.indices; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AxesIndex.prototype, \"size\", {\n        get: function () {\n            if (this._size !== null)\n                return this._size;\n            return this._size = this.axisIndexes.map(function (idx) { return idx.size; }).reduce(function (a, b) { return a * b; }, 1);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AxesIndex;\n}());\nexports.AxesIndex = AxesIndex;\nfunction __compose_simpleIndexes(first, second) {\n    if (first == null)\n        return second;\n    var axisIndexes = [];\n    // console.log({ first, second })\n    var j = 0;\n    for (var i = 0; i < first.axisIndexes.length; i++) {\n        var specA = first.axisIndexes[i].spec;\n        var specB = second.axisIndexes[j].spec;\n        if (specA.type == \"array\")\n            throw new Error(\"Expected simple index. Found advanced: \".concat(specA.type));\n        if (specB.type == \"array\")\n            throw new Error(\"Expected simple index. Found advanced: \".concat(specB.type));\n        var spec = void 0;\n        if (specA.type == \"number\")\n            spec = specA;\n        else {\n            j++;\n            if (specA.type === false)\n                spec = specA;\n            else if (specB.type === false)\n                spec = specB;\n            else if (specA.type == \":\")\n                spec = specB;\n            else if (specB.type == \":\")\n                spec = specA;\n            else {\n                var _a = specA.range, startA = _a.start, stepA = _a.step, nStepsA = _a.nSteps;\n                if (specB.type == \"number\") {\n                    var index_2 = specB.index;\n                    if (index_2 < 0)\n                        index_2 = nStepsA + index_2;\n                    if (index_2 < 0 || index_2 >= nStepsA)\n                        throw new Error(\"Index \".concat(index_2, \" out of bounds [0..\").concat(nStepsA, \")\"));\n                    index_2 = startA + index_2 * stepA;\n                    spec = { type: \"number\", index: index_2 };\n                }\n                else {\n                    var _b = specB.range, startB = _b.start, stepB = _b.step, nStepsB = _b.nSteps;\n                    var sub = AxisIndex.prototype.parse_range(nStepsA, startB, startB + nStepsB * stepB, stepB);\n                    var step = sub.step * stepA;\n                    var start = startA + sub.start * step;\n                    var nSteps = sub.nSteps;\n                    spec = { type: \"range\", range: { start: start, step: step, nSteps: nSteps } };\n                }\n            }\n        }\n        axisIndexes.push(new AxisIndex(spec));\n    }\n    if (j < second.axisIndexes.length)\n        throw new Error(\"Index too long. Expected \".concat(j, \" axes. Found \").concat(second.axisIndexes.length));\n    var apparentShape = second.shape;\n    var internalShape = first.internalShape;\n    return new AxesIndex(apparentShape, internalShape, axisIndexes);\n}\n/**\n * Computes the indices wr to shape of the cartesian products of the slices.\n * We have shape.length==slices.length, and the elements in slices[axis] are\n * integers between 0 and shape[axis]-1\n * @param {number[]} shape\n * @param {number[][]} slices\n * @returns {number[]}\n */\nfunction __slices_to_indices(shape, slices) {\n    var e_1, _a;\n    try {\n        for (var slices_1 = __values(slices), slices_1_1 = slices_1.next(); !slices_1_1.done; slices_1_1 = slices_1.next()) {\n            var slice = slices_1_1.value;\n            if (slice.length == 0)\n                return [];\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (slices_1_1 && !slices_1_1.done && (_a = slices_1.return)) _a.call(slices_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var shifts = (0, basic_1.shape_shifts)(shape);\n    var iShifts = slices.map(function (indices, axis) {\n        // out[i] = How much does the cursor increase if we change from [...,indices[i],...] to [...,indices[(i+1)%n],...]\n        var out = [], n = indices.length;\n        for (var i = 0; i < n - 1; i++)\n            out.push(shifts[axis] * (indices[i + 1] - indices[i]));\n        out[n - 1] = shifts[axis] * (indices[0] - indices[n - 1]);\n        return out;\n    });\n    var indices = [];\n    var lastAxis = shape.length - 1;\n    var tuple = new Array(shape.length).fill(0);\n    var cursor = slices.map(function (l, i) { return l[tuple[i]] * shifts[i]; }).reduce(function (a, b) { return a + b; }, 0);\n    while (true) {\n        if (!isFinite(cursor))\n            throw new Error(\"Programming error\");\n        indices.push(cursor);\n        var axis = lastAxis;\n        while (axis >= 0) {\n            cursor += iShifts[axis][tuple[axis]++];\n            if (tuple[axis] < iShifts[axis].length)\n                break;\n            tuple[axis--] = 0; // Overflow\n        }\n        ;\n        if (axis < 0)\n            break;\n    }\n    return indices;\n}\n// =========================================\n//     Slicing\n// =========================================\nfunction __parse_sliceRange(axis_size, _a) {\n    var start = _a.start, stop = _a.stop, step = _a.step;\n    if (start == null)\n        start = 0;\n    else if (start < 0)\n        start = axis_size + start;\n    if (stop == null)\n        stop = axis_size;\n    else if (stop < 0)\n        stop = axis_size + stop;\n    if (step == null)\n        step = 1;\n    else if (step == 0)\n        throw new Error(\"Slice range with step size of zero\");\n    if (!isFinite(start) || !isFinite(stop) || !isFinite(step))\n        throw new Error(\"Invalid slice \".concat([start, stop, step], \". Axis size \").concat(axis_size));\n    var indices = [];\n    if (step > 0) {\n        start = Math.max(start, 0);\n        stop = Math.min(stop, axis_size);\n        for (var i = start; i < stop; i += step)\n            indices.push(i);\n    }\n    else {\n        stop = Math.max(stop, 0);\n        start = Math.min(start, axis_size);\n        for (var i = start; i > stop; i += step)\n            indices.push(i);\n    }\n    return indices;\n}\nexports.__parse_sliceRange = __parse_sliceRange;\nvar AxisIndex = /** @class */ (function () {\n    /**\n     * Invariant: Immutable\n     */\n    function AxisIndex(spec) {\n        this.spec = spec;\n        this._indices = null;\n        this.isSimple = (this.spec.type != \"array\");\n        this.isConstant = (this.spec.type == \"number\");\n    }\n    Object.defineProperty(AxisIndex.prototype, \"indices\", {\n        get: function () {\n            if (this._indices)\n                return this._indices;\n            var indices;\n            // if (this.spec.type == 'false') indices = []; else\n            if (this.spec.type === ':')\n                indices = Array.from({ length: this.spec.size }, function (_, i) { return i; });\n            else if (this.spec.type === \"number\")\n                indices = [this.spec.index];\n            else if (this.spec.type === \"array\")\n                indices = this.spec.indices;\n            else if (this.spec.type === false)\n                indices = [];\n            else if (this.spec.type == \"range\") {\n                var _a = this.spec.range, nSteps = _a.nSteps, step_1 = _a.step, start_1 = _a.start;\n                indices = Array.from({ length: nSteps }, function (_, i) { return start_1 + i * step_1; });\n            }\n            else\n                throw new Error(\"Unknown spec type \".concat(this.spec['type']));\n            return this._indices = indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AxisIndex.prototype, \"size\", {\n        get: function () {\n            if (this.spec.type === ':')\n                return this.spec.size;\n            else if (this.spec.type === \"number\")\n                return 1;\n            else if (this.spec.type === \"array\")\n                return this.spec.indices.length;\n            else if (this.spec.type == \"range\")\n                return this.spec.range.nSteps;\n            else if (this.spec.type === false)\n                return 0;\n            else\n                throw new Error(\"Unknown spec type \".concat(this.spec['type']));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AxisIndex;\n}());\nexports.AxisIndex = AxisIndex;\nAxisIndex.prototype.parse_range = function (size, start, stop, step) {\n    if (start === void 0) { start = null; }\n    if (stop === void 0) { stop = null; }\n    if (step === void 0) { step = null; }\n    if (step == null)\n        step = 1;\n    else if (step == 0)\n        throw new Error(\"Index specification error. Step must be different from zero.\");\n    /**\n     *  @param {number|null} i @param {number} ifNull @param {number} min @param {number} max */\n    var parse = function (i, ifNull, min, max) {\n        if (i == null)\n            return ifNull;\n        if (i < 0)\n            i = Math.max(0, size - i);\n        return Math.min(max, Math.max(min, i));\n    };\n    var nSteps;\n    if (step > 0)\n        start = parse(start, 0, 0, size - 1), stop = parse(stop, size, 0, size);\n    else\n        start = parse(start, size - 1, 0, size - 1), stop = parse(stop, size - 1, -1, size - 1);\n    stop = Math.max(stop, start);\n    nSteps = Math.floor(Math.abs(stop - start) / step);\n    return { start: start, step: step, nSteps: nSteps };\n};\n/**\n *\n * @param {string} rangeString\n * @returns {{start:(number|null), stop:(number|null), step:(number|null)}}\n */\nAxisIndex.prototype.parse_range_spec = function (rangeString) {\n    var numbers = rangeString.split(':').map(function (s) {\n        s = s.trim();\n        if (s == \"\")\n            return null;\n        var n = parseInt(s);\n        if (!Number.isInteger(n))\n            throw new Error(\"Wrong input. Slice index unrecognized: \".concat(s));\n        return n;\n    });\n    if (numbers.length == 0)\n        throw new Error('Unexpected empty index. Expected colons.');\n    if (numbers.length > 3)\n        throw new Error(\"Too many colons in index \".concat(rangeString));\n    var _a = __read(__spreadArray(__spreadArray([], __read(numbers), false), [null, null, null], false)), start = _a[0], stop = _a[1], step = _a[2], _ = _a.slice(3);\n    return { start: start, stop: stop, step: step };\n};\n/**\n * We are reading `indexSpec` and `shape` in parallel, in the reading direction readDir.\n * With respect to `shape` we are at the given `axis`.\n * With respect to `indexSpec`, we found `indexSpec`, which we should process.\n * @param {IndexSpec|undefined} indexSpec\n */\nAxisIndex.prototype.parse = function (indexSpec, size) {\n    /**\n     *\n     * span (virtual shape) matches shape unless there are boolean masks spanning\n     * over several axes/dimensions.\n     * For example, in `np.ones((2,3,4,5))[:, np.arange(12).reshape((3,4))>5, 1]`,\n     * the boolean mask is spanning over axes 1 and 2. In this case, the output should\n     * merge these axes, resulting in an a vShape of (2, 12, 5).\n     * The boolean mask is then converted to indices in the flattened merged axis.\n     */\n    var spec;\n    var span = 1;\n    if ((0, basic_1.isarray)(indexSpec) && indexSpec.shape.length == 0) {\n        // Unwrap scalar\n        //@ts-ignore\n        indexSpec = indexSpec.item();\n    }\n    if (indexSpec == ':' || indexSpec === undefined) {\n        spec = { type: ':', size: size };\n    }\n    else if (typeof indexSpec === \"number\") {\n        var index_3 = indexSpec;\n        if (index_3 < 0)\n            index_3 = size + index_3;\n        if (index_3 < 0 || index_3 >= size)\n            throw new Error(\"Index \".concat(index_3, \" out of bounds [0..\").concat(size, \")\"));\n        spec = { type: 'number', index: index_3 };\n    }\n    else if ((0, basic_1.isarray)(indexSpec) || Array.isArray(indexSpec)) {\n        var arr = (0, basic_1.asarray)(indexSpec);\n        var indices_1;\n        if ((0, dtypes_1.dtype_is_boolean)(arr.dtype)) {\n            // Boolean mask\n            indices_1 = [];\n            arr.flat.forEach(function (if_value, i) { return if_value && indices_1.push(i); });\n            // Next lines: the boolean mask spans over more than 1 axis\n            span = Math.max(1, arr.shape.length);\n            // Multiply the (possibly inverted) interval\n        }\n        else {\n            // Array of indices\n            indices_1 = arr.flat;\n            if (!(0, dtypes_1.dtype_is_integer)(arr.dtype) && arr.size > 0) {\n                // If the array is not integer, we should throw an error. Manual check\n                var new_indices = new Int32Array(indices_1);\n                if (new_indices.some(function (v, i) { return v != indices_1[i]; }))\n                    throw new Error(\"Expected 1D array of indices or nD array of booleans. \" +\n                        \"Found shape=\".concat(arr.shape, \" and dtype=\").concat(arr.dtype));\n                indices_1 = new_indices;\n            }\n        }\n        spec = { type: \"array\", indices: indices_1 };\n    }\n    else if (typeof indexSpec == \"string\") {\n        var _a = AxisIndex.prototype.parse_range_spec(indexSpec), start = _a.start, stop_1 = _a.stop, step = _a.step;\n        var range = AxisIndex.prototype.parse_range(size, start, stop_1, step);\n        if (range.start == 0 && range.nSteps == size && range.step == 1) {\n            // Small optimization: all of these are just \":\": [\"::\",\"0::1\", \":axisSize:\", etc.]\n            spec = { type: ':', size: size };\n        }\n        else {\n            spec = { type: 'range', range: range };\n        }\n    }\n    // else if (typeof indexSpec == \"boolean\" && indexSpec === false) spec = { type: 'false' };\n    else\n        throw new Error(\"Unknown index type. Found \".concat(typeof indexSpec, \": \").concat(indexSpec));\n    var axisIndex = new AxisIndex(spec);\n    return { axisIndex: axisIndex, span: span };\n};\nAxesIndex.prototype.parse = function (shape, where) {\n    var _where = where == null ? [] : __spreadArray([], __read(where), false);\n    var buffers = {\n        axisIndexes: [],\n        apparentShape: [],\n        internalShape: [],\n    };\n    var readDir = 1;\n    var reversedAfter = { axisIndexes: NaN, apparentShape: NaN, internalShape: NaN };\n    var axis = 0, j = 0, remainingAxes = shape.length, remainingWhere = _where.length;\n    while (remainingWhere > 0 || remainingAxes > 0) {\n        var axisWhere = _where[j];\n        if (remainingWhere > 0) {\n            if (j < 0 || j >= _where.length)\n                axisWhere = \":\";\n            remainingWhere--;\n            //else _where[j] = undefined; // For ellipsis to avoid reading twice in opposite reading directions\n            j += readDir;\n            if (axisWhere == \"None\" || axisWhere === null || axisWhere === true) {\n                buffers.apparentShape.push(1);\n                continue;\n            }\n            else if (axisWhere === false) {\n                buffers.apparentShape.push(0);\n                continue;\n            }\n            else if (axisWhere == \"...\") {\n                if (readDir == -1)\n                    throw new Error(\"Index can only have a single ellipsis. Found index(\".concat(where, \")\"));\n                readDir = -1;\n                for (var key in reversedAfter)\n                    reversedAfter[key] = buffers[key].length;\n                j = _where.length - 1;\n                axis = shape.length - 1;\n                continue;\n            }\n        }\n        else {\n            axisWhere = \":\"; // If there are no more axes, fill with \":\"\n        }\n        // if (remainingAxes <= 0) throw Error(`Too many axes`);\n        var _a = AxisIndex.prototype.parse(axisWhere, shape[axis]), axisIndex = _a.axisIndex, span = _a.span;\n        // Advance the axis cursor span axes in readDir and compute the total size of consumed axes\n        remainingAxes -= span;\n        var refSize = 1;\n        for (var i = 0; i < span; i++) {\n            if (axis < 0 || axis >= shape.length)\n                throw new Error(\"Index where=\".concat(JSON.stringify(where), \" spans over more dimensions than available in shape=\").concat(JSON.stringify(shape)));\n            refSize *= shape[axis];\n            axis += readDir;\n        }\n        buffers.axisIndexes.push(axisIndex);\n        if (axisIndex.spec.type != \"number\")\n            buffers.apparentShape.push(axisIndex.size);\n        buffers.internalShape.push(refSize);\n    }\n    if (readDir == -1) { // reverse the right to left elements\n        for (var key in buffers)\n            buffers[key].splice(0, reversedAfter[key]).concat(buffers[key].reverse());\n    }\n    var axesIndex = new AxesIndex(buffers.apparentShape, buffers.internalShape, buffers.axisIndexes);\n    return axesIndex;\n};\n","\"use strict\";\n//@ts-check\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tolist = exports.fromlist = void 0;\nvar basic_1 = require(\"./basic\");\nfunction fromlist(arr, dtype) {\n    if (dtype === void 0) { dtype = Float64Array; }\n    if ((0, basic_1.isarray)(arr))\n        return arr;\n    if (typeof arr === \"number\")\n        return (0, basic_1.new_NDArray)(new Float32Array([arr]), []);\n    if (typeof arr === \"boolean\")\n        return (0, basic_1.new_NDArray)(new Uint8Array([arr ? 1 : 0]), []);\n    if (arr === basic_1._NDArray.prototype)\n        throw new Error(\"Programming error\");\n    if (!Array.isArray(arr))\n        throw new Error(\"Can't parse input of type \".concat(typeof arr, \": \").concat(arr));\n    var shape = [];\n    var root = arr;\n    while (Array.isArray(root)) {\n        shape.push(root.length);\n        root = root[0];\n        if (shape.length > 256)\n            throw new Error(\"Circular reference or excessive array depth\");\n    }\n    var flat = [];\n    var pushToFlat = function (arr, axis) {\n        var e_1, _a, e_2, _b;\n        // Check consistency\n        if (axis == shape.length - 1) {\n            try {\n                for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n                    var elem = arr_1_1.value;\n                    if (Array.isArray(elem))\n                        throw new Error(\"Inconsistent shape\");\n                    flat.push(elem);\n                    // Update dtype\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        else {\n            if (!Array.isArray(arr))\n                throw new Error(\"Inconsistent shape\");\n            try {\n                for (var arr_2 = __values(arr), arr_2_1 = arr_2.next(); !arr_2_1.done; arr_2_1 = arr_2.next()) {\n                    var sub = arr_2_1.value;\n                    if (sub.length != shape[axis + 1])\n                        throw new Error(\"Inconsistent shape: found sibling arrays of lengths \".concat(sub.length, \" and \").concat(shape[axis + 1]));\n                    pushToFlat(sub, axis + 1);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (arr_2_1 && !arr_2_1.done && (_b = arr_2.return)) _b.call(arr_2);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n    };\n    pushToFlat(arr, 0);\n    var buffer = new dtype(flat);\n    return (0, basic_1.new_NDArray)(buffer, shape);\n}\nexports.fromlist = fromlist;\nfunction tolist(arr) {\n    if ((0, basic_1.isarray)(this))\n        return tolist;\n    if (arr === null || typeof arr == \"number\" || typeof arr == \"boolean\")\n        return arr;\n    if (Array.isArray(arr))\n        return arr.map(tolist);\n    if (!((0, basic_1.isarray)(arr)))\n        throw new Error(\"Expected MyArray. Got \".concat(typeof arr, \": \").concat(arr));\n    arr = (0, basic_1.number_collapse)(arr);\n    if (!((0, basic_1.isarray)(arr)))\n        return arr;\n    // let out = [], top;\n    // let q = /**@type {[MyArray, any][]}*/([[arr, out]])\n    // while (top = q.pop()) {\n    //   let [arr, out] = top;\n    //   if (arr.shape.length <= 1) {\n    //     out.push(...arr.flat);\n    //   } else {\n    //     for (let i = 0; i < arr.shape[0]; i++) {\n    //       let l = []\n    //       out.push(l);\n    //       q.push([arr.index(i), l]);\n    //     }\n    //   }\n    // }\n    // return out;\n    function recursiveReshape(flatArr, shapeArr) {\n        if (shapeArr.length === 0) {\n            return flatArr.shift();\n        }\n        var innerShape = shapeArr.slice(1);\n        var outerSize = shapeArr[0];\n        var innerArray = [];\n        for (var i = 0; i < outerSize; i++) {\n            innerArray.push(recursiveReshape(flatArr, innerShape));\n        }\n        return innerArray;\n    }\n    var out = recursiveReshape(__spreadArray([], __read(arr.flat), false), arr.shape);\n    return out;\n}\nexports.tolist = tolist;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Func_y_x_out = exports.Method_a_axis_ddof_keepdims = exports.Func_a_axis_ddof_keepdims = exports.Method_a_ord_axis_keepdims = exports.Func_a_ord_axis_keepdims = exports.Method_a_axis_keepdims = exports.Func_a_axis_keepdims = exports.Method_values_where = exports.Func_a_values_where = exports.Method_other_out = exports.Func_a_other_out = exports.Method_a_decimals_out = exports.Func_a_decimals_out = exports.Method_out = exports.Func_a_out = exports.Func_a_lastAxis = exports.Func_a_q_axis = exports.kwargs_decorator = void 0;\nvar _globals_1 = require(\"./_globals\");\nfunction kwargs_decorator(_a) {\n    var defaults = _a.defaults, implementation = _a.implementation, parsers = _a.parsers, this_as_first_arg = _a.this_as_first_arg;\n    var kwParser = kwargs_parser.apply(void 0, __spreadArray([defaults], __read(parsers), false));\n    return (function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        //@ts-ignore\n        if (this_as_first_arg)\n            args = __spreadArray([this], __read(args), false);\n        var parsedArgs = kwParser(args);\n        var out = implementation.apply(void 0, __spreadArray([], __read(parsedArgs), false));\n        if ((0, _globals_1.isarray)(out) && out.shape.length == 0)\n            return out.flat[0];\n        return out;\n    });\n}\nexports.kwargs_decorator = kwargs_decorator;\nfunction kwargs_parser(defaults) {\n    var parsers = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        parsers[_i - 1] = arguments[_i];\n    }\n    var spreadKey = null;\n    var last = defaults.length && defaults.slice(-1)[0];\n    if (last && last[0].startsWith('...')) {\n        spreadKey = last[0] = last[0].slice(3);\n    }\n    var defaultsDict = Object.assign(Object.fromEntries(defaults));\n    var validKwargsNames = Object.fromEntries(defaults.map(function (_a) {\n        var _b = __read(_a, 1), key = _b[0];\n        return [key, true];\n    }));\n    var shorten = function (s) {\n        s = JSON.stringify(s);\n        // s = s.toString();\n        return s.length > 100 ? s.slice(0, 100) + '...' : s;\n    };\n    return function (args) {\n        var e_1, _a;\n        var kwargs = {};\n        if (spreadKey)\n            kwargs[spreadKey] = __spreadArray([], __read(defaultsDict[spreadKey]), false); // copy\n        for (var i = 0; i < args.length; i++) {\n            var value = args[i];\n            if (value instanceof Object && !(0, _globals_1.isarray)(value) && !Array.isArray(value)) {\n                for (var key in value) {\n                    if (key == spreadKey)\n                        kwargs[key].push(value[key]);\n                    else {\n                        if (key in kwargs)\n                            throw new Error(\"Duplicate argument \".concat(key, \" in \").concat(shorten(args)));\n                        if (!validKwargsNames[key])\n                            throw new Error(\"Invalid argument \".concat(key, \" in \").concat(shorten(args)));\n                        kwargs[key] = value[key];\n                    }\n                }\n            }\n            else if (value !== undefined) {\n                if (spreadKey && i >= defaults.length - 1)\n                    kwargs[spreadKey].push(value);\n                else if (i < defaults.length) {\n                    var key = defaults[i][0];\n                    if (key in kwargs)\n                        throw new Error(\"Duplicate argument \".concat(key, \" in \").concat(shorten(args)));\n                    if (!validKwargsNames[key])\n                        throw new Error(\"Invalid argument \".concat(key, \" in \").concat(shorten(args)));\n                    kwargs[key] = value;\n                }\n                else\n                    throw new Error(\"Too many arguments \".concat(shorten(args)));\n            }\n        }\n        for (var key in defaultsDict) {\n            if (!(key in kwargs))\n                kwargs[key] = defaultsDict[key];\n            if (kwargs[key] === undefined) {\n                throw new Error(\"Missing argument \".concat(key, \" in \").concat(shorten(args), \". Found only \").concat(JSON.stringify(Object.keys(args))));\n            }\n        }\n        try {\n            for (var parsers_1 = __values(parsers), parsers_1_1 = parsers_1.next(); !parsers_1_1.done; parsers_1_1 = parsers_1.next()) {\n                var parser = parsers_1_1.value;\n                parser(kwargs);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (parsers_1_1 && !parsers_1_1.done && (_a = parsers_1.return)) _a.call(parsers_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var sortedArgs = defaults.map(function (_a) {\n            var _b = __read(_a, 1), key = _b[0];\n            return kwargs[key];\n        });\n        return sortedArgs;\n    };\n}\nvar frequently_used_parsers = {\n    'a': function (kwargs) { kwargs.a = (0, _globals_1.asarray)(kwargs.a); },\n    'a_axis': function (kwargs) {\n        kwargs.a = (0, _globals_1.asarray)(kwargs.a);\n        if (kwargs.axis == null) {\n            kwargs.axis = -1;\n        }\n        var ndims = kwargs.a.shape.length;\n        if (kwargs.axis + ndims < 0 || kwargs.axis >= ndims) {\n            throw new Error(\"Invalid axis \".concat(kwargs.axis, \" for array of shape \").concat(JSON.stringify(kwargs.a.shape)));\n        }\n        if (kwargs.axis < 0) {\n            kwargs.axis += ndims;\n        }\n    },\n    'a_axis_flatten': function (kwargs) {\n        kwargs.a = (0, _globals_1.asarray)(kwargs.a);\n        if (kwargs.axis == null) {\n            // flatten\n            kwargs.a = kwargs.a.reshape(-1);\n            kwargs.axis = -1;\n        }\n        var ndims = kwargs.a.shape.length;\n        if (kwargs.axis + ndims < 0 || kwargs.axis >= ndims) {\n            throw new Error(\"Invalid axis \".concat(kwargs.axis, \" for array of shape \").concat(JSON.stringify(kwargs.a.shape)));\n        }\n        if (kwargs.axis < 0) {\n            kwargs.axis += ndims;\n        }\n    },\n    'keepdims': function (kwargs) { kwargs.keepdims = !!kwargs.keepdims; },\n    'isarray_or_null': function (key) { return function (kwargs) {\n        if (kwargs[key] != null && !(0, _globals_1.isarray)(kwargs[key])) {\n            throw new Error(\"Invalid \\\"\".concat(key, \"\\\" argument. Expected NDArray. Found type \").concat(typeof kwargs[key], \" (\").concat(kwargs[key].prototype, \")\"));\n        }\n    }; },\n    'asarray': function (key) { return function (kwargs) {\n        kwargs[key] = (0, _globals_1.asarray)(kwargs[key]);\n    }; },\n    'isarray': function (key) { return function (kwargs) {\n        if (!(0, _globals_1.isarray)(kwargs[key])) {\n            throw new Error(\"Invalid \\\"\".concat(key, \"\\\" argument. Expected NDArray. Found type \").concat(typeof kwargs[key], \" (\").concat(kwargs[key].prototype, \")\"));\n        }\n    }; },\n    'is_integer_non_neg': function (key) { return function (kwargs) {\n        if (typeof kwargs[key] !== 'number' || kwargs[key] < 0 || kwargs[key] % 1 !== 0) {\n            throw new Error(\"Invalid \\\"\".concat(key, \"\\\" argument. Expected non-negative integer. Found \").concat(kwargs[key]));\n        }\n    }; },\n    'is_pnorm': function (key) { return function (kwargs) {\n        if (typeof kwargs[key] !== 'number' || kwargs[key] <= 0) {\n            throw new Error(\"Invalid \\\"\".concat(key, \"\\\" argument. Expected non-negative integer. Found \").concat(kwargs[key]));\n        }\n    }; }\n};\n// Used in statistics.ts:\nvar Func_a_q_axis;\n(function (Func_a_q_axis) {\n    Func_a_q_axis.decorator = (kwargs_decorator);\n    Func_a_q_axis.defaults = [[\"a\", undefined], [\"q\", undefined], [\"axis\", null]];\n    Func_a_q_axis.parsers = [\n        frequently_used_parsers.a_axis_flatten,\n        function (kwargs) { kwargs.q = (0, _globals_1.asarray)(kwargs.q); },\n    ];\n    Func_a_q_axis.defaultDecorator = function (implementation) { return Func_a_q_axis.decorator({\n        defaults: Func_a_q_axis.defaults,\n        implementation: implementation,\n        parsers: Func_a_q_axis.parsers\n    }); };\n})(Func_a_q_axis || (exports.Func_a_q_axis = Func_a_q_axis = {}));\n// Used by sort:\nvar Func_a_lastAxis;\n(function (Func_a_lastAxis) {\n    Func_a_lastAxis.decorator = (kwargs_decorator);\n    Func_a_lastAxis.defaults = [[\"a\", undefined], [\"axis\", -1]];\n    Func_a_lastAxis.parsers = [\n        frequently_used_parsers['a_axis'],\n    ];\n    Func_a_lastAxis.defaultDecorator = function (implementation) { return Func_a_lastAxis.decorator({\n        defaults: Func_a_lastAxis.defaults,\n        implementation: implementation,\n        parsers: Func_a_lastAxis.parsers\n    }); };\n})(Func_a_lastAxis || (exports.Func_a_lastAxis = Func_a_lastAxis = {}));\n// Used by elementwise operators and methods:\nvar Func_a_out;\n(function (Func_a_out) {\n    Func_a_out.decorator = (kwargs_decorator);\n    Func_a_out.defaults = [[\"a\", undefined], [\"out\", null]];\n    Func_a_out.parsers = [\n        frequently_used_parsers.asarray('a'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    Func_a_out.defaultDecorator = function (implementation) { return Func_a_out.decorator({\n        defaults: Func_a_out.defaults,\n        implementation: implementation,\n        parsers: Func_a_out.parsers\n    }); };\n})(Func_a_out || (exports.Func_a_out = Func_a_out = {}));\nvar Method_out;\n(function (Method_out) {\n    Method_out.defaults = [[\"a\", undefined], [\"out\", null]];\n    Method_out.parsers = [\n        frequently_used_parsers.isarray('a'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Method_out.defaults,\n            implementation: implementation,\n            parsers: Method_out.parsers,\n            this_as_first_arg: true,\n        });\n    }\n    Method_out.defaultDecorator = defaultDecorator;\n})(Method_out || (exports.Method_out = Method_out = {}));\n// Used by round\nvar Func_a_decimals_out;\n(function (Func_a_decimals_out) {\n    Func_a_decimals_out.decorator = (kwargs_decorator);\n    Func_a_decimals_out.defaults = [[\"a\", undefined], [\"decimals\", 0], [\"out\", null]];\n    Func_a_decimals_out.parsers = [\n        frequently_used_parsers.asarray('a'),\n        frequently_used_parsers.is_integer_non_neg('decimals'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    Func_a_decimals_out.defaultDecorator = function (implementation) { return Func_a_decimals_out.decorator({\n        defaults: Func_a_decimals_out.defaults,\n        implementation: implementation,\n        parsers: Func_a_decimals_out.parsers\n    }); };\n})(Func_a_decimals_out || (exports.Func_a_decimals_out = Func_a_decimals_out = {}));\nvar Method_a_decimals_out;\n(function (Method_a_decimals_out) {\n    Method_a_decimals_out.decorator = (kwargs_decorator);\n    Method_a_decimals_out.defaults = [[\"a\", undefined], [\"decimals\", 0], [\"out\", null]];\n    Method_a_decimals_out.parsers = [\n        frequently_used_parsers.isarray('a'),\n        frequently_used_parsers.is_integer_non_neg('decimals'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    Method_a_decimals_out.defaultDecorator = function (implementation) { return Method_a_decimals_out.decorator({\n        defaults: Method_a_decimals_out.defaults,\n        implementation: implementation,\n        parsers: Method_a_decimals_out.parsers,\n        this_as_first_arg: true,\n    }); };\n})(Method_a_decimals_out || (exports.Method_a_decimals_out = Method_a_decimals_out = {}));\n// Used by binary operators and methods:\nvar Func_a_other_out;\n(function (Func_a_other_out) {\n    Func_a_other_out.decorator = (kwargs_decorator);\n    Func_a_other_out.defaults = [[\"a\", undefined], [\"other\", undefined], [\"out\", null]];\n    Func_a_other_out.parsers = [\n        frequently_used_parsers.asarray('a'),\n        frequently_used_parsers.asarray('other'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    Func_a_other_out.defaultDecorator = function (implementation) { return Func_a_other_out.decorator({\n        defaults: Func_a_other_out.defaults,\n        implementation: implementation,\n        parsers: Func_a_other_out.parsers\n    }); };\n})(Func_a_other_out || (exports.Func_a_other_out = Func_a_other_out = {}));\nvar Method_other_out;\n(function (Method_other_out) {\n    Method_other_out.defaults = [[\"a\", undefined], [\"other\", undefined], [\"out\", null]];\n    Method_other_out.parsers = [\n        frequently_used_parsers.isarray('a'),\n        frequently_used_parsers.asarray('other'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Method_other_out.defaults,\n            implementation: implementation,\n            parsers: Method_other_out.parsers,\n            this_as_first_arg: true,\n        });\n    }\n    Method_other_out.defaultDecorator = defaultDecorator;\n})(Method_other_out || (exports.Method_other_out = Method_other_out = {}));\n// Used by assign operators and methods:\nvar Func_a_values_where;\n(function (Func_a_values_where) {\n    Func_a_values_where.decorator = (kwargs_decorator);\n    Func_a_values_where.defaults = [[\"a\", undefined], [\"values\", undefined], [\"...where\", null]];\n    Func_a_values_where.parsers = [\n        frequently_used_parsers.asarray('a'),\n        frequently_used_parsers.asarray('values'),\n    ];\n    Func_a_values_where.defaultDecorator = function (implementation) { return Func_a_values_where.decorator({\n        defaults: Func_a_values_where.defaults,\n        implementation: implementation,\n        parsers: Func_a_values_where.parsers\n    }); };\n})(Func_a_values_where || (exports.Func_a_values_where = Func_a_values_where = {}));\nvar Method_values_where;\n(function (Method_values_where) {\n    Method_values_where.decorator = (kwargs_decorator);\n    Method_values_where.defaults = [[\"a\", undefined], [\"values\", undefined], [\"...where\", null]];\n    Method_values_where.parsers = [\n        frequently_used_parsers.isarray('a'),\n        frequently_used_parsers.asarray('values'),\n    ];\n    Method_values_where.defaultDecorator = function (implementation) { return Method_values_where.decorator({\n        defaults: Method_values_where.defaults,\n        implementation: implementation,\n        parsers: Method_values_where.parsers,\n        this_as_first_arg: true,\n    }); };\n})(Method_values_where || (exports.Method_values_where = Method_values_where = {}));\n// Used by reduce functions and methods:\nvar Func_a_axis_keepdims;\n(function (Func_a_axis_keepdims) {\n    Func_a_axis_keepdims.decorator = (kwargs_decorator);\n    Func_a_axis_keepdims.defaults = [[\"a\", undefined], [\"axis\", null], [\"keepdims\", false]];\n    Func_a_axis_keepdims.parsers = [\n        frequently_used_parsers.a_axis_flatten,\n    ];\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Func_a_axis_keepdims.defaults,\n            implementation: implementation,\n            parsers: Func_a_axis_keepdims.parsers\n        });\n    }\n    Func_a_axis_keepdims.defaultDecorator = defaultDecorator;\n})(Func_a_axis_keepdims || (exports.Func_a_axis_keepdims = Func_a_axis_keepdims = {}));\nvar Method_a_axis_keepdims;\n(function (Method_a_axis_keepdims) {\n    Method_a_axis_keepdims.decorator = (kwargs_decorator);\n    Method_a_axis_keepdims.defaults = [[\"a\", undefined], [\"axis\", null], [\"keepdims\", false]];\n    Method_a_axis_keepdims.parsers = [\n        frequently_used_parsers.isarray('a'),\n        frequently_used_parsers.a_axis_flatten,\n    ];\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Method_a_axis_keepdims.defaults,\n            implementation: implementation,\n            parsers: Method_a_axis_keepdims.parsers,\n            this_as_first_arg: true,\n        });\n    }\n    Method_a_axis_keepdims.defaultDecorator = defaultDecorator;\n})(Method_a_axis_keepdims || (exports.Method_a_axis_keepdims = Method_a_axis_keepdims = {}));\n// For norm:\nvar Func_a_ord_axis_keepdims;\n(function (Func_a_ord_axis_keepdims) {\n    Func_a_ord_axis_keepdims.decorator = (kwargs_decorator);\n    Func_a_ord_axis_keepdims.defaults = [[\"a\", undefined], [\"ord\", 2], [\"axis\", null], [\"keepdims\", false]];\n    Func_a_ord_axis_keepdims.parsers = [\n        frequently_used_parsers.a_axis_flatten,\n        frequently_used_parsers.is_pnorm('ord'),\n    ];\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Func_a_ord_axis_keepdims.defaults,\n            implementation: implementation,\n            parsers: Func_a_ord_axis_keepdims.parsers,\n        });\n    }\n    Func_a_ord_axis_keepdims.defaultDecorator = defaultDecorator;\n})(Func_a_ord_axis_keepdims || (exports.Func_a_ord_axis_keepdims = Func_a_ord_axis_keepdims = {}));\nvar Method_a_ord_axis_keepdims;\n(function (Method_a_ord_axis_keepdims) {\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Func_a_ord_axis_keepdims.defaults,\n            parsers: Func_a_ord_axis_keepdims.parsers,\n            implementation: implementation,\n            this_as_first_arg: true,\n        });\n    }\n    Method_a_ord_axis_keepdims.defaultDecorator = defaultDecorator;\n})(Method_a_ord_axis_keepdims || (exports.Method_a_ord_axis_keepdims = Method_a_ord_axis_keepdims = {}));\n// For std:\nvar Func_a_axis_ddof_keepdims;\n(function (Func_a_axis_ddof_keepdims) {\n    Func_a_axis_ddof_keepdims.decorator = (kwargs_decorator);\n    Func_a_axis_ddof_keepdims.defaults = [[\"a\", undefined], [\"ddof\", 0], [\"axis\", null], [\"keepdims\", false]];\n    Func_a_axis_ddof_keepdims.parsers = [\n        frequently_used_parsers.a_axis_flatten,\n        frequently_used_parsers.is_integer_non_neg('ddof'),\n    ];\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Func_a_axis_ddof_keepdims.defaults,\n            implementation: implementation,\n            parsers: Func_a_axis_ddof_keepdims.parsers,\n        });\n    }\n    Func_a_axis_ddof_keepdims.defaultDecorator = defaultDecorator;\n})(Func_a_axis_ddof_keepdims || (exports.Func_a_axis_ddof_keepdims = Func_a_axis_ddof_keepdims = {}));\nvar Method_a_axis_ddof_keepdims;\n(function (Method_a_axis_ddof_keepdims) {\n    function defaultDecorator(implementation) {\n        return kwargs_decorator({\n            defaults: Func_a_axis_ddof_keepdims.defaults,\n            parsers: Func_a_axis_ddof_keepdims.parsers,\n            implementation: implementation,\n            this_as_first_arg: true,\n        });\n    }\n    Method_a_axis_ddof_keepdims.defaultDecorator = defaultDecorator;\n})(Method_a_axis_ddof_keepdims || (exports.Method_a_axis_ddof_keepdims = Method_a_axis_ddof_keepdims = {}));\n// Used by atan2:\nvar Func_y_x_out;\n(function (Func_y_x_out) {\n    Func_y_x_out.decorator = (kwargs_decorator);\n    Func_y_x_out.defaults = [[\"x\", undefined], [\"y\", undefined], [\"out\", null]];\n    Func_y_x_out.parsers = [\n        frequently_used_parsers.asarray('x'),\n        frequently_used_parsers.asarray('y'),\n        frequently_used_parsers.isarray_or_null('out'),\n    ];\n    Func_y_x_out.defaultDecorator = function (implementation) { return Func_y_x_out.decorator({\n        defaults: Func_y_x_out.defaults,\n        implementation: implementation,\n        parsers: Func_y_x_out.parsers\n    }); };\n})(Func_y_x_out || (exports.Func_y_x_out = Func_y_x_out = {}));\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.n_ary_operation = exports.atan2 = exports.allclose = exports.isclose = exports.op_assign = exports.__make_assignment_operator = exports._assign_operation_toJS = exports.assign_operation = exports.op_binary = exports.__make_operator = exports.binary_operation = void 0;\n//@ts-check\nvar indexes = require(\"./indexes\");\nvar basic_1 = require(\"./basic\");\nvar js_interface_1 = require(\"./js-interface\");\nvar kwargs_1 = require(\"./kwargs\");\nvar utils_js_1 = require(\"../utils-js\");\nvar transform_1 = require(\"./transform\");\nvar _globals_1 = require(\"./_globals\");\nvar dtypes_1 = require(\"../dtypes\");\nfunction binary_operation(A, B, func, dtype, out) {\n    if (out === void 0) { out = null; }\n    if ((0, basic_1.isarray)(this))\n        return func.bind(basic_1._NDArray.prototype).apply(void 0, __spreadArray([this], __read(arguments), false));\n    // Find output shape and input broadcast shapes\n    A = (0, basic_1.asarray)(A);\n    B = (0, basic_1.asarray)(B);\n    var _a = __read((0, _globals_1.broadcast_shapes)(A.shape, B.shape), 3), shape = _a[0], shapeA = _a[1], shapeB = _a[2];\n    //@ts-ignore\n    if (out)\n        dtype = out.dtype;\n    //@ts-ignore\n    if (out == null)\n        out = (0, basic_1.new_from)(shape, undefined, dtype);\n    else if (!((0, basic_1.isarray)(out)))\n        throw new Error(\"Out must be of type \".concat(basic_1._NDArray, \". Got \").concat(typeof out));\n    // Iterate with broadcasted indices\n    var flatOut = [];\n    var shiftsA = (0, basic_1.shape_shifts)(shapeA);\n    var shiftsB = (0, basic_1.shape_shifts)(shapeB);\n    var flatA = A.flat;\n    var flatB = B.flat;\n    for (var i = 0; i < out.size; i++) {\n        var idxA = 0, idxB = 0, idx = i;\n        for (var axis = shape.length - 1; axis >= 0; axis--) {\n            idxA += shiftsA[axis] * (idx % shapeA[axis]);\n            idxB += shiftsB[axis] * (idx % shapeB[axis]);\n            idx = Math.floor(idx / shape[axis]);\n        }\n        flatOut.push(func(flatA[idxA], flatB[idxB]));\n    }\n    ;\n    out.flat = (0, dtypes_1.new_buffer)(flatOut, dtype);\n    return out;\n}\nexports.binary_operation = binary_operation;\nfunction __make_operator(dtype, func) {\n    function operator(A, B, out) {\n        if (out === void 0) { out = null; }\n        return binary_operation(A, B, func, dtype, out);\n    }\n    ;\n    //@ts-ignore\n    return operator;\n}\nexports.__make_operator = __make_operator;\nexports.op_binary = {\n    \"+\": __make_operator(Float64Array, function (a, b) { return a + b; }),\n    \"-\": __make_operator(Float64Array, function (a, b) { return a - b; }),\n    \"*\": __make_operator(Float64Array, function (a, b) { return a * b; }),\n    \"/\": __make_operator(Float64Array, function (a, b) { return a / b; }),\n    \"%\": __make_operator(Float64Array, function (a, b) { return (a % b); }),\n    \"|\": __make_operator(Float64Array, function (a, b) { return a | b; }),\n    \"&\": __make_operator(Float64Array, function (a, b) { return a & b; }),\n    \"^\": __make_operator(Float64Array, function (a, b) { return a ^ b; }),\n    \"<<\": __make_operator(Float64Array, function (a, b) { return a << b; }),\n    \">>\": __make_operator(Float64Array, function (a, b) { return a >> b; }),\n    \"**\": __make_operator(Float64Array, function (a, b) { return Math.pow(a, b); }),\n    \"//\": __make_operator(Float64Array, function (a, b) { return Math.floor(a / b); }),\n    \"<\": __make_operator(Uint8Array, function (a, b) { return a < b; }),\n    \">\": __make_operator(Uint8Array, function (a, b) { return a > b; }),\n    \">=\": __make_operator(Uint8Array, function (a, b) { return a >= b; }),\n    \"<=\": __make_operator(Uint8Array, function (a, b) { return a <= b; }),\n    \"==\": __make_operator(Uint8Array, function (a, b) { return a == b; }),\n    \"!=\": __make_operator(Uint8Array, function (a, b) { return a != b; }),\n    // Operators with custom ascii identifiers:\n    \"or\": __make_operator(Uint8Array, function (a, b) { return a || b; }),\n    \"and\": __make_operator(Uint8Array, function (a, b) { return a && b; }),\n    \"xor\": __make_operator(Uint8Array, function (a, b) { return (!a) != (!b); }),\n    \"max\": __make_operator(Float64Array, function (a, b) { return Math.max(a, b); }),\n    \"min\": __make_operator(Float64Array, function (a, b) { return Math.min(a, b); }),\n    // \"approx\": ,\n};\nexports.op_binary[\"\"] = exports.op_binary[\"max\"];\nexports.op_binary[\"\"] = exports.op_binary[\"min\"];\nexports.op_binary[\"\"] = exports.op_binary[\"leq\"];\nexports.op_binary[\"\"] = exports.op_binary[\"geq\"];\nexports.op_binary[\"\"] = exports.op_binary[\"neq\"];\nfunction assign_operation(tgt, src, where, func) {\n    if (tgt['__warnAssignment']) {\n        console.warn(\"Warning: You are assigning on a copy that resulted from an advanced index on a source array.\\nIf this is intentional, use yourArray = source.withKwArgs({copy:true}).index(...yourIndex) to make explicit your awareness of the copy operation.\\nInstead, if you want to assign to the source array, use source.op('=', other) or source.op(['::3', -1, '...', [5,4]], '*=', other).\\n\");\n        delete tgt['__warnAssignment'];\n    }\n    if (!((0, basic_1.isarray)(tgt))) {\n        return _assign_operation_toJS(tgt, src, where, func);\n    }\n    if (!where) {\n        binary_operation(tgt, src, func, tgt.dtype, tgt);\n    }\n    else {\n        src = (0, basic_1.asarray)(src);\n        var indices = indexes.AxesIndex.prototype.parse(tgt.shape, where).indices;\n        var tmpTgt = void 0;\n        if (func == null) {\n            // Small optimization: unlike \"+=\", \"*=\", etc., for \"=\", we don't need to reed the target\n            func = function (a, b) { return b; };\n            tmpTgt = (0, basic_1.new_from)(indices.length, function () { return undefined; }, tgt.dtype);\n        }\n        else {\n            tmpTgt = (0, basic_1.asarray)(indices.map(function (i) { return tgt._flat[i]; }));\n        }\n        binary_operation(tmpTgt, (0, basic_1.ravel)(src), func, tgt.dtype, tmpTgt);\n        for (var i in indices)\n            tgt._flat[indices[i]] = tmpTgt._flat[i];\n    }\n    return tgt;\n}\nexports.assign_operation = assign_operation;\n;\nfunction _assign_operation_toJS(tgtJS, src, where, func) {\n    if (!Array.isArray(tgtJS))\n        throw new Error(\"Can not assign to a non-array. Found \".concat(typeof tgtJS, \": \").concat(tgtJS));\n    console.warn('Assignment to JS array is experimental and slow.');\n    // Parse the whole array\n    var cpy = (0, basic_1.asarray)(tgtJS);\n    assign_operation(cpy, src, where, func);\n    // WARNING: Creates a copy. This is terrible for arr[2, 4, 3] = 5\n    var outJS = (0, js_interface_1.tolist)(cpy);\n    while (tgtJS.length)\n        tgtJS.pop();\n    // @ts-ignore\n    (0, utils_js_1.extend)(tgtJS, outJS);\n    return tgtJS;\n}\nexports._assign_operation_toJS = _assign_operation_toJS;\n// export type AssignmentOperator = { (tgt: NDArray, src: ArrayOrConstant): NDArray; (tgt: NDArray, where: Where, src: ArrayOrConstant): NDArray; }\n// export type SelfAssignmentOperator = { (other: ArrayOrConstant): NDArray; (where: Where, other: ArrayOrConstant): NDArray; }\nfunction __make_assignment_operator(func) {\n    return function operator(a, values, where) {\n        // console.log(`where=${JSON.stringify(where)}`)\n        if (where.length === 1 && where[0] === false)\n            return a;\n        if (where.length === 1 && where[0] === true)\n            where = [];\n        return assign_operation(a, values, where, func);\n    };\n}\nexports.__make_assignment_operator = __make_assignment_operator;\nexports.op_assign = {\n    \"=\": __make_assignment_operator(function (a, b) { return b; }),\n    \"+=\": __make_assignment_operator(function (a, b) { return a + b; }),\n    \"-=\": __make_assignment_operator(function (a, b) { return a - b; }),\n    \"*=\": __make_assignment_operator(function (a, b) { return a * b; }),\n    \"/=\": __make_assignment_operator(function (a, b) { return a / b; }),\n    \"%=\": __make_assignment_operator(function (a, b) { return (a % b); }),\n    \"//=\": __make_assignment_operator(function (a, b) { return Math.floor(a / b); }),\n    \"**=\": __make_assignment_operator(function (a, b) { return Math.pow(a, b); }),\n    \"|=\": __make_assignment_operator(function (a, b) { return a | b; }),\n    \"&=\": __make_assignment_operator(function (a, b) { return a & b; }),\n    \"^=\": __make_assignment_operator(function (a, b) { return a ^ b; }),\n    \"<<=\": __make_assignment_operator(function (a, b) { return a << b; }),\n    \">>=\": __make_assignment_operator(function (a, b) { return a >> b; }),\n    // Operators with custom ascii identifiers:\n    \"max=\": __make_assignment_operator(function (a, b) { return Math.max(a, b); }),\n    \"min=\": __make_assignment_operator(function (a, b) { return Math.min(a, b); }),\n    \"or=\": __make_assignment_operator(function (a, b) { return a || b; }),\n    \"and=\": __make_assignment_operator(function (a, b) { return a && b; }),\n};\n// op_assign[\"=\"] = op_assign[\"max=\"];\n// op_assign[\"=\"] = op_assign[\"min=\"];\n// ====================================\nfunction isclose(A, B, rtol, atol, equal_nan) {\n    var _a;\n    if (rtol === void 0) { rtol = 1.e-5; }\n    if (atol === void 0) { atol = 1.e-8; }\n    if (equal_nan === void 0) { equal_nan = false; }\n    (_a = Object.assign({ rtol: rtol, atol: atol, equal_nan: equal_nan }, this), rtol = _a.rtol, atol = _a.atol, equal_nan = _a.equal_nan);\n    var func = function (a, b) {\n        if (a == b)\n            return true; // shortcut for equality\n        if (Number.isFinite(a) && Number.isFinite(b))\n            return Math.abs(a - b) <= atol + rtol * b;\n        console.log('NOT FINITE', a, b);\n        return (a == b) || (equal_nan && Number.isNaN(a) && Number.isNaN(b));\n    };\n    return binary_operation(A, B, func, Uint8Array);\n}\nexports.isclose = isclose;\nfunction allclose(A, B, rtol, atol, equal_nan) {\n    var _a;\n    if (rtol === void 0) { rtol = 1.e-5; }\n    if (atol === void 0) { atol = 1.e-8; }\n    if (equal_nan === void 0) { equal_nan = false; }\n    (_a = Object.assign({ rtol: rtol, atol: atol, equal_nan: equal_nan }, this), rtol = _a.rtol, atol = _a.atol, equal_nan = _a.equal_nan);\n    // Equivalent to all(isclose(A, B, rtol, atol, equal_nan)), but shortcutting if false \n    var func = function (a, b) {\n        if (Number.isFinite(a) && Number.isFinite(b))\n            return Math.abs(a - b) <= atol + rtol * b;\n        return (a == b) || (equal_nan && Number.isNaN(a) && Number.isNaN(b));\n    };\n    var different = new Error('');\n    var wrapper = function (a, b) {\n        if (!func(a, b))\n            throw different;\n        return 0;\n    };\n    try {\n        binary_operation(A, B, wrapper, Float64Array);\n    }\n    catch (err) {\n        if (err === different)\n            return false;\n        else\n            throw err;\n    }\n    return true;\n}\nexports.allclose = allclose;\n//op_binary[\"\"] = op[MyArray.prototype.isclose,\nexports.atan2 = kwargs_1.Func_y_x_out.defaultDecorator(__make_operator(Float64Array, Math.atan2));\nfunction n_ary_operation(arrs, elem_shape, func) {\n    var e_1, _a;\n    // Find output shape and input broadcast shapes\n    arrs = arrs.map(basic_1.asarray);\n    // // Some optimization for common low-complexity cases\n    // if (arrs.length == 1 && elem_shape.length == 0) {\n    //   const a = arrs[0];\n    //   //@ts-ignore\n    //   return new_NDArray(a.flat.map(x => number_collapse(func(x))), a.shape, Number); // FIX\n    // } else if (arrs.length == 1) {\n    //   const a = arrs[0];\n    //   const a_size = a.size;\n    //   const out_elem_size = elem_shape.reduce((a, b) => a * b, 1);\n    //   const outs = [];\n    //   a.flat.forEach((x, i) => {\n    //     //@ts-ignore\n    //     const values = number_collapse(func(x));\n    //     const end = (i + 1) * out_elem_size;\n    //     for (let j = i * out_elem_size; j < end; j++) outs[j] = values[i];\n    //   });\n    //   //@ts-ignore\n    //   return new_NDArray(outs, a.shape, Number); // FIX\n    // }\n    var rawShapes = arrs.map(function (a) { return a.shape; });\n    // Broadcast shapes\n    var _b = __read(_globals_1.broadcast_n_shapes.apply(void 0, __spreadArray([], __read(rawShapes), false)), 2), shapes = _b[0], shape = _b[1];\n    var size = shape.reduce(function (a, b) { return a * b; }, 1);\n    if (shape.length == 0) {\n        return (0, basic_1.asarray)(func.apply(void 0, __spreadArray([], __read(arrs.map(function (a) { return a.flat[0]; })), false)));\n    }\n    var shifts = shapes.map(function (shape) { return (0, basic_1.shape_shifts)(shape); });\n    function iter_n_ary() {\n        var i, idx, idxs, axis, j;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    i = 0;\n                    _a.label = 1;\n                case 1:\n                    if (!(i < size)) return [3 /*break*/, 4];\n                    idx = i;\n                    idxs = arrs.map(function (_) { return 0; });\n                    for (axis = shape.length - 1; axis >= 0; axis--) {\n                        for (j = 0; j < arrs.length; j++) {\n                            idxs[j] += shifts[j][axis] * (idx % shapes[j][axis]);\n                        }\n                        idx = Math.floor(idx / shape[axis]);\n                    }\n                    return [4 /*yield*/, [i, idxs]];\n                case 2:\n                    _a.sent();\n                    _a.label = 3;\n                case 3:\n                    i++;\n                    return [3 /*break*/, 1];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }\n    // Iterate with broadcasted indices\n    var flat = [];\n    var funcOutIsNDArray = false;\n    var _loop_1 = function (i, idxs) {\n        // apply function\n        var value = func.apply(void 0, __spreadArray([], __read(arrs.map(function (a, j) { return a.flat[idxs[j]]; })), false));\n        if (i == 0)\n            funcOutIsNDArray = (0, basic_1.isarray)(value);\n        flat.push(value);\n    };\n    try {\n        for (var _c = __values(iter_n_ary()), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var _e = __read(_d.value, 2), i = _e[0], idxs = _e[1];\n            _loop_1(i, idxs);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    ;\n    var out = funcOutIsNDArray ? (0, transform_1.concatenate)(flat) : (0, basic_1.asarray)(flat);\n    out = out.reshape(__spreadArray([shape], __read(out.shape.slice(1)), false));\n    return out;\n}\nexports.n_ary_operation = n_ary_operation;\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.humanReadable = void 0;\nvar elementwise_1 = require(\"./elementwise\");\nvar js_interface_1 = require(\"./js-interface\");\nvar dtypes_1 = require(\"../dtypes\");\nvar round = elementwise_1.ops.round;\nfunction humanReadable(arr) {\n    if (arr.shape.length == 0)\n        return arr.flat[0].toString();\n    var budgets = arr.shape.map(function (_) { return 1; });\n    var lBudget = 30;\n    for (var i = 0; i < arr.shape.length; i++) {\n        var before = budgets[i];\n        budgets[i] = Math.min(arr.shape[i], lBudget);\n        if (budgets[i] > before)\n            lBudget = Math.floor(lBudget / (budgets[i] - before));\n    }\n    var rBudget = 30;\n    for (var i = arr.shape.length - 1; i >= 0; i--) {\n        var before = budgets[i];\n        budgets[i] = Math.min(arr.shape[i], rBudget);\n        if (budgets[i] > before)\n            rBudget = Math.floor(rBudget / (budgets[i] - before));\n    }\n    function simplify(list, depth) {\n        if (depth === void 0) { depth = 0; }\n        if (depth == arr.shape.length)\n            return list;\n        if (2 * budgets[depth] >= list.length) {\n            return list.map(function (l) { return simplify(l, depth + 1); });\n        }\n        var left = list.slice(0, budgets[depth]).map(function (l) { return simplify(l, depth + 1); });\n        var right = list.slice(-budgets[depth]).map(function (l) { return simplify(l, depth + 1); });\n        return __spreadArray(__spreadArray(__spreadArray([], __read(left), false), ['...'], false), __read(right), false);\n    }\n    var rLimit = arr.shape.length - 1;\n    while (rLimit > 0 && arr.shape[rLimit] == 1) {\n        rLimit--;\n    }\n    if ((0, dtypes_1.dtype_is_float)(arr.dtype))\n        arr = round(arr, 2);\n    var list = (0, js_interface_1.tolist)(arr);\n    function str(list, indent, depth) {\n        if (indent === void 0) { indent = 0; }\n        if (depth === void 0) { depth = 0; }\n        if (list == '...' || depth >= arr.shape.length)\n            return list;\n        if (depth == arr.shape.length - 1)\n            return \"[\".concat(list.join(', '), \"]\");\n        var sep = depth >= rLimit ? ' ' : '\\n' + ' '.repeat(indent + 1);\n        var out = [];\n        for (var i = 0; i < list.length; i++) {\n            var s = str(list[i], indent + 1, depth + 1) + ',';\n            out.push(i < list.length - 1 ? s : s.slice(0, -1));\n        }\n        return \"[\".concat(out.join(sep), \"]\");\n    }\n    var prefix = 'np';\n    var suffix = \", shape=(\".concat(arr.shape, \"), dtype=\").concat(arr.dtype.name);\n    var out = str(simplify(list), 1 + prefix.length);\n    function alignColumns(inputString, delimiter) {\n        var e_1, _a, e_2, _b;\n        if (delimiter === void 0) { delimiter = ','; }\n        // Split the input string into rows\n        var rows = inputString.split('\\n');\n        // Initialize an array to store the maximum width of each column\n        var columnWidths = Array(rows[0].split(delimiter).length).fill(0);\n        try {\n            // Find the maximum width for each column\n            for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {\n                var row = rows_1_1.value;\n                var columns = row.split(delimiter);\n                for (var i = 0; i < columns.length; i++) {\n                    columnWidths[i] = Math.max(columnWidths[i], columns[i].trim().length);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return)) _a.call(rows_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Build the formatted outputs\n        var formattedString = '';\n        var _loop_1 = function (row) {\n            var columns = row.split(delimiter);\n            columns = columns.map(function (s, i) { return i == columns.length - 1 ? s : s + delimiter; });\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i].trim();\n                formattedString += column.padStart(columnWidths[i] + 1).padEnd(columnWidths[i] + 2); // Add 1 for padding\n            }\n            formattedString += '\\n';\n        };\n        try {\n            for (var rows_2 = __values(rows), rows_2_1 = rows_2.next(); !rows_2_1.done; rows_2_1 = rows_2.next()) {\n                var row = rows_2_1.value;\n                _loop_1(row);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (rows_2_1 && !rows_2_1.done && (_b = rows_2.return)) _b.call(rows_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return formattedString;\n    }\n    out = out.replace(/.*?(\\n|$)/g, function (match) {\n        // Split with a newline every 0 characters, but only after a comma,\n        return match.replace(/(.{60,}?,)/g, '$1\\n');\n    }).replace(/\\n+/g, '\\n');\n    out = alignColumns(\"\".concat(prefix, \"(\").concat(out)).trim();\n    out = \"\".concat(out).concat(suffix, \")\");\n    return out;\n}\nexports.humanReadable = humanReadable;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.kw_reducers = exports.reducers = void 0;\n//@ts-check\nvar basic_1 = require(\"./basic\");\nvar operators_1 = require(\"./operators\");\nvar kwargs_1 = require(\"./kwargs\");\nvar dtypes_1 = require(\"../dtypes\");\nvar multiply = operators_1.op_binary[\"*\"];\nvar divide = operators_1.op_binary[\"/\"];\nvar subtract = operators_1.op_binary[\"-\"];\nvar pow = operators_1.op_binary[\"**\"];\n/**\n * This function reduces an array along an axis\n */\nfunction apply_on_axis(func, dtype, arr, axis, keepdims) {\n    if (axis == null)\n        return func(arr.flat);\n    if (axis < 0)\n        axis = arr.shape.length - 1;\n    var m = arr.shape[axis];\n    var shift = (0, basic_1.shape_shifts)(arr.shape)[axis];\n    var groups = Array.from({ length: m }, function (_) { return []; });\n    arr.flat.forEach(function (value, i) { return groups[(Math.floor(i / shift)) % m].push(value); });\n    // Transpose it:\n    var nCols = arr.size / m;\n    var groupsT = [];\n    for (var j = 0; j < nCols; j++) {\n        var newRow = [];\n        for (var i = 0; i < m; i++)\n            newRow.push(groups[i][j]);\n        groupsT.push(newRow);\n    }\n    //@ts-ignore\n    var flat = groupsT.map(func);\n    var shape = __spreadArray([], __read(arr.shape), false);\n    if (keepdims)\n        shape[axis] = 1;\n    else\n        shape = shape.filter(function (_, i) { return i != axis; });\n    var out = (0, basic_1.new_NDArray)((0, dtypes_1.new_buffer)(flat, dtype), shape);\n    return out.size == 1 ? out.flat[0] : out;\n}\n;\n// ==============================\n//       Reducing functions\n// ==============================\nfunction mk_reducer(flat_reduce, dtype) {\n    if (!dtype)\n        dtype = Float64Array;\n    return function (arr, axis, keepdims) {\n        return apply_on_axis(flat_reduce, dtype, arr, axis, keepdims);\n    };\n}\nexports.reducers = {\n    sum: mk_reducer(function (arr) { return arr.reduce(function (a, b) { return a + b; }, 0); }),\n    product: mk_reducer(function (arr) { return arr.reduce(function (a, b) { return a * b; }, 1); }),\n    mean: mk_reducer(function (arr) { return arr.reduce(function (a, b) { return a + b; }, 0) / arr.length; }),\n    max: mk_reducer(function (arr) { return Math.max.apply(Math, __spreadArray([], __read(arr), false)); }),\n    min: mk_reducer(function (arr) { return Math.min.apply(Math, __spreadArray([], __read(arr), false)); }),\n    argmax: mk_reducer(function (arr) { return arr.indexOf(Math.max.apply(Math, __spreadArray([], __read(arr), false))); }, Int32Array),\n    argmin: mk_reducer(function (arr) { return arr.indexOf(Math.min.apply(Math, __spreadArray([], __read(arr), false))); }, Int32Array),\n    len: mk_reducer(function (arr) { return arr.length; }, Int32Array),\n    any: mk_reducer(function (arr) {\n        var e_1, _a;\n        try {\n            for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n                var x = arr_1_1.value;\n                if (x)\n                    return true;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return false;\n    }, Uint8Array),\n    all: mk_reducer(function (arr) {\n        var e_2, _a;\n        try {\n            for (var arr_2 = __values(arr), arr_2_1 = arr_2.next(); !arr_2_1.done; arr_2_1 = arr_2.next()) {\n                var x = arr_2_1.value;\n                if (!x)\n                    return false;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (arr_2_1 && !arr_2_1.done && (_a = arr_2.return)) _a.call(arr_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return true;\n    }, Uint8Array),\n    norm: function (arr, ord, axis, keepdims) {\n        if (ord % 2 != 0)\n            arr = arr.abs();\n        if (ord == Infinity)\n            return exports.reducers.max(arr, axis, keepdims);\n        if (ord == 1)\n            return exports.reducers.sum(arr, axis, keepdims);\n        return pow(exports.reducers.sum(pow(arr, ord), axis, keepdims), 1 / ord);\n    },\n    var: function (arr, axis, ddof, keepdims) {\n        arr = subtract(arr, exports.reducers.mean(arr, axis, true));\n        arr = multiply(arr, arr);\n        if (ddof == 0)\n            return exports.reducers.mean(arr, axis, keepdims);\n        return divide(exports.reducers.sum(arr, axis, keepdims), arr.shape[axis] - ddof);\n    },\n    std: function (arr, axis, ddof, keepdims) {\n        return pow(exports.reducers.var(arr, axis, ddof, keepdims), 0.5);\n    },\n};\nexports.kw_reducers = {\n    sum: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.sum),\n    product: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.product),\n    mean: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.mean),\n    max: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.max),\n    min: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.min),\n    argmax: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.argmax),\n    argmin: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.argmin),\n    len: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.len),\n    any: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.any),\n    all: kwargs_1.Func_a_axis_keepdims.defaultDecorator(exports.reducers.all),\n    norm: kwargs_1.Func_a_ord_axis_keepdims.defaultDecorator(exports.reducers.norm),\n    var: kwargs_1.Func_a_axis_ddof_keepdims.defaultDecorator(exports.reducers.var),\n    std: kwargs_1.Func_a_axis_ddof_keepdims.defaultDecorator(exports.reducers.std),\n};\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.kw_exported = exports.stack = exports.concatenate = exports.swapAxes = exports.transpose = exports.sort = exports.cmp_nan_at_the_end = exports.apply_along_axis = void 0;\nvar basic_1 = require(\"./basic\");\nvar js_interface_1 = require(\"./js-interface\");\nvar utils_js_1 = require(\"../utils-js\");\nvar kwargs_1 = require(\"./kwargs\");\nvar dtypes_1 = require(\"../dtypes\");\n/**\n * This function can reduce, sort, operate pointwise, or increase the dimensionality.\n */\nfunction apply_along_axis(arr, axis, transform, dtype) {\n    if (dtype === void 0) { dtype = Float64Array; }\n    arr = (0, basic_1.asarray)(arr);\n    if (axis == null)\n        return transform(arr.flat);\n    var nDims = arr.shape.length;\n    if (axis < 0)\n        axis = nDims + axis;\n    if (axis !== nDims - 1) {\n        // Transpose to end, apply, and transpose back:\n        var tmp_1 = swapAxes(arr, axis, -1);\n        var out_1 = apply_along_axis(tmp_1, -1, transform, dtype);\n        //@ts-ignore\n        return swapAxes(out_1, axis, -1);\n    }\n    var m = arr.shape[axis];\n    var shift = (0, basic_1.shape_shifts)(arr.shape)[axis];\n    var groups = Array.from({ length: m }, function (_) { return []; });\n    arr.flat.forEach(function (value, i) { return groups[(Math.floor(i / shift)) % m].push(value); });\n    // Transpose it:\n    var nCols = arr.size / m;\n    var groupsT = [];\n    for (var j = 0; j < nCols; j++) {\n        var newRow = [];\n        for (var i = 0; i < m; i++)\n            newRow.push(groups[i][j]);\n        groupsT.push(newRow);\n    }\n    var data = groupsT.map(transform);\n    var tmp = (0, js_interface_1.fromlist)(data);\n    var shape = __spreadArray(__spreadArray(__spreadArray([], __read(arr.shape.slice(0, axis)), false), __read(tmp.shape.slice(1)), false), __read(arr.shape.slice(axis + 1)), false);\n    var out = (0, basic_1.new_NDArray)((0, dtypes_1.new_buffer)(tmp.flat, dtype), shape);\n    return (0, basic_1.number_collapse)(out);\n}\nexports.apply_along_axis = apply_along_axis;\nvar cmp_nan_at_the_end = function (a, b) {\n    // https://stackoverflow.com/a/56265258/3671939\n    //@ts-ignore\n    return a - b || isNaN(a) - isNaN(b) || Object.is(b, -0) - Object.is(a, -0);\n};\nexports.cmp_nan_at_the_end = cmp_nan_at_the_end;\nfunction sort(a, axis) {\n    return apply_along_axis(a, axis, function (arr) {\n        var cpy = __spreadArray([], __read(arr), false);\n        cpy.sort(exports.cmp_nan_at_the_end);\n        return cpy;\n    }, a.dtype);\n}\nexports.sort = sort;\nfunction transpose(arr, axes) {\n    var _a;\n    if (axes === void 0) { axes = null; }\n    (axes = Object.assign({ axes: axes }, this).axes);\n    //@ts-ignore\n    if (axes !== null && axes[\"axes\"])\n        (_a = axes, axes = _a.axes);\n    var nDims = arr.shape.length;\n    if (axes == null)\n        return transpose(arr, Array.from({ length: nDims }, function (_, i) { return i; }).reverse());\n    if (axes.length !== nDims)\n        throw new Error(\"Axes must have length \".concat(nDims, \". Found \").concat(axes.length));\n    var inv = Array.from({ length: nDims }, function () { return -1; });\n    for (var i = 0; i < nDims; i++) {\n        if (axes[i] < 0 || axes[i] >= nDims)\n            throw new Error(\"Expected axis in [0..\".concat(nDims, \"). Found \").concat(axes[i]));\n        inv[axes[i]] = i;\n    }\n    for (var i = 0; i < nDims; i++)\n        if (inv[i] == -1)\n            throw new Error(\"Axes must contain all dimensions. [\".concat(axes.join(\", \"), \"] is missing \").concat(i, \".\"));\n    var srcShifts = (0, basic_1.shape_shifts)(arr.shape);\n    var shape = axes.map(function (j) { return arr.shape[j]; });\n    var shifts = axes.map(function (j) { return srcShifts[j]; });\n    // Copied from slice:\n    var indices = [];\n    var tuple = new Array(shape.length).fill(0);\n    var cursor = 0;\n    while (true) {\n        if (!isFinite(cursor))\n            throw new Error(\"Programming error\");\n        indices.push(cursor);\n        var axis = nDims - 1;\n        while (axis >= 0) {\n            tuple[axis]++;\n            cursor += shifts[axis];\n            if (tuple[axis] < shape[axis])\n                break;\n            // Overflow\n            cursor -= shifts[axis] * shape[axis];\n            tuple[axis] = 0;\n            axis--;\n        }\n        ;\n        if (axis < 0)\n            break;\n    }\n    // Now, just copy the data:\n    var src = arr.flat;\n    return (0, basic_1.new_NDArray)(arr.dtype.from(indices.map(function (i) { return src[i]; })), shape);\n}\nexports.transpose = transpose;\nfunction swapAxes(arr, axisA, axisB) {\n    arr = (0, basic_1.asarray)(arr);\n    var nDims = arr.shape.length;\n    if (axisA < 0)\n        axisA = nDims + axisA;\n    if (axisB < 0)\n        axisB = nDims + axisB;\n    var perm = Array.from({ length: nDims }, function (_, i) { return i; });\n    perm[axisA] = axisB;\n    perm[axisB] = axisA;\n    return transpose(arr, perm);\n}\nexports.swapAxes = swapAxes;\nfunction concatenate(arrays, axis) {\n    var _a, e_1, _b;\n    if (axis === void 0) { axis = null; }\n    // ({ axis } = Object.assign({ axis }, this));\n    //@ts-ignore\n    if (axis instanceof Object)\n        (_a = axis, axis = _a.axis);\n    if ((0, basic_1.isarray)(arrays))\n        arrays = __spreadArray([], __read(arrays), false);\n    arrays = arrays.map(basic_1.asarray);\n    if (axis == null) {\n        arrays = arrays.map(function (arr) { return (0, basic_1.ravel)(arr); });\n        axis = 0;\n    }\n    if (!arrays.length)\n        throw new Error(\"Expected at least two arrays\");\n    var nDims = arrays[0].shape.length;\n    if (axis < 0)\n        axis = nDims + axis;\n    var shapeIn = __spreadArray([], __read(arrays[0].shape), false);\n    var flat = [];\n    var shape = shapeIn.map(function (_, i) { return i == 0 ? 0 : shapeIn[i == axis ? 0 : i]; });\n    try {\n        for (var arrays_1 = __values(arrays), arrays_1_1 = arrays_1.next(); !arrays_1_1.done; arrays_1_1 = arrays_1.next()) {\n            var arr = arrays_1_1.value;\n            if (!(0, utils_js_1.allEq)(arr.shape.filter(function (_, i) { return i != axis; }), shapeIn.filter(function (_, i) { return i != axis; })))\n                throw new Error(\"Inconsistent input shape \".concat(shapeIn, \" with respect to \").concat(arr.shape.map(function (v, i) { return i == axis ? '?' : v; })));\n            shape[0] += arr.shape[axis];\n            arr = axis == 0 ? arr : swapAxes(arr, axis, 0);\n            (0, utils_js_1.extend)(flat, arr.flat);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (arrays_1_1 && !arrays_1_1.done && (_b = arrays_1.return)) _b.call(arrays_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // TO DO: infer or expect dtype here:\n    var dtype = dtypes_1.dtype_least_ancestor.apply(void 0, __spreadArray([], __read(arrays.map(function (arr) { return arr.dtype; })), false));\n    var out = (0, basic_1.new_NDArray)(dtype.from(flat), shape);\n    if (axis == 0)\n        return out;\n    else\n        return swapAxes(out, axis, 0);\n}\nexports.concatenate = concatenate;\nfunction stack(arrays, axis) {\n    var _a, e_2, _b;\n    if (axis === void 0) { axis = 0; }\n    //@ts-ignore\n    if (axis instanceof Object)\n        (_a = axis, axis = _a.axis);\n    if ((0, basic_1.isarray)(arrays))\n        arrays = __spreadArray([], __read(arrays), false);\n    if (!Array.isArray(arrays))\n        throw new Error(\"Expected list of arrays. Found \".concat(typeof arrays));\n    arrays = arrays.map(basic_1.asarray);\n    if (!arrays.length)\n        throw new Error(\"Expected at least two arrays\");\n    var shapeIn = __spreadArray([], __read(arrays[0].shape), false);\n    if (axis < 0)\n        axis = shapeIn.length + 1 + axis;\n    var shapeBroadcast = __spreadArray(__spreadArray(__spreadArray([], __read(shapeIn.slice(0, axis)), false), [1], false), __read(shapeIn.slice(axis)), false);\n    var bArrays = [];\n    try {\n        for (var arrays_2 = __values(arrays), arrays_2_1 = arrays_2.next(); !arrays_2_1.done; arrays_2_1 = arrays_2.next()) {\n            var arr = arrays_2_1.value;\n            if (!(0, utils_js_1.allEq)(arr.shape, shapeIn)) {\n                throw new Error(\"Inconsistent input shape \".concat(JSON.stringify(shapeIn), \" with respect to \").concat(JSON.stringify(arr.shape)));\n            }\n            bArrays.push((0, basic_1.reshape)(arr, shapeBroadcast));\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (arrays_2_1 && !arrays_2_1.done && (_b = arrays_2.return)) _b.call(arrays_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return concatenate(bArrays, axis);\n}\nexports.stack = stack;\nexports.kw_exported = {\n    sort: kwargs_1.Func_a_lastAxis.defaultDecorator(sort),\n};\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dtype_least_ancestor = exports.dtype_is_float = exports.dtype_is_boolean = exports.dtype_is_integer = exports.dtype_lt = exports.dtype_leq = exports.dtype_eq = exports.new_buffer = exports.dtypes = void 0;\n// Mozilla docs:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\n// This is a mess:\n// https://stackoverflow.com/questions/65129070/\n// https://stackoverflow.com/questions/49242232/\n// https://stackoverflow.com/questions/69783310/\nexports.dtypes = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array]; //, BigInt64Array, BigUint64Array]\nfunction new_buffer(size_or_array, dtype) {\n    //@ts-ignore\n    return dtype ? new dtype(size_or_array) : new Float64Array(size_or_array);\n}\nexports.new_buffer = new_buffer;\n// dtype comparison (hierarchical)\nfunction dtype_eq(A, B) {\n    return A === B;\n}\nexports.dtype_eq = dtype_eq;\nfunction dtype_leq(A, B) {\n    return hierarchy_leq[A.name + B.name] || false;\n}\nexports.dtype_leq = dtype_leq;\nfunction dtype_lt(A, B) {\n    return hierarchy_lt[A.name + B.name] || false;\n}\nexports.dtype_lt = dtype_lt;\nfunction dtype_is_integer(A) {\n    return A === Uint32Array || A === Uint8Array || A === Int8Array || A === Uint8ClampedArray || A === Int16Array || A === Uint16Array || A === Int32Array; // || A === BigInt64Array || A === BigUint64Array;\n}\nexports.dtype_is_integer = dtype_is_integer;\nfunction dtype_is_boolean(A) {\n    return A === Uint8Array;\n}\nexports.dtype_is_boolean = dtype_is_boolean;\nfunction dtype_is_float(A) {\n    return A === Float32Array || A === Float64Array;\n}\nexports.dtype_is_float = dtype_is_float;\nfunction dtype_least_ancestor() {\n    var dtypes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        dtypes[_i] = arguments[_i];\n    }\n    return dtypes.reduce(function (a, b) { return hierarchy_max[a.name + b.name]; }, Float64Array);\n}\nexports.dtype_least_ancestor = dtype_least_ancestor;\nvar _a = (function () {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n    var descendants = {\n        Uint8Array: [],\n        Int8Array: [],\n        Uint8ClampedArray: [],\n        Int16Array: ['Int8Array', 'Uint8Array', 'Uint8ClampedArray'],\n        Uint16Array: ['Int8Array', 'Uint8Array', 'Uint8ClampedArray'],\n        Int32Array: ['Int16Array', 'Uint16Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray'],\n        Uint32Array: ['Int16Array', 'Uint16Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray'],\n        BigInt64Array: ['Int32Array', 'Uint32Array', 'Int16Array', 'Uint16Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray'],\n        BigUint64Array: ['Int32Array', 'Uint32Array', 'Int16Array', 'Uint16Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray'],\n        Float32Array: ['Int32Array', 'Uint32Array', 'Int16Array', 'Uint16Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray', 'BigUint32Array', 'BigInt32Array'],\n        Float64Array: ['Float32Array', 'Int32Array', 'Uint32Array', 'Int16Array', 'Uint16Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray', 'BigUint32Array', 'BigInt32Array', 'BigUint64Array', 'BigInt64Array'],\n    };\n    var ltPairs = [];\n    var leqPairs = [];\n    var _loop_1 = function (key, value) {\n        leqPairs.push(key + key);\n        leqPairs.push.apply(leqPairs, __spreadArray([], __read(value.map(function (v) { return key + v; })), false));\n        ltPairs.push.apply(ltPairs, __spreadArray([], __read(value.map(function (v) { return key + v; })), false));\n    };\n    try {\n        for (var _e = __values(Object.entries(descendants)), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var _g = __read(_f.value, 2), key = _g[0], value = _g[1];\n            _loop_1(key, value);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var hierarchy_leq = Object.fromEntries(leqPairs.map(function (pair) { return [pair, true]; }));\n    var hierarchy_lt = Object.fromEntries(ltPairs.map(function (pair) { return [pair, false]; }));\n    var hierarchy_max = {};\n    try {\n        for (var dtypes_1 = __values(exports.dtypes), dtypes_1_1 = dtypes_1.next(); !dtypes_1_1.done; dtypes_1_1 = dtypes_1.next()) {\n            var A = dtypes_1_1.value;\n            try {\n                for (var dtypes_2 = (e_3 = void 0, __values(exports.dtypes)), dtypes_2_1 = dtypes_2.next(); !dtypes_2_1.done; dtypes_2_1 = dtypes_2.next()) {\n                    var B = dtypes_2_1.value;\n                    var lca = Float64Array;\n                    try {\n                        for (var dtypes_3 = (e_4 = void 0, __values(exports.dtypes)), dtypes_3_1 = dtypes_3.next(); !dtypes_3_1.done; dtypes_3_1 = dtypes_3.next()) {\n                            var C = dtypes_3_1.value;\n                            if (leqPairs[A.name + C.name] && leqPairs[B.name + C.name] && leqPairs[C.name + lca.name]) {\n                                lca = C;\n                            }\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (dtypes_3_1 && !dtypes_3_1.done && (_d = dtypes_3.return)) _d.call(dtypes_3);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                    hierarchy_max[A.name + B.name] = lca;\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (dtypes_2_1 && !dtypes_2_1.done && (_c = dtypes_2.return)) _c.call(dtypes_2);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (dtypes_1_1 && !dtypes_1_1.done && (_b = dtypes_1.return)) _b.call(dtypes_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return { hierarchy_leq: hierarchy_leq, hierarchy_lt: hierarchy_lt, hierarchy_max: hierarchy_max };\n})(), hierarchy_leq = _a.hierarchy_leq, hierarchy_lt = _a.hierarchy_lt, hierarchy_max = _a.hierarchy_max;\n// BigInt64Array |\n// BigUint64Array;\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.np = void 0;\n/**\n * Parser and main namespace for the ndarray-js package.\n * <script src=\"https://cdn.jsdelivr.net/npm/ndarray-js@latest/dist/index.js\"></script>\n */\nvar np = function (template) {\n    var _a;\n    var variables = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        variables[_i - 1] = arguments[_i];\n    }\n    var usage = 'Usage example: np`np.arange(10)+${5}` or np([0,1,2]).';\n    if (typeof template == \"number\")\n        return template;\n    if (template instanceof np.NDArray)\n        return template;\n    if (!Array.isArray(template))\n        throw new Error(\"Expected template or array. \".concat(usage));\n    if (!template.length)\n        throw new Error(\"Expected argument. \".concat(usage));\n    if (typeof template[0] == \"string\") {\n        if (variables.length + 1 != template.length)\n            throw new Error(\"Wrong input. \".concat(usage));\n        //@ts-ignore\n        return (_a = np.modules.grammar).parse.apply(_a, __spreadArray([/**@type {*}*/ (template)], __read(variables), false));\n    }\n    else {\n        if (variables.length)\n            throw new Error(\"Wrong input. \".concat(usage));\n        //@ts-ignore\n        return np.asarray(template);\n    }\n};\nexports.np = np;\n// ==============================\n//    Define Global before importing any module\n// ==============================\nvar _globals_1 = require(\"./_globals\");\n_globals_1.GLOBALS.np = np;\n// ==============================\n//    Define casting and core before importing any other module\n// ==============================\nvar NDArray_1 = require(\"./NDArray\");\n/** @category Main */\nnp.NDArray = NDArray_1.default;\n// ==============================\n//  Define core-related functions\n// ==============================\nvar tolist = NDArray_1.default.prototype.modules.jsInterface.tolist;\n/** @category Casting and reshaping */\nnp.tolist = function (template) {\n    var variables = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        variables[_i - 1] = arguments[_i];\n    }\n    return tolist(np.apply(void 0, __spreadArray([template], __read(variables), false)));\n};\n/** @category Casting and reshaping */\nnp.fromlist = NDArray_1.default.prototype.modules.jsInterface.fromlist;\n/** @category Casting and reshaping */\nnp.ravel = NDArray_1.default.prototype.modules.basic.ravel;\n/** @category Casting and reshaping */\nnp.reshape = NDArray_1.default.prototype.modules.basic.reshape;\n/** @category Casting and reshaping */\nnp.array = NDArray_1.default.prototype.modules.basic.array;\n/** @category Casting and reshaping */\nnp.asarray = NDArray_1.default.prototype.modules.basic.asarray;\nvar reduce = NDArray_1.default.prototype.modules.reduce;\n/** @category Reducers */\nnp.sum = reduce.kw_reducers.sum;\n/** @category Reducers */\nnp.product = reduce.kw_reducers.product;\n/** @category Reducers */\nnp.prod = np.product;\n/** @category Reducers */\nnp.any = reduce.kw_reducers.any;\n/** @category Reducers */\nnp.all = reduce.kw_reducers.all;\n/** @category Reducers */\nnp.max = reduce.kw_reducers.max;\n/** @category Reducers */\nnp.min = reduce.kw_reducers.min;\n/** @category Reducers */\nnp.argmax = reduce.kw_reducers.argmax;\n/** @category Reducers */\nnp.argmin = reduce.kw_reducers.argmin;\n/** @category Reducers */\nnp.mean = reduce.kw_reducers.mean;\n/** @category Reducers */\nnp.norm = reduce.kw_reducers.norm;\n/** @category Reducers */\nnp.var = reduce.kw_reducers.var;\n/** @category Reducers */\nnp.std = reduce.kw_reducers.std;\nvar transform = NDArray_1.default.prototype.modules.transform;\n/** @category Transformations */\nnp.transpose = transform.transpose;\n/** @category Transformations */\nnp.apply_along_axis = transform.apply_along_axis;\n/** @category Transformations */\nnp.sort = transform.kw_exported.sort;\n/** @category Transformations */\nnp.concatenate = transform.concatenate;\n/** @category Transformations */\nnp.stack = transform.stack;\nvar kwargs_1 = require(\"./array/kwargs\");\nvar operators = NDArray_1.default.prototype.modules.operators;\n/** @category Binary operators */\nnp.add = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"+\"]);\n/** @category Binary operators */\nnp.subtract = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"-\"]);\n/** @category Binary operators */\nnp.multiply = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"*\"]);\n/** @category Binary operators */\nnp.divide = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"/\"]);\n/** @category Binary operators */\nnp.mod = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"%\"]);\n/** @category Binary operators */\nnp.divide_int = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"//\"]);\n/** @category Binary operators */\nnp.pow = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"**\"]);\n/** @category Binary operators */\nnp.bitwise_or = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"|\"]);\n/** @category Binary operators */\nnp.bitwise_and = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"&\"]);\n/** @category Binary operators */\nnp.bitwise_xor = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"^\"]);\n/** @category Binary operators */\nnp.bitwise_shift_left = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"<<\"]);\n/** @category Binary operators */\nnp.bitwise_shift_right = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\">>\"]);\n/** @category Binary operators */\nnp.greater = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\">\"]);\n/** @category Binary operators */\nnp.less = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"<\"]);\n/** @category Binary operators */\nnp.greater_equal = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\">=\"]);\n/** @category Binary operators */\nnp.less_equal = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"<=\"]);\n/** @category Binary operators */\nnp.equal = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"==\"]);\n/** @category Binary operators */\nnp.not_equal = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"!=\"]);\n/** @category Binary operators */\nnp.maximum = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"max\"]);\n/** @category Binary operators */\nnp.minimum = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"min\"]);\n/** @category Binary operators */\nnp.logical_or = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"or\"]);\n/** @category Binary operators */\nnp.logical_and = kwargs_1.Func_a_other_out.defaultDecorator(operators.op_binary[\"and\"]);\nnp.atan2 = operators.atan2;\nnp.assign = operators.op_assign['='];\nnp.allclose = operators.allclose;\nnp.isclose = operators.isclose;\nvar ew = NDArray_1.default.prototype.modules.elementwise;\n/** @category Elementwise operators */\nnp.sign = ew.kw_funcs.sign;\n/** @category Elementwise operators */\nnp.sqrt = ew.kw_funcs.sqrt;\n/** @category Elementwise operators */\nnp.square = ew.kw_funcs.square;\n/** @category Elementwise operators */\nnp.exp = ew.kw_funcs.exp;\n/** @category Elementwise operators */\nnp.log = ew.kw_funcs.log;\n/** @category Elementwise operators */\nnp.log2 = ew.kw_funcs.log2;\n/** @category Elementwise operators */\nnp.log10 = ew.kw_funcs.log10;\n/** @category Elementwise operators */\nnp.log1p = ew.kw_funcs.log1p;\n/** @category Elementwise operators */\nnp.sin = ew.kw_funcs.sin;\n/** @category Elementwise operators */\nnp.cos = ew.kw_funcs.cos;\n/** @category Elementwise operators */\nnp.tan = ew.kw_funcs.tan;\n/** @category Elementwise operators */\nnp.asin = ew.kw_funcs.asin;\n/** @category Elementwise operators */\nnp.acos = ew.kw_funcs.acos;\n/** @category Elementwise operators */\nnp.atan = ew.kw_funcs.atan;\n/** @category Elementwise operators */\nnp.cosh = ew.kw_funcs.cosh;\n/** @category Elementwise operators */\nnp.sinh = ew.kw_funcs.sinh;\n/** @category Elementwise operators */\nnp.tanh = ew.kw_funcs.tanh;\n/** @category Elementwise operators */\nnp.acosh = ew.kw_funcs.acosh;\n/** @category Elementwise operators */\nnp.asinh = ew.kw_funcs.asinh;\n/** @category Elementwise operators */\nnp.atanh = ew.kw_funcs.atanh;\n/** @category Elementwise operators */\nnp.floor = ew.kw_funcs.floor;\n/** @category Elementwise operators */\nnp.ceil = ew.kw_funcs.ceil;\n/** @category Elementwise operators */\nnp.isnan = ew.kw_funcs.isnan;\n/** @category Elementwise operators */\nnp.isfinite = ew.kw_funcs.isfinite;\n/** @category Elementwise operators */\nnp.abs = ew.kw_funcs.abs;\n/** @category Elementwise operators */\nnp.bitwise_not = ew.kw_funcs.bitwise_not;\n/** @category Elementwise operators */\nnp.logical_not = ew.kw_funcs.logical_not;\n/** @category Elementwise operators */\nnp.negative = ew.kw_funcs.negative;\n/** @category Elementwise operators */\nnp.round = ew.kw_funcs.round;\n// ==============================\n//   import np modules\n// ============================== \nvar modules_1 = require(\"./modules\");\n/** @category Main @namespace*/\nnp.modules = modules_1.modules;\n/** @category Modules */\nnp.random = np.modules.random;\n/** @category Constructors */\nnp.empty = np.modules.constructors.empty;\n/** @category Constructors */\nnp.zeros = np.modules.constructors.zeros;\n/** @category Constructors */\nnp.ones = np.modules.constructors.ones;\n/** @category Constructors */\nnp.arange = np.modules.constructors.arange;\n/** @category Constructors */\nnp.linspace = np.modules.constructors.linspace;\n/** @category Constructors */\nnp.geomspace = np.modules.constructors.geomspace;\nnp.take = np.modules.indexing.take;\nnp.where = np.modules.indexing.where;\nnp.nonzero = np.modules.indexing.nonzero;\nnp.quantile = np.modules.statistics.kw_exported.quantile;\nnp.nanquantile = np.modules.statistics.kw_exported.nanquantile;\n// np.percentile = np.modules.statistics.kw_exported.percentile;\n// np.median = np.modules.statistics.kw_exported.median;\n// np.average = np.modules.statistics.kw_exported.average;\n/** @category Math constants */\nnp.pi = Math.PI;\n/** @category Math constants */\nnp.e = Math.E;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nd_modules = exports.np = void 0;\n//@ts-check\nvar _globals_1 = require(\"../_globals\");\nvar np = _globals_1.GLOBALS.np, _NDArray = _globals_1.GLOBALS.NDArray;\nexports.np = np;\nif (!np)\n    throw new Error(\"Programming error: np not defined\");\nexports.nd_modules = _NDArray.prototype.modules;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.geomspace = exports.linspace = exports.arange = exports.ones = exports.zeros = exports.empty = void 0;\n//@ts-check\nvar NDArray_1 = require(\"../NDArray\");\nvar _a = NDArray_1.default.prototype.modules, basic = _a.basic, elementwise = _a.elementwise;\n/**\n * Creates a new array with the specified shape and type, without initializing entries.\n */\nfunction empty(shape, dtype) {\n    if (dtype === void 0) { dtype = Float64Array; }\n    return basic.new_from(shape, undefined, dtype);\n}\nexports.empty = empty;\n;\n/**\n * Creates a new array of zeros with the specified shape and dtype.\n */\nfunction zeros(shape, dtype) {\n    if (dtype === void 0) { dtype = Float64Array; }\n    return basic.new_from(shape, function (_) { return 0; }, dtype);\n}\nexports.zeros = zeros;\n;\nfunction ones(shape, dtype) {\n    if (dtype === void 0) { dtype = Float64Array; }\n    return basic.new_from(shape, function (_) { return 1; }, dtype);\n}\nexports.ones = ones;\n;\nfunction arange(arg0, arg1) {\n    if (arg1 === void 0) { arg1 = null; }\n    var start, end;\n    if (arg1 === null)\n        start = 0, end = arg0;\n    else\n        start = arg0, end = arg1;\n    return basic.new_from(end - start, function (_, i) { return start + i; }, Int32Array);\n}\nexports.arange = arange;\n;\nfunction linspace(start, stop, steps, endpoint) {\n    if (steps === void 0) { steps = 50; }\n    if (endpoint === void 0) { endpoint = true; }\n    start = basic.as_number(start);\n    stop = basic.as_number(stop);\n    var n = (steps - (endpoint ? 1 : 0));\n    var arr = arange(steps).divide(n).multiply(stop - start).add(start);\n    return arr;\n}\nexports.linspace = linspace;\nfunction geomspace(start, stop, steps, endpoint) {\n    if (steps === void 0) { steps = 50; }\n    if (endpoint === void 0) { endpoint = true; }\n    start = Math.log(start);\n    stop = Math.log(stop);\n    return elementwise.funcs.exp(linspace(start, stop, steps, endpoint));\n}\nexports.geomspace = geomspace;\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = exports.__parser_pool = exports.__makeSemantics = exports.ohmGrammar = exports.grammar = void 0;\n//@ts-check\nvar _globals_1 = require(\"./_globals\");\nvar ohm = require(\"ohm-js\");\nexports.grammar = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\nArrayGrammar {\\n  Instruction\\n  = Variable \\\"[\\\" Slice \\\"]\\\" AssignSymbol ArithmeticLogicExp -- sliceAssignment\\n  | ArithmeticLogicExp                       -- expression\\n  \\n  Variable\\n   = \\\"#\\\" digit+ \\\"#\\\"\\n  \\n  AssignSymbol\\n  =\\\"=\\\"|\\\"+=\\\"|\\\"-=\\\"|\\\"*=\\\"|\\\"/=\\\"|\\\"%=\\\"|\\\"&=\\\"|\\\"|=\\\"|\\\"^=\\\"|\\\"@=\\\"|\\\"**=\\\"|\\\"<<=\\\"|\\\">>=\\\"|\\\"//=\\\"|\\\"or=\\\"|\\\"and=\\\"|\\\"xor=\\\"|\\\"max=\\\"|\\\"min=\\\"\\n  \\n  /* Declaration in precedence order (weakest first) */\\n  ArithmeticLogicExp = Precedence11\\n\\n  /* https://docs.python.org/3/reference/expressions.html */\\n  Operator11 = \\\"<\\\" | \\\"<=\\\" | \\\">\\\" | \\\">=\\\" | \\\"!=\\\" | \\\"==\\\"\\n  Operator10 = \\\"|\\\"\\n  Operator09 = \\\"^\\\"\\n  Operator08 = \\\"&\\\"\\n  Operator07 = \\\"<<\\\" | \\\">>\\\"\\n  Operator06 = \\\"+\\\" | \\\"-\\\"\\n  Operator05 = \\\"*\\\" | \\\"@\\\" | \\\"/\\\" | \\\"//\\\" | \\\"%\\\"\\n  Operator04 = \\\"~\\\" /* Unary */\\n  Operator03 = \\\"+\\\" | \\\"-\\\" /* Unary. Special treatment to prevent \\\"-1.3\\\" to be \\\"-(array of 1.3)\\\" */\\n  Operator02 = \\\"**\\\"\\n  /* Operator01 = \\\"x[index]\\\" | \\\"x[index:index]\\\" | \\\"x(arguments...)\\\" | \\\"x.attribute\\\" */\\n  /* Operator00 = \\\"(expressions...)\\\" */\\n\\n  Precedence11 = Precedence11 Operator11 Precedence10 | \\\"\\\" \\\"\\\" Precedence10\\n  Precedence10 = Precedence10 Operator10 Precedence09 | \\\"\\\" \\\"\\\" Precedence09\\n  Precedence09 = Precedence09 Operator09 Precedence08 | \\\"\\\" \\\"\\\" Precedence08\\n  Precedence08 = Precedence08 Operator08 Precedence07 | \\\"\\\" \\\"\\\" Precedence07\\n  Precedence07 = Precedence07 Operator07 Precedence06 | \\\"\\\" \\\"\\\" Precedence06\\n  Precedence06 = Precedence06 Operator06 Precedence05 | \\\"\\\" \\\"\\\" Precedence05\\n  Precedence05 = Precedence05 Operator05 Precedence04 | \\\"\\\" \\\"\\\" Precedence04\\n  Precedence04 = \\\"\\\"           Operator04 Precedence03 | \\\"\\\" \\\"\\\" Precedence03 /* Unary */\\n  Precedence03 = \\\"\\\"           Operator03 Precedence02 | \\\"\\\" \\\"\\\" Precedence02 /* Special */\\n  Precedence02 = Precedence02 Operator02 Precedence03 | \\\"\\\" \\\"\\\" Precedence01\\n  Precedence01 = Arr\\n  \\n  Parenthesis = \\\"(\\\" ArithmeticLogicExp \\\")\\\"\\n  Arr\\n    = Arr \\\".\\\" Name CallArgs     -- method\\n    | Arr \\\".\\\" Name              -- attribute\\n    | Arr \\\"[\\\" Slice \\\"]\\\"         -- slice\\n    | Parenthesis\\n    | Name (\\\".\\\" Name)* CallArgs -- call\\n    | number\\n    | Variable\\n\\n  Name  (an identifier)\\n    = (letter|\\\"_\\\") (letter|\\\"_\\\"|digit)*\\n\\n  number  (a number)\\n    = (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"E\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"e\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+  \\\"\\\"  \\\"\\\"        \\\"\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit+ \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\"\\\"        \\\"\\\"\\n  \\n  int (an integer) = \\\"\\\"  digit+ | \\\"-\\\" digit+ | \\\"+\\\" digit+\\n\\n  CallArgs // Using empty strings instead of separate rules\\n   = \\\"(\\\" Args \\\",\\\"  KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" Args \\\",\\\"? \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"   \\\",\\\"? KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"    \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   \\n  Args = NonemptyListOf<ArgValue, \\\",\\\">\\n  KwArgs = NonemptyListOf<KwArg, \\\",\\\">\\n  KwArg = Name \\\"=\\\" ArgValue\\n\\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\\n  Constant = \\\"True\\\" | \\\"False\\\" | \\\"None\\\" | \\\"np.nan\\\" | \\\"np.inf\\\"\\n  JsArray\\n    = \\\"[\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\"]\\\"\\n    | \\\"(\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\")\\\"\\n\\n  String = \\\"'\\\" any* \\\"'\\\" | \\\"\\\"\\\" any* \\\"\\\"\\\"\\n   \\n  Slice = NonemptyListOf<SliceTerm, \\\",\\\">\\n  SliceTerm\\n    = SliceRange\\n    | (\\\":\\\" | \\\"...\\\" | \\\"None\\\") -- constant\\n    | (\\\"True\\\" | \\\"False\\\") -- boolean_constant\\n    | JsArray\\n    | ArithmeticLogicExp\\n  \\n  SliceRange\\n    = int \\\":\\\" int \\\":\\\" int\\n    | int \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | int \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | int \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" int \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n}\\n\"], [\"\\nArrayGrammar {\\n  Instruction\\n  = Variable \\\"[\\\" Slice \\\"]\\\" AssignSymbol ArithmeticLogicExp -- sliceAssignment\\n  | ArithmeticLogicExp                       -- expression\\n  \\n  Variable\\n   = \\\"#\\\" digit+ \\\"#\\\"\\n  \\n  AssignSymbol\\n  =\\\"=\\\"|\\\"+=\\\"|\\\"-=\\\"|\\\"*=\\\"|\\\"/=\\\"|\\\"%=\\\"|\\\"&=\\\"|\\\"|=\\\"|\\\"^=\\\"|\\\"@=\\\"|\\\"**=\\\"|\\\"<<=\\\"|\\\">>=\\\"|\\\"//=\\\"|\\\"or=\\\"|\\\"and=\\\"|\\\"xor=\\\"|\\\"max=\\\"|\\\"min=\\\"\\n  \\n  /* Declaration in precedence order (weakest first) */\\n  ArithmeticLogicExp = Precedence11\\n\\n  /* https://docs.python.org/3/reference/expressions.html */\\n  Operator11 = \\\"<\\\" | \\\"<=\\\" | \\\">\\\" | \\\">=\\\" | \\\"!=\\\" | \\\"==\\\"\\n  Operator10 = \\\"|\\\"\\n  Operator09 = \\\"^\\\"\\n  Operator08 = \\\"&\\\"\\n  Operator07 = \\\"<<\\\" | \\\">>\\\"\\n  Operator06 = \\\"+\\\" | \\\"-\\\"\\n  Operator05 = \\\"*\\\" | \\\"@\\\" | \\\"/\\\" | \\\"//\\\" | \\\"%\\\"\\n  Operator04 = \\\"~\\\" /* Unary */\\n  Operator03 = \\\"+\\\" | \\\"-\\\" /* Unary. Special treatment to prevent \\\"-1.3\\\" to be \\\"-(array of 1.3)\\\" */\\n  Operator02 = \\\"**\\\"\\n  /* Operator01 = \\\"x[index]\\\" | \\\"x[index:index]\\\" | \\\"x(arguments...)\\\" | \\\"x.attribute\\\" */\\n  /* Operator00 = \\\"(expressions...)\\\" */\\n\\n  Precedence11 = Precedence11 Operator11 Precedence10 | \\\"\\\" \\\"\\\" Precedence10\\n  Precedence10 = Precedence10 Operator10 Precedence09 | \\\"\\\" \\\"\\\" Precedence09\\n  Precedence09 = Precedence09 Operator09 Precedence08 | \\\"\\\" \\\"\\\" Precedence08\\n  Precedence08 = Precedence08 Operator08 Precedence07 | \\\"\\\" \\\"\\\" Precedence07\\n  Precedence07 = Precedence07 Operator07 Precedence06 | \\\"\\\" \\\"\\\" Precedence06\\n  Precedence06 = Precedence06 Operator06 Precedence05 | \\\"\\\" \\\"\\\" Precedence05\\n  Precedence05 = Precedence05 Operator05 Precedence04 | \\\"\\\" \\\"\\\" Precedence04\\n  Precedence04 = \\\"\\\"           Operator04 Precedence03 | \\\"\\\" \\\"\\\" Precedence03 /* Unary */\\n  Precedence03 = \\\"\\\"           Operator03 Precedence02 | \\\"\\\" \\\"\\\" Precedence02 /* Special */\\n  Precedence02 = Precedence02 Operator02 Precedence03 | \\\"\\\" \\\"\\\" Precedence01\\n  Precedence01 = Arr\\n  \\n  Parenthesis = \\\"(\\\" ArithmeticLogicExp \\\")\\\"\\n  Arr\\n    = Arr \\\".\\\" Name CallArgs     -- method\\n    | Arr \\\".\\\" Name              -- attribute\\n    | Arr \\\"[\\\" Slice \\\"]\\\"         -- slice\\n    | Parenthesis\\n    | Name (\\\".\\\" Name)* CallArgs -- call\\n    | number\\n    | Variable\\n\\n  Name  (an identifier)\\n    = (letter|\\\"_\\\") (letter|\\\"_\\\"|digit)*\\n\\n  number  (a number)\\n    = (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"E\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+ \\\"e\\\" (\\\"+\\\"|\\\"-\\\")? \\\"digit+\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit* \\\".\\\" digit+  \\\"\\\"  \\\"\\\"        \\\"\\\"\\n    | (\\\"+\\\"|\\\"-\\\")? digit+ \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\"\\\"        \\\"\\\"\\n  \\n  int (an integer) = \\\"\\\"  digit+ | \\\"-\\\" digit+ | \\\"+\\\" digit+\\n\\n  CallArgs // Using empty strings instead of separate rules\\n   = \\\"(\\\" Args \\\",\\\"  KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" Args \\\",\\\"? \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"   \\\",\\\"? KwArgs \\\",\\\"? \\\")\\\"\\n   | \\\"(\\\" \\\"\\\"    \\\"\\\"  \\\"\\\"      \\\"\\\"  \\\")\\\"\\n   \\n  Args = NonemptyListOf<ArgValue, \\\",\\\">\\n  KwArgs = NonemptyListOf<KwArg, \\\",\\\">\\n  KwArg = Name \\\"=\\\" ArgValue\\n\\n  ArgValue = Constant | JsArray | ArithmeticLogicExp | String\\n  Constant = \\\"True\\\" | \\\"False\\\" | \\\"None\\\" | \\\"np.nan\\\" | \\\"np.inf\\\"\\n  JsArray\\n    = \\\"[\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\"]\\\"\\n    | \\\"(\\\" ListOf<ArgValue, \\\",\\\"> \\\",\\\"? \\\")\\\"\\n\\n  String = \\\"\\\\'\\\" any* \\\"\\\\'\\\" | \\\"\\\\\\\"\\\" any* \\\"\\\\\\\"\\\"\\n   \\n  Slice = NonemptyListOf<SliceTerm, \\\",\\\">\\n  SliceTerm\\n    = SliceRange\\n    | (\\\":\\\" | \\\"...\\\" | \\\"None\\\") -- constant\\n    | (\\\"True\\\" | \\\"False\\\") -- boolean_constant\\n    | JsArray\\n    | ArithmeticLogicExp\\n  \\n  SliceRange\\n    = int \\\":\\\" int \\\":\\\" int\\n    | int \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | int \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | int \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" int \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" int \\\"\\\"  \\\"\\\"\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\":\\\" int\\n    | \\\"\\\"  \\\":\\\" \\\"\\\"  \\\"\\\"  \\\"\\\"\\n}\\n\"])));\nexports.ohmGrammar = ohm.grammar(exports.grammar);\nvar __makeSemantics = function () {\n    var semanticVariables = [];\n    var semantics = {\n        Instruction_sliceAssignment: function ($tgt, _open, $where, _close, $symbol, $src) {\n            var _tgt = $tgt.parse();\n            var _src = $src.parse();\n            var symbol = $symbol.sourceString;\n            var where = $where.parse();\n            var tgt = _globals_1.nd_modules.basic.asarray(_tgt);\n            _globals_1.nd_modules.operators.op_assign[symbol](_tgt, where, _src);\n            if (tgt !== _tgt) {\n                // WARNING: Creates a copy. This is terrible for arr[2, 4, 3] = 5\n                tgt = _globals_1.nd_modules.jsInterface.tolist(tgt);\n                while (_tgt.length)\n                    _tgt.pop();\n                // @ts-ignore\n                _tgt.push.apply(_tgt, __spreadArray([], __read(_tgt), false));\n            }\n            return null;\n        },\n        Instruction_expression: function ($arr) {\n            var arr = $arr.parse();\n            if (typeof arr === \"number\")\n                return arr;\n            if (typeof arr === \"boolean\")\n                return arr;\n            if (Array.isArray(arr))\n                return arr;\n            if (_globals_1.nd_modules.basic.isarray(arr))\n                arr = _globals_1.nd_modules.basic.number_collapse(arr);\n            return arr;\n        },\n        Precedence11: BinaryOperation,\n        Precedence10: BinaryOperation,\n        Precedence09: BinaryOperation,\n        Precedence08: BinaryOperation,\n        Precedence07: BinaryOperation,\n        Precedence06: BinaryOperation,\n        Precedence05: BinaryOperation,\n        Precedence04: UnaryOperation,\n        Precedence03: UnaryOperation,\n        Precedence02: BinaryOperation,\n        number: function (arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n            return parseFloat(this.sourceString);\n        },\n        Arr_slice: function ($arr, _open, $where, _close) {\n            var arr = $arr.parse();\n            var where = $where.parse();\n            return arr.index.apply(arr, __spreadArray([], __read(where), false));\n        },\n        SliceTerm_constant: function ($x) {\n            return $x.sourceString;\n        },\n        SliceTerm_boolean_constant: function ($x) {\n            return $x.sourceString === \"True\";\n        },\n        Arr_call: function ($name, $names, _, $callArgs) {\n            var name = $name.sourceString + $names.sourceString;\n            if (name.slice(0, 3) == \"np.\")\n                name = name.slice(3);\n            var func = name.split('.').reduce(function (obj, name) { return obj[name]; }, _globals_1.np);\n            if (func === undefined)\n                throw new Error(\"Unrecognized function \".concat(name));\n            var _a = $callArgs.parse(), args = _a.args, kwArgs = _a.kwArgs;\n            return Object.keys(kwArgs).length == 0 ? func.apply(void 0, __spreadArray([], __read(args), false)) : func.apply(void 0, __spreadArray(__spreadArray([], __read(args), false), [kwArgs], false));\n            // return func.bind(kwArgs)(...args); // Old version\n        },\n        Arr_method: function ($arr, _dot, $name, $callArgs) {\n            var arr = $arr.parse();\n            var name = $name.sourceString;\n            var _a = $callArgs.parse(), args = _a.args, kwArgs = _a.kwArgs;\n            if (arr[name] === undefined)\n                throw new Error(\"Unrecognized method \".concat(name));\n            // return arr.withKwArgs(kwArgs)[name](...args); // Old version\n            return Object.keys(kwArgs).length == 0 ? arr[name].apply(arr, __spreadArray([], __read(args), false)) : arr[name].apply(arr, __spreadArray(__spreadArray([], __read(args), false), [kwArgs], false));\n        },\n        Parenthesis: function (_, $arr, __) { return $arr.parse(); },\n        Arr_attribute: function ($arr, _, $name) { return $arr.parse()[$name.sourceString]; },\n        Variable: function (_, $i, __) {\n            var i = parseInt($i.sourceString);\n            var value = semanticVariables[i];\n            var isListOfArrays = Array.isArray(value) && value.length && _globals_1.nd_modules.basic.isarray(value[0]);\n            if (Array.isArray(value) && !isListOfArrays)\n                value = _globals_1.nd_modules.basic.array(value);\n            return value;\n        },\n        int: function ($sign, $value) {\n            var value = parseInt($value.sourceString);\n            if ($sign.sourceString == '-')\n                return -value;\n            else\n                return value;\n        },\n        SliceRange: function ($start, _, $stop, __, $step) {\n            return this.sourceString;\n        },\n        Constant: function ($x) {\n            switch ($x.sourceString) {\n                case \"True\": return true;\n                case \"False\": return false;\n                case \"None\": return null;\n                case \"np.nan\": return Number.NaN;\n                case \"np.inf\": return Number.POSITIVE_INFINITY;\n            }\n            throw new Error(\"Unrecognized constant \".concat($x.sourceString));\n        },\n        String: function (_open, $str, _close) {\n            return $str.sourceString;\n        },\n        CallArgs: function (_open, $args, _comma, $kwArgs, _trailing, _close) {\n            var args = $args.parse() || [];\n            var entries = $kwArgs.parse() || [];\n            var kwArgs = Object.fromEntries(entries.map(function (_a) {\n                var _b = __read(_a, 2), k = _b[0], v = _b[1];\n                // The following is needed because minus integer gets parsed as array.\n                if (_globals_1.nd_modules.basic.isarray(v))\n                    v = _globals_1.nd_modules.basic.number_collapse(v);\n                return [k, v];\n            }));\n            return { args: args, kwArgs: kwArgs };\n        },\n        KwArg: function ($key, _equals, $value) {\n            var key = $key.sourceString;\n            var value = $value.parse();\n            return [key, value];\n        },\n        NonemptyListOf: function (first, _, more) {\n            return __spreadArray([first], __read(more.children), false).map(function (c) { return c.parse(); });\n        },\n        JsArray: function (_open, $list, _trailing, _close) {\n            var list = $list.parse();\n            // Downcast arrays (needed because, e.g., for [-1, 3, -2], -1 and -2 are interpreted as MyArray rather than int)\n            var tolist = _globals_1.nd_modules.jsInterface.tolist;\n            for (var i in list)\n                if (_globals_1.nd_modules.basic.isarray(list[i]))\n                    list[i] = tolist(list[i]);\n            return list;\n        },\n        _terminal: function () { return null; },\n    };\n    function BinaryOperation($A, $symbol, $B) {\n        var A = $A.parse();\n        var B = $B.parse();\n        var symbol = $symbol.sourceString;\n        if (symbol == \"\" && A === null)\n            return B;\n        var op = _globals_1.nd_modules.operators.op_binary;\n        return op[symbol](A, B);\n    }\n    function UnaryOperation(_, $symbol, $B) {\n        var B = $B.parse();\n        var symbol = $symbol.sourceString;\n        if (symbol == \"\")\n            return B;\n        var ops = _globals_1.nd_modules.elementwise.ops;\n        switch (symbol) {\n            case \"+\": return ops[\"+\"](B);\n            case \"-\": return ops[\"-\"](B);\n            case \"~\": return ops[\"~\"](B);\n            case \"!\": return ops[\"not\"](B);\n        }\n        throw new Error(\"Programming Error: \".concat(symbol));\n    }\n    var ohmSemantics = exports.ohmGrammar.createSemantics();\n    ohmSemantics.addOperation('parse', semantics);\n    /**\n     * @param {TemplateStringsArray} template\n     * @param {any[]} variables\n     */\n    function parse(template) {\n        var variables = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            variables[_i - 1] = arguments[_i];\n        }\n        // Replace variables in template with #0# #1# #2#, ...\n        var idx = 0;\n        var template_with_placeholders = template.join('###').replace(/###/g, function () { return \"#\".concat(idx++, \"#\"); });\n        semanticVariables.length = 0;\n        semanticVariables.push.apply(semanticVariables, __spreadArray([], __read(variables), false));\n        var match = exports.ohmGrammar.match(template_with_placeholders);\n        if (!match.succeeded())\n            throw new Error(match.message);\n        return ohmSemantics(match).parse();\n    }\n    return { parse: parse, ohmSemantics: ohmSemantics, semantics: semantics, semanticVariables: semanticVariables, busy: 0 };\n};\nexports.__makeSemantics = __makeSemantics;\nexports.__parser_pool = [(0, exports.__makeSemantics)()];\n/**\n * @param {TemplateStringsArray} template\n * @param {any[]} variables\n */\nvar parse = function (template) {\n    var variables = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        variables[_i - 1] = arguments[_i];\n    }\n    // Thread control, because the parser depends on semanticVariables,\n    // but we don't want to waste CPU time recreating the parser on each call\n    // No cleaning is done (we assume that the number of threads is negligible compared to the memory size)\n    var pool = exports.__parser_pool;\n    for (var i = 0; i < pool.length; i++) {\n        var parser = pool[i];\n        if (parser.busy++ == 0) {\n            try {\n                return parser.parse.apply(parser, __spreadArray([template], __read(variables), false));\n            }\n            finally {\n                parser.busy = 0;\n            }\n        }\n        if (i == pool.length)\n            pool.push((0, exports.__makeSemantics)());\n    }\n};\nexports.parse = parse;\nvar templateObject_1;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.modules = void 0;\n//@ts-check\nrequire(\"./_globals\");\nvar constructors = require(\"./constructors\");\nvar grammar = require(\"./grammar\");\nvar indexing = require(\"./indexing\");\nvar random = require(\"./random\");\nvar statistics = require(\"./statistics\");\nexports.modules = {\n    constructors: constructors,\n    grammar: grammar,\n    random: random,\n    indexing: indexing,\n    statistics: statistics,\n};\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nonzero = exports.where = exports.take = void 0;\nvar NDArray_1 = require(\"../NDArray\");\nvar basic_1 = require(\"../array/basic\");\nfunction take(a, indices, axis) {\n    var where = a.shape.map(function () { return ':'; });\n    where[axis] = indices;\n    return a.index.apply(a, __spreadArray([], __read(where), false));\n}\nexports.take = take;\nfunction where(condition, x, y, out) {\n    if (out === void 0) { out = null; }\n    if (typeof condition === 'boolean')\n        return condition ? x : y;\n    condition = (0, basic_1.asarray)(condition);\n    if (out == null)\n        out = condition.copy();\n    else\n        out = (0, basic_1.asarray)(out);\n    out.assign(x, condition);\n    out.assign(y, condition.logical_not());\n    return out;\n}\nexports.where = where;\nfunction nonzero(a) {\n    var raw_indices = __spreadArray([], __read(a.flat), false).map(function (v, i) { return v ? i : null; }).filter(function (v) { return v !== null; });\n    // Convert to many 1D arrays\n    var indices = a.shape.map(function () { return new Int32Array(raw_indices.length); });\n    raw_indices.forEach(function (v, pos) {\n        for (var i = a.shape.length - 1; i >= 0; i--) {\n            indices[i][pos] = v % a.shape[i];\n            v = Math.floor(v / a.shape[i]);\n        }\n    });\n    return indices.map(function (buffer) { return new NDArray_1.default(buffer); });\n}\nexports.nonzero = nonzero;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shuffle = exports.shuffled = exports._shuffled = exports._shuffle = exports.normal = exports.randn = exports._normal_buffer = exports.exponential = exports.uniform = exports.random = void 0;\n//@ts-check\nvar _globals_1 = require(\"./_globals\");\nvar dtypes_1 = require(\"../dtypes\");\nfunction random(shape) {\n    return _globals_1.nd_modules.basic.new_from(shape, function (_) { return Math.random(); }, Float64Array);\n}\nexports.random = random;\n;\nfunction uniform(a, b, shape) {\n    return random(shape).multiply(b - a).add(a);\n}\nexports.uniform = uniform;\n;\nfunction exponential(mean, shape) {\n    return _globals_1.np.multiply(mean, _globals_1.np.subtract(0, _globals_1.np.log(random(shape))));\n}\nexports.exponential = exponential;\n;\nfunction _normal_buffer(n) {\n    var out = (0, dtypes_1.new_buffer)(n);\n    var i = 0;\n    while (i < n) {\n        var u = Math.random() * 2 - 1;\n        var v = Math.random() * 2 - 1;\n        var s = u * u + v * v;\n        if (s > 1)\n            continue;\n        var x = Math.sqrt(-2 * Math.log(s) / s) * u;\n        var y = Math.sqrt(-2 * Math.log(s) / s) * v;\n        out[i++] = x;\n        if (i < n)\n            out[i++] = y;\n    }\n    return out;\n}\nexports._normal_buffer = _normal_buffer;\nfunction randn(shape) {\n    var flat = _normal_buffer(shape.reduce(function (a, b) { return a * b; }, 1));\n    return new _globals_1.np.NDArray(flat, shape);\n}\nexports.randn = randn;\n;\nfunction normal(mean, std, shape) {\n    return randn(shape).multiply(std).add(mean);\n}\nexports.normal = normal;\n;\n/** @param {any[]} list */\nfunction _shuffle(list) {\n    var _a;\n    // Fisher-Yates (aka Knuth) shuffle.\n    // https://stackoverflow.com/a/2450976\n    for (var i = list.length - 1; i >= 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        _a = __read([list[j], list[i]], 2), list[i] = _a[0], list[j] = _a[1];\n    }\n}\nexports._shuffle = _shuffle;\nfunction _shuffled(list) {\n    var out = list.slice();\n    _shuffle(out);\n    return out;\n}\nexports._shuffled = _shuffled;\nfunction shuffled(arr) {\n    if (arr.shape.length == 0)\n        return arr;\n    if (arr.shape.length == 1) {\n        var flat = _shuffled(arr.flat);\n        return new _globals_1.np.NDArray(flat, arr.shape);\n    }\n    var perm = _shuffled(Array.from({ length: arr.length }, function (_, i) { return i; }));\n    var out = _globals_1.np.empty(arr.shape);\n    for (var i = 0; i < arr.length; i++)\n        out.assign(arr.index(perm[i]), i);\n    return out;\n}\nexports.shuffled = shuffled;\nfunction shuffle(arr) {\n    arr.assign(shuffled(arr));\n}\nexports.shuffle = shuffle;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.kw_exported = exports.nanmedian = exports.nanquantile = exports.nanpercentile = exports.average = exports.median = exports.quantile = exports.percentile = void 0;\nvar _globals_1 = require(\"../array/_globals\");\nvar kwargs_1 = require(\"../array/kwargs\");\nvar transform_1 = require(\"../array/transform\");\nvar _globals_2 = require(\"./_globals\");\n/**\n * Compute the q-th percentile of the data along the specified axis.\n */\nfunction percentile(a, q, axis) {\n    q = _globals_2.np.divide(q, 100);\n    return quantile(a, q, axis);\n}\nexports.percentile = percentile;\nfunction js_quantile_a_1D_q_01D(a_flat, q_flat, _nan_handling) {\n    if (_nan_handling === void 0) { _nan_handling = false; }\n    a_flat = __spreadArray([], __read(a_flat), false).sort(transform_1.cmp_nan_at_the_end);\n    var n = a_flat.length;\n    if (_nan_handling)\n        n -= a_flat.reduce(function (cum, x) { return cum + (isNaN(x) ? 1 : 0); }, 0);\n    return q_flat.map(function (q) {\n        var nq = q * (n - 1);\n        var lo = Math.floor(nq);\n        if (nq == lo)\n            return a_flat[lo];\n        var hi = lo + 1;\n        if (nq == hi)\n            return a_flat[hi];\n        return a_flat[lo] * (hi - nq) + a_flat[hi] * (nq - lo);\n    });\n}\n/**\n * Compute the q-th quantile of the data along the specified axis.\n */\nfunction quantile(a, q, axis, _nan_handling) {\n    if (_nan_handling === void 0) { _nan_handling = false; }\n    q = (0, _globals_1.asarray)(q);\n    if (axis != a.shape.length - 1) {\n        a = (0, transform_1.swapAxes)(a, axis, -1);\n    }\n    var outer_shape = q.shape;\n    var inner_shape = a.shape.slice(0, -1);\n    a = a.reshape(-1, a.shape.at(-1));\n    q = q.reshape(-1);\n    var _a = __read(a.shape, 2), nrows = _a[0], ncols = _a[1];\n    var a_flat = a.flat;\n    var q_flat = q.flat;\n    var out = new Float64Array(q.size * nrows);\n    for (var i = 0; i < nrows; i++) {\n        var row = a_flat.slice(i * ncols, (i + 1) * ncols);\n        var values = js_quantile_a_1D_q_01D(row, q_flat, _nan_handling);\n        var j = i;\n        for (var k in values) {\n            out[j] = values[k];\n            j += nrows;\n        }\n    }\n    return (0, _globals_1.new_NDArray)(out, __spreadArray(__spreadArray([], __read(outer_shape), false), __read(inner_shape), false));\n    // a = np.sort(a, { axis: null });\n    // const n = _nan_handling ? np.isnan(a).logical_not().sum(0) : a.shape[0];\n    // // TODO: throw if out of bounds \n    // const indices_float = op_binary[\"*\"](q, op_binary[\"-\"](n, 1));\n    // return n_ary_operation([indices_float], a.shape.slice(1), (iq) => {\n    //   const lo = Math.floor(iq);\n    //   if (iq == lo) return np.asarray(a.index(iq));\n    //   const hi = lo + 1;\n    //   if (iq == hi) return np.asarray(a.index(iq));\n    //   return average(a.index(`${lo}:${hi + 1}`), 0, asarray([hi - iq, iq - lo]), false);\n    // });\n}\nexports.quantile = quantile;\n/**\n * Compute the median along the specified axis.\n */\nfunction median(a, axis, keepdims) {\n    var out = quantile(a, 0.5, axis);\n    if (keepdims) {\n        var shape = a.shape.slice();\n        shape[axis] = 1;\n        out = out.reshape(shape);\n    }\n    return out;\n}\nexports.median = median;\n/**\n * Compute the weighted average along the specified axis.\n */\nfunction average(a, axis, weights, keepdims) {\n    if (weights === null)\n        return _globals_2.np.mean(a, axis);\n    // MISSING: assert weights is 1D\n    var denominator = _globals_2.np.sum(weights);\n    var weights_shape = a.shape.map(function () { return 1; });\n    weights_shape[axis] = weights.size;\n    weights = weights.reshape(weights_shape);\n    var numerator = _globals_2.np.sum(_globals_2.np.multiply(a, weights), axis, keepdims);\n    return _globals_2.np.asarray(_globals_2.np.divide(numerator, denominator));\n}\nexports.average = average;\n/**\n * Compute the q-th percentile of the data along the specified axis, while ignoring nan values.\n*/\nfunction nanpercentile(a, q, axis) {\n    q = _globals_2.np.divide(q, 100);\n    return nanquantile(a, q, axis);\n}\nexports.nanpercentile = nanpercentile;\n/**\n * Compute the q-th quantile of the data along the specified axis, while ignoring nan values.\n */\nfunction nanquantile(a, q, axis) {\n    return quantile(a, q, axis, true);\n}\nexports.nanquantile = nanquantile;\n/**\n * Compute the median along the specified axis, while ignoring NaNs.\n */\nfunction nanmedian(a, axis, keepdims) {\n    var out = nanquantile(a, 0.5, axis);\n    if (keepdims) {\n        var shape = a.shape.slice();\n        shape[axis] = 1;\n        out = out.reshape(shape);\n    }\n    return out;\n}\nexports.nanmedian = nanmedian;\n// /**\n//  * Return Pearson product-moment correlation coefficients.\n//  */\n// export function corrcoef(x: NDArray, y: NDArray, rowvar = true, bias = false, ddof = 0, dtype = Number) {\n//   const x_shape = x.shape;\n//   const y_shape = y.shape;\n//   if (x_shape.length !== 1 || y_shape.length !== 1) throw new Error(\"Expected 1D arrays\");\n//   if (x_shape[0] !== y_shape[0]) throw new Error(\"Expected arrays of the same length\");\n//   const x_mean = np.mean(x);\n//   const y_mean = np.mean(y);\n//   const x_std = np.std(x);\n//   const y_std = np.std(y);\n//   const n = x_shape[0];\n//   const cov = np.mean(np.multiply(np.subtract(x, x_mean), np.subtract(y, y_mean)));\n//   const corr = np.divide(cov, np.multiply(x_std, y_std));\n//   return corr;\n// }\n// /**\n//  * Cross-correlation of two 1-dimensional sequences.\n//  */\n// export function correlate(a: NDArray, v: NDArray, mode) {\n//   throw new Error(\"Not implemented\");\n// }\n// /**\n//  * Estimate a covariance matrix, given data and weights.\n//  */\n// export function cov(m: NDArray, y: NDArray, rowvar = true, bias = false, ddof = 0, fweights = null, aweights = null) {\n//   const m_shape = m.shape;\n//   const y_shape = y.shape;\n//   if (m_shape.length !== 2 || y_shape.length !== 2) throw new Error(\"Expected 2D arrays\");\n//   if (rowvar) {\n//     m = np.transpose(m);\n//     y = np.transpose(y);\n//   }\n//   const m_mean = np.mean(m, 1);\n//   const y_mean = np.mean(y, 1);\n//   const m_centered = np.subtract(m, m_mean.reshape(m_shape[0], 1));\n//   const y_centered = np.subtract(y, y_mean.reshape(y_shape[0], 1));\n//   const m_weights = fweights || np.ones(m_shape[1]);\n//   const y_weights = aweights || np.ones(y_shape[1]);\n//   const m_weighted = np.multiply(m_centered, m_weights);\n//   const y_weighted = np.multiply(y_centered, y_weights);\n//   const cov = np.divide(np.sum(np.multiply(m_weighted, y_weighted), 1), m_shape[1] - ddof);\n//   return cov;\n// }\n// /**\n//  * Compute the histogram of a dataset.\n//  */\n// export function histogram(a: NDArray, bins, range, density, weights) {\n//   throw new Error(\"Not implemented\");\n// }\n// /**\n//  * Compute the bi-dimensional histogram of two data samples.\n//  */\n// export function histogram2d(x: NDArray, y: NDArray, bins, range, density, weights) {\n//   throw new Error(\"Not implemented\");\n// }\n// /**\n//  * Compute the multidimensional histogram of some data.\n//  */\n// export function histogramdd(sample: NDArray, bins, range, density, weights) {\n//   throw new Error(\"Not implemented\");\n// }\n// /**\n//  * Count number of occurrences of each value in array of non-negative ints.\n//  */\n// export function bincount(x: NDArray, weights, minlength) {\n//   throw new Error(\"Not implemented\");\n// }\n// /**\n//  * Function to calculate only the edges of the bins used by the histogram function.\n//  */\n// export function histogram_bin_edges(a: NDArray, bins, range, weights) {\n// }\n// /**\n//  * Return the indices of the bins to which each value in input array belongs.\n//  */\n// export function digitize(x: NDArray, bins, right) {\n//   throw new Error(\"Not implemented\");\n// }\n/*\n\nCorrelating\n  - corrcoef(x[, y, rowvar, bias, ddof, dtype]) Return Pearson product-moment correlation coefficients.\n  - correlate(a, v[, mode]) Cross-correlation of two 1-dimensional sequences.\n  - cov(m[, y, rowvar, bias, ddof, fweights, ...]) Estimate a covariance matrix, given data and weights.\n\nHistograms\n - histogram(a[, bins, range, density, weights]) Compute the histogram of a dataset.\n - histogram2d(x, y[, bins, range, density, ...]) Compute the bi-dimensional histogram of two data samples.\n - histogramdd(sample[, bins, range, density, ...]) Compute the multidimensional histogram of some data.\n - bincount(x, /[, weights, minlength]) Count number of occurrences of each value in array of non-negative ints.\n - histogram_bin_edges(a[, bins, range, weights]) Function to calculate only the edges of the bins used by the histogram function.\n - digitize(x, bins[, right]) Return the indices of the bins to which each value in input array belongs.\n\nAverages and variances\n\n  - median(a[, axis, out, overwrite_input, keepdims]) Compute the median along the specified axis.\n  - average(a[, axis, weight  s, returned, keepdims]) Compute the weighted average along the specified axis.\n  - mean(a[, axis, dtype, out, keepdims, where]) Compute the arithmetic mean along the specified axis.\n  - std(a[, axis, dtype, out, ddof, keepdims, where]) Compute the standard deviation along the specified axis.\n  - var(a[, axis, dtype, out, ddof, keepdims, where]) Compute the variance along the specified axis.\n  - nanmedian(a[, axis, out, overwrite_input, ...]) Compute the median along the specified axis, while ignoring NaNs.\n  - nanmean(a[, axis, dtype, out, keepdims, where]) Compute the arithmetic mean along the specified axis, ignoring NaNs.\n  - nanstd(a[, axis, dtype, out, ddof, ...]) Compute the standard deviation along the specified axis, while ignoring NaNs.\n  - nanvar(a[, axis, dtype, out, ddof, ...]) Compute the variance along the specified axis, while ignoring NaNs.\n */\nexports.kw_exported = {\n    quantile: kwargs_1.Func_a_q_axis.defaultDecorator(quantile),\n    nanquantile: kwargs_1.Func_a_q_axis.defaultDecorator(nanquantile),\n    percentile: kwargs_1.Func_a_q_axis.defaultDecorator(percentile),\n    nanpercentile: kwargs_1.Func_a_q_axis.defaultDecorator(nanpercentile),\n    median: kwargs_1.Func_a_axis_keepdims.defaultDecorator(median),\n    nanmedian: kwargs_1.Func_a_axis_keepdims.defaultDecorator(nanmedian),\n};\n","\"use strict\";\n//@ts-check\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.allClose = exports.allEq = exports.ravel = exports.extend = exports.binary_operation = void 0;\nfunction binary_operation(A, B, func) {\n    // Pointwise check for equality for arbitrary js arrays (without broadcasting)\n    var C = [];\n    var q = [[A, B, C, 0]];\n    var seen;\n    while (true) {\n        var _next = q.pop();\n        if (!_next)\n            return true;\n        var _a = __read(_next, 4), a = _a[0], b = _a[1], c = _a[2], depth = _a[3];\n        if (Array.isArray(a) && Array.isArray(b) && a.length == b.length) {\n            for (var i in a) {\n                var c_i = [];\n                c.push(c_i);\n                q.push([a[i], b[i], c_i, depth + 1]);\n            }\n        }\n        else\n            c.push(func(a, b));\n        if (depth > 10000 && Array.isArray(a)) { // Activate circular reference detection\n            // Checking only A suffices (the other will exhaust otherwise)\n            seen = /**@type {any[]}*/ (seen || []);\n            if (seen.includes(a))\n                throw new Error(\"Circular reference found. \".concat(a));\n            seen[depth - 10000] = a;\n        }\n    }\n}\nexports.binary_operation = binary_operation;\n;\nfunction extend(listA, listB, chunkSize) {\n    if (chunkSize === void 0) { chunkSize = 10000; }\n    var i = 0;\n    for (var i_1 = 0; i_1 < listB.length; i_1 += chunkSize) {\n        i_1 = Math.min(i_1, listB.length);\n        listA.push.apply(listA, __spreadArray([], __read(listB.slice(i_1, i_1 + chunkSize)), false));\n    }\n    return listA;\n}\nexports.extend = extend;\nfunction ravel(A) {\n    // Flatten js array\n    var q = [[A, 0]], flat = [];\n    var seen;\n    var _loop_1 = function () {\n        var _next = q.pop();\n        if (!_next)\n            return \"break\";\n        var _a = __read(_next, 2), a = _a[0], depth = _a[1];\n        if (depth > 10000 && Array.isArray(a)) { // Activate circular reference detection\n            seen = /**@type {any[]}*/ (seen || []);\n            if (seen.includes(a))\n                throw new Error(\"Circular reference found. \".concat(a));\n            seen[depth - 10000] = a;\n        }\n        if (Array.isArray(a)) {\n            extend(q, a.map(function (v) { return [v, depth + 1]; }));\n            return \"continue\";\n        }\n        flat.push(a);\n    };\n    while (true) {\n        var state_1 = _loop_1();\n        if (state_1 === \"break\")\n            break;\n    }\n    return flat;\n}\nexports.ravel = ravel;\n;\nfunction allEq(A, B, nan_equal) {\n    if (nan_equal === void 0) { nan_equal = false; }\n    var different = new Error('');\n    var func = function (a, b) {\n        if (a !== b && !(nan_equal && Number.isNaN(a) && Number.isNaN(b)))\n            throw different;\n        return 0;\n    };\n    try {\n        binary_operation(A, B, func);\n    }\n    catch (err) {\n        if (err === different)\n            return false;\n        else\n            throw err;\n    }\n    return true;\n}\nexports.allEq = allEq;\n;\nfunction allClose(A, B, rtol, atol, nan_equal) {\n    if (rtol === void 0) { rtol = 1.e-5; }\n    if (atol === void 0) { atol = 1.e-8; }\n    if (nan_equal === void 0) { nan_equal = false; }\n    var func = function (a, b) {\n        if (Number.isFinite(a) && Number.isFinite(b))\n            return Math.abs(a - b) <= atol + rtol * Math.abs(b);\n        return (a == b) || (nan_equal && Number.isNaN(a) && Number.isNaN(b));\n    };\n    var different = new Error('');\n    var wrapper = function (a, b) {\n        if (!func(a, b))\n            throw different;\n        return 0;\n    };\n    try {\n        binary_operation(A, B, wrapper);\n    }\n    catch (err) {\n        if (err === different)\n            return false;\n        else\n            throw err;\n    }\n    return true;\n}\nexports.allClose = allClose;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// --------------------------------------------------------------------\n\n// --------------------------------------------------------------------\n// Exports\n// --------------------------------------------------------------------\n\nfunction abstract(optMethodName) {\n  const methodName = optMethodName || '';\n  return function() {\n    throw new Error(\n        'this method ' +\n        methodName +\n        ' is abstract! ' +\n        '(it has no implementation in class ' +\n        this.constructor.name +\n        ')',\n    );\n  };\n}\n\nfunction assert(cond, message) {\n  if (!cond) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n\n// Define a lazily-computed, non-enumerable property named `propName`\n// on the object `obj`. `getterFn` will be called to compute the value the\n// first time the property is accessed.\nfunction defineLazyProperty(obj, propName, getterFn) {\n  let memo;\n  Object.defineProperty(obj, propName, {\n    get() {\n      if (!memo) {\n        memo = getterFn.call(this);\n      }\n      return memo;\n    },\n  });\n}\n\nfunction clone(obj) {\n  if (obj) {\n    return Object.assign({}, obj);\n  }\n  return obj;\n}\n\nfunction repeatFn(fn, n) {\n  const arr = [];\n  while (n-- > 0) {\n    arr.push(fn());\n  }\n  return arr;\n}\n\nfunction repeatStr(str, n) {\n  return new Array(n + 1).join(str);\n}\n\nfunction repeat(x, n) {\n  return repeatFn(() => x, n);\n}\n\nfunction getDuplicates(array) {\n  const duplicates = [];\n  for (let idx = 0; idx < array.length; idx++) {\n    const x = array[idx];\n    if (array.lastIndexOf(x) !== idx && duplicates.indexOf(x) < 0) {\n      duplicates.push(x);\n    }\n  }\n  return duplicates;\n}\n\nfunction copyWithoutDuplicates(array) {\n  const noDuplicates = [];\n  array.forEach(entry => {\n    if (noDuplicates.indexOf(entry) < 0) {\n      noDuplicates.push(entry);\n    }\n  });\n  return noDuplicates;\n}\n\nfunction isSyntactic(ruleName) {\n  const firstChar = ruleName[0];\n  return firstChar === firstChar.toUpperCase();\n}\n\nfunction isLexical(ruleName) {\n  return !isSyntactic(ruleName);\n}\n\nfunction padLeft(str, len, optChar) {\n  const ch = optChar || ' ';\n  if (str.length < len) {\n    return repeatStr(ch, len - str.length) + str;\n  }\n  return str;\n}\n\n// StringBuffer\n\nfunction StringBuffer() {\n  this.strings = [];\n}\n\nStringBuffer.prototype.append = function(str) {\n  this.strings.push(str);\n};\n\nStringBuffer.prototype.contents = function() {\n  return this.strings.join('');\n};\n\nconst escapeUnicode = str => String.fromCodePoint(parseInt(str, 16));\n\nfunction unescapeCodePoint(s) {\n  if (s.charAt(0) === '\\\\') {\n    switch (s.charAt(1)) {\n      case 'b':\n        return '\\b';\n      case 'f':\n        return '\\f';\n      case 'n':\n        return '\\n';\n      case 'r':\n        return '\\r';\n      case 't':\n        return '\\t';\n      case 'v':\n        return '\\v';\n      case 'x':\n        return escapeUnicode(s.slice(2, 4));\n      case 'u':\n        return s.charAt(2) === '{' ?\n          escapeUnicode(s.slice(3, -1)) :\n          escapeUnicode(s.slice(2, 6));\n      default:\n        return s.charAt(1);\n    }\n  } else {\n    return s;\n  }\n}\n\n// Helper for producing a description of an unknown object in a safe way.\n// Especially useful for error messages where an unexpected type of object was encountered.\nfunction unexpectedObjToString(obj) {\n  if (obj == null) {\n    return String(obj);\n  }\n  const baseToString = Object.prototype.toString.call(obj);\n  try {\n    let typeName;\n    if (obj.constructor && obj.constructor.name) {\n      typeName = obj.constructor.name;\n    } else if (baseToString.indexOf('[object ') === 0) {\n      typeName = baseToString.slice(8, -1); // Extract e.g. \"Array\" from \"[object Array]\".\n    } else {\n      typeName = typeof obj;\n    }\n    return typeName + ': ' + JSON.stringify(String(obj));\n  } catch (e) {\n    return baseToString;\n  }\n}\n\nvar common = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  abstract: abstract,\n  assert: assert,\n  defineLazyProperty: defineLazyProperty,\n  clone: clone,\n  repeatFn: repeatFn,\n  repeatStr: repeatStr,\n  repeat: repeat,\n  getDuplicates: getDuplicates,\n  copyWithoutDuplicates: copyWithoutDuplicates,\n  isSyntactic: isSyntactic,\n  isLexical: isLexical,\n  padLeft: padLeft,\n  StringBuffer: StringBuffer,\n  unescapeCodePoint: unescapeCodePoint,\n  unexpectedObjToString: unexpectedObjToString\n});\n\n// These are just categories that are used in ES5/ES2015.\n// The full list of Unicode categories is here: http://www.fileformat.info/info/unicode/category/index.htm.\nconst UnicodeCategories = {\n  // Letters\n  Lu: /\\p{Lu}/u,\n  Ll: /\\p{Ll}/u,\n  Lt: /\\p{Lt}/u,\n  Lm: /\\p{Lm}/u,\n  Lo: /\\p{Lo}/u,\n\n  // Numbers\n  Nl: /\\p{Nl}/u,\n  Nd: /\\p{Nd}/u,\n\n  // Marks\n  Mn: /\\p{Mn}/u,\n  Mc: /\\p{Mc}/u,\n\n  // Punctuation, Connector\n  Pc: /\\p{Pc}/u,\n\n  // Separator, Space\n  Zs: /\\p{Zs}/u,\n\n  // These two are not real Unicode categories, but our useful for Ohm.\n  // L is a combination of all the letter categories.\n  // Ltmo is a combination of Lt, Lm, and Lo.\n  L: /\\p{Letter}/u,\n  Ltmo: /\\p{Lt}|\\p{Lm}|\\p{Lo}/u,\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// General stuff\n\nclass PExpr {\n  constructor() {\n    if (this.constructor === PExpr) {\n      throw new Error(\"PExpr cannot be instantiated -- it's abstract\");\n    }\n  }\n\n  // Set the `source` property to the interval containing the source for this expression.\n  withSource(interval) {\n    if (interval) {\n      this.source = interval.trimmed();\n    }\n    return this;\n  }\n}\n\n// Any\n\nconst any = Object.create(PExpr.prototype);\n\n// End\n\nconst end = Object.create(PExpr.prototype);\n\n// Terminals\n\nclass Terminal extends PExpr {\n  constructor(obj) {\n    super();\n    this.obj = obj;\n  }\n}\n\n// Ranges\n\nclass Range extends PExpr {\n  constructor(from, to) {\n    super();\n    this.from = from;\n    this.to = to;\n    // If either `from` or `to` is made up of multiple code units, then\n    // the range should consume a full code point, not a single code unit.\n    this.matchCodePoint = from.length > 1 || to.length > 1;\n  }\n}\n\n// Parameters\n\nclass Param extends PExpr {\n  constructor(index) {\n    super();\n    this.index = index;\n  }\n}\n\n// Alternation\n\nclass Alt extends PExpr {\n  constructor(terms) {\n    super();\n    this.terms = terms;\n  }\n}\n\n// Extend is an implementation detail of rule extension\n\nclass Extend extends Alt {\n  constructor(superGrammar, name, body) {\n    const origBody = superGrammar.rules[name].body;\n    super([body, origBody]);\n\n    this.superGrammar = superGrammar;\n    this.name = name;\n    this.body = body;\n  }\n}\n\n// Splice is an implementation detail of rule overriding with the `...` operator.\nclass Splice extends Alt {\n  constructor(superGrammar, ruleName, beforeTerms, afterTerms) {\n    const origBody = superGrammar.rules[ruleName].body;\n    super([...beforeTerms, origBody, ...afterTerms]);\n\n    this.superGrammar = superGrammar;\n    this.ruleName = ruleName;\n    this.expansionPos = beforeTerms.length;\n  }\n}\n\n// Sequences\n\nclass Seq extends PExpr {\n  constructor(factors) {\n    super();\n    this.factors = factors;\n  }\n}\n\n// Iterators and optionals\n\nclass Iter extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\nclass Star extends Iter {}\nclass Plus extends Iter {}\nclass Opt extends Iter {}\n\nStar.prototype.operator = '*';\nPlus.prototype.operator = '+';\nOpt.prototype.operator = '?';\n\nStar.prototype.minNumMatches = 0;\nPlus.prototype.minNumMatches = 1;\nOpt.prototype.minNumMatches = 0;\n\nStar.prototype.maxNumMatches = Number.POSITIVE_INFINITY;\nPlus.prototype.maxNumMatches = Number.POSITIVE_INFINITY;\nOpt.prototype.maxNumMatches = 1;\n\n// Predicates\n\nclass Not extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\nclass Lookahead extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\n// \"Lexification\"\n\nclass Lex extends PExpr {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n  }\n}\n\n// Rule application\n\nclass Apply extends PExpr {\n  constructor(ruleName, args = []) {\n    super();\n    this.ruleName = ruleName;\n    this.args = args;\n  }\n\n  isSyntactic() {\n    return isSyntactic(this.ruleName);\n  }\n\n  // This method just caches the result of `this.toString()` in a non-enumerable property.\n  toMemoKey() {\n    if (!this._memoKey) {\n      Object.defineProperty(this, '_memoKey', {value: this.toString()});\n    }\n    return this._memoKey;\n  }\n}\n\n// Unicode character\n\nclass UnicodeChar extends PExpr {\n  constructor(category) {\n    super();\n    this.category = category;\n    this.pattern = UnicodeCategories[category];\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction createError(message, optInterval) {\n  let e;\n  if (optInterval) {\n    e = new Error(optInterval.getLineAndColumnMessage() + message);\n    e.shortMessage = message;\n    e.interval = optInterval;\n  } else {\n    e = new Error(message);\n  }\n  return e;\n}\n\n// ----------------- errors about intervals -----------------\n\nfunction intervalSourcesDontMatch() {\n  return createError(\"Interval sources don't match\");\n}\n\n// ----------------- errors about grammars -----------------\n\n// Grammar syntax error\n\nfunction grammarSyntaxError(matchFailure) {\n  const e = new Error();\n  Object.defineProperty(e, 'message', {\n    enumerable: true,\n    get() {\n      return matchFailure.message;\n    },\n  });\n  Object.defineProperty(e, 'shortMessage', {\n    enumerable: true,\n    get() {\n      return 'Expected ' + matchFailure.getExpectedText();\n    },\n  });\n  e.interval = matchFailure.getInterval();\n  return e;\n}\n\n// Undeclared grammar\n\nfunction undeclaredGrammar(grammarName, namespace, interval) {\n  const message = namespace ?\n    `Grammar ${grammarName} is not declared in namespace '${namespace}'` :\n    'Undeclared grammar ' + grammarName;\n  return createError(message, interval);\n}\n\n// Duplicate grammar declaration\n\nfunction duplicateGrammarDeclaration(grammar, namespace) {\n  return createError('Grammar ' + grammar.name + ' is already declared in this namespace');\n}\n\nfunction grammarDoesNotSupportIncrementalParsing(grammar) {\n  return createError(`Grammar '${grammar.name}' does not support incremental parsing`);\n}\n\n// ----------------- rules -----------------\n\n// Undeclared rule\n\nfunction undeclaredRule(ruleName, grammarName, optInterval) {\n  return createError(\n      'Rule ' + ruleName + ' is not declared in grammar ' + grammarName,\n      optInterval,\n  );\n}\n\n// Cannot override undeclared rule\n\nfunction cannotOverrideUndeclaredRule(ruleName, grammarName, optSource) {\n  return createError(\n      'Cannot override rule ' + ruleName + ' because it is not declared in ' + grammarName,\n      optSource,\n  );\n}\n\n// Cannot extend undeclared rule\n\nfunction cannotExtendUndeclaredRule(ruleName, grammarName, optSource) {\n  return createError(\n      'Cannot extend rule ' + ruleName + ' because it is not declared in ' + grammarName,\n      optSource,\n  );\n}\n\n// Duplicate rule declaration\n\nfunction duplicateRuleDeclaration(ruleName, grammarName, declGrammarName, optSource) {\n  let message =\n    \"Duplicate declaration for rule '\" + ruleName + \"' in grammar '\" + grammarName + \"'\";\n  if (grammarName !== declGrammarName) {\n    message += \" (originally declared in '\" + declGrammarName + \"')\";\n  }\n  return createError(message, optSource);\n}\n\n// Wrong number of parameters\n\nfunction wrongNumberOfParameters(ruleName, expected, actual, source) {\n  return createError(\n      'Wrong number of parameters for rule ' +\n      ruleName +\n      ' (expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n      source,\n  );\n}\n\n// Wrong number of arguments\n\nfunction wrongNumberOfArguments(ruleName, expected, actual, expr) {\n  return createError(\n      'Wrong number of arguments for rule ' +\n      ruleName +\n      ' (expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n      expr,\n  );\n}\n\n// Duplicate parameter names\n\nfunction duplicateParameterNames(ruleName, duplicates, source) {\n  return createError(\n      'Duplicate parameter names in rule ' + ruleName + ': ' + duplicates.join(', '),\n      source,\n  );\n}\n\n// Invalid parameter expression\n\nfunction invalidParameter(ruleName, expr) {\n  return createError(\n      'Invalid parameter to rule ' +\n      ruleName +\n      ': ' +\n      expr +\n      ' has arity ' +\n      expr.getArity() +\n      ', but parameter expressions must have arity 1',\n      expr.source,\n  );\n}\n\n// Application of syntactic rule from lexical rule\n\nconst syntacticVsLexicalNote =\n  'NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. ' +\n  'See https://ohmjs.org/d/svl for more details.';\n\nfunction applicationOfSyntacticRuleFromLexicalContext(ruleName, applyExpr) {\n  return createError(\n      'Cannot apply syntactic rule ' + ruleName + ' from here (inside a lexical context)',\n      applyExpr.source,\n  );\n}\n\n// Lexical rule application used with applySyntactic\n\nfunction applySyntacticWithLexicalRuleApplication(applyExpr) {\n  const {ruleName} = applyExpr;\n  return createError(\n      `applySyntactic is for syntactic rules, but '${ruleName}' is a lexical rule. ` +\n      syntacticVsLexicalNote,\n      applyExpr.source,\n  );\n}\n\n// Application of applySyntactic in a syntactic context\n\nfunction unnecessaryExperimentalApplySyntactic(applyExpr) {\n  return createError(\n      'applySyntactic is not required here (in a syntactic context)',\n      applyExpr.source,\n  );\n}\n\n// Incorrect argument type\n\nfunction incorrectArgumentType(expectedType, expr) {\n  return createError('Incorrect argument type: expected ' + expectedType, expr.source);\n}\n\n// Multiple instances of the super-splice operator (`...`) in the rule body.\n\nfunction multipleSuperSplices(expr) {\n  return createError(\"'...' can appear at most once in a rule body\", expr.source);\n}\n\n// Unicode code point escapes\n\nfunction invalidCodePoint(applyWrapper) {\n  const node = applyWrapper._node;\n  assert(node && node.isNonterminal() && node.ctorName === 'escapeChar_unicodeCodePoint');\n\n  // Get an interval that covers all of the hex digits.\n  const digitIntervals = applyWrapper.children.slice(1, -1).map(d => d.source);\n  const fullInterval = digitIntervals[0].coverageWith(...digitIntervals.slice(1));\n  return createError(\n      `U+${fullInterval.contents} is not a valid Unicode code point`,\n      fullInterval,\n  );\n}\n\n// ----------------- Kleene operators -----------------\n\nfunction kleeneExprHasNullableOperand(kleeneExpr, applicationStack) {\n  const actuals =\n    applicationStack.length > 0 ? applicationStack[applicationStack.length - 1].args : [];\n  const expr = kleeneExpr.expr.substituteParams(actuals);\n  let message =\n    'Nullable expression ' +\n    expr +\n    \" is not allowed inside '\" +\n    kleeneExpr.operator +\n    \"' (possible infinite loop)\";\n  if (applicationStack.length > 0) {\n    const stackTrace = applicationStack\n        .map(app => new Apply(app.ruleName, app.args))\n        .join('\\n');\n    message += '\\nApplication stack (most recent application last):\\n' + stackTrace;\n  }\n  return createError(message, kleeneExpr.expr.source);\n}\n\n// ----------------- arity -----------------\n\nfunction inconsistentArity(ruleName, expected, actual, expr) {\n  return createError(\n      'Rule ' +\n      ruleName +\n      ' involves an alternation which has inconsistent arity ' +\n      '(expected ' +\n      expected +\n      ', got ' +\n      actual +\n      ')',\n      expr.source,\n  );\n}\n\n// ----------------- convenience -----------------\n\nfunction multipleErrors(errors) {\n  const messages = errors.map(e => e.message);\n  return createError(['Errors:'].concat(messages).join('\\n- '), errors[0].interval);\n}\n\n// ----------------- semantic -----------------\n\nfunction missingSemanticAction(ctorName, name, type, stack) {\n  let stackTrace = stack\n      .slice(0, -1)\n      .map(info => {\n        const ans = '  ' + info[0].name + ' > ' + info[1];\n        return info.length === 3 ? ans + \" for '\" + info[2] + \"'\" : ans;\n      })\n      .join('\\n');\n  stackTrace += '\\n  ' + name + ' > ' + ctorName;\n\n  let moreInfo = '';\n  if (ctorName === '_iter') {\n    moreInfo = [\n      '\\nNOTE: as of Ohm v16, there is no default action for iteration nodes  see ',\n      '  https://ohmjs.org/d/dsa for details.',\n    ].join('\\n');\n  }\n\n  const message = [\n    `Missing semantic action for '${ctorName}' in ${type} '${name}'.${moreInfo}`,\n    'Action stack (most recent call last):',\n    stackTrace,\n  ].join('\\n');\n\n  const e = createError(message);\n  e.name = 'missingSemanticAction';\n  return e;\n}\n\nfunction throwErrors(errors) {\n  if (errors.length === 1) {\n    throw errors[0];\n  }\n  if (errors.length > 1) {\n    throw multipleErrors(errors);\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// Given an array of numbers `arr`, return an array of the numbers as strings,\n// right-justified and padded to the same length.\nfunction padNumbersToEqualLength(arr) {\n  let maxLen = 0;\n  const strings = arr.map(n => {\n    const str = n.toString();\n    maxLen = Math.max(maxLen, str.length);\n    return str;\n  });\n  return strings.map(s => padLeft(s, maxLen));\n}\n\n// Produce a new string that would be the result of copying the contents\n// of the string `src` onto `dest` at offset `offest`.\nfunction strcpy(dest, src, offset) {\n  const origDestLen = dest.length;\n  const start = dest.slice(0, offset);\n  const end = dest.slice(offset + src.length);\n  return (start + src + end).substr(0, origDestLen);\n}\n\n// Casts the underlying lineAndCol object to a formatted message string,\n// highlighting `ranges`.\nfunction lineAndColumnToMessage(...ranges) {\n  const lineAndCol = this;\n  const {offset} = lineAndCol;\n  const {repeatStr} = common;\n\n  const sb = new StringBuffer();\n  sb.append('Line ' + lineAndCol.lineNum + ', col ' + lineAndCol.colNum + ':\\n');\n\n  // An array of the previous, current, and next line numbers as strings of equal length.\n  const lineNumbers = padNumbersToEqualLength([\n    lineAndCol.prevLine == null ? 0 : lineAndCol.lineNum - 1,\n    lineAndCol.lineNum,\n    lineAndCol.nextLine == null ? 0 : lineAndCol.lineNum + 1,\n  ]);\n\n  // Helper for appending formatting input lines to the buffer.\n  const appendLine = (num, content, prefix) => {\n    sb.append(prefix + lineNumbers[num] + ' | ' + content + '\\n');\n  };\n\n  // Include the previous line for context if possible.\n  if (lineAndCol.prevLine != null) {\n    appendLine(0, lineAndCol.prevLine, '  ');\n  }\n  // Line that the error occurred on.\n  appendLine(1, lineAndCol.line, '> ');\n\n  // Build up the line that points to the offset and possible indicates one or more ranges.\n  // Start with a blank line, and indicate each range by overlaying a string of `~` chars.\n  const lineLen = lineAndCol.line.length;\n  let indicationLine = repeatStr(' ', lineLen + 1);\n  for (let i = 0; i < ranges.length; ++i) {\n    let startIdx = ranges[i][0];\n    let endIdx = ranges[i][1];\n    assert(startIdx >= 0 && startIdx <= endIdx, 'range start must be >= 0 and <= end');\n\n    const lineStartOffset = offset - lineAndCol.colNum + 1;\n    startIdx = Math.max(0, startIdx - lineStartOffset);\n    endIdx = Math.min(endIdx - lineStartOffset, lineLen);\n\n    indicationLine = strcpy(indicationLine, repeatStr('~', endIdx - startIdx), startIdx);\n  }\n  const gutterWidth = 2 + lineNumbers[1].length + 3;\n  sb.append(repeatStr(' ', gutterWidth));\n  indicationLine = strcpy(indicationLine, '^', lineAndCol.colNum - 1);\n  sb.append(indicationLine.replace(/ +$/, '') + '\\n');\n\n  // Include the next line for context if possible.\n  if (lineAndCol.nextLine != null) {\n    appendLine(2, lineAndCol.nextLine, '  ');\n  }\n  return sb.contents();\n}\n\n// --------------------------------------------------------------------\n// Exports\n// --------------------------------------------------------------------\n\nlet builtInRulesCallbacks = [];\n\n// Since Grammar.BuiltInRules is bootstrapped, most of Ohm can't directly depend it.\n// This function allows modules that do depend on the built-in rules to register a callback\n// that will be called later in the initialization process.\nfunction awaitBuiltInRules(cb) {\n  builtInRulesCallbacks.push(cb);\n}\n\nfunction announceBuiltInRules(grammar) {\n  builtInRulesCallbacks.forEach(cb => {\n    cb(grammar);\n  });\n  builtInRulesCallbacks = null;\n}\n\n// Return an object with the line and column information for the given\n// offset in `str`.\nfunction getLineAndColumn(str, offset) {\n  let lineNum = 1;\n  let colNum = 1;\n\n  let currOffset = 0;\n  let lineStartOffset = 0;\n\n  let nextLine = null;\n  let prevLine = null;\n  let prevLineStartOffset = -1;\n\n  while (currOffset < offset) {\n    const c = str.charAt(currOffset++);\n    if (c === '\\n') {\n      lineNum++;\n      colNum = 1;\n      prevLineStartOffset = lineStartOffset;\n      lineStartOffset = currOffset;\n    } else if (c !== '\\r') {\n      colNum++;\n    }\n  }\n\n  // Find the end of the target line.\n  let lineEndOffset = str.indexOf('\\n', lineStartOffset);\n  if (lineEndOffset === -1) {\n    lineEndOffset = str.length;\n  } else {\n    // Get the next line.\n    const nextLineEndOffset = str.indexOf('\\n', lineEndOffset + 1);\n    nextLine =\n      nextLineEndOffset === -1 ?\n        str.slice(lineEndOffset) :\n        str.slice(lineEndOffset, nextLineEndOffset);\n    // Strip leading and trailing EOL char(s).\n    nextLine = nextLine.replace(/^\\r?\\n/, '').replace(/\\r$/, '');\n  }\n\n  // Get the previous line.\n  if (prevLineStartOffset >= 0) {\n    // Strip trailing EOL char(s).\n    prevLine = str.slice(prevLineStartOffset, lineStartOffset).replace(/\\r?\\n$/, '');\n  }\n\n  // Get the target line, stripping a trailing carriage return if necessary.\n  const line = str.slice(lineStartOffset, lineEndOffset).replace(/\\r$/, '');\n\n  return {\n    offset,\n    lineNum,\n    colNum,\n    line,\n    prevLine,\n    nextLine,\n    toString: lineAndColumnToMessage,\n  };\n}\n\n// Return a nicely-formatted string describing the line and column for the\n// given offset in `str` highlighting `ranges`.\nfunction getLineAndColumnMessage(str, offset, ...ranges) {\n  return getLineAndColumn(str, offset).toString(...ranges);\n}\n\nconst uniqueId = (() => {\n  let idCounter = 0;\n  return prefix => '' + prefix + idCounter++;\n})();\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass Interval {\n  constructor(sourceString, startIdx, endIdx) {\n    this.sourceString = sourceString;\n    this.startIdx = startIdx;\n    this.endIdx = endIdx;\n  }\n\n  get contents() {\n    if (this._contents === undefined) {\n      this._contents = this.sourceString.slice(this.startIdx, this.endIdx);\n    }\n    return this._contents;\n  }\n\n  get length() {\n    return this.endIdx - this.startIdx;\n  }\n\n  coverageWith(...intervals) {\n    return Interval.coverage(...intervals, this);\n  }\n\n  collapsedLeft() {\n    return new Interval(this.sourceString, this.startIdx, this.startIdx);\n  }\n\n  collapsedRight() {\n    return new Interval(this.sourceString, this.endIdx, this.endIdx);\n  }\n\n  getLineAndColumn() {\n    return getLineAndColumn(this.sourceString, this.startIdx);\n  }\n\n  getLineAndColumnMessage() {\n    const range = [this.startIdx, this.endIdx];\n    return getLineAndColumnMessage(this.sourceString, this.startIdx, range);\n  }\n\n  // Returns an array of 0, 1, or 2 intervals that represents the result of the\n  // interval difference operation.\n  minus(that) {\n    if (this.sourceString !== that.sourceString) {\n      throw intervalSourcesDontMatch();\n    } else if (this.startIdx === that.startIdx && this.endIdx === that.endIdx) {\n      // `this` and `that` are the same interval!\n      return [];\n    } else if (this.startIdx < that.startIdx && that.endIdx < this.endIdx) {\n      // `that` splits `this` into two intervals\n      return [\n        new Interval(this.sourceString, this.startIdx, that.startIdx),\n        new Interval(this.sourceString, that.endIdx, this.endIdx),\n      ];\n    } else if (this.startIdx < that.endIdx && that.endIdx < this.endIdx) {\n      // `that` contains a prefix of `this`\n      return [new Interval(this.sourceString, that.endIdx, this.endIdx)];\n    } else if (this.startIdx < that.startIdx && that.startIdx < this.endIdx) {\n      // `that` contains a suffix of `this`\n      return [new Interval(this.sourceString, this.startIdx, that.startIdx)];\n    } else {\n      // `that` and `this` do not overlap\n      return [this];\n    }\n  }\n\n  // Returns a new Interval that has the same extent as this one, but which is relative\n  // to `that`, an Interval that fully covers this one.\n  relativeTo(that) {\n    if (this.sourceString !== that.sourceString) {\n      throw intervalSourcesDontMatch();\n    }\n    assert(\n        this.startIdx >= that.startIdx && this.endIdx <= that.endIdx,\n        'other interval does not cover this one',\n    );\n    return new Interval(\n        this.sourceString,\n        this.startIdx - that.startIdx,\n        this.endIdx - that.startIdx,\n    );\n  }\n\n  // Returns a new Interval which contains the same contents as this one,\n  // but with whitespace trimmed from both ends.\n  trimmed() {\n    const {contents} = this;\n    const startIdx = this.startIdx + contents.match(/^\\s*/)[0].length;\n    const endIdx = this.endIdx - contents.match(/\\s*$/)[0].length;\n    return new Interval(this.sourceString, startIdx, endIdx);\n  }\n\n  subInterval(offset, len) {\n    const newStartIdx = this.startIdx + offset;\n    return new Interval(this.sourceString, newStartIdx, newStartIdx + len);\n  }\n}\n\nInterval.coverage = function(firstInterval, ...intervals) {\n  let {startIdx, endIdx} = firstInterval;\n  for (const interval of intervals) {\n    if (interval.sourceString !== firstInterval.sourceString) {\n      throw intervalSourcesDontMatch();\n    } else {\n      startIdx = Math.min(startIdx, interval.startIdx);\n      endIdx = Math.max(endIdx, interval.endIdx);\n    }\n  }\n  return new Interval(firstInterval.sourceString, startIdx, endIdx);\n};\n\nconst MAX_CHAR_CODE = 0xffff;\n\nclass InputStream {\n  constructor(source) {\n    this.source = source;\n    this.pos = 0;\n    this.examinedLength = 0;\n  }\n\n  atEnd() {\n    const ans = this.pos >= this.source.length;\n    this.examinedLength = Math.max(this.examinedLength, this.pos + 1);\n    return ans;\n  }\n\n  next() {\n    const ans = this.source[this.pos++];\n    this.examinedLength = Math.max(this.examinedLength, this.pos);\n    return ans;\n  }\n\n  nextCharCode() {\n    const nextChar = this.next();\n    return nextChar && nextChar.charCodeAt(0);\n  }\n\n  nextCodePoint() {\n    const cp = this.source.slice(this.pos++).codePointAt(0);\n    // If the code point is beyond plane 0, it takes up two characters.\n    if (cp > MAX_CHAR_CODE) {\n      this.pos += 1;\n    }\n    this.examinedLength = Math.max(this.examinedLength, this.pos);\n    return cp;\n  }\n\n  matchString(s, optIgnoreCase) {\n    let idx;\n    if (optIgnoreCase) {\n      /*\n        Case-insensitive comparison is a tricky business. Some notable gotchas include the\n        \"Turkish I\" problem (http://www.i18nguy.com/unicode/turkish-i18n.html) and the fact\n        that the German Esszet () turns into \"SS\" in upper case.\n\n        This is intended to be a locale-invariant comparison, which means it may not obey\n        locale-specific expectations (e.g. \"i\" => \"\").\n       */\n      for (idx = 0; idx < s.length; idx++) {\n        const actual = this.next();\n        const expected = s[idx];\n        if (actual == null || actual.toUpperCase() !== expected.toUpperCase()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    // Default is case-sensitive comparison.\n    for (idx = 0; idx < s.length; idx++) {\n      if (this.next() !== s[idx]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  sourceSlice(startIdx, endIdx) {\n    return this.source.slice(startIdx, endIdx);\n  }\n\n  interval(startIdx, optEndIdx) {\n    return new Interval(this.source, startIdx, optEndIdx ? optEndIdx : this.pos);\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass MatchResult {\n  constructor(\n      matcher,\n      input,\n      startExpr,\n      cst,\n      cstOffset,\n      rightmostFailurePosition,\n      optRecordedFailures,\n  ) {\n    this.matcher = matcher;\n    this.input = input;\n    this.startExpr = startExpr;\n    this._cst = cst;\n    this._cstOffset = cstOffset;\n    this._rightmostFailurePosition = rightmostFailurePosition;\n    this._rightmostFailures = optRecordedFailures;\n\n    if (this.failed()) {\n      /* eslint-disable no-invalid-this */\n      defineLazyProperty(this, 'message', function() {\n        const detail = 'Expected ' + this.getExpectedText();\n        return (\n          getLineAndColumnMessage(this.input, this.getRightmostFailurePosition()) + detail\n        );\n      });\n      defineLazyProperty(this, 'shortMessage', function() {\n        const detail = 'expected ' + this.getExpectedText();\n        const errorInfo = getLineAndColumn(\n            this.input,\n            this.getRightmostFailurePosition(),\n        );\n        return 'Line ' + errorInfo.lineNum + ', col ' + errorInfo.colNum + ': ' + detail;\n      });\n      /* eslint-enable no-invalid-this */\n    }\n  }\n\n  succeeded() {\n    return !!this._cst;\n  }\n\n  failed() {\n    return !this.succeeded();\n  }\n\n  getRightmostFailurePosition() {\n    return this._rightmostFailurePosition;\n  }\n\n  getRightmostFailures() {\n    if (!this._rightmostFailures) {\n      this.matcher.setInput(this.input);\n      const matchResultWithFailures = this.matcher._match(this.startExpr, {\n        tracing: false,\n        positionToRecordFailures: this.getRightmostFailurePosition(),\n      });\n      this._rightmostFailures = matchResultWithFailures.getRightmostFailures();\n    }\n    return this._rightmostFailures;\n  }\n\n  toString() {\n    return this.succeeded() ?\n      '[match succeeded]' :\n      '[match failed at position ' + this.getRightmostFailurePosition() + ']';\n  }\n\n  // Return a string summarizing the expected contents of the input stream when\n  // the match failure occurred.\n  getExpectedText() {\n    if (this.succeeded()) {\n      throw new Error('cannot get expected text of a successful MatchResult');\n    }\n\n    const sb = new StringBuffer();\n    let failures = this.getRightmostFailures();\n\n    // Filter out the fluffy failures to make the default error messages more useful\n    failures = failures.filter(failure => !failure.isFluffy());\n\n    for (let idx = 0; idx < failures.length; idx++) {\n      if (idx > 0) {\n        if (idx === failures.length - 1) {\n          sb.append(failures.length > 2 ? ', or ' : ' or ');\n        } else {\n          sb.append(', ');\n        }\n      }\n      sb.append(failures[idx].toString());\n    }\n    return sb.contents();\n  }\n\n  getInterval() {\n    const pos = this.getRightmostFailurePosition();\n    return new Interval(this.input, pos, pos);\n  }\n}\n\nclass PosInfo {\n  constructor() {\n    this.applicationMemoKeyStack = []; // active applications at this position\n    this.memo = {};\n    this.maxExaminedLength = 0;\n    this.maxRightmostFailureOffset = -1;\n    this.currentLeftRecursion = undefined;\n  }\n\n  isActive(application) {\n    return this.applicationMemoKeyStack.indexOf(application.toMemoKey()) >= 0;\n  }\n\n  enter(application) {\n    this.applicationMemoKeyStack.push(application.toMemoKey());\n  }\n\n  exit() {\n    this.applicationMemoKeyStack.pop();\n  }\n\n  startLeftRecursion(headApplication, memoRec) {\n    memoRec.isLeftRecursion = true;\n    memoRec.headApplication = headApplication;\n    memoRec.nextLeftRecursion = this.currentLeftRecursion;\n    this.currentLeftRecursion = memoRec;\n\n    const {applicationMemoKeyStack} = this;\n    const indexOfFirstInvolvedRule =\n      applicationMemoKeyStack.indexOf(headApplication.toMemoKey()) + 1;\n    const involvedApplicationMemoKeys = applicationMemoKeyStack.slice(\n        indexOfFirstInvolvedRule,\n    );\n\n    memoRec.isInvolved = function(applicationMemoKey) {\n      return involvedApplicationMemoKeys.indexOf(applicationMemoKey) >= 0;\n    };\n\n    memoRec.updateInvolvedApplicationMemoKeys = function() {\n      for (let idx = indexOfFirstInvolvedRule; idx < applicationMemoKeyStack.length; idx++) {\n        const applicationMemoKey = applicationMemoKeyStack[idx];\n        if (!this.isInvolved(applicationMemoKey)) {\n          involvedApplicationMemoKeys.push(applicationMemoKey);\n        }\n      }\n    };\n  }\n\n  endLeftRecursion() {\n    this.currentLeftRecursion = this.currentLeftRecursion.nextLeftRecursion;\n  }\n\n  // Note: this method doesn't get called for the \"head\" of a left recursion -- for LR heads,\n  // the memoized result (which starts out being a failure) is always used.\n  shouldUseMemoizedResult(memoRec) {\n    if (!memoRec.isLeftRecursion) {\n      return true;\n    }\n    const {applicationMemoKeyStack} = this;\n    for (let idx = 0; idx < applicationMemoKeyStack.length; idx++) {\n      const applicationMemoKey = applicationMemoKeyStack[idx];\n      if (memoRec.isInvolved(applicationMemoKey)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  memoize(memoKey, memoRec) {\n    this.memo[memoKey] = memoRec;\n    this.maxExaminedLength = Math.max(this.maxExaminedLength, memoRec.examinedLength);\n    this.maxRightmostFailureOffset = Math.max(\n        this.maxRightmostFailureOffset,\n        memoRec.rightmostFailureOffset,\n    );\n    return memoRec;\n  }\n\n  clearObsoleteEntries(pos, invalidatedIdx) {\n    if (pos + this.maxExaminedLength <= invalidatedIdx) {\n      // Optimization: none of the rule applications that were memoized here examined the\n      // interval of the input that changed, so nothing has to be invalidated.\n      return;\n    }\n\n    const {memo} = this;\n    this.maxExaminedLength = 0;\n    this.maxRightmostFailureOffset = -1;\n    Object.keys(memo).forEach(k => {\n      const memoRec = memo[k];\n      if (pos + memoRec.examinedLength > invalidatedIdx) {\n        delete memo[k];\n      } else {\n        this.maxExaminedLength = Math.max(this.maxExaminedLength, memoRec.examinedLength);\n        this.maxRightmostFailureOffset = Math.max(\n            this.maxRightmostFailureOffset,\n            memoRec.rightmostFailureOffset,\n        );\n      }\n    });\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n// Unicode characters that are used in the `toString` output.\nconst BALLOT_X = '\\u2717';\nconst CHECK_MARK = '\\u2713';\nconst DOT_OPERATOR = '\\u22C5';\nconst RIGHTWARDS_DOUBLE_ARROW = '\\u21D2';\nconst SYMBOL_FOR_HORIZONTAL_TABULATION = '\\u2409';\nconst SYMBOL_FOR_LINE_FEED = '\\u240A';\nconst SYMBOL_FOR_CARRIAGE_RETURN = '\\u240D';\n\nconst Flags = {\n  succeeded: 1 << 0,\n  isRootNode: 1 << 1,\n  isImplicitSpaces: 1 << 2,\n  isMemoized: 1 << 3,\n  isHeadOfLeftRecursion: 1 << 4,\n  terminatesLR: 1 << 5,\n};\n\nfunction spaces(n) {\n  return repeat(' ', n).join('');\n}\n\n// Return a string representation of a portion of `input` at offset `pos`.\n// The result will contain exactly `len` characters.\nfunction getInputExcerpt(input, pos, len) {\n  const excerpt = asEscapedString(input.slice(pos, pos + len));\n\n  // Pad the output if necessary.\n  if (excerpt.length < len) {\n    return excerpt + repeat(' ', len - excerpt.length).join('');\n  }\n  return excerpt;\n}\n\nfunction asEscapedString(obj) {\n  if (typeof obj === 'string') {\n    // Replace non-printable characters with visible symbols.\n    return obj\n        .replace(/ /g, DOT_OPERATOR)\n        .replace(/\\t/g, SYMBOL_FOR_HORIZONTAL_TABULATION)\n        .replace(/\\n/g, SYMBOL_FOR_LINE_FEED)\n        .replace(/\\r/g, SYMBOL_FOR_CARRIAGE_RETURN);\n  }\n  return String(obj);\n}\n\n// ----------------- Trace -----------------\n\nclass Trace {\n  constructor(input, pos1, pos2, expr, succeeded, bindings, optChildren) {\n    this.input = input;\n    this.pos = this.pos1 = pos1;\n    this.pos2 = pos2;\n    this.source = new Interval(input, pos1, pos2);\n    this.expr = expr;\n    this.bindings = bindings;\n    this.children = optChildren || [];\n    this.terminatingLREntry = null;\n\n    this._flags = succeeded ? Flags.succeeded : 0;\n  }\n\n  get displayString() {\n    return this.expr.toDisplayString();\n  }\n\n  clone() {\n    return this.cloneWithExpr(this.expr);\n  }\n\n  cloneWithExpr(expr) {\n    const ans = new Trace(\n        this.input,\n        this.pos,\n        this.pos2,\n        expr,\n        this.succeeded,\n        this.bindings,\n        this.children,\n    );\n\n    ans.isHeadOfLeftRecursion = this.isHeadOfLeftRecursion;\n    ans.isImplicitSpaces = this.isImplicitSpaces;\n    ans.isMemoized = this.isMemoized;\n    ans.isRootNode = this.isRootNode;\n    ans.terminatesLR = this.terminatesLR;\n    ans.terminatingLREntry = this.terminatingLREntry;\n    return ans;\n  }\n\n  // Record the trace information for the terminating condition of the LR loop.\n  recordLRTermination(ruleBodyTrace, value) {\n    this.terminatingLREntry = new Trace(\n        this.input,\n        this.pos,\n        this.pos2,\n        this.expr,\n        false,\n        [value],\n        [ruleBodyTrace],\n    );\n    this.terminatingLREntry.terminatesLR = true;\n  }\n\n  // Recursively traverse this trace node and all its descendents, calling a visitor function\n  // for each node that is visited. If `vistorObjOrFn` is an object, then its 'enter' property\n  // is a function to call before visiting the children of a node, and its 'exit' property is\n  // a function to call afterwards. If `visitorObjOrFn` is a function, it represents the 'enter'\n  // function.\n  //\n  // The functions are called with three arguments: the Trace node, its parent Trace, and a number\n  // representing the depth of the node in the tree. (The root node has depth 0.) `optThisArg`, if\n  // specified, is the value to use for `this` when executing the visitor functions.\n  walk(visitorObjOrFn, optThisArg) {\n    let visitor = visitorObjOrFn;\n    if (typeof visitor === 'function') {\n      visitor = {enter: visitor};\n    }\n\n    function _walk(node, parent, depth) {\n      let recurse = true;\n      if (visitor.enter) {\n        if (visitor.enter.call(optThisArg, node, parent, depth) === Trace.prototype.SKIP) {\n          recurse = false;\n        }\n      }\n      if (recurse) {\n        node.children.forEach(child => {\n          _walk(child, node, depth + 1);\n        });\n        if (visitor.exit) {\n          visitor.exit.call(optThisArg, node, parent, depth);\n        }\n      }\n    }\n    if (this.isRootNode) {\n      // Don't visit the root node itself, only its children.\n      this.children.forEach(c => {\n        _walk(c, null, 0);\n      });\n    } else {\n      _walk(this, null, 0);\n    }\n  }\n\n  // Return a string representation of the trace.\n  // Sample:\n  //     12+2*3  exp   \"12\"\n  //     12+2*3    addExp (LR)   \"12\"\n  //     12+2*3        addExp_plus\n  toString() {\n    const sb = new StringBuffer();\n    this.walk((node, parent, depth) => {\n      if (!node) {\n        return this.SKIP;\n      }\n      const ctorName = node.expr.constructor.name;\n      // Don't print anything for Alt nodes.\n      if (ctorName === 'Alt') {\n        return; // eslint-disable-line consistent-return\n      }\n      sb.append(getInputExcerpt(node.input, node.pos, 10) + spaces(depth * 2 + 1));\n      sb.append((node.succeeded ? CHECK_MARK : BALLOT_X) + ' ' + node.displayString);\n      if (node.isHeadOfLeftRecursion) {\n        sb.append(' (LR)');\n      }\n      if (node.succeeded) {\n        const contents = asEscapedString(node.source.contents);\n        sb.append(' ' + RIGHTWARDS_DOUBLE_ARROW + '  ');\n        sb.append(typeof contents === 'string' ? '\"' + contents + '\"' : contents);\n      }\n      sb.append('\\n');\n    });\n    return sb.contents();\n  }\n}\n\n// A value that can be returned from visitor functions to indicate that a\n// node should not be recursed into.\nTrace.prototype.SKIP = {};\n\n// For convenience, create a getter and setter for the boolean flags in `Flags`.\nObject.keys(Flags).forEach(name => {\n  const mask = Flags[name];\n  Object.defineProperty(Trace.prototype, name, {\n    get() {\n      return (this._flags & mask) !== 0;\n    },\n    set(val) {\n      if (val) {\n        this._flags |= mask;\n      } else {\n        this._flags &= ~mask;\n      }\n    },\n  });\n});\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Return true if we should skip spaces preceding this expression in a syntactic context.\n*/\nPExpr.prototype.allowsSkippingPrecedingSpace = abstract('allowsSkippingPrecedingSpace');\n\n/*\n  Generally, these are all first-order expressions and (with the exception of Apply)\n  directly read from the input stream.\n*/\nany.allowsSkippingPrecedingSpace =\n  end.allowsSkippingPrecedingSpace =\n  Apply.prototype.allowsSkippingPrecedingSpace =\n  Terminal.prototype.allowsSkippingPrecedingSpace =\n  Range.prototype.allowsSkippingPrecedingSpace =\n  UnicodeChar.prototype.allowsSkippingPrecedingSpace =\n    function() {\n      return true;\n    };\n\n/*\n  Higher-order expressions that don't directly consume input.\n*/\nAlt.prototype.allowsSkippingPrecedingSpace =\n  Iter.prototype.allowsSkippingPrecedingSpace =\n  Lex.prototype.allowsSkippingPrecedingSpace =\n  Lookahead.prototype.allowsSkippingPrecedingSpace =\n  Not.prototype.allowsSkippingPrecedingSpace =\n  Param.prototype.allowsSkippingPrecedingSpace =\n  Seq.prototype.allowsSkippingPrecedingSpace =\n    function() {\n      return false;\n    };\n\nlet BuiltInRules$1;\n\nawaitBuiltInRules(g => {\n  BuiltInRules$1 = g;\n});\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nlet lexifyCount;\n\nPExpr.prototype.assertAllApplicationsAreValid = function(ruleName, grammar) {\n  lexifyCount = 0;\n  this._assertAllApplicationsAreValid(ruleName, grammar);\n};\n\nPExpr.prototype._assertAllApplicationsAreValid = abstract(\n    '_assertAllApplicationsAreValid',\n);\n\nany._assertAllApplicationsAreValid =\n  end._assertAllApplicationsAreValid =\n  Terminal.prototype._assertAllApplicationsAreValid =\n  Range.prototype._assertAllApplicationsAreValid =\n  Param.prototype._assertAllApplicationsAreValid =\n  UnicodeChar.prototype._assertAllApplicationsAreValid =\n    function(ruleName, grammar) {\n      // no-op\n    };\n\nLex.prototype._assertAllApplicationsAreValid = function(ruleName, grammar) {\n  lexifyCount++;\n  this.expr._assertAllApplicationsAreValid(ruleName, grammar);\n  lexifyCount--;\n};\n\nAlt.prototype._assertAllApplicationsAreValid = function(ruleName, grammar) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    this.terms[idx]._assertAllApplicationsAreValid(ruleName, grammar);\n  }\n};\n\nSeq.prototype._assertAllApplicationsAreValid = function(ruleName, grammar) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx]._assertAllApplicationsAreValid(ruleName, grammar);\n  }\n};\n\nIter.prototype._assertAllApplicationsAreValid =\n  Not.prototype._assertAllApplicationsAreValid =\n  Lookahead.prototype._assertAllApplicationsAreValid =\n    function(ruleName, grammar) {\n      this.expr._assertAllApplicationsAreValid(ruleName, grammar);\n    };\n\nApply.prototype._assertAllApplicationsAreValid = function(\n    ruleName,\n    grammar,\n    skipSyntacticCheck = false,\n) {\n  const ruleInfo = grammar.rules[this.ruleName];\n  const isContextSyntactic = isSyntactic(ruleName) && lexifyCount === 0;\n\n  // Make sure that the rule exists...\n  if (!ruleInfo) {\n    throw undeclaredRule(this.ruleName, grammar.name, this.source);\n  }\n\n  // ...and that this application is allowed\n  if (!skipSyntacticCheck && isSyntactic(this.ruleName) && !isContextSyntactic) {\n    throw applicationOfSyntacticRuleFromLexicalContext(this.ruleName, this);\n  }\n\n  // ...and that this application has the correct number of arguments.\n  const actual = this.args.length;\n  const expected = ruleInfo.formals.length;\n  if (actual !== expected) {\n    throw wrongNumberOfArguments(this.ruleName, expected, actual, this.source);\n  }\n\n  const isBuiltInApplySyntactic =\n    BuiltInRules$1 && ruleInfo === BuiltInRules$1.rules.applySyntactic;\n  const isBuiltInCaseInsensitive =\n    BuiltInRules$1 && ruleInfo === BuiltInRules$1.rules.caseInsensitive;\n\n  // If it's an application of 'caseInsensitive', ensure that the argument is a Terminal.\n  if (isBuiltInCaseInsensitive) {\n    if (!(this.args[0] instanceof Terminal)) {\n      throw incorrectArgumentType('a Terminal (e.g. \"abc\")', this.args[0]);\n    }\n  }\n\n  if (isBuiltInApplySyntactic) {\n    const arg = this.args[0];\n    if (!(arg instanceof Apply)) {\n      throw incorrectArgumentType('a syntactic rule application', arg);\n    }\n    if (!isSyntactic(arg.ruleName)) {\n      throw applySyntacticWithLexicalRuleApplication(arg);\n    }\n    if (isContextSyntactic) {\n      throw unnecessaryExperimentalApplySyntactic(this);\n    }\n  }\n\n  // ...and that all of the argument expressions only have valid applications and have arity 1.\n  // If `this` is an application of the built-in applySyntactic rule, then its arg is\n  // allowed (and expected) to be a syntactic rule, even if we're in a lexical context.\n  this.args.forEach(arg => {\n    arg._assertAllApplicationsAreValid(ruleName, grammar, isBuiltInApplySyntactic);\n    if (arg.getArity() !== 1) {\n      throw invalidParameter(this.ruleName, arg);\n    }\n  });\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.assertChoicesHaveUniformArity = abstract(\n    'assertChoicesHaveUniformArity',\n);\n\nany.assertChoicesHaveUniformArity =\n  end.assertChoicesHaveUniformArity =\n  Terminal.prototype.assertChoicesHaveUniformArity =\n  Range.prototype.assertChoicesHaveUniformArity =\n  Param.prototype.assertChoicesHaveUniformArity =\n  Lex.prototype.assertChoicesHaveUniformArity =\n  UnicodeChar.prototype.assertChoicesHaveUniformArity =\n    function(ruleName) {\n      // no-op\n    };\n\nAlt.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  if (this.terms.length === 0) {\n    return;\n  }\n  const arity = this.terms[0].getArity();\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    const term = this.terms[idx];\n    term.assertChoicesHaveUniformArity();\n    const otherArity = term.getArity();\n    if (arity !== otherArity) {\n      throw inconsistentArity(ruleName, arity, otherArity, term);\n    }\n  }\n};\n\nExtend.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  // Extend is a special case of Alt that's guaranteed to have exactly two\n  // cases: [extensions, origBody].\n  const actualArity = this.terms[0].getArity();\n  const expectedArity = this.terms[1].getArity();\n  if (actualArity !== expectedArity) {\n    throw inconsistentArity(ruleName, expectedArity, actualArity, this.terms[0]);\n  }\n};\n\nSeq.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx].assertChoicesHaveUniformArity(ruleName);\n  }\n};\n\nIter.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  this.expr.assertChoicesHaveUniformArity(ruleName);\n};\n\nNot.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  // no-op (not required b/c the nested expr doesn't show up in the CST)\n};\n\nLookahead.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  this.expr.assertChoicesHaveUniformArity(ruleName);\n};\n\nApply.prototype.assertChoicesHaveUniformArity = function(ruleName) {\n  // The arities of the parameter expressions is required to be 1 by\n  // `assertAllApplicationsAreValid()`.\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.assertIteratedExprsAreNotNullable = abstract(\n    'assertIteratedExprsAreNotNullable',\n);\n\nany.assertIteratedExprsAreNotNullable =\n  end.assertIteratedExprsAreNotNullable =\n  Terminal.prototype.assertIteratedExprsAreNotNullable =\n  Range.prototype.assertIteratedExprsAreNotNullable =\n  Param.prototype.assertIteratedExprsAreNotNullable =\n  UnicodeChar.prototype.assertIteratedExprsAreNotNullable =\n    function(grammar) {\n      // no-op\n    };\n\nAlt.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    this.terms[idx].assertIteratedExprsAreNotNullable(grammar);\n  }\n};\n\nSeq.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    this.factors[idx].assertIteratedExprsAreNotNullable(grammar);\n  }\n};\n\nIter.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  // Note: this is the implementation of this method for `Star` and `Plus` expressions.\n  // It is overridden for `Opt` below.\n  this.expr.assertIteratedExprsAreNotNullable(grammar);\n  if (this.expr.isNullable(grammar)) {\n    throw kleeneExprHasNullableOperand(this, []);\n  }\n};\n\nOpt.prototype.assertIteratedExprsAreNotNullable =\n  Not.prototype.assertIteratedExprsAreNotNullable =\n  Lookahead.prototype.assertIteratedExprsAreNotNullable =\n  Lex.prototype.assertIteratedExprsAreNotNullable =\n    function(grammar) {\n      this.expr.assertIteratedExprsAreNotNullable(grammar);\n    };\n\nApply.prototype.assertIteratedExprsAreNotNullable = function(grammar) {\n  this.args.forEach(arg => {\n    arg.assertIteratedExprsAreNotNullable(grammar);\n  });\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass Node {\n  constructor(matchLength) {\n    this.matchLength = matchLength;\n  }\n\n  get ctorName() {\n    throw new Error('subclass responsibility');\n  }\n\n  numChildren() {\n    return this.children ? this.children.length : 0;\n  }\n\n  childAt(idx) {\n    if (this.children) {\n      return this.children[idx];\n    }\n  }\n\n  indexOfChild(arg) {\n    return this.children.indexOf(arg);\n  }\n\n  hasChildren() {\n    return this.numChildren() > 0;\n  }\n\n  hasNoChildren() {\n    return !this.hasChildren();\n  }\n\n  onlyChild() {\n    if (this.numChildren() !== 1) {\n      throw new Error(\n          'cannot get only child of a node of type ' +\n          this.ctorName +\n          ' (it has ' +\n          this.numChildren() +\n          ' children)',\n      );\n    } else {\n      return this.firstChild();\n    }\n  }\n\n  firstChild() {\n    if (this.hasNoChildren()) {\n      throw new Error(\n          'cannot get first child of a ' + this.ctorName + ' node, which has no children',\n      );\n    } else {\n      return this.childAt(0);\n    }\n  }\n\n  lastChild() {\n    if (this.hasNoChildren()) {\n      throw new Error(\n          'cannot get last child of a ' + this.ctorName + ' node, which has no children',\n      );\n    } else {\n      return this.childAt(this.numChildren() - 1);\n    }\n  }\n\n  childBefore(child) {\n    const childIdx = this.indexOfChild(child);\n    if (childIdx < 0) {\n      throw new Error('Node.childBefore() called w/ an argument that is not a child');\n    } else if (childIdx === 0) {\n      throw new Error('cannot get child before first child');\n    } else {\n      return this.childAt(childIdx - 1);\n    }\n  }\n\n  childAfter(child) {\n    const childIdx = this.indexOfChild(child);\n    if (childIdx < 0) {\n      throw new Error('Node.childAfter() called w/ an argument that is not a child');\n    } else if (childIdx === this.numChildren() - 1) {\n      throw new Error('cannot get child after last child');\n    } else {\n      return this.childAt(childIdx + 1);\n    }\n  }\n\n  isTerminal() {\n    return false;\n  }\n\n  isNonterminal() {\n    return false;\n  }\n\n  isIteration() {\n    return false;\n  }\n\n  isOptional() {\n    return false;\n  }\n}\n\n// Terminals\n\nclass TerminalNode extends Node {\n  get ctorName() {\n    return '_terminal';\n  }\n\n  isTerminal() {\n    return true;\n  }\n\n  get primitiveValue() {\n    throw new Error('The `primitiveValue` property was removed in Ohm v17.');\n  }\n}\n\n// Nonterminals\n\nclass NonterminalNode extends Node {\n  constructor(ruleName, children, childOffsets, matchLength) {\n    super(matchLength);\n    this.ruleName = ruleName;\n    this.children = children;\n    this.childOffsets = childOffsets;\n  }\n\n  get ctorName() {\n    return this.ruleName;\n  }\n\n  isNonterminal() {\n    return true;\n  }\n\n  isLexical() {\n    return isLexical(this.ctorName);\n  }\n\n  isSyntactic() {\n    return isSyntactic(this.ctorName);\n  }\n}\n\n// Iterations\n\nclass IterationNode extends Node {\n  constructor(children, childOffsets, matchLength, isOptional) {\n    super(matchLength);\n    this.children = children;\n    this.childOffsets = childOffsets;\n    this.optional = isOptional;\n  }\n\n  get ctorName() {\n    return '_iter';\n  }\n\n  isIteration() {\n    return true;\n  }\n\n  isOptional() {\n    return this.optional;\n  }\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Evaluate the expression and return `true` if it succeeds, `false` otherwise. This method should\n  only be called directly by `State.prototype.eval(expr)`, which also updates the data structures\n  that are used for tracing. (Making those updates in a method of `State` enables the trace-specific\n  data structures to be \"secrets\" of that class, which is good for modularity.)\n\n  The contract of this method is as follows:\n  * When the return value is `true`,\n    - the state object will have `expr.getArity()` more bindings than it did before the call.\n  * When the return value is `false`,\n    - the state object may have more bindings than it did before the call, and\n    - its input stream's position may be anywhere.\n\n  Note that `State.prototype.eval(expr)`, unlike this method, guarantees that neither the state\n  object's bindings nor its input stream's position will change if the expression fails to match.\n*/\nPExpr.prototype.eval = abstract('eval'); // function(state) { ... }\n\nany.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const cp = inputStream.nextCodePoint();\n  if (cp !== undefined) {\n    state.pushBinding(new TerminalNode(String.fromCodePoint(cp).length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\nend.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (inputStream.atEnd()) {\n    state.pushBinding(new TerminalNode(0), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\nTerminal.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (!inputStream.matchString(this.obj)) {\n    state.processFailure(origPos, this);\n    return false;\n  } else {\n    state.pushBinding(new TerminalNode(this.obj.length), origPos);\n    return true;\n  }\n};\n\nRange.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n\n  // A range can operate in one of two modes: matching a single, 16-bit _code unit_,\n  // or matching a _code point_. (Code points over 0xFFFF take up two 16-bit code units.)\n  const cp = this.matchCodePoint ? inputStream.nextCodePoint() : inputStream.nextCharCode();\n\n  // Always compare by code point value to get the correct result in all scenarios.\n  // Note that for strings of length 1, codePointAt(0) and charPointAt(0) are equivalent.\n  if (cp !== undefined && this.from.codePointAt(0) <= cp && cp <= this.to.codePointAt(0)) {\n    state.pushBinding(new TerminalNode(String.fromCodePoint(cp).length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\nParam.prototype.eval = function(state) {\n  return state.eval(state.currentApplication().args[this.index]);\n};\n\nLex.prototype.eval = function(state) {\n  state.enterLexifiedContext();\n  const ans = state.eval(this.expr);\n  state.exitLexifiedContext();\n  return ans;\n};\n\nAlt.prototype.eval = function(state) {\n  for (let idx = 0; idx < this.terms.length; idx++) {\n    if (state.eval(this.terms[idx])) {\n      return true;\n    }\n  }\n  return false;\n};\n\nSeq.prototype.eval = function(state) {\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    const factor = this.factors[idx];\n    if (!state.eval(factor)) {\n      return false;\n    }\n  }\n  return true;\n};\n\nIter.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const arity = this.getArity();\n  const cols = [];\n  const colOffsets = [];\n  while (cols.length < arity) {\n    cols.push([]);\n    colOffsets.push([]);\n  }\n\n  let numMatches = 0;\n  let prevPos = origPos;\n  let idx;\n  while (numMatches < this.maxNumMatches && state.eval(this.expr)) {\n    if (inputStream.pos === prevPos) {\n      throw kleeneExprHasNullableOperand(this, state._applicationStack);\n    }\n    prevPos = inputStream.pos;\n    numMatches++;\n    const row = state._bindings.splice(state._bindings.length - arity, arity);\n    const rowOffsets = state._bindingOffsets.splice(\n        state._bindingOffsets.length - arity,\n        arity,\n    );\n    for (idx = 0; idx < row.length; idx++) {\n      cols[idx].push(row[idx]);\n      colOffsets[idx].push(rowOffsets[idx]);\n    }\n  }\n  if (numMatches < this.minNumMatches) {\n    return false;\n  }\n  let offset = state.posToOffset(origPos);\n  let matchLength = 0;\n  if (numMatches > 0) {\n    const lastCol = cols[arity - 1];\n    const lastColOffsets = colOffsets[arity - 1];\n\n    const endOffset =\n      lastColOffsets[lastColOffsets.length - 1] + lastCol[lastCol.length - 1].matchLength;\n    offset = colOffsets[0][0];\n    matchLength = endOffset - offset;\n  }\n  const isOptional = this instanceof Opt;\n  for (idx = 0; idx < cols.length; idx++) {\n    state._bindings.push(\n        new IterationNode(cols[idx], colOffsets[idx], matchLength, isOptional),\n    );\n    state._bindingOffsets.push(offset);\n  }\n  return true;\n};\n\nNot.prototype.eval = function(state) {\n  /*\n    TODO:\n    - Right now we're just throwing away all of the failures that happen inside a `not`, and\n      recording `this` as a failed expression.\n    - Double negation should be equivalent to lookahead, but that's not the case right now wrt\n      failures. E.g., ~~'foo' produces a failure for ~~'foo', but maybe it should produce\n      a failure for 'foo' instead.\n  */\n\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  state.pushFailuresInfo();\n\n  const ans = state.eval(this.expr);\n\n  state.popFailuresInfo();\n  if (ans) {\n    state.processFailure(origPos, this);\n    return false;\n  }\n\n  inputStream.pos = origPos;\n  return true;\n};\n\nLookahead.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  if (state.eval(this.expr)) {\n    inputStream.pos = origPos;\n    return true;\n  } else {\n    return false;\n  }\n};\n\nApply.prototype.eval = function(state) {\n  const caller = state.currentApplication();\n  const actuals = caller ? caller.args : [];\n  const app = this.substituteParams(actuals);\n\n  const posInfo = state.getCurrentPosInfo();\n  if (posInfo.isActive(app)) {\n    // This rule is already active at this position, i.e., it is left-recursive.\n    return app.handleCycle(state);\n  }\n\n  const memoKey = app.toMemoKey();\n  const memoRec = posInfo.memo[memoKey];\n\n  if (memoRec && posInfo.shouldUseMemoizedResult(memoRec)) {\n    if (state.hasNecessaryInfo(memoRec)) {\n      return state.useMemoizedResult(state.inputStream.pos, memoRec);\n    }\n    delete posInfo.memo[memoKey];\n  }\n  return app.reallyEval(state);\n};\n\nApply.prototype.handleCycle = function(state) {\n  const posInfo = state.getCurrentPosInfo();\n  const {currentLeftRecursion} = posInfo;\n  const memoKey = this.toMemoKey();\n  let memoRec = posInfo.memo[memoKey];\n\n  if (currentLeftRecursion && currentLeftRecursion.headApplication.toMemoKey() === memoKey) {\n    // We already know about this left recursion, but it's possible there are \"involved\n    // applications\" that we don't already know about, so...\n    memoRec.updateInvolvedApplicationMemoKeys();\n  } else if (!memoRec) {\n    // New left recursion detected! Memoize a failure to try to get a seed parse.\n    memoRec = posInfo.memoize(memoKey, {\n      matchLength: 0,\n      examinedLength: 0,\n      value: false,\n      rightmostFailureOffset: -1,\n    });\n    posInfo.startLeftRecursion(this, memoRec);\n  }\n  return state.useMemoizedResult(state.inputStream.pos, memoRec);\n};\n\nApply.prototype.reallyEval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const origPosInfo = state.getCurrentPosInfo();\n  const ruleInfo = state.grammar.rules[this.ruleName];\n  const {body} = ruleInfo;\n  const {description} = ruleInfo;\n\n  state.enterApplication(origPosInfo, this);\n\n  if (description) {\n    state.pushFailuresInfo();\n  }\n\n  // Reset the input stream's examinedLength property so that we can track\n  // the examined length of this particular application.\n  const origInputStreamExaminedLength = inputStream.examinedLength;\n  inputStream.examinedLength = 0;\n\n  let value = this.evalOnce(body, state);\n  const currentLR = origPosInfo.currentLeftRecursion;\n  const memoKey = this.toMemoKey();\n  const isHeadOfLeftRecursion = currentLR && currentLR.headApplication.toMemoKey() === memoKey;\n  let memoRec;\n\n  if (state.doNotMemoize) {\n    state.doNotMemoize = false;\n  } else if (isHeadOfLeftRecursion) {\n    value = this.growSeedResult(body, state, origPos, currentLR, value);\n    origPosInfo.endLeftRecursion();\n    memoRec = currentLR;\n    memoRec.examinedLength = inputStream.examinedLength - origPos;\n    memoRec.rightmostFailureOffset = state._getRightmostFailureOffset();\n    origPosInfo.memoize(memoKey, memoRec); // updates origPosInfo's maxExaminedLength\n  } else if (!currentLR || !currentLR.isInvolved(memoKey)) {\n    // This application is not involved in left recursion, so it's ok to memoize it.\n    memoRec = origPosInfo.memoize(memoKey, {\n      matchLength: inputStream.pos - origPos,\n      examinedLength: inputStream.examinedLength - origPos,\n      value,\n      failuresAtRightmostPosition: state.cloneRecordedFailures(),\n      rightmostFailureOffset: state._getRightmostFailureOffset(),\n    });\n  }\n  const succeeded = !!value;\n\n  if (description) {\n    state.popFailuresInfo();\n    if (!succeeded) {\n      state.processFailure(origPos, this);\n    }\n    if (memoRec) {\n      memoRec.failuresAtRightmostPosition = state.cloneRecordedFailures();\n    }\n  }\n\n  // Record trace information in the memo table, so that it is available if the memoized result\n  // is used later.\n  if (state.isTracing() && memoRec) {\n    const entry = state.getTraceEntry(origPos, this, succeeded, succeeded ? [value] : []);\n    if (isHeadOfLeftRecursion) {\n      assert(entry.terminatingLREntry != null || !succeeded);\n      entry.isHeadOfLeftRecursion = true;\n    }\n    memoRec.traceEntry = entry;\n  }\n\n  // Fix the input stream's examinedLength -- it should be the maximum examined length\n  // across all applications, not just this one.\n  inputStream.examinedLength = Math.max(\n      inputStream.examinedLength,\n      origInputStreamExaminedLength,\n  );\n\n  state.exitApplication(origPosInfo, value);\n\n  return succeeded;\n};\n\nApply.prototype.evalOnce = function(expr, state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n\n  if (state.eval(expr)) {\n    const arity = expr.getArity();\n    const bindings = state._bindings.splice(state._bindings.length - arity, arity);\n    const offsets = state._bindingOffsets.splice(state._bindingOffsets.length - arity, arity);\n    const matchLength = inputStream.pos - origPos;\n    return new NonterminalNode(this.ruleName, bindings, offsets, matchLength);\n  } else {\n    return false;\n  }\n};\n\nApply.prototype.growSeedResult = function(body, state, origPos, lrMemoRec, newValue) {\n  if (!newValue) {\n    return false;\n  }\n\n  const {inputStream} = state;\n\n  while (true) {\n    lrMemoRec.matchLength = inputStream.pos - origPos;\n    lrMemoRec.value = newValue;\n    lrMemoRec.failuresAtRightmostPosition = state.cloneRecordedFailures();\n\n    if (state.isTracing()) {\n      // Before evaluating the body again, add a trace node for this application to the memo entry.\n      // Its only child is a copy of the trace node from `newValue`, which will always be the last\n      // element in `state.trace`.\n      const seedTrace = state.trace[state.trace.length - 1];\n      lrMemoRec.traceEntry = new Trace(\n          state.input,\n          origPos,\n          inputStream.pos,\n          this,\n          true,\n          [newValue],\n          [seedTrace.clone()],\n      );\n    }\n    inputStream.pos = origPos;\n    newValue = this.evalOnce(body, state);\n    if (inputStream.pos - origPos <= lrMemoRec.matchLength) {\n      break;\n    }\n    if (state.isTracing()) {\n      state.trace.splice(-2, 1); // Drop the trace for the old seed.\n    }\n  }\n  if (state.isTracing()) {\n    // The last entry is for an unused result -- pop it and save it in the \"real\" entry.\n    lrMemoRec.traceEntry.recordLRTermination(state.trace.pop(), newValue);\n  }\n  inputStream.pos = origPos + lrMemoRec.matchLength;\n  return lrMemoRec.value;\n};\n\nUnicodeChar.prototype.eval = function(state) {\n  const {inputStream} = state;\n  const origPos = inputStream.pos;\n  const ch = inputStream.next();\n  if (ch && this.pattern.test(ch)) {\n    state.pushBinding(new TerminalNode(ch.length), origPos);\n    return true;\n  } else {\n    state.processFailure(origPos, this);\n    return false;\n  }\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.getArity = abstract('getArity');\n\nany.getArity =\n  end.getArity =\n  Terminal.prototype.getArity =\n  Range.prototype.getArity =\n  Param.prototype.getArity =\n  Apply.prototype.getArity =\n  UnicodeChar.prototype.getArity =\n    function() {\n      return 1;\n    };\n\nAlt.prototype.getArity = function() {\n  // This is ok b/c all terms must have the same arity -- this property is\n  // checked by the Grammar constructor.\n  return this.terms.length === 0 ? 0 : this.terms[0].getArity();\n};\n\nSeq.prototype.getArity = function() {\n  let arity = 0;\n  for (let idx = 0; idx < this.factors.length; idx++) {\n    arity += this.factors[idx].getArity();\n  }\n  return arity;\n};\n\nIter.prototype.getArity = function() {\n  return this.expr.getArity();\n};\n\nNot.prototype.getArity = function() {\n  return 0;\n};\n\nLookahead.prototype.getArity = Lex.prototype.getArity = function() {\n  return this.expr.getArity();\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction getMetaInfo(expr, grammarInterval) {\n  const metaInfo = {};\n  if (expr.source && grammarInterval) {\n    const adjusted = expr.source.relativeTo(grammarInterval);\n    metaInfo.sourceInterval = [adjusted.startIdx, adjusted.endIdx];\n  }\n  return metaInfo;\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.outputRecipe = abstract('outputRecipe');\n\nany.outputRecipe = function(formals, grammarInterval) {\n  return ['any', getMetaInfo(this, grammarInterval)];\n};\n\nend.outputRecipe = function(formals, grammarInterval) {\n  return ['end', getMetaInfo(this, grammarInterval)];\n};\n\nTerminal.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['terminal', getMetaInfo(this, grammarInterval), this.obj];\n};\n\nRange.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['range', getMetaInfo(this, grammarInterval), this.from, this.to];\n};\n\nParam.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['param', getMetaInfo(this, grammarInterval), this.index];\n};\n\nAlt.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['alt', getMetaInfo(this, grammarInterval)].concat(\n      this.terms.map(term => term.outputRecipe(formals, grammarInterval)),\n  );\n};\n\nExtend.prototype.outputRecipe = function(formals, grammarInterval) {\n  const extension = this.terms[0]; // [extension, original]\n  return extension.outputRecipe(formals, grammarInterval);\n};\n\nSplice.prototype.outputRecipe = function(formals, grammarInterval) {\n  const beforeTerms = this.terms.slice(0, this.expansionPos);\n  const afterTerms = this.terms.slice(this.expansionPos + 1);\n  return [\n    'splice',\n    getMetaInfo(this, grammarInterval),\n    beforeTerms.map(term => term.outputRecipe(formals, grammarInterval)),\n    afterTerms.map(term => term.outputRecipe(formals, grammarInterval)),\n  ];\n};\n\nSeq.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['seq', getMetaInfo(this, grammarInterval)].concat(\n      this.factors.map(factor => factor.outputRecipe(formals, grammarInterval)),\n  );\n};\n\nStar.prototype.outputRecipe =\n  Plus.prototype.outputRecipe =\n  Opt.prototype.outputRecipe =\n  Not.prototype.outputRecipe =\n  Lookahead.prototype.outputRecipe =\n  Lex.prototype.outputRecipe =\n    function(formals, grammarInterval) {\n      return [\n        this.constructor.name.toLowerCase(),\n        getMetaInfo(this, grammarInterval),\n        this.expr.outputRecipe(formals, grammarInterval),\n      ];\n    };\n\nApply.prototype.outputRecipe = function(formals, grammarInterval) {\n  return [\n    'app',\n    getMetaInfo(this, grammarInterval),\n    this.ruleName,\n    this.args.map(arg => arg.outputRecipe(formals, grammarInterval)),\n  ];\n};\n\nUnicodeChar.prototype.outputRecipe = function(formals, grammarInterval) {\n  return ['unicodeChar', getMetaInfo(this, grammarInterval), this.category];\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Called at grammar creation time to rewrite a rule body, replacing each reference to a formal\n  parameter with a `Param` node. Returns a PExpr -- either a new one, or the original one if\n  it was modified in place.\n*/\nPExpr.prototype.introduceParams = abstract('introduceParams');\n\nany.introduceParams =\n  end.introduceParams =\n  Terminal.prototype.introduceParams =\n  Range.prototype.introduceParams =\n  Param.prototype.introduceParams =\n  UnicodeChar.prototype.introduceParams =\n    function(formals) {\n      return this;\n    };\n\nAlt.prototype.introduceParams = function(formals) {\n  this.terms.forEach((term, idx, terms) => {\n    terms[idx] = term.introduceParams(formals);\n  });\n  return this;\n};\n\nSeq.prototype.introduceParams = function(formals) {\n  this.factors.forEach((factor, idx, factors) => {\n    factors[idx] = factor.introduceParams(formals);\n  });\n  return this;\n};\n\nIter.prototype.introduceParams =\n  Not.prototype.introduceParams =\n  Lookahead.prototype.introduceParams =\n  Lex.prototype.introduceParams =\n    function(formals) {\n      this.expr = this.expr.introduceParams(formals);\n      return this;\n    };\n\nApply.prototype.introduceParams = function(formals) {\n  const index = formals.indexOf(this.ruleName);\n  if (index >= 0) {\n    if (this.args.length > 0) {\n      // TODO: Should this be supported? See issue #64.\n      throw new Error('Parameterized rules cannot be passed as arguments to another rule.');\n    }\n    return new Param(index).withSource(this.source);\n  } else {\n    this.args.forEach((arg, idx, args) => {\n      args[idx] = arg.introduceParams(formals);\n    });\n    return this;\n  }\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n// Returns `true` if this parsing expression may accept without consuming any input.\nPExpr.prototype.isNullable = function(grammar) {\n  return this._isNullable(grammar, Object.create(null));\n};\n\nPExpr.prototype._isNullable = abstract('_isNullable');\n\nany._isNullable =\n  Range.prototype._isNullable =\n  Param.prototype._isNullable =\n  Plus.prototype._isNullable =\n  UnicodeChar.prototype._isNullable =\n    function(grammar, memo) {\n      return false;\n    };\n\nend._isNullable = function(grammar, memo) {\n  return true;\n};\n\nTerminal.prototype._isNullable = function(grammar, memo) {\n  if (typeof this.obj === 'string') {\n    // This is an over-simplification: it's only correct if the input is a string. If it's an array\n    // or an object, then the empty string parsing expression is not nullable.\n    return this.obj === '';\n  } else {\n    return false;\n  }\n};\n\nAlt.prototype._isNullable = function(grammar, memo) {\n  return this.terms.length === 0 || this.terms.some(term => term._isNullable(grammar, memo));\n};\n\nSeq.prototype._isNullable = function(grammar, memo) {\n  return this.factors.every(factor => factor._isNullable(grammar, memo));\n};\n\nStar.prototype._isNullable =\n  Opt.prototype._isNullable =\n  Not.prototype._isNullable =\n  Lookahead.prototype._isNullable =\n    function(grammar, memo) {\n      return true;\n    };\n\nLex.prototype._isNullable = function(grammar, memo) {\n  return this.expr._isNullable(grammar, memo);\n};\n\nApply.prototype._isNullable = function(grammar, memo) {\n  const key = this.toMemoKey();\n  if (!Object.prototype.hasOwnProperty.call(memo, key)) {\n    const {body} = grammar.rules[this.ruleName];\n    const inlined = body.substituteParams(this.args);\n    memo[key] = false; // Prevent infinite recursion for recursive rules.\n    memo[key] = inlined._isNullable(grammar, memo);\n  }\n  return memo[key];\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Returns a PExpr that results from recursively replacing every formal parameter (i.e., instance\n  of `Param`) inside this PExpr with its actual value from `actuals` (an Array).\n\n  The receiver must not be modified; a new PExpr must be returned if any replacement is necessary.\n*/\n// function(actuals) { ... }\nPExpr.prototype.substituteParams = abstract('substituteParams');\n\nany.substituteParams =\n  end.substituteParams =\n  Terminal.prototype.substituteParams =\n  Range.prototype.substituteParams =\n  UnicodeChar.prototype.substituteParams =\n    function(actuals) {\n      return this;\n    };\n\nParam.prototype.substituteParams = function(actuals) {\n  return actuals[this.index];\n};\n\nAlt.prototype.substituteParams = function(actuals) {\n  return new Alt(this.terms.map(term => term.substituteParams(actuals)));\n};\n\nSeq.prototype.substituteParams = function(actuals) {\n  return new Seq(this.factors.map(factor => factor.substituteParams(actuals)));\n};\n\nIter.prototype.substituteParams =\n  Not.prototype.substituteParams =\n  Lookahead.prototype.substituteParams =\n  Lex.prototype.substituteParams =\n    function(actuals) {\n      return new this.constructor(this.expr.substituteParams(actuals));\n    };\n\nApply.prototype.substituteParams = function(actuals) {\n  if (this.args.length === 0) {\n    // Avoid making a copy of this application, as an optimization\n    return this;\n  } else {\n    const args = this.args.map(arg => arg.substituteParams(actuals));\n    return new Apply(this.ruleName, args);\n  }\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nfunction isRestrictedJSIdentifier(str) {\n  return /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(str);\n}\n\nfunction resolveDuplicatedNames(argumentNameList) {\n  // `count` is used to record the number of times each argument name occurs in the list,\n  // this is useful for checking duplicated argument name. It maps argument names to ints.\n  const count = Object.create(null);\n  argumentNameList.forEach(argName => {\n    count[argName] = (count[argName] || 0) + 1;\n  });\n\n  // Append subscripts ('_1', '_2', ...) to duplicate argument names.\n  Object.keys(count).forEach(dupArgName => {\n    if (count[dupArgName] <= 1) {\n      return;\n    }\n\n    // This name shows up more than once, so add subscripts.\n    let subscript = 1;\n    argumentNameList.forEach((argName, idx) => {\n      if (argName === dupArgName) {\n        argumentNameList[idx] = argName + '_' + subscript++;\n      }\n    });\n  });\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  Returns a list of strings that will be used as the default argument names for its receiver\n  (a pexpr) in a semantic action. This is used exclusively by the Semantics Editor.\n\n  `firstArgIndex` is the 1-based index of the first argument name that will be generated for this\n  pexpr. It enables us to name arguments positionally, e.g., if the second argument is a\n  non-alphanumeric terminal like \"+\", it will be named '$2'.\n\n  `noDupCheck` is true if the caller of `toArgumentNameList` is not a top level caller. It enables\n  us to avoid nested duplication subscripts appending, e.g., '_1_1', '_1_2', by only checking\n  duplicates at the top level.\n\n  Here is a more elaborate example that illustrates how this method works:\n  `(a \"+\" b).toArgumentNameList(1)` evaluates to `['a', '$2', 'b']` with the following recursive\n  calls:\n\n    (a).toArgumentNameList(1) -> ['a'],\n    (\"+\").toArgumentNameList(2) -> ['$2'],\n    (b).toArgumentNameList(3) -> ['b']\n\n  Notes:\n  * This method must only be called on well-formed expressions, e.g., the receiver must\n    not have any Alt sub-expressions with inconsistent arities.\n  * e.getArity() === e.toArgumentNameList(1).length\n*/\n// function(firstArgIndex, noDupCheck) { ... }\nPExpr.prototype.toArgumentNameList = abstract('toArgumentNameList');\n\nany.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['any'];\n};\n\nend.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['end'];\n};\n\nTerminal.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  if (typeof this.obj === 'string' && /^[_a-zA-Z0-9]+$/.test(this.obj)) {\n    // If this terminal is a valid suffix for a JS identifier, just prepend it with '_'\n    return ['_' + this.obj];\n  } else {\n    // Otherwise, name it positionally.\n    return ['$' + firstArgIndex];\n  }\n};\n\nRange.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  let argName = this.from + '_to_' + this.to;\n  // If the `argName` is not valid then try to prepend a `_`.\n  if (!isRestrictedJSIdentifier(argName)) {\n    argName = '_' + argName;\n  }\n  // If the `argName` still not valid after prepending a `_`, then name it positionally.\n  if (!isRestrictedJSIdentifier(argName)) {\n    argName = '$' + firstArgIndex;\n  }\n  return [argName];\n};\n\nAlt.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  // `termArgNameLists` is an array of arrays where each row is the\n  // argument name list that corresponds to a term in this alternation.\n  const termArgNameLists = this.terms.map(term =>\n    term.toArgumentNameList(firstArgIndex, true),\n  );\n\n  const argumentNameList = [];\n  const numArgs = termArgNameLists[0].length;\n  for (let colIdx = 0; colIdx < numArgs; colIdx++) {\n    const col = [];\n    for (let rowIdx = 0; rowIdx < this.terms.length; rowIdx++) {\n      col.push(termArgNameLists[rowIdx][colIdx]);\n    }\n    const uniqueNames = copyWithoutDuplicates(col);\n    argumentNameList.push(uniqueNames.join('_or_'));\n  }\n\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\nSeq.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  // Generate the argument name list, without worrying about duplicates.\n  let argumentNameList = [];\n  this.factors.forEach(factor => {\n    const factorArgumentNameList = factor.toArgumentNameList(firstArgIndex, true);\n    argumentNameList = argumentNameList.concat(factorArgumentNameList);\n\n    // Shift the firstArgIndex to take this factor's argument names into account.\n    firstArgIndex += factorArgumentNameList.length;\n  });\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\nIter.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  const argumentNameList = this.expr\n      .toArgumentNameList(firstArgIndex, noDupCheck)\n      .map(exprArgumentString =>\n      exprArgumentString[exprArgumentString.length - 1] === 's' ?\n        exprArgumentString + 'es' :\n        exprArgumentString + 's',\n      );\n  if (!noDupCheck) {\n    resolveDuplicatedNames(argumentNameList);\n  }\n  return argumentNameList;\n};\n\nOpt.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return this.expr.toArgumentNameList(firstArgIndex, noDupCheck).map(argName => {\n    return 'opt' + argName[0].toUpperCase() + argName.slice(1);\n  });\n};\n\nNot.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return [];\n};\n\nLookahead.prototype.toArgumentNameList = Lex.prototype.toArgumentNameList =\n  function(firstArgIndex, noDupCheck) {\n    return this.expr.toArgumentNameList(firstArgIndex, noDupCheck);\n  };\n\nApply.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return [this.ruleName];\n};\n\nUnicodeChar.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['$' + firstArgIndex];\n};\n\nParam.prototype.toArgumentNameList = function(firstArgIndex, noDupCheck) {\n  return ['param' + this.index];\n};\n\n// \"Value pexprs\" (Value, Str, Arr, Obj) are going away soon, so we don't worry about them here.\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n// Returns a string representing the PExpr, for use as a UI label, etc.\nPExpr.prototype.toDisplayString = abstract('toDisplayString');\n\nAlt.prototype.toDisplayString = Seq.prototype.toDisplayString = function() {\n  if (this.source) {\n    return this.source.trimmed().contents;\n  }\n  return '[' + this.constructor.name + ']';\n};\n\nany.toDisplayString =\n  end.toDisplayString =\n  Iter.prototype.toDisplayString =\n  Not.prototype.toDisplayString =\n  Lookahead.prototype.toDisplayString =\n  Lex.prototype.toDisplayString =\n  Terminal.prototype.toDisplayString =\n  Range.prototype.toDisplayString =\n  Param.prototype.toDisplayString =\n    function() {\n      return this.toString();\n    };\n\nApply.prototype.toDisplayString = function() {\n  if (this.args.length > 0) {\n    const ps = this.args.map(arg => arg.toDisplayString());\n    return this.ruleName + '<' + ps.join(',') + '>';\n  } else {\n    return this.ruleName;\n  }\n};\n\nUnicodeChar.prototype.toDisplayString = function() {\n  return 'Unicode [' + this.category + '] character';\n};\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\n/*\n  `Failure`s represent expressions that weren't matched while parsing. They are used to generate\n  error messages automatically. The interface of `Failure`s includes the collowing methods:\n\n  - getText() : String\n  - getType() : String  (one of {\"description\", \"string\", \"code\"})\n  - isDescription() : bool\n  - isStringTerminal() : bool\n  - isCode() : bool\n  - isFluffy() : bool\n  - makeFluffy() : void\n  - subsumes(Failure) : bool\n*/\n\nfunction isValidType(type) {\n  return type === 'description' || type === 'string' || type === 'code';\n}\n\nclass Failure {\n  constructor(pexpr, text, type) {\n    if (!isValidType(type)) {\n      throw new Error('invalid Failure type: ' + type);\n    }\n    this.pexpr = pexpr;\n    this.text = text;\n    this.type = type;\n    this.fluffy = false;\n  }\n\n  getPExpr() {\n    return this.pexpr;\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  isDescription() {\n    return this.type === 'description';\n  }\n\n  isStringTerminal() {\n    return this.type === 'string';\n  }\n\n  isCode() {\n    return this.type === 'code';\n  }\n\n  isFluffy() {\n    return this.fluffy;\n  }\n\n  makeFluffy() {\n    this.fluffy = true;\n  }\n\n  clearFluffy() {\n    this.fluffy = false;\n  }\n\n  subsumes(that) {\n    return (\n      this.getText() === that.getText() &&\n      this.type === that.type &&\n      (!this.isFluffy() || (this.isFluffy() && that.isFluffy()))\n    );\n  }\n\n  toString() {\n    return this.type === 'string' ? JSON.stringify(this.getText()) : this.getText();\n  }\n\n  clone() {\n    const failure = new Failure(this.pexpr, this.text, this.type);\n    if (this.isFluffy()) {\n      failure.makeFluffy();\n    }\n    return failure;\n  }\n\n  toKey() {\n    return this.toString() + '#' + this.type;\n  }\n}\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\nPExpr.prototype.toFailure = abstract('toFailure');\n\nany.toFailure = function(grammar) {\n  return new Failure(this, 'any object', 'description');\n};\n\nend.toFailure = function(grammar) {\n  return new Failure(this, 'end of input', 'description');\n};\n\nTerminal.prototype.toFailure = function(grammar) {\n  return new Failure(this, this.obj, 'string');\n};\n\nRange.prototype.toFailure = function(grammar) {\n  // TODO: come up with something better\n  return new Failure(this, JSON.stringify(this.from) + '..' + JSON.stringify(this.to), 'code');\n};\n\nNot.prototype.toFailure = function(grammar) {\n  const description =\n    this.expr === any ? 'nothing' : 'not ' + this.expr.toFailure(grammar);\n  return new Failure(this, description, 'description');\n};\n\nLookahead.prototype.toFailure = function(grammar) {\n  return this.expr.toFailure(grammar);\n};\n\nApply.prototype.toFailure = function(grammar) {\n  let {description} = grammar.rules[this.ruleName];\n  if (!description) {\n    const article = /^[aeiouAEIOU]/.test(this.ruleName) ? 'an' : 'a';\n    description = article + ' ' + this.ruleName;\n  }\n  return new Failure(this, description, 'description');\n};\n\nUnicodeChar.prototype.toFailure = function(grammar) {\n  return new Failure(this, 'a Unicode [' + this.category + '] character', 'description');\n};\n\nAlt.prototype.toFailure = function(grammar) {\n  const fs = this.terms.map(t => t.toFailure(grammar));\n  const description = '(' + fs.join(' or ') + ')';\n  return new Failure(this, description, 'description');\n};\n\nSeq.prototype.toFailure = function(grammar) {\n  const fs = this.factors.map(f => f.toFailure(grammar));\n  const description = '(' + fs.join(' ') + ')';\n  return new Failure(this, description, 'description');\n};\n\nIter.prototype.toFailure = function(grammar) {\n  const description = '(' + this.expr.toFailure(grammar) + this.operator + ')';\n  return new Failure(this, description, 'description');\n};\n\n// --------------------------------------------------------------------\n// Operations\n// --------------------------------------------------------------------\n\n/*\n  e1.toString() === e2.toString() ==> e1 and e2 are semantically equivalent.\n  Note that this is not an iff (<==>): e.g.,\n  (~\"b\" \"a\").toString() !== (\"a\").toString(), even though\n  ~\"b\" \"a\" and \"a\" are interchangeable in any grammar,\n  both in terms of the languages they accept and their arities.\n*/\nPExpr.prototype.toString = abstract('toString');\n\nany.toString = function() {\n  return 'any';\n};\n\nend.toString = function() {\n  return 'end';\n};\n\nTerminal.prototype.toString = function() {\n  return JSON.stringify(this.obj);\n};\n\nRange.prototype.toString = function() {\n  return JSON.stringify(this.from) + '..' + JSON.stringify(this.to);\n};\n\nParam.prototype.toString = function() {\n  return '$' + this.index;\n};\n\nLex.prototype.toString = function() {\n  return '#(' + this.expr.toString() + ')';\n};\n\nAlt.prototype.toString = function() {\n  return this.terms.length === 1 ?\n    this.terms[0].toString() :\n    '(' + this.terms.map(term => term.toString()).join(' | ') + ')';\n};\n\nSeq.prototype.toString = function() {\n  return this.factors.length === 1 ?\n    this.factors[0].toString() :\n    '(' + this.factors.map(factor => factor.toString()).join(' ') + ')';\n};\n\nIter.prototype.toString = function() {\n  return this.expr + this.operator;\n};\n\nNot.prototype.toString = function() {\n  return '~' + this.expr;\n};\n\nLookahead.prototype.toString = function() {\n  return '&' + this.expr;\n};\n\nApply.prototype.toString = function() {\n  if (this.args.length > 0) {\n    const ps = this.args.map(arg => arg.toString());\n    return this.ruleName + '<' + ps.join(',') + '>';\n  } else {\n    return this.ruleName;\n  }\n};\n\nUnicodeChar.prototype.toString = function() {\n  return '\\\\p{' + this.category + '}';\n};\n\nclass CaseInsensitiveTerminal extends PExpr {\n  constructor(param) {\n    super();\n    this.obj = param;\n  }\n\n  _getString(state) {\n    const terminal = state.currentApplication().args[this.obj.index];\n    assert(terminal instanceof Terminal, 'expected a Terminal expression');\n    return terminal.obj;\n  }\n\n  // Implementation of the PExpr API\n\n  allowsSkippingPrecedingSpace() {\n    return true;\n  }\n\n  eval(state) {\n    const {inputStream} = state;\n    const origPos = inputStream.pos;\n    const matchStr = this._getString(state);\n    if (!inputStream.matchString(matchStr, true)) {\n      state.processFailure(origPos, this);\n      return false;\n    } else {\n      state.pushBinding(new TerminalNode(matchStr.length), origPos);\n      return true;\n    }\n  }\n\n  getArity() {\n    return 1;\n  }\n\n  substituteParams(actuals) {\n    return new CaseInsensitiveTerminal(this.obj.substituteParams(actuals));\n  }\n\n  toDisplayString() {\n    return this.obj.toDisplayString() + ' (case-insensitive)';\n  }\n\n  toFailure(grammar) {\n    return new Failure(\n        this,\n        this.obj.toFailure(grammar) + ' (case-insensitive)',\n        'description',\n    );\n  }\n\n  _isNullable(grammar, memo) {\n    return this.obj._isNullable(grammar, memo);\n  }\n}\n\n// --------------------------------------------------------------------\n\nvar pexprs = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  CaseInsensitiveTerminal: CaseInsensitiveTerminal,\n  PExpr: PExpr,\n  any: any,\n  end: end,\n  Terminal: Terminal,\n  Range: Range,\n  Param: Param,\n  Alt: Alt,\n  Extend: Extend,\n  Splice: Splice,\n  Seq: Seq,\n  Iter: Iter,\n  Star: Star,\n  Plus: Plus,\n  Opt: Opt,\n  Not: Not,\n  Lookahead: Lookahead,\n  Lex: Lex,\n  Apply: Apply,\n  UnicodeChar: UnicodeChar\n});\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nlet builtInApplySyntacticBody;\n\nawaitBuiltInRules(builtInRules => {\n  builtInApplySyntacticBody = builtInRules.rules.applySyntactic.body;\n});\n\nconst applySpaces = new Apply('spaces');\n\nclass MatchState {\n  constructor(matcher, startExpr, optPositionToRecordFailures) {\n    this.matcher = matcher;\n    this.startExpr = startExpr;\n\n    this.grammar = matcher.grammar;\n    this.input = matcher.getInput();\n    this.inputStream = new InputStream(this.input);\n    this.memoTable = matcher._memoTable;\n\n    this.userData = undefined;\n    this.doNotMemoize = false;\n\n    this._bindings = [];\n    this._bindingOffsets = [];\n    this._applicationStack = [];\n    this._posStack = [0];\n    this.inLexifiedContextStack = [false];\n\n    this.rightmostFailurePosition = -1;\n    this._rightmostFailurePositionStack = [];\n    this._recordedFailuresStack = [];\n\n    if (optPositionToRecordFailures !== undefined) {\n      this.positionToRecordFailures = optPositionToRecordFailures;\n      this.recordedFailures = Object.create(null);\n    }\n  }\n\n  posToOffset(pos) {\n    return pos - this._posStack[this._posStack.length - 1];\n  }\n\n  enterApplication(posInfo, app) {\n    this._posStack.push(this.inputStream.pos);\n    this._applicationStack.push(app);\n    this.inLexifiedContextStack.push(false);\n    posInfo.enter(app);\n    this._rightmostFailurePositionStack.push(this.rightmostFailurePosition);\n    this.rightmostFailurePosition = -1;\n  }\n\n  exitApplication(posInfo, optNode) {\n    const origPos = this._posStack.pop();\n    this._applicationStack.pop();\n    this.inLexifiedContextStack.pop();\n    posInfo.exit();\n\n    this.rightmostFailurePosition = Math.max(\n        this.rightmostFailurePosition,\n        this._rightmostFailurePositionStack.pop(),\n    );\n\n    if (optNode) {\n      this.pushBinding(optNode, origPos);\n    }\n  }\n\n  enterLexifiedContext() {\n    this.inLexifiedContextStack.push(true);\n  }\n\n  exitLexifiedContext() {\n    this.inLexifiedContextStack.pop();\n  }\n\n  currentApplication() {\n    return this._applicationStack[this._applicationStack.length - 1];\n  }\n\n  inSyntacticContext() {\n    const currentApplication = this.currentApplication();\n    if (currentApplication) {\n      return currentApplication.isSyntactic() && !this.inLexifiedContext();\n    } else {\n      // The top-level context is syntactic if the start application is.\n      return this.startExpr.factors[0].isSyntactic();\n    }\n  }\n\n  inLexifiedContext() {\n    return this.inLexifiedContextStack[this.inLexifiedContextStack.length - 1];\n  }\n\n  skipSpaces() {\n    this.pushFailuresInfo();\n    this.eval(applySpaces);\n    this.popBinding();\n    this.popFailuresInfo();\n    return this.inputStream.pos;\n  }\n\n  skipSpacesIfInSyntacticContext() {\n    return this.inSyntacticContext() ? this.skipSpaces() : this.inputStream.pos;\n  }\n\n  maybeSkipSpacesBefore(expr) {\n    if (expr.allowsSkippingPrecedingSpace() && expr !== applySpaces) {\n      return this.skipSpacesIfInSyntacticContext();\n    } else {\n      return this.inputStream.pos;\n    }\n  }\n\n  pushBinding(node, origPos) {\n    this._bindings.push(node);\n    this._bindingOffsets.push(this.posToOffset(origPos));\n  }\n\n  popBinding() {\n    this._bindings.pop();\n    this._bindingOffsets.pop();\n  }\n\n  numBindings() {\n    return this._bindings.length;\n  }\n\n  truncateBindings(newLength) {\n    // Yes, this is this really faster than setting the `length` property (tested with\n    // bin/es5bench on Node v6.1.0).\n    // Update 2021-10-25: still true on v14.15.5  it's ~20% speedup on es5bench.\n    while (this._bindings.length > newLength) {\n      this.popBinding();\n    }\n  }\n\n  getCurrentPosInfo() {\n    return this.getPosInfo(this.inputStream.pos);\n  }\n\n  getPosInfo(pos) {\n    let posInfo = this.memoTable[pos];\n    if (!posInfo) {\n      posInfo = this.memoTable[pos] = new PosInfo();\n    }\n    return posInfo;\n  }\n\n  processFailure(pos, expr) {\n    this.rightmostFailurePosition = Math.max(this.rightmostFailurePosition, pos);\n\n    if (this.recordedFailures && pos === this.positionToRecordFailures) {\n      const app = this.currentApplication();\n      if (app) {\n        // Substitute parameters with the actual pexprs that were passed to\n        // the current rule.\n        expr = expr.substituteParams(app.args);\n      }\n\n      this.recordFailure(expr.toFailure(this.grammar), false);\n    }\n  }\n\n  recordFailure(failure, shouldCloneIfNew) {\n    const key = failure.toKey();\n    if (!this.recordedFailures[key]) {\n      this.recordedFailures[key] = shouldCloneIfNew ? failure.clone() : failure;\n    } else if (this.recordedFailures[key].isFluffy() && !failure.isFluffy()) {\n      this.recordedFailures[key].clearFluffy();\n    }\n  }\n\n  recordFailures(failures, shouldCloneIfNew) {\n    Object.keys(failures).forEach(key => {\n      this.recordFailure(failures[key], shouldCloneIfNew);\n    });\n  }\n\n  cloneRecordedFailures() {\n    if (!this.recordedFailures) {\n      return undefined;\n    }\n\n    const ans = Object.create(null);\n    Object.keys(this.recordedFailures).forEach(key => {\n      ans[key] = this.recordedFailures[key].clone();\n    });\n    return ans;\n  }\n\n  getRightmostFailurePosition() {\n    return this.rightmostFailurePosition;\n  }\n\n  _getRightmostFailureOffset() {\n    return this.rightmostFailurePosition >= 0 ?\n      this.posToOffset(this.rightmostFailurePosition) :\n      -1;\n  }\n\n  // Returns the memoized trace entry for `expr` at `pos`, if one exists, `null` otherwise.\n  getMemoizedTraceEntry(pos, expr) {\n    const posInfo = this.memoTable[pos];\n    if (posInfo && expr instanceof Apply) {\n      const memoRec = posInfo.memo[expr.toMemoKey()];\n      if (memoRec && memoRec.traceEntry) {\n        const entry = memoRec.traceEntry.cloneWithExpr(expr);\n        entry.isMemoized = true;\n        return entry;\n      }\n    }\n    return null;\n  }\n\n  // Returns a new trace entry, with the currently active trace array as its children.\n  getTraceEntry(pos, expr, succeeded, bindings) {\n    if (expr instanceof Apply) {\n      const app = this.currentApplication();\n      const actuals = app ? app.args : [];\n      expr = expr.substituteParams(actuals);\n    }\n    return (\n      this.getMemoizedTraceEntry(pos, expr) ||\n      new Trace(this.input, pos, this.inputStream.pos, expr, succeeded, bindings, this.trace)\n    );\n  }\n\n  isTracing() {\n    return !!this.trace;\n  }\n\n  hasNecessaryInfo(memoRec) {\n    if (this.trace && !memoRec.traceEntry) {\n      return false;\n    }\n\n    if (\n      this.recordedFailures &&\n      this.inputStream.pos + memoRec.rightmostFailureOffset === this.positionToRecordFailures\n    ) {\n      return !!memoRec.failuresAtRightmostPosition;\n    }\n\n    return true;\n  }\n\n  useMemoizedResult(origPos, memoRec) {\n    if (this.trace) {\n      this.trace.push(memoRec.traceEntry);\n    }\n\n    const memoRecRightmostFailurePosition =\n      this.inputStream.pos + memoRec.rightmostFailureOffset;\n    this.rightmostFailurePosition = Math.max(\n        this.rightmostFailurePosition,\n        memoRecRightmostFailurePosition,\n    );\n    if (\n      this.recordedFailures &&\n      this.positionToRecordFailures === memoRecRightmostFailurePosition &&\n      memoRec.failuresAtRightmostPosition\n    ) {\n      this.recordFailures(memoRec.failuresAtRightmostPosition, true);\n    }\n\n    this.inputStream.examinedLength = Math.max(\n        this.inputStream.examinedLength,\n        memoRec.examinedLength + origPos,\n    );\n\n    if (memoRec.value) {\n      this.inputStream.pos += memoRec.matchLength;\n      this.pushBinding(memoRec.value, origPos);\n      return true;\n    }\n    return false;\n  }\n\n  // Evaluate `expr` and return `true` if it succeeded, `false` otherwise. On success, `bindings`\n  // will have `expr.getArity()` more elements than before, and the input stream's position may\n  // have increased. On failure, `bindings` and position will be unchanged.\n  eval(expr) {\n    const {inputStream} = this;\n    const origNumBindings = this._bindings.length;\n    const origUserData = this.userData;\n\n    let origRecordedFailures;\n    if (this.recordedFailures) {\n      origRecordedFailures = this.recordedFailures;\n      this.recordedFailures = Object.create(null);\n    }\n\n    const origPos = inputStream.pos;\n    const memoPos = this.maybeSkipSpacesBefore(expr);\n\n    let origTrace;\n    if (this.trace) {\n      origTrace = this.trace;\n      this.trace = [];\n    }\n\n    // Do the actual evaluation.\n    const ans = expr.eval(this);\n\n    if (this.trace) {\n      const bindings = this._bindings.slice(origNumBindings);\n      const traceEntry = this.getTraceEntry(memoPos, expr, ans, bindings);\n      traceEntry.isImplicitSpaces = expr === applySpaces;\n      traceEntry.isRootNode = expr === this.startExpr;\n      origTrace.push(traceEntry);\n      this.trace = origTrace;\n    }\n\n    if (ans) {\n      if (this.recordedFailures && inputStream.pos === this.positionToRecordFailures) {\n        Object.keys(this.recordedFailures).forEach(key => {\n          this.recordedFailures[key].makeFluffy();\n        });\n      }\n    } else {\n      // Reset the position, bindings, and userData.\n      inputStream.pos = origPos;\n      this.truncateBindings(origNumBindings);\n      this.userData = origUserData;\n    }\n\n    if (this.recordedFailures) {\n      this.recordFailures(origRecordedFailures, false);\n    }\n\n    // The built-in applySyntactic rule needs special handling: we want to skip\n    // trailing spaces, just as with the top-level application of a syntactic rule.\n    if (expr === builtInApplySyntacticBody) {\n      this.skipSpaces();\n    }\n\n    return ans;\n  }\n\n  getMatchResult() {\n    this.grammar._setUpMatchState(this);\n    this.eval(this.startExpr);\n    let rightmostFailures;\n    if (this.recordedFailures) {\n      rightmostFailures = Object.keys(this.recordedFailures).map(\n          key => this.recordedFailures[key],\n      );\n    }\n    const cst = this._bindings[0];\n    if (cst) {\n      cst.grammar = this.grammar;\n    }\n    return new MatchResult(\n        this.matcher,\n        this.input,\n        this.startExpr,\n        cst,\n        this._bindingOffsets[0],\n        this.rightmostFailurePosition,\n        rightmostFailures,\n    );\n  }\n\n  getTrace() {\n    this.trace = [];\n    const matchResult = this.getMatchResult();\n\n    // The trace node for the start rule is always the last entry. If it is a syntactic rule,\n    // the first entry is for an application of 'spaces'.\n    // TODO(pdubroy): Clean this up by introducing a special `Match<startAppl>` rule, which will\n    // ensure that there is always a single root trace node.\n    const rootTrace = this.trace[this.trace.length - 1];\n    rootTrace.result = matchResult;\n    return rootTrace;\n  }\n\n  pushFailuresInfo() {\n    this._rightmostFailurePositionStack.push(this.rightmostFailurePosition);\n    this._recordedFailuresStack.push(this.recordedFailures);\n  }\n\n  popFailuresInfo() {\n    this.rightmostFailurePosition = this._rightmostFailurePositionStack.pop();\n    this.recordedFailures = this._recordedFailuresStack.pop();\n  }\n}\n\nclass Matcher {\n  constructor(grammar) {\n    this.grammar = grammar;\n    this._memoTable = [];\n    this._input = '';\n    this._isMemoTableStale = false;\n  }\n\n  _resetMemoTable() {\n    this._memoTable = [];\n    this._isMemoTableStale = false;\n  }\n\n  getInput() {\n    return this._input;\n  }\n\n  setInput(str) {\n    if (this._input !== str) {\n      this.replaceInputRange(0, this._input.length, str);\n    }\n    return this;\n  }\n\n  replaceInputRange(startIdx, endIdx, str) {\n    const prevInput = this._input;\n    const memoTable = this._memoTable;\n    if (\n      startIdx < 0 ||\n      startIdx > prevInput.length ||\n      endIdx < 0 ||\n      endIdx > prevInput.length ||\n      startIdx > endIdx\n    ) {\n      throw new Error('Invalid indices: ' + startIdx + ' and ' + endIdx);\n    }\n\n    // update input\n    this._input = prevInput.slice(0, startIdx) + str + prevInput.slice(endIdx);\n    if (this._input !== prevInput && memoTable.length > 0) {\n      this._isMemoTableStale = true;\n    }\n\n    // update memo table (similar to the above)\n    const restOfMemoTable = memoTable.slice(endIdx);\n    memoTable.length = startIdx;\n    for (let idx = 0; idx < str.length; idx++) {\n      memoTable.push(undefined);\n    }\n    for (const posInfo of restOfMemoTable) {\n      memoTable.push(posInfo);\n    }\n\n    // Invalidate memoRecs\n    for (let pos = 0; pos < startIdx; pos++) {\n      const posInfo = memoTable[pos];\n      if (posInfo) {\n        posInfo.clearObsoleteEntries(pos, startIdx);\n      }\n    }\n\n    return this;\n  }\n\n  match(optStartApplicationStr, options = {incremental: true}) {\n    return this._match(this._getStartExpr(optStartApplicationStr), {\n      incremental: options.incremental,\n      tracing: false,\n    });\n  }\n\n  trace(optStartApplicationStr, options = {incremental: true}) {\n    return this._match(this._getStartExpr(optStartApplicationStr), {\n      incremental: options.incremental,\n      tracing: true,\n    });\n  }\n\n  _match(startExpr, options = {}) {\n    const opts = {\n      tracing: false,\n      incremental: true,\n      positionToRecordFailures: undefined,\n      ...options,\n    };\n    if (!opts.incremental) {\n      this._resetMemoTable();\n    } else if (this._isMemoTableStale && !this.grammar.supportsIncrementalParsing) {\n      throw grammarDoesNotSupportIncrementalParsing(this.grammar);\n    }\n\n    const state = new MatchState(this, startExpr, opts.positionToRecordFailures);\n    return opts.tracing ? state.getTrace() : state.getMatchResult();\n  }\n\n  /*\n    Returns the starting expression for this Matcher's associated grammar. If\n    `optStartApplicationStr` is specified, it is a string expressing a rule application in the\n    grammar. If not specified, the grammar's default start rule will be used.\n  */\n  _getStartExpr(optStartApplicationStr) {\n    const applicationStr = optStartApplicationStr || this.grammar.defaultStartRule;\n    if (!applicationStr) {\n      throw new Error('Missing start rule argument -- the grammar has no default start rule.');\n    }\n\n    const startApp = this.grammar.parseApplication(applicationStr);\n    return new Seq([startApp, end]);\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nconst globalActionStack = [];\n\nconst hasOwnProperty = (x, prop) => Object.prototype.hasOwnProperty.call(x, prop);\n\n// ----------------- Wrappers -----------------\n\n// Wrappers decorate CST nodes with all of the functionality (i.e., operations and attributes)\n// provided by a Semantics (see below). `Wrapper` is the abstract superclass of all wrappers. A\n// `Wrapper` must have `_node` and `_semantics` instance variables, which refer to the CST node and\n// Semantics (resp.) for which it was created, and a `_childWrappers` instance variable which is\n// used to cache the wrapper instances that are created for its child nodes. Setting these instance\n// variables is the responsibility of the constructor of each Semantics-specific subclass of\n// `Wrapper`.\nclass Wrapper {\n  constructor(node, sourceInterval, baseInterval) {\n    this._node = node;\n    this.source = sourceInterval;\n\n    // The interval that the childOffsets of `node` are relative to. It should be the source\n    // of the closest Nonterminal node.\n    this._baseInterval = baseInterval;\n\n    if (node.isNonterminal()) {\n      assert(sourceInterval === baseInterval);\n    }\n    this._childWrappers = [];\n  }\n\n  _forgetMemoizedResultFor(attributeName) {\n    // Remove the memoized attribute from the cstNode and all its children.\n    delete this._node[this._semantics.attributeKeys[attributeName]];\n    this.children.forEach(child => {\n      child._forgetMemoizedResultFor(attributeName);\n    });\n  }\n\n  // Returns the wrapper of the specified child node. Child wrappers are created lazily and\n  // cached in the parent wrapper's `_childWrappers` instance variable.\n  child(idx) {\n    if (!(0 <= idx && idx < this._node.numChildren())) {\n      // TODO: Consider throwing an exception here.\n      return undefined;\n    }\n    let childWrapper = this._childWrappers[idx];\n    if (!childWrapper) {\n      const childNode = this._node.childAt(idx);\n      const offset = this._node.childOffsets[idx];\n\n      const source = this._baseInterval.subInterval(offset, childNode.matchLength);\n      const base = childNode.isNonterminal() ? source : this._baseInterval;\n      childWrapper = this._childWrappers[idx] = this._semantics.wrap(childNode, source, base);\n    }\n    return childWrapper;\n  }\n\n  // Returns an array containing the wrappers of all of the children of the node associated\n  // with this wrapper.\n  _children() {\n    // Force the creation of all child wrappers\n    for (let idx = 0; idx < this._node.numChildren(); idx++) {\n      this.child(idx);\n    }\n    return this._childWrappers;\n  }\n\n  // Returns `true` if the CST node associated with this wrapper corresponds to an iteration\n  // expression, i.e., a Kleene-*, Kleene-+, or an optional. Returns `false` otherwise.\n  isIteration() {\n    return this._node.isIteration();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a terminal node, `false`\n  // otherwise.\n  isTerminal() {\n    return this._node.isTerminal();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node, `false`\n  // otherwise.\n  isNonterminal() {\n    return this._node.isNonterminal();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node\n  // corresponding to a syntactic rule, `false` otherwise.\n  isSyntactic() {\n    return this.isNonterminal() && this._node.isSyntactic();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is a nonterminal node\n  // corresponding to a lexical rule, `false` otherwise.\n  isLexical() {\n    return this.isNonterminal() && this._node.isLexical();\n  }\n\n  // Returns `true` if the CST node associated with this wrapper is an iterator node\n  // having either one or no child (? operator), `false` otherwise.\n  // Otherwise, throws an exception.\n  isOptional() {\n    return this._node.isOptional();\n  }\n\n  // Create a new _iter wrapper in the same semantics as this wrapper.\n  iteration(optChildWrappers) {\n    const childWrappers = optChildWrappers || [];\n\n    const childNodes = childWrappers.map(c => c._node);\n    const iter = new IterationNode(childNodes, [], -1, false);\n\n    const wrapper = this._semantics.wrap(iter, null, null);\n    wrapper._childWrappers = childWrappers;\n    return wrapper;\n  }\n\n  // Returns an array containing the children of this CST node.\n  get children() {\n    return this._children();\n  }\n\n  // Returns the name of grammar rule that created this CST node.\n  get ctorName() {\n    return this._node.ctorName;\n  }\n\n  // Returns the number of children of this CST node.\n  get numChildren() {\n    return this._node.numChildren();\n  }\n\n  // Returns the contents of the input stream consumed by this CST node.\n  get sourceString() {\n    return this.source.contents;\n  }\n}\n\n// ----------------- Semantics -----------------\n\n// A Semantics is a container for a family of Operations and Attributes for a given grammar.\n// Semantics enable modularity (different clients of a grammar can create their set of operations\n// and attributes in isolation) and extensibility even when operations and attributes are mutually-\n// recursive. This constructor should not be called directly except from\n// `Semantics.createSemantics`. The normal ways to create a Semantics, given a grammar 'g', are\n// `g.createSemantics()` and `g.extendSemantics(parentSemantics)`.\nclass Semantics {\n  constructor(grammar, superSemantics) {\n    const self = this;\n    this.grammar = grammar;\n    this.checkedActionDicts = false;\n\n    // Constructor for wrapper instances, which are passed as the arguments to the semantic actions\n    // of an operation or attribute. Operations and attributes require double dispatch: the semantic\n    // action is chosen based on both the node's type and the semantics. Wrappers ensure that\n    // the `execute` method is called with the correct (most specific) semantics object as an\n    // argument.\n    this.Wrapper = class extends (superSemantics ? superSemantics.Wrapper : Wrapper) {\n      constructor(node, sourceInterval, baseInterval) {\n        super(node, sourceInterval, baseInterval);\n        self.checkActionDictsIfHaventAlready();\n        this._semantics = self;\n      }\n\n      toString() {\n        return '[semantics wrapper for ' + self.grammar.name + ']';\n      }\n    };\n\n    this.super = superSemantics;\n    if (superSemantics) {\n      if (!(grammar.equals(this.super.grammar) || grammar._inheritsFrom(this.super.grammar))) {\n        throw new Error(\n            \"Cannot extend a semantics for grammar '\" +\n            this.super.grammar.name +\n            \"' for use with grammar '\" +\n            grammar.name +\n            \"' (not a sub-grammar)\",\n        );\n      }\n      this.operations = Object.create(this.super.operations);\n      this.attributes = Object.create(this.super.attributes);\n      this.attributeKeys = Object.create(null);\n\n      // Assign unique symbols for each of the attributes inherited from the super-semantics so that\n      // they are memoized independently.\n      // eslint-disable-next-line guard-for-in\n      for (const attributeName in this.attributes) {\n        Object.defineProperty(this.attributeKeys, attributeName, {\n          value: uniqueId(attributeName),\n        });\n      }\n    } else {\n      this.operations = Object.create(null);\n      this.attributes = Object.create(null);\n      this.attributeKeys = Object.create(null);\n    }\n  }\n\n  toString() {\n    return '[semantics for ' + this.grammar.name + ']';\n  }\n\n  checkActionDictsIfHaventAlready() {\n    if (!this.checkedActionDicts) {\n      this.checkActionDicts();\n      this.checkedActionDicts = true;\n    }\n  }\n\n  // Checks that the action dictionaries for all operations and attributes in this semantics,\n  // including the ones that were inherited from the super-semantics, agree with the grammar.\n  // Throws an exception if one or more of them doesn't.\n  checkActionDicts() {\n    let name;\n    // eslint-disable-next-line guard-for-in\n    for (name in this.operations) {\n      this.operations[name].checkActionDict(this.grammar);\n    }\n    // eslint-disable-next-line guard-for-in\n    for (name in this.attributes) {\n      this.attributes[name].checkActionDict(this.grammar);\n    }\n  }\n\n  toRecipe(semanticsOnly) {\n    function hasSuperSemantics(s) {\n      return s.super !== Semantics.BuiltInSemantics._getSemantics();\n    }\n\n    let str = '(function(g) {\\n';\n    if (hasSuperSemantics(this)) {\n      str += '  var semantics = ' + this.super.toRecipe(true) + '(g';\n\n      const superSemanticsGrammar = this.super.grammar;\n      let relatedGrammar = this.grammar;\n      while (relatedGrammar !== superSemanticsGrammar) {\n        str += '.superGrammar';\n        relatedGrammar = relatedGrammar.superGrammar;\n      }\n\n      str += ');\\n';\n      str += '  return g.extendSemantics(semantics)';\n    } else {\n      str += '  return g.createSemantics()';\n    }\n    ['Operation', 'Attribute'].forEach(type => {\n      const semanticOperations = this[type.toLowerCase() + 's'];\n      Object.keys(semanticOperations).forEach(name => {\n        const {actionDict, formals, builtInDefault} = semanticOperations[name];\n\n        let signature = name;\n        if (formals.length > 0) {\n          signature += '(' + formals.join(', ') + ')';\n        }\n\n        let method;\n        if (hasSuperSemantics(this) && this.super[type.toLowerCase() + 's'][name]) {\n          method = 'extend' + type;\n        } else {\n          method = 'add' + type;\n        }\n        str += '\\n    .' + method + '(' + JSON.stringify(signature) + ', {';\n\n        const srcArray = [];\n        Object.keys(actionDict).forEach(actionName => {\n          if (actionDict[actionName] !== builtInDefault) {\n            let source = actionDict[actionName].toString().trim();\n\n            // Convert method shorthand to plain old function syntax.\n            // https://github.com/ohmjs/ohm/issues/263\n            source = source.replace(/^.*\\(/, 'function(');\n\n            srcArray.push('\\n      ' + JSON.stringify(actionName) + ': ' + source);\n          }\n        });\n        str += srcArray.join(',') + '\\n    })';\n      });\n    });\n    str += ';\\n  })';\n\n    if (!semanticsOnly) {\n      str =\n        '(function() {\\n' +\n        '  var grammar = this.fromRecipe(' +\n        this.grammar.toRecipe() +\n        ');\\n' +\n        '  var semantics = ' +\n        str +\n        '(grammar);\\n' +\n        '  return semantics;\\n' +\n        '});\\n';\n    }\n\n    return str;\n  }\n\n  addOperationOrAttribute(type, signature, actionDict) {\n    const typePlural = type + 's';\n\n    const parsedNameAndFormalArgs = parseSignature(signature, type);\n    const {name} = parsedNameAndFormalArgs;\n    const {formals} = parsedNameAndFormalArgs;\n\n    // TODO: check that there are no duplicate formal arguments\n\n    this.assertNewName(name, type);\n\n    // Create the action dictionary for this operation / attribute that contains a `_default` action\n    // which defines the default behavior of iteration, terminal, and non-terminal nodes...\n    const builtInDefault = newDefaultAction(type, name, doIt);\n    const realActionDict = {_default: builtInDefault};\n    // ... and add in the actions supplied by the programmer, which may override some or all of the\n    // default ones.\n    Object.keys(actionDict).forEach(name => {\n      realActionDict[name] = actionDict[name];\n    });\n\n    const entry =\n      type === 'operation' ?\n        new Operation(name, formals, realActionDict, builtInDefault) :\n        new Attribute(name, realActionDict, builtInDefault);\n\n    // The following check is not strictly necessary (it will happen later anyway) but it's better\n    // to catch errors early.\n    entry.checkActionDict(this.grammar);\n\n    this[typePlural][name] = entry;\n\n    function doIt(...args) {\n      // Dispatch to most specific version of this operation / attribute -- it may have been\n      // overridden by a sub-semantics.\n      const thisThing = this._semantics[typePlural][name];\n\n      // Check that the caller passed the correct number of arguments.\n      if (arguments.length !== thisThing.formals.length) {\n        throw new Error(\n            'Invalid number of arguments passed to ' +\n            name +\n            ' ' +\n            type +\n            ' (expected ' +\n            thisThing.formals.length +\n            ', got ' +\n            arguments.length +\n            ')',\n        );\n      }\n\n      // Create an \"arguments object\" from the arguments that were passed to this\n      // operation / attribute.\n      const argsObj = Object.create(null);\n      for (const [idx, val] of Object.entries(args)) {\n        const formal = thisThing.formals[idx];\n        argsObj[formal] = val;\n      }\n\n      const oldArgs = this.args;\n      this.args = argsObj;\n      const ans = thisThing.execute(this._semantics, this);\n      this.args = oldArgs;\n      return ans;\n    }\n\n    if (type === 'operation') {\n      this.Wrapper.prototype[name] = doIt;\n      this.Wrapper.prototype[name].toString = function() {\n        return '[' + name + ' operation]';\n      };\n    } else {\n      Object.defineProperty(this.Wrapper.prototype, name, {\n        get: doIt,\n        configurable: true, // So the property can be deleted.\n      });\n      Object.defineProperty(this.attributeKeys, name, {\n        value: uniqueId(name),\n      });\n    }\n  }\n\n  extendOperationOrAttribute(type, name, actionDict) {\n    const typePlural = type + 's';\n\n    // Make sure that `name` really is just a name, i.e., that it doesn't also contain formals.\n    parseSignature(name, 'attribute');\n\n    if (!(this.super && name in this.super[typePlural])) {\n      throw new Error(\n          'Cannot extend ' +\n          type +\n          \" '\" +\n          name +\n          \"': did not inherit an \" +\n          type +\n          ' with that name',\n      );\n    }\n    if (hasOwnProperty(this[typePlural], name)) {\n      throw new Error('Cannot extend ' + type + \" '\" + name + \"' again\");\n    }\n\n    // Create a new operation / attribute whose actionDict delegates to the super operation /\n    // attribute's actionDict, and which has all the keys from `inheritedActionDict`.\n    const inheritedFormals = this[typePlural][name].formals;\n    const inheritedActionDict = this[typePlural][name].actionDict;\n    const newActionDict = Object.create(inheritedActionDict);\n    Object.keys(actionDict).forEach(name => {\n      newActionDict[name] = actionDict[name];\n    });\n\n    this[typePlural][name] =\n      type === 'operation' ?\n        new Operation(name, inheritedFormals, newActionDict) :\n        new Attribute(name, newActionDict);\n\n    // The following check is not strictly necessary (it will happen later anyway) but it's better\n    // to catch errors early.\n    this[typePlural][name].checkActionDict(this.grammar);\n  }\n\n  assertNewName(name, type) {\n    if (hasOwnProperty(Wrapper.prototype, name)) {\n      throw new Error('Cannot add ' + type + \" '\" + name + \"': that's a reserved name\");\n    }\n    if (name in this.operations) {\n      throw new Error(\n          'Cannot add ' + type + \" '\" + name + \"': an operation with that name already exists\",\n      );\n    }\n    if (name in this.attributes) {\n      throw new Error(\n          'Cannot add ' + type + \" '\" + name + \"': an attribute with that name already exists\",\n      );\n    }\n  }\n\n  // Returns a wrapper for the given CST `node` in this semantics.\n  // If `node` is already a wrapper, returns `node` itself.  // TODO: why is this needed?\n  wrap(node, source, optBaseInterval) {\n    const baseInterval = optBaseInterval || source;\n    return node instanceof this.Wrapper ? node : new this.Wrapper(node, source, baseInterval);\n  }\n}\n\nfunction parseSignature(signature, type) {\n  if (!Semantics.prototypeGrammar) {\n    // The Operations and Attributes grammar won't be available while Ohm is loading,\n    // but we can get away the following simplification b/c none of the operations\n    // that are used while loading take arguments.\n    assert(signature.indexOf('(') === -1);\n    return {\n      name: signature,\n      formals: [],\n    };\n  }\n\n  const r = Semantics.prototypeGrammar.match(\n      signature,\n    type === 'operation' ? 'OperationSignature' : 'AttributeSignature',\n  );\n  if (r.failed()) {\n    throw new Error(r.message);\n  }\n\n  return Semantics.prototypeGrammarSemantics(r).parse();\n}\n\nfunction newDefaultAction(type, name, doIt) {\n  return function(...children) {\n    const thisThing = this._semantics.operations[name] || this._semantics.attributes[name];\n    const args = thisThing.formals.map(formal => this.args[formal]);\n\n    if (!this.isIteration() && children.length === 1) {\n      // This CST node corresponds to a non-terminal in the grammar (e.g., AddExpr). The fact that\n      // we got here means that this action dictionary doesn't have an action for this particular\n      // non-terminal or a generic `_nonterminal` action.\n      // As a convenience, if this node only has one child, we just return the result of applying\n      // this operation / attribute to the child node.\n      return doIt.apply(children[0], args);\n    } else {\n      // Otherwise, we throw an exception to let the programmer know that we don't know what\n      // to do with this node.\n      throw missingSemanticAction(this.ctorName, name, type, globalActionStack);\n    }\n  };\n}\n\n// Creates a new Semantics instance for `grammar`, inheriting operations and attributes from\n// `optSuperSemantics`, if it is specified. Returns a function that acts as a proxy for the new\n// Semantics instance. When that function is invoked with a CST node as an argument, it returns\n// a wrapper for that node which gives access to the operations and attributes provided by this\n// semantics.\nSemantics.createSemantics = function(grammar, optSuperSemantics) {\n  const s = new Semantics(\n      grammar,\n    optSuperSemantics !== undefined ?\n      optSuperSemantics :\n      Semantics.BuiltInSemantics._getSemantics(),\n  );\n\n  // To enable clients to invoke a semantics like a function, return a function that acts as a proxy\n  // for `s`, which is the real `Semantics` instance.\n  const proxy = function ASemantics(matchResult) {\n    if (!(matchResult instanceof MatchResult)) {\n      throw new TypeError(\n          'Semantics expected a MatchResult, but got ' +\n          unexpectedObjToString(matchResult),\n      );\n    }\n    if (matchResult.failed()) {\n      throw new TypeError('cannot apply Semantics to ' + matchResult.toString());\n    }\n\n    const cst = matchResult._cst;\n    if (cst.grammar !== grammar) {\n      throw new Error(\n          \"Cannot use a MatchResult from grammar '\" +\n          cst.grammar.name +\n          \"' with a semantics for '\" +\n          grammar.name +\n          \"'\",\n      );\n    }\n    const inputStream = new InputStream(matchResult.input);\n    return s.wrap(cst, inputStream.interval(matchResult._cstOffset, matchResult.input.length));\n  };\n\n  // Forward public methods from the proxy to the semantics instance.\n  proxy.addOperation = function(signature, actionDict) {\n    s.addOperationOrAttribute('operation', signature, actionDict);\n    return proxy;\n  };\n  proxy.extendOperation = function(name, actionDict) {\n    s.extendOperationOrAttribute('operation', name, actionDict);\n    return proxy;\n  };\n  proxy.addAttribute = function(name, actionDict) {\n    s.addOperationOrAttribute('attribute', name, actionDict);\n    return proxy;\n  };\n  proxy.extendAttribute = function(name, actionDict) {\n    s.extendOperationOrAttribute('attribute', name, actionDict);\n    return proxy;\n  };\n  proxy._getActionDict = function(operationOrAttributeName) {\n    const action =\n      s.operations[operationOrAttributeName] || s.attributes[operationOrAttributeName];\n    if (!action) {\n      throw new Error(\n          '\"' +\n          operationOrAttributeName +\n          '\" is not a valid operation or attribute ' +\n          'name in this semantics for \"' +\n          grammar.name +\n          '\"',\n      );\n    }\n    return action.actionDict;\n  };\n  proxy._remove = function(operationOrAttributeName) {\n    let semantic;\n    if (operationOrAttributeName in s.operations) {\n      semantic = s.operations[operationOrAttributeName];\n      delete s.operations[operationOrAttributeName];\n    } else if (operationOrAttributeName in s.attributes) {\n      semantic = s.attributes[operationOrAttributeName];\n      delete s.attributes[operationOrAttributeName];\n    }\n    delete s.Wrapper.prototype[operationOrAttributeName];\n    return semantic;\n  };\n  proxy.getOperationNames = function() {\n    return Object.keys(s.operations);\n  };\n  proxy.getAttributeNames = function() {\n    return Object.keys(s.attributes);\n  };\n  proxy.getGrammar = function() {\n    return s.grammar;\n  };\n  proxy.toRecipe = function(semanticsOnly) {\n    return s.toRecipe(semanticsOnly);\n  };\n\n  // Make the proxy's toString() work.\n  proxy.toString = s.toString.bind(s);\n\n  // Returns the semantics for the proxy.\n  proxy._getSemantics = function() {\n    return s;\n  };\n\n  return proxy;\n};\n\n// ----------------- Operation -----------------\n\n// An Operation represents a function to be applied to a concrete syntax tree (CST) -- it's very\n// similar to a Visitor (http://en.wikipedia.org/wiki/Visitor_pattern). An operation is executed by\n// recursively walking the CST, and at each node, invoking the matching semantic action from\n// `actionDict`. See `Operation.prototype.execute` for details of how a CST node's matching semantic\n// action is found.\nclass Operation {\n  constructor(name, formals, actionDict, builtInDefault) {\n    this.name = name;\n    this.formals = formals;\n    this.actionDict = actionDict;\n    this.builtInDefault = builtInDefault;\n  }\n\n  checkActionDict(grammar) {\n    grammar._checkTopDownActionDict(this.typeName, this.name, this.actionDict);\n  }\n\n  // Execute this operation on the CST node associated with `nodeWrapper` in the context of the\n  // given Semantics instance.\n  execute(semantics, nodeWrapper) {\n    try {\n      // Look for a semantic action whose name matches the node's constructor name, which is either\n      // the name of a rule in the grammar, or '_terminal' (for a terminal node), or '_iter' (for an\n      // iteration node).\n      const {ctorName} = nodeWrapper._node;\n      let actionFn = this.actionDict[ctorName];\n      if (actionFn) {\n        globalActionStack.push([this, ctorName]);\n        return actionFn.apply(nodeWrapper, nodeWrapper._children());\n      }\n\n      // The action dictionary does not contain a semantic action for this specific type of node.\n      // If this is a nonterminal node and the programmer has provided a `_nonterminal` semantic\n      // action, we invoke it:\n      if (nodeWrapper.isNonterminal()) {\n        actionFn = this.actionDict._nonterminal;\n        if (actionFn) {\n          globalActionStack.push([this, '_nonterminal', ctorName]);\n          return actionFn.apply(nodeWrapper, nodeWrapper._children());\n        }\n      }\n\n      // Otherwise, we invoke the '_default' semantic action.\n      globalActionStack.push([this, 'default action', ctorName]);\n      return this.actionDict._default.apply(nodeWrapper, nodeWrapper._children());\n    } finally {\n      globalActionStack.pop();\n    }\n  }\n}\n\nOperation.prototype.typeName = 'operation';\n\n// ----------------- Attribute -----------------\n\n// Attributes are Operations whose results are memoized. This means that, for any given semantics,\n// the semantic action for a CST node will be invoked no more than once.\nclass Attribute extends Operation {\n  constructor(name, actionDict, builtInDefault) {\n    super(name, [], actionDict, builtInDefault);\n  }\n\n  execute(semantics, nodeWrapper) {\n    const node = nodeWrapper._node;\n    const key = semantics.attributeKeys[this.name];\n    if (!hasOwnProperty(node, key)) {\n      // The following is a super-send -- isn't JS beautiful? :/\n      node[key] = Operation.prototype.execute.call(this, semantics, nodeWrapper);\n    }\n    return node[key];\n  }\n}\n\nAttribute.prototype.typeName = 'attribute';\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nconst SPECIAL_ACTION_NAMES = ['_iter', '_terminal', '_nonterminal', '_default'];\n\nfunction getSortedRuleValues(grammar) {\n  return Object.keys(grammar.rules)\n      .sort()\n      .map(name => grammar.rules[name]);\n}\n\n// Until ES2019, JSON was not a valid subset of JavaScript because U+2028 (line separator)\n// and U+2029 (paragraph separator) are allowed in JSON string literals, but not in JS.\n// This function properly encodes those two characters so that the resulting string is\n// represents both valid JSON, and valid JavaScript (for ES2018 and below).\n// See https://v8.dev/features/subsume-json for more details.\nconst jsonToJS = str => str.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n\nlet ohmGrammar$1;\nlet buildGrammar$1;\n\nclass Grammar {\n  constructor(name, superGrammar, rules, optDefaultStartRule) {\n    this.name = name;\n    this.superGrammar = superGrammar;\n    this.rules = rules;\n    if (optDefaultStartRule) {\n      if (!(optDefaultStartRule in rules)) {\n        throw new Error(\n            \"Invalid start rule: '\" +\n            optDefaultStartRule +\n            \"' is not a rule in grammar '\" +\n            name +\n            \"'\",\n        );\n      }\n      this.defaultStartRule = optDefaultStartRule;\n    }\n    this._matchStateInitializer = undefined;\n    this.supportsIncrementalParsing = true;\n  }\n\n  matcher() {\n    return new Matcher(this);\n  }\n\n  // Return true if the grammar is a built-in grammar, otherwise false.\n  // NOTE: This might give an unexpected result if called before BuiltInRules is defined!\n  isBuiltIn() {\n    return this === Grammar.ProtoBuiltInRules || this === Grammar.BuiltInRules;\n  }\n\n  equals(g) {\n    if (this === g) {\n      return true;\n    }\n    // Do the cheapest comparisons first.\n    if (\n      g == null ||\n      this.name !== g.name ||\n      this.defaultStartRule !== g.defaultStartRule ||\n      !(this.superGrammar === g.superGrammar || this.superGrammar.equals(g.superGrammar))\n    ) {\n      return false;\n    }\n    const myRules = getSortedRuleValues(this);\n    const otherRules = getSortedRuleValues(g);\n    return (\n      myRules.length === otherRules.length &&\n      myRules.every((rule, i) => {\n        return (\n          rule.description === otherRules[i].description &&\n          rule.formals.join(',') === otherRules[i].formals.join(',') &&\n          rule.body.toString() === otherRules[i].body.toString()\n        );\n      })\n    );\n  }\n\n  match(input, optStartApplication) {\n    const m = this.matcher();\n    m.replaceInputRange(0, 0, input);\n    return m.match(optStartApplication);\n  }\n\n  trace(input, optStartApplication) {\n    const m = this.matcher();\n    m.replaceInputRange(0, 0, input);\n    return m.trace(optStartApplication);\n  }\n\n  createSemantics() {\n    return Semantics.createSemantics(this);\n  }\n\n  extendSemantics(superSemantics) {\n    return Semantics.createSemantics(this, superSemantics._getSemantics());\n  }\n\n  // Check that every key in `actionDict` corresponds to a semantic action, and that it maps to\n  // a function of the correct arity. If not, throw an exception.\n  _checkTopDownActionDict(what, name, actionDict) {\n    const problems = [];\n\n    // eslint-disable-next-line guard-for-in\n    for (const k in actionDict) {\n      const v = actionDict[k];\n      const isSpecialAction = SPECIAL_ACTION_NAMES.includes(k);\n\n      if (!isSpecialAction && !(k in this.rules)) {\n        problems.push(`'${k}' is not a valid semantic action for '${this.name}'`);\n        continue;\n      }\n      if (typeof v !== 'function') {\n        problems.push(`'${k}' must be a function in an action dictionary for '${this.name}'`);\n        continue;\n      }\n      const actual = v.length;\n      const expected = this._topDownActionArity(k);\n      if (actual !== expected) {\n        let details;\n        if (k === '_iter' || k === '_nonterminal') {\n          details =\n            `it should use a rest parameter, e.g. \\`${k}(...children) {}\\`. ` +\n            'NOTE: this is new in Ohm v16  see https://ohmjs.org/d/ati for details.';\n        } else {\n          details = `expected ${expected}, got ${actual}`;\n        }\n        problems.push(`Semantic action '${k}' has the wrong arity: ${details}`);\n      }\n    }\n    if (problems.length > 0) {\n      const prettyProblems = problems.map(problem => '- ' + problem);\n      const error = new Error(\n          [\n            `Found errors in the action dictionary of the '${name}' ${what}:`,\n            ...prettyProblems,\n          ].join('\\n'),\n      );\n      error.problems = problems;\n      throw error;\n    }\n  }\n\n  // Return the expected arity for a semantic action named `actionName`, which\n  // is either a rule name or a special action name like '_nonterminal'.\n  _topDownActionArity(actionName) {\n    // All special actions have an expected arity of 0, though all but _terminal\n    // are expected to use the rest parameter syntax (e.g. `_iter(...children)`).\n    // This is considered to have arity 0, i.e. `((...args) => {}).length` is 0.\n    return SPECIAL_ACTION_NAMES.includes(actionName) ?\n      0 :\n      this.rules[actionName].body.getArity();\n  }\n\n  _inheritsFrom(grammar) {\n    let g = this.superGrammar;\n    while (g) {\n      if (g.equals(grammar, true)) {\n        return true;\n      }\n      g = g.superGrammar;\n    }\n    return false;\n  }\n\n  toRecipe(superGrammarExpr = undefined) {\n    const metaInfo = {};\n    // Include the grammar source if it is available.\n    if (this.source) {\n      metaInfo.source = this.source.contents;\n    }\n\n    let startRule = null;\n    if (this.defaultStartRule) {\n      startRule = this.defaultStartRule;\n    }\n\n    const rules = {};\n    Object.keys(this.rules).forEach(ruleName => {\n      const ruleInfo = this.rules[ruleName];\n      const {body} = ruleInfo;\n      const isDefinition = !this.superGrammar || !this.superGrammar.rules[ruleName];\n\n      let operation;\n      if (isDefinition) {\n        operation = 'define';\n      } else {\n        operation = body instanceof Extend ? 'extend' : 'override';\n      }\n\n      const metaInfo = {};\n      if (ruleInfo.source && this.source) {\n        const adjusted = ruleInfo.source.relativeTo(this.source);\n        metaInfo.sourceInterval = [adjusted.startIdx, adjusted.endIdx];\n      }\n\n      const description = isDefinition ? ruleInfo.description : null;\n      const bodyRecipe = body.outputRecipe(ruleInfo.formals, this.source);\n\n      rules[ruleName] = [\n        operation, // \"define\"/\"extend\"/\"override\"\n        metaInfo,\n        description,\n        ruleInfo.formals,\n        bodyRecipe,\n      ];\n    });\n\n    // If the caller provided an expression to use for the supergrammar, use that.\n    // Otherwise, if the supergrammar is a user grammar, use its recipe inline.\n    let superGrammarOutput = 'null';\n    if (superGrammarExpr) {\n      superGrammarOutput = superGrammarExpr;\n    } else if (this.superGrammar && !this.superGrammar.isBuiltIn()) {\n      superGrammarOutput = this.superGrammar.toRecipe();\n    }\n\n    const recipeElements = [\n      ...['grammar', metaInfo, this.name].map(JSON.stringify),\n      superGrammarOutput,\n      ...[startRule, rules].map(JSON.stringify),\n    ];\n    return jsonToJS(`[${recipeElements.join(',')}]`);\n  }\n\n  // TODO: Come up with better names for these methods.\n  // TODO: Write the analog of these methods for inherited attributes.\n  toOperationActionDictionaryTemplate() {\n    return this._toOperationOrAttributeActionDictionaryTemplate();\n  }\n  toAttributeActionDictionaryTemplate() {\n    return this._toOperationOrAttributeActionDictionaryTemplate();\n  }\n\n  _toOperationOrAttributeActionDictionaryTemplate() {\n    // TODO: add the super-grammar's templates at the right place, e.g., a case for AddExpr_plus\n    // should appear next to other cases of AddExpr.\n\n    const sb = new StringBuffer();\n    sb.append('{');\n\n    let first = true;\n    // eslint-disable-next-line guard-for-in\n    for (const ruleName in this.rules) {\n      const {body} = this.rules[ruleName];\n      if (first) {\n        first = false;\n      } else {\n        sb.append(',');\n      }\n      sb.append('\\n');\n      sb.append('  ');\n      this.addSemanticActionTemplate(ruleName, body, sb);\n    }\n\n    sb.append('\\n}');\n    return sb.contents();\n  }\n\n  addSemanticActionTemplate(ruleName, body, sb) {\n    sb.append(ruleName);\n    sb.append(': function(');\n    const arity = this._topDownActionArity(ruleName);\n    sb.append(repeat('_', arity).join(', '));\n    sb.append(') {\\n');\n    sb.append('  }');\n  }\n\n  // Parse a string which expresses a rule application in this grammar, and return the\n  // resulting Apply node.\n  parseApplication(str) {\n    let app;\n    if (str.indexOf('<') === -1) {\n      // simple application\n      app = new Apply(str);\n    } else {\n      // parameterized application\n      const cst = ohmGrammar$1.match(str, 'Base_application');\n      app = buildGrammar$1(cst, {});\n    }\n\n    // Ensure that the application is valid.\n    if (!(app.ruleName in this.rules)) {\n      throw undeclaredRule(app.ruleName, this.name);\n    }\n    const {formals} = this.rules[app.ruleName];\n    if (formals.length !== app.args.length) {\n      const {source} = this.rules[app.ruleName];\n      throw wrongNumberOfParameters(\n          app.ruleName,\n          formals.length,\n          app.args.length,\n          source,\n      );\n    }\n    return app;\n  }\n\n  _setUpMatchState(state) {\n    if (this._matchStateInitializer) {\n      this._matchStateInitializer(state);\n    }\n  }\n}\n\n// The following grammar contains a few rules that couldn't be written  in \"userland\".\n// At the bottom of src/main.js, we create a sub-grammar of this grammar that's called\n// `BuiltInRules`. That grammar contains several convenience rules, e.g., `letter` and\n// `digit`, and is implicitly the super-grammar of any grammar whose super-grammar\n// isn't specified.\nGrammar.ProtoBuiltInRules = new Grammar(\n    'ProtoBuiltInRules', // name\n    undefined, // supergrammar\n    {\n      any: {\n        body: any,\n        formals: [],\n        description: 'any character',\n        primitive: true,\n      },\n      end: {\n        body: end,\n        formals: [],\n        description: 'end of input',\n        primitive: true,\n      },\n\n      caseInsensitive: {\n        body: new CaseInsensitiveTerminal(new Param(0)),\n        formals: ['str'],\n        primitive: true,\n      },\n      lower: {\n        body: new UnicodeChar('Ll'),\n        formals: [],\n        description: 'a lowercase letter',\n        primitive: true,\n      },\n      upper: {\n        body: new UnicodeChar('Lu'),\n        formals: [],\n        description: 'an uppercase letter',\n        primitive: true,\n      },\n      // Union of Lt (titlecase), Lm (modifier), and Lo (other), i.e. any letter not in Ll or Lu.\n      unicodeLtmo: {\n        body: new UnicodeChar('Ltmo'),\n        formals: [],\n        description: 'a Unicode character in Lt, Lm, or Lo',\n        primitive: true,\n      },\n\n      // These rules are not truly primitive (they could be written in userland) but are defined\n      // here for bootstrapping purposes.\n      spaces: {\n        body: new Star(new Apply('space')),\n        formals: [],\n      },\n      space: {\n        body: new Range('\\x00', ' '),\n        formals: [],\n        description: 'a space',\n      },\n    },\n);\n\n// This method is called from main.js once Ohm has loaded.\nGrammar.initApplicationParser = function(grammar, builderFn) {\n  ohmGrammar$1 = grammar;\n  buildGrammar$1 = builderFn;\n};\n\n// --------------------------------------------------------------------\n// Private Stuff\n// --------------------------------------------------------------------\n\n// Constructors\n\nclass GrammarDecl {\n  constructor(name) {\n    this.name = name;\n  }\n\n  // Helpers\n\n  sourceInterval(startIdx, endIdx) {\n    return this.source.subInterval(startIdx, endIdx - startIdx);\n  }\n\n  ensureSuperGrammar() {\n    if (!this.superGrammar) {\n      this.withSuperGrammar(\n        // TODO: The conditional expression below is an ugly hack. It's kind of ok because\n        // I doubt anyone will ever try to declare a grammar called `BuiltInRules`. Still,\n        // we should try to find a better way to do this.\n        this.name === 'BuiltInRules' ? Grammar.ProtoBuiltInRules : Grammar.BuiltInRules,\n      );\n    }\n    return this.superGrammar;\n  }\n\n  ensureSuperGrammarRuleForOverriding(name, source) {\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    if (!ruleInfo) {\n      throw cannotOverrideUndeclaredRule(name, this.superGrammar.name, source);\n    }\n    return ruleInfo;\n  }\n\n  installOverriddenOrExtendedRule(name, formals, body, source) {\n    const duplicateParameterNames$1 = getDuplicates(formals);\n    if (duplicateParameterNames$1.length > 0) {\n      throw duplicateParameterNames(name, duplicateParameterNames$1, source);\n    }\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    const expectedFormals = ruleInfo.formals;\n    const expectedNumFormals = expectedFormals ? expectedFormals.length : 0;\n    if (formals.length !== expectedNumFormals) {\n      throw wrongNumberOfParameters(name, expectedNumFormals, formals.length, source);\n    }\n    return this.install(name, formals, body, ruleInfo.description, source);\n  }\n\n  install(name, formals, body, description, source, primitive = false) {\n    this.rules[name] = {\n      body: body.introduceParams(formals),\n      formals,\n      description,\n      source,\n      primitive,\n    };\n    return this;\n  }\n\n  // Stuff that you should only do once\n\n  withSuperGrammar(superGrammar) {\n    if (this.superGrammar) {\n      throw new Error('the super grammar of a GrammarDecl cannot be set more than once');\n    }\n    this.superGrammar = superGrammar;\n    this.rules = Object.create(superGrammar.rules);\n\n    // Grammars with an explicit supergrammar inherit a default start rule.\n    if (!superGrammar.isBuiltIn()) {\n      this.defaultStartRule = superGrammar.defaultStartRule;\n    }\n    return this;\n  }\n\n  withDefaultStartRule(ruleName) {\n    this.defaultStartRule = ruleName;\n    return this;\n  }\n\n  withSource(source) {\n    this.source = new InputStream(source).interval(0, source.length);\n    return this;\n  }\n\n  // Creates a Grammar instance, and if it passes the sanity checks, returns it.\n  build() {\n    const grammar = new Grammar(\n        this.name,\n        this.ensureSuperGrammar(),\n        this.rules,\n        this.defaultStartRule,\n    );\n    // Initialize internal props that are inherited from the super grammar.\n    grammar._matchStateInitializer = grammar.superGrammar._matchStateInitializer;\n    grammar.supportsIncrementalParsing = grammar.superGrammar.supportsIncrementalParsing;\n\n    // TODO: change the pexpr.prototype.assert... methods to make them add\n    // exceptions to an array that's provided as an arg. Then we'll be able to\n    // show more than one error of the same type at a time.\n    // TODO: include the offending pexpr in the errors, that way we can show\n    // the part of the source that caused it.\n    const grammarErrors = [];\n    let grammarHasInvalidApplications = false;\n    Object.keys(grammar.rules).forEach(ruleName => {\n      const {body} = grammar.rules[ruleName];\n      try {\n        body.assertChoicesHaveUniformArity(ruleName);\n      } catch (e) {\n        grammarErrors.push(e);\n      }\n      try {\n        body.assertAllApplicationsAreValid(ruleName, grammar);\n      } catch (e) {\n        grammarErrors.push(e);\n        grammarHasInvalidApplications = true;\n      }\n    });\n    if (!grammarHasInvalidApplications) {\n      // The following check can only be done if the grammar has no invalid applications.\n      Object.keys(grammar.rules).forEach(ruleName => {\n        const {body} = grammar.rules[ruleName];\n        try {\n          body.assertIteratedExprsAreNotNullable(grammar, []);\n        } catch (e) {\n          grammarErrors.push(e);\n        }\n      });\n    }\n    if (grammarErrors.length > 0) {\n      throwErrors(grammarErrors);\n    }\n    if (this.source) {\n      grammar.source = this.source;\n    }\n\n    return grammar;\n  }\n\n  // Rule declarations\n\n  define(name, formals, body, description, source, primitive) {\n    this.ensureSuperGrammar();\n    if (this.superGrammar.rules[name]) {\n      throw duplicateRuleDeclaration(name, this.name, this.superGrammar.name, source);\n    } else if (this.rules[name]) {\n      throw duplicateRuleDeclaration(name, this.name, this.name, source);\n    }\n    const duplicateParameterNames$1 = getDuplicates(formals);\n    if (duplicateParameterNames$1.length > 0) {\n      throw duplicateParameterNames(name, duplicateParameterNames$1, source);\n    }\n    return this.install(name, formals, body, description, source, primitive);\n  }\n\n  override(name, formals, body, descIgnored, source) {\n    this.ensureSuperGrammarRuleForOverriding(name, source);\n    this.installOverriddenOrExtendedRule(name, formals, body, source);\n    return this;\n  }\n\n  extend(name, formals, fragment, descIgnored, source) {\n    const ruleInfo = this.ensureSuperGrammar().rules[name];\n    if (!ruleInfo) {\n      throw cannotExtendUndeclaredRule(name, this.superGrammar.name, source);\n    }\n    const body = new Extend(this.superGrammar, name, fragment);\n    body.source = fragment.source;\n    this.installOverriddenOrExtendedRule(name, formals, body, source);\n    return this;\n  }\n}\n\n// --------------------------------------------------------------------\n// Private stuff\n// --------------------------------------------------------------------\n\nclass Builder {\n  constructor() {\n    this.currentDecl = null;\n    this.currentRuleName = null;\n  }\n\n  newGrammar(name) {\n    return new GrammarDecl(name);\n  }\n\n  grammar(metaInfo, name, superGrammar, defaultStartRule, rules) {\n    const gDecl = new GrammarDecl(name);\n    if (superGrammar) {\n      // `superGrammar` may be a recipe (i.e. an Array), or an actual grammar instance.\n      gDecl.withSuperGrammar(\n        superGrammar instanceof Grammar ? superGrammar : this.fromRecipe(superGrammar),\n      );\n    }\n    if (defaultStartRule) {\n      gDecl.withDefaultStartRule(defaultStartRule);\n    }\n    if (metaInfo && metaInfo.source) {\n      gDecl.withSource(metaInfo.source);\n    }\n\n    this.currentDecl = gDecl;\n    Object.keys(rules).forEach(ruleName => {\n      this.currentRuleName = ruleName;\n      const ruleRecipe = rules[ruleName];\n\n      const action = ruleRecipe[0]; // define/extend/override\n      const metaInfo = ruleRecipe[1];\n      const description = ruleRecipe[2];\n      const formals = ruleRecipe[3];\n      const body = this.fromRecipe(ruleRecipe[4]);\n\n      let source;\n      if (gDecl.source && metaInfo && metaInfo.sourceInterval) {\n        source = gDecl.source.subInterval(\n            metaInfo.sourceInterval[0],\n            metaInfo.sourceInterval[1] - metaInfo.sourceInterval[0],\n        );\n      }\n      gDecl[action](ruleName, formals, body, description, source);\n    });\n    this.currentRuleName = this.currentDecl = null;\n    return gDecl.build();\n  }\n\n  terminal(x) {\n    return new Terminal(x);\n  }\n\n  range(from, to) {\n    return new Range(from, to);\n  }\n\n  param(index) {\n    return new Param(index);\n  }\n\n  alt(...termArgs) {\n    let terms = [];\n    for (let arg of termArgs) {\n      if (!(arg instanceof PExpr)) {\n        arg = this.fromRecipe(arg);\n      }\n      if (arg instanceof Alt) {\n        terms = terms.concat(arg.terms);\n      } else {\n        terms.push(arg);\n      }\n    }\n    return terms.length === 1 ? terms[0] : new Alt(terms);\n  }\n\n  seq(...factorArgs) {\n    let factors = [];\n    for (let arg of factorArgs) {\n      if (!(arg instanceof PExpr)) {\n        arg = this.fromRecipe(arg);\n      }\n      if (arg instanceof Seq) {\n        factors = factors.concat(arg.factors);\n      } else {\n        factors.push(arg);\n      }\n    }\n    return factors.length === 1 ? factors[0] : new Seq(factors);\n  }\n\n  star(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Star(expr);\n  }\n\n  plus(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Plus(expr);\n  }\n\n  opt(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Opt(expr);\n  }\n\n  not(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Not(expr);\n  }\n\n  lookahead(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Lookahead(expr);\n  }\n\n  lex(expr) {\n    if (!(expr instanceof PExpr)) {\n      expr = this.fromRecipe(expr);\n    }\n    return new Lex(expr);\n  }\n\n  app(ruleName, optParams) {\n    if (optParams && optParams.length > 0) {\n      optParams = optParams.map(function(param) {\n        return param instanceof PExpr ? param : this.fromRecipe(param);\n      }, this);\n    }\n    return new Apply(ruleName, optParams);\n  }\n\n  // Note that unlike other methods in this class, this method cannot be used as a\n  // convenience constructor. It only works with recipes, because it relies on\n  // `this.currentDecl` and `this.currentRuleName` being set.\n  splice(beforeTerms, afterTerms) {\n    return new Splice(\n        this.currentDecl.superGrammar,\n        this.currentRuleName,\n        beforeTerms.map(term => this.fromRecipe(term)),\n        afterTerms.map(term => this.fromRecipe(term)),\n    );\n  }\n\n  fromRecipe(recipe) {\n    // the meta-info of 'grammar' is processed in Builder.grammar\n    const args = recipe[0] === 'grammar' ? recipe.slice(1) : recipe.slice(2);\n    const result = this[recipe[0]](...args);\n\n    const metaInfo = recipe[1];\n    if (metaInfo) {\n      if (metaInfo.sourceInterval && this.currentDecl) {\n        result.withSource(this.currentDecl.sourceInterval(...metaInfo.sourceInterval));\n      }\n    }\n    return result;\n  }\n}\n\nfunction makeRecipe(recipe) {\n  if (typeof recipe === 'function') {\n    return recipe.call(new Builder());\n  } else {\n    if (typeof recipe === 'string') {\n      // stringified JSON recipe\n      recipe = JSON.parse(recipe);\n    }\n    return new Builder().fromRecipe(recipe);\n  }\n}\n\nvar BuiltInRules = makeRecipe([\"grammar\",{\"source\":\"BuiltInRules {\\n\\n  alnum  (an alpha-numeric character)\\n    = letter\\n    | digit\\n\\n  letter  (a letter)\\n    = lower\\n    | upper\\n    | unicodeLtmo\\n\\n  digit  (a digit)\\n    = \\\"0\\\"..\\\"9\\\"\\n\\n  hexDigit  (a hexadecimal digit)\\n    = digit\\n    | \\\"a\\\"..\\\"f\\\"\\n    | \\\"A\\\"..\\\"F\\\"\\n\\n  ListOf<elem, sep>\\n    = NonemptyListOf<elem, sep>\\n    | EmptyListOf<elem, sep>\\n\\n  NonemptyListOf<elem, sep>\\n    = elem (sep elem)*\\n\\n  EmptyListOf<elem, sep>\\n    = /* nothing */\\n\\n  listOf<elem, sep>\\n    = nonemptyListOf<elem, sep>\\n    | emptyListOf<elem, sep>\\n\\n  nonemptyListOf<elem, sep>\\n    = elem (sep elem)*\\n\\n  emptyListOf<elem, sep>\\n    = /* nothing */\\n\\n  // Allows a syntactic rule application within a lexical context.\\n  applySyntactic<app> = app\\n}\"},\"BuiltInRules\",null,null,{\"alnum\":[\"define\",{\"sourceInterval\":[18,78]},\"an alpha-numeric character\",[],[\"alt\",{\"sourceInterval\":[60,78]},[\"app\",{\"sourceInterval\":[60,66]},\"letter\",[]],[\"app\",{\"sourceInterval\":[73,78]},\"digit\",[]]]],\"letter\":[\"define\",{\"sourceInterval\":[82,142]},\"a letter\",[],[\"alt\",{\"sourceInterval\":[107,142]},[\"app\",{\"sourceInterval\":[107,112]},\"lower\",[]],[\"app\",{\"sourceInterval\":[119,124]},\"upper\",[]],[\"app\",{\"sourceInterval\":[131,142]},\"unicodeLtmo\",[]]]],\"digit\":[\"define\",{\"sourceInterval\":[146,177]},\"a digit\",[],[\"range\",{\"sourceInterval\":[169,177]},\"0\",\"9\"]],\"hexDigit\":[\"define\",{\"sourceInterval\":[181,254]},\"a hexadecimal digit\",[],[\"alt\",{\"sourceInterval\":[219,254]},[\"app\",{\"sourceInterval\":[219,224]},\"digit\",[]],[\"range\",{\"sourceInterval\":[231,239]},\"a\",\"f\"],[\"range\",{\"sourceInterval\":[246,254]},\"A\",\"F\"]]],\"ListOf\":[\"define\",{\"sourceInterval\":[258,336]},null,[\"elem\",\"sep\"],[\"alt\",{\"sourceInterval\":[282,336]},[\"app\",{\"sourceInterval\":[282,307]},\"NonemptyListOf\",[[\"param\",{\"sourceInterval\":[297,301]},0],[\"param\",{\"sourceInterval\":[303,306]},1]]],[\"app\",{\"sourceInterval\":[314,336]},\"EmptyListOf\",[[\"param\",{\"sourceInterval\":[326,330]},0],[\"param\",{\"sourceInterval\":[332,335]},1]]]]],\"NonemptyListOf\":[\"define\",{\"sourceInterval\":[340,388]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[372,388]},[\"param\",{\"sourceInterval\":[372,376]},0],[\"star\",{\"sourceInterval\":[377,388]},[\"seq\",{\"sourceInterval\":[378,386]},[\"param\",{\"sourceInterval\":[378,381]},1],[\"param\",{\"sourceInterval\":[382,386]},0]]]]],\"EmptyListOf\":[\"define\",{\"sourceInterval\":[392,434]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[438,438]}]],\"listOf\":[\"define\",{\"sourceInterval\":[438,516]},null,[\"elem\",\"sep\"],[\"alt\",{\"sourceInterval\":[462,516]},[\"app\",{\"sourceInterval\":[462,487]},\"nonemptyListOf\",[[\"param\",{\"sourceInterval\":[477,481]},0],[\"param\",{\"sourceInterval\":[483,486]},1]]],[\"app\",{\"sourceInterval\":[494,516]},\"emptyListOf\",[[\"param\",{\"sourceInterval\":[506,510]},0],[\"param\",{\"sourceInterval\":[512,515]},1]]]]],\"nonemptyListOf\":[\"define\",{\"sourceInterval\":[520,568]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[552,568]},[\"param\",{\"sourceInterval\":[552,556]},0],[\"star\",{\"sourceInterval\":[557,568]},[\"seq\",{\"sourceInterval\":[558,566]},[\"param\",{\"sourceInterval\":[558,561]},1],[\"param\",{\"sourceInterval\":[562,566]},0]]]]],\"emptyListOf\":[\"define\",{\"sourceInterval\":[572,682]},null,[\"elem\",\"sep\"],[\"seq\",{\"sourceInterval\":[685,685]}]],\"applySyntactic\":[\"define\",{\"sourceInterval\":[685,710]},null,[\"app\"],[\"param\",{\"sourceInterval\":[707,710]},0]]}]);\n\nGrammar.BuiltInRules = BuiltInRules;\nannounceBuiltInRules(Grammar.BuiltInRules);\n\nvar ohmGrammar = makeRecipe([\"grammar\",{\"source\":\"Ohm {\\n\\n  Grammars\\n    = Grammar*\\n\\n  Grammar\\n    = ident SuperGrammar? \\\"{\\\" Rule* \\\"}\\\"\\n\\n  SuperGrammar\\n    = \\\"<:\\\" ident\\n\\n  Rule\\n    = ident Formals? ruleDescr? \\\"=\\\"  RuleBody  -- define\\n    | ident Formals?            \\\":=\\\" OverrideRuleBody  -- override\\n    | ident Formals?            \\\"+=\\\" RuleBody  -- extend\\n\\n  RuleBody\\n    = \\\"|\\\"? NonemptyListOf<TopLevelTerm, \\\"|\\\">\\n\\n  TopLevelTerm\\n    = Seq caseName  -- inline\\n    | Seq\\n\\n  OverrideRuleBody\\n    = \\\"|\\\"? NonemptyListOf<OverrideTopLevelTerm, \\\"|\\\">\\n\\n  OverrideTopLevelTerm\\n    = \\\"...\\\"  -- superSplice\\n    | TopLevelTerm\\n\\n  Formals\\n    = \\\"<\\\" ListOf<ident, \\\",\\\"> \\\">\\\"\\n\\n  Params\\n    = \\\"<\\\" ListOf<Seq, \\\",\\\"> \\\">\\\"\\n\\n  Alt\\n    = NonemptyListOf<Seq, \\\"|\\\">\\n\\n  Seq\\n    = Iter*\\n\\n  Iter\\n    = Pred \\\"*\\\"  -- star\\n    | Pred \\\"+\\\"  -- plus\\n    | Pred \\\"?\\\"  -- opt\\n    | Pred\\n\\n  Pred\\n    = \\\"~\\\" Lex  -- not\\n    | \\\"&\\\" Lex  -- lookahead\\n    | Lex\\n\\n  Lex\\n    = \\\"#\\\" Base  -- lex\\n    | Base\\n\\n  Base\\n    = ident Params? ~(ruleDescr? \\\"=\\\" | \\\":=\\\" | \\\"+=\\\")  -- application\\n    | oneCharTerminal \\\"..\\\" oneCharTerminal           -- range\\n    | terminal                                       -- terminal\\n    | \\\"(\\\" Alt \\\")\\\"                                    -- paren\\n\\n  ruleDescr  (a rule description)\\n    = \\\"(\\\" ruleDescrText \\\")\\\"\\n\\n  ruleDescrText\\n    = (~\\\")\\\" any)*\\n\\n  caseName\\n    = \\\"--\\\" (~\\\"\\\\n\\\" space)* name (~\\\"\\\\n\\\" space)* (\\\"\\\\n\\\" | &\\\"}\\\")\\n\\n  name  (a name)\\n    = nameFirst nameRest*\\n\\n  nameFirst\\n    = \\\"_\\\"\\n    | letter\\n\\n  nameRest\\n    = \\\"_\\\"\\n    | alnum\\n\\n  ident  (an identifier)\\n    = name\\n\\n  terminal\\n    = \\\"\\\\\\\"\\\" terminalChar* \\\"\\\\\\\"\\\"\\n\\n  oneCharTerminal\\n    = \\\"\\\\\\\"\\\" terminalChar \\\"\\\\\\\"\\\"\\n\\n  terminalChar\\n    = escapeChar\\n      | ~\\\"\\\\\\\\\\\" ~\\\"\\\\\\\"\\\" ~\\\"\\\\n\\\" \\\"\\\\u{0}\\\"..\\\"\\\\u{10FFFF}\\\"\\n\\n  escapeChar  (an escape sequence)\\n    = \\\"\\\\\\\\\\\\\\\\\\\"                                     -- backslash\\n    | \\\"\\\\\\\\\\\\\\\"\\\"                                     -- doubleQuote\\n    | \\\"\\\\\\\\\\\\'\\\"                                     -- singleQuote\\n    | \\\"\\\\\\\\b\\\"                                      -- backspace\\n    | \\\"\\\\\\\\n\\\"                                      -- lineFeed\\n    | \\\"\\\\\\\\r\\\"                                      -- carriageReturn\\n    | \\\"\\\\\\\\t\\\"                                      -- tab\\n    | \\\"\\\\\\\\u{\\\" hexDigit hexDigit? hexDigit?\\n             hexDigit? hexDigit? hexDigit? \\\"}\\\"   -- unicodeCodePoint\\n    | \\\"\\\\\\\\u\\\" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\\n    | \\\"\\\\\\\\x\\\" hexDigit hexDigit                    -- hexEscape\\n\\n  space\\n   += comment\\n\\n  comment\\n    = \\\"//\\\" (~\\\"\\\\n\\\" any)* &(\\\"\\\\n\\\" | end)  -- singleLine\\n    | \\\"/*\\\" (~\\\"*/\\\" any)* \\\"*/\\\"  -- multiLine\\n\\n  tokens = token*\\n\\n  token = caseName | comment | ident | operator | punctuation | terminal | any\\n\\n  operator = \\\"<:\\\" | \\\"=\\\" | \\\":=\\\" | \\\"+=\\\" | \\\"*\\\" | \\\"+\\\" | \\\"?\\\" | \\\"~\\\" | \\\"&\\\"\\n\\n  punctuation = \\\"<\\\" | \\\">\\\" | \\\",\\\" | \\\"--\\\"\\n}\"},\"Ohm\",null,\"Grammars\",{\"Grammars\":[\"define\",{\"sourceInterval\":[9,32]},null,[],[\"star\",{\"sourceInterval\":[24,32]},[\"app\",{\"sourceInterval\":[24,31]},\"Grammar\",[]]]],\"Grammar\":[\"define\",{\"sourceInterval\":[36,83]},null,[],[\"seq\",{\"sourceInterval\":[50,83]},[\"app\",{\"sourceInterval\":[50,55]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[56,69]},[\"app\",{\"sourceInterval\":[56,68]},\"SuperGrammar\",[]]],[\"terminal\",{\"sourceInterval\":[70,73]},\"{\"],[\"star\",{\"sourceInterval\":[74,79]},[\"app\",{\"sourceInterval\":[74,78]},\"Rule\",[]]],[\"terminal\",{\"sourceInterval\":[80,83]},\"}\"]]],\"SuperGrammar\":[\"define\",{\"sourceInterval\":[87,116]},null,[],[\"seq\",{\"sourceInterval\":[106,116]},[\"terminal\",{\"sourceInterval\":[106,110]},\"<:\"],[\"app\",{\"sourceInterval\":[111,116]},\"ident\",[]]]],\"Rule_define\":[\"define\",{\"sourceInterval\":[131,181]},null,[],[\"seq\",{\"sourceInterval\":[131,170]},[\"app\",{\"sourceInterval\":[131,136]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[137,145]},[\"app\",{\"sourceInterval\":[137,144]},\"Formals\",[]]],[\"opt\",{\"sourceInterval\":[146,156]},[\"app\",{\"sourceInterval\":[146,155]},\"ruleDescr\",[]]],[\"terminal\",{\"sourceInterval\":[157,160]},\"=\"],[\"app\",{\"sourceInterval\":[162,170]},\"RuleBody\",[]]]],\"Rule_override\":[\"define\",{\"sourceInterval\":[188,248]},null,[],[\"seq\",{\"sourceInterval\":[188,235]},[\"app\",{\"sourceInterval\":[188,193]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[194,202]},[\"app\",{\"sourceInterval\":[194,201]},\"Formals\",[]]],[\"terminal\",{\"sourceInterval\":[214,218]},\":=\"],[\"app\",{\"sourceInterval\":[219,235]},\"OverrideRuleBody\",[]]]],\"Rule_extend\":[\"define\",{\"sourceInterval\":[255,305]},null,[],[\"seq\",{\"sourceInterval\":[255,294]},[\"app\",{\"sourceInterval\":[255,260]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[261,269]},[\"app\",{\"sourceInterval\":[261,268]},\"Formals\",[]]],[\"terminal\",{\"sourceInterval\":[281,285]},\"+=\"],[\"app\",{\"sourceInterval\":[286,294]},\"RuleBody\",[]]]],\"Rule\":[\"define\",{\"sourceInterval\":[120,305]},null,[],[\"alt\",{\"sourceInterval\":[131,305]},[\"app\",{\"sourceInterval\":[131,170]},\"Rule_define\",[]],[\"app\",{\"sourceInterval\":[188,235]},\"Rule_override\",[]],[\"app\",{\"sourceInterval\":[255,294]},\"Rule_extend\",[]]]],\"RuleBody\":[\"define\",{\"sourceInterval\":[309,362]},null,[],[\"seq\",{\"sourceInterval\":[324,362]},[\"opt\",{\"sourceInterval\":[324,328]},[\"terminal\",{\"sourceInterval\":[324,327]},\"|\"]],[\"app\",{\"sourceInterval\":[329,362]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[344,356]},\"TopLevelTerm\",[]],[\"terminal\",{\"sourceInterval\":[358,361]},\"|\"]]]]],\"TopLevelTerm_inline\":[\"define\",{\"sourceInterval\":[385,408]},null,[],[\"seq\",{\"sourceInterval\":[385,397]},[\"app\",{\"sourceInterval\":[385,388]},\"Seq\",[]],[\"app\",{\"sourceInterval\":[389,397]},\"caseName\",[]]]],\"TopLevelTerm\":[\"define\",{\"sourceInterval\":[366,418]},null,[],[\"alt\",{\"sourceInterval\":[385,418]},[\"app\",{\"sourceInterval\":[385,397]},\"TopLevelTerm_inline\",[]],[\"app\",{\"sourceInterval\":[415,418]},\"Seq\",[]]]],\"OverrideRuleBody\":[\"define\",{\"sourceInterval\":[422,491]},null,[],[\"seq\",{\"sourceInterval\":[445,491]},[\"opt\",{\"sourceInterval\":[445,449]},[\"terminal\",{\"sourceInterval\":[445,448]},\"|\"]],[\"app\",{\"sourceInterval\":[450,491]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[465,485]},\"OverrideTopLevelTerm\",[]],[\"terminal\",{\"sourceInterval\":[487,490]},\"|\"]]]]],\"OverrideTopLevelTerm_superSplice\":[\"define\",{\"sourceInterval\":[522,543]},null,[],[\"terminal\",{\"sourceInterval\":[522,527]},\"...\"]],\"OverrideTopLevelTerm\":[\"define\",{\"sourceInterval\":[495,562]},null,[],[\"alt\",{\"sourceInterval\":[522,562]},[\"app\",{\"sourceInterval\":[522,527]},\"OverrideTopLevelTerm_superSplice\",[]],[\"app\",{\"sourceInterval\":[550,562]},\"TopLevelTerm\",[]]]],\"Formals\":[\"define\",{\"sourceInterval\":[566,606]},null,[],[\"seq\",{\"sourceInterval\":[580,606]},[\"terminal\",{\"sourceInterval\":[580,583]},\"<\"],[\"app\",{\"sourceInterval\":[584,602]},\"ListOf\",[[\"app\",{\"sourceInterval\":[591,596]},\"ident\",[]],[\"terminal\",{\"sourceInterval\":[598,601]},\",\"]]],[\"terminal\",{\"sourceInterval\":[603,606]},\">\"]]],\"Params\":[\"define\",{\"sourceInterval\":[610,647]},null,[],[\"seq\",{\"sourceInterval\":[623,647]},[\"terminal\",{\"sourceInterval\":[623,626]},\"<\"],[\"app\",{\"sourceInterval\":[627,643]},\"ListOf\",[[\"app\",{\"sourceInterval\":[634,637]},\"Seq\",[]],[\"terminal\",{\"sourceInterval\":[639,642]},\",\"]]],[\"terminal\",{\"sourceInterval\":[644,647]},\">\"]]],\"Alt\":[\"define\",{\"sourceInterval\":[651,685]},null,[],[\"app\",{\"sourceInterval\":[661,685]},\"NonemptyListOf\",[[\"app\",{\"sourceInterval\":[676,679]},\"Seq\",[]],[\"terminal\",{\"sourceInterval\":[681,684]},\"|\"]]]],\"Seq\":[\"define\",{\"sourceInterval\":[689,704]},null,[],[\"star\",{\"sourceInterval\":[699,704]},[\"app\",{\"sourceInterval\":[699,703]},\"Iter\",[]]]],\"Iter_star\":[\"define\",{\"sourceInterval\":[719,736]},null,[],[\"seq\",{\"sourceInterval\":[719,727]},[\"app\",{\"sourceInterval\":[719,723]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[724,727]},\"*\"]]],\"Iter_plus\":[\"define\",{\"sourceInterval\":[743,760]},null,[],[\"seq\",{\"sourceInterval\":[743,751]},[\"app\",{\"sourceInterval\":[743,747]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[748,751]},\"+\"]]],\"Iter_opt\":[\"define\",{\"sourceInterval\":[767,783]},null,[],[\"seq\",{\"sourceInterval\":[767,775]},[\"app\",{\"sourceInterval\":[767,771]},\"Pred\",[]],[\"terminal\",{\"sourceInterval\":[772,775]},\"?\"]]],\"Iter\":[\"define\",{\"sourceInterval\":[708,794]},null,[],[\"alt\",{\"sourceInterval\":[719,794]},[\"app\",{\"sourceInterval\":[719,727]},\"Iter_star\",[]],[\"app\",{\"sourceInterval\":[743,751]},\"Iter_plus\",[]],[\"app\",{\"sourceInterval\":[767,775]},\"Iter_opt\",[]],[\"app\",{\"sourceInterval\":[790,794]},\"Pred\",[]]]],\"Pred_not\":[\"define\",{\"sourceInterval\":[809,824]},null,[],[\"seq\",{\"sourceInterval\":[809,816]},[\"terminal\",{\"sourceInterval\":[809,812]},\"~\"],[\"app\",{\"sourceInterval\":[813,816]},\"Lex\",[]]]],\"Pred_lookahead\":[\"define\",{\"sourceInterval\":[831,852]},null,[],[\"seq\",{\"sourceInterval\":[831,838]},[\"terminal\",{\"sourceInterval\":[831,834]},\"&\"],[\"app\",{\"sourceInterval\":[835,838]},\"Lex\",[]]]],\"Pred\":[\"define\",{\"sourceInterval\":[798,862]},null,[],[\"alt\",{\"sourceInterval\":[809,862]},[\"app\",{\"sourceInterval\":[809,816]},\"Pred_not\",[]],[\"app\",{\"sourceInterval\":[831,838]},\"Pred_lookahead\",[]],[\"app\",{\"sourceInterval\":[859,862]},\"Lex\",[]]]],\"Lex_lex\":[\"define\",{\"sourceInterval\":[876,892]},null,[],[\"seq\",{\"sourceInterval\":[876,884]},[\"terminal\",{\"sourceInterval\":[876,879]},\"#\"],[\"app\",{\"sourceInterval\":[880,884]},\"Base\",[]]]],\"Lex\":[\"define\",{\"sourceInterval\":[866,903]},null,[],[\"alt\",{\"sourceInterval\":[876,903]},[\"app\",{\"sourceInterval\":[876,884]},\"Lex_lex\",[]],[\"app\",{\"sourceInterval\":[899,903]},\"Base\",[]]]],\"Base_application\":[\"define\",{\"sourceInterval\":[918,979]},null,[],[\"seq\",{\"sourceInterval\":[918,963]},[\"app\",{\"sourceInterval\":[918,923]},\"ident\",[]],[\"opt\",{\"sourceInterval\":[924,931]},[\"app\",{\"sourceInterval\":[924,930]},\"Params\",[]]],[\"not\",{\"sourceInterval\":[932,963]},[\"alt\",{\"sourceInterval\":[934,962]},[\"seq\",{\"sourceInterval\":[934,948]},[\"opt\",{\"sourceInterval\":[934,944]},[\"app\",{\"sourceInterval\":[934,943]},\"ruleDescr\",[]]],[\"terminal\",{\"sourceInterval\":[945,948]},\"=\"]],[\"terminal\",{\"sourceInterval\":[951,955]},\":=\"],[\"terminal\",{\"sourceInterval\":[958,962]},\"+=\"]]]]],\"Base_range\":[\"define\",{\"sourceInterval\":[986,1041]},null,[],[\"seq\",{\"sourceInterval\":[986,1022]},[\"app\",{\"sourceInterval\":[986,1001]},\"oneCharTerminal\",[]],[\"terminal\",{\"sourceInterval\":[1002,1006]},\"..\"],[\"app\",{\"sourceInterval\":[1007,1022]},\"oneCharTerminal\",[]]]],\"Base_terminal\":[\"define\",{\"sourceInterval\":[1048,1106]},null,[],[\"app\",{\"sourceInterval\":[1048,1056]},\"terminal\",[]]],\"Base_paren\":[\"define\",{\"sourceInterval\":[1113,1168]},null,[],[\"seq\",{\"sourceInterval\":[1113,1124]},[\"terminal\",{\"sourceInterval\":[1113,1116]},\"(\"],[\"app\",{\"sourceInterval\":[1117,1120]},\"Alt\",[]],[\"terminal\",{\"sourceInterval\":[1121,1124]},\")\"]]],\"Base\":[\"define\",{\"sourceInterval\":[907,1168]},null,[],[\"alt\",{\"sourceInterval\":[918,1168]},[\"app\",{\"sourceInterval\":[918,963]},\"Base_application\",[]],[\"app\",{\"sourceInterval\":[986,1022]},\"Base_range\",[]],[\"app\",{\"sourceInterval\":[1048,1056]},\"Base_terminal\",[]],[\"app\",{\"sourceInterval\":[1113,1124]},\"Base_paren\",[]]]],\"ruleDescr\":[\"define\",{\"sourceInterval\":[1172,1231]},\"a rule description\",[],[\"seq\",{\"sourceInterval\":[1210,1231]},[\"terminal\",{\"sourceInterval\":[1210,1213]},\"(\"],[\"app\",{\"sourceInterval\":[1214,1227]},\"ruleDescrText\",[]],[\"terminal\",{\"sourceInterval\":[1228,1231]},\")\"]]],\"ruleDescrText\":[\"define\",{\"sourceInterval\":[1235,1266]},null,[],[\"star\",{\"sourceInterval\":[1255,1266]},[\"seq\",{\"sourceInterval\":[1256,1264]},[\"not\",{\"sourceInterval\":[1256,1260]},[\"terminal\",{\"sourceInterval\":[1257,1260]},\")\"]],[\"app\",{\"sourceInterval\":[1261,1264]},\"any\",[]]]]],\"caseName\":[\"define\",{\"sourceInterval\":[1270,1338]},null,[],[\"seq\",{\"sourceInterval\":[1285,1338]},[\"terminal\",{\"sourceInterval\":[1285,1289]},\"--\"],[\"star\",{\"sourceInterval\":[1290,1304]},[\"seq\",{\"sourceInterval\":[1291,1302]},[\"not\",{\"sourceInterval\":[1291,1296]},[\"terminal\",{\"sourceInterval\":[1292,1296]},\"\\n\"]],[\"app\",{\"sourceInterval\":[1297,1302]},\"space\",[]]]],[\"app\",{\"sourceInterval\":[1305,1309]},\"name\",[]],[\"star\",{\"sourceInterval\":[1310,1324]},[\"seq\",{\"sourceInterval\":[1311,1322]},[\"not\",{\"sourceInterval\":[1311,1316]},[\"terminal\",{\"sourceInterval\":[1312,1316]},\"\\n\"]],[\"app\",{\"sourceInterval\":[1317,1322]},\"space\",[]]]],[\"alt\",{\"sourceInterval\":[1326,1337]},[\"terminal\",{\"sourceInterval\":[1326,1330]},\"\\n\"],[\"lookahead\",{\"sourceInterval\":[1333,1337]},[\"terminal\",{\"sourceInterval\":[1334,1337]},\"}\"]]]]],\"name\":[\"define\",{\"sourceInterval\":[1342,1382]},\"a name\",[],[\"seq\",{\"sourceInterval\":[1363,1382]},[\"app\",{\"sourceInterval\":[1363,1372]},\"nameFirst\",[]],[\"star\",{\"sourceInterval\":[1373,1382]},[\"app\",{\"sourceInterval\":[1373,1381]},\"nameRest\",[]]]]],\"nameFirst\":[\"define\",{\"sourceInterval\":[1386,1418]},null,[],[\"alt\",{\"sourceInterval\":[1402,1418]},[\"terminal\",{\"sourceInterval\":[1402,1405]},\"_\"],[\"app\",{\"sourceInterval\":[1412,1418]},\"letter\",[]]]],\"nameRest\":[\"define\",{\"sourceInterval\":[1422,1452]},null,[],[\"alt\",{\"sourceInterval\":[1437,1452]},[\"terminal\",{\"sourceInterval\":[1437,1440]},\"_\"],[\"app\",{\"sourceInterval\":[1447,1452]},\"alnum\",[]]]],\"ident\":[\"define\",{\"sourceInterval\":[1456,1489]},\"an identifier\",[],[\"app\",{\"sourceInterval\":[1485,1489]},\"name\",[]]],\"terminal\":[\"define\",{\"sourceInterval\":[1493,1531]},null,[],[\"seq\",{\"sourceInterval\":[1508,1531]},[\"terminal\",{\"sourceInterval\":[1508,1512]},\"\\\"\"],[\"star\",{\"sourceInterval\":[1513,1526]},[\"app\",{\"sourceInterval\":[1513,1525]},\"terminalChar\",[]]],[\"terminal\",{\"sourceInterval\":[1527,1531]},\"\\\"\"]]],\"oneCharTerminal\":[\"define\",{\"sourceInterval\":[1535,1579]},null,[],[\"seq\",{\"sourceInterval\":[1557,1579]},[\"terminal\",{\"sourceInterval\":[1557,1561]},\"\\\"\"],[\"app\",{\"sourceInterval\":[1562,1574]},\"terminalChar\",[]],[\"terminal\",{\"sourceInterval\":[1575,1579]},\"\\\"\"]]],\"terminalChar\":[\"define\",{\"sourceInterval\":[1583,1660]},null,[],[\"alt\",{\"sourceInterval\":[1602,1660]},[\"app\",{\"sourceInterval\":[1602,1612]},\"escapeChar\",[]],[\"seq\",{\"sourceInterval\":[1621,1660]},[\"not\",{\"sourceInterval\":[1621,1626]},[\"terminal\",{\"sourceInterval\":[1622,1626]},\"\\\\\"]],[\"not\",{\"sourceInterval\":[1627,1632]},[\"terminal\",{\"sourceInterval\":[1628,1632]},\"\\\"\"]],[\"not\",{\"sourceInterval\":[1633,1638]},[\"terminal\",{\"sourceInterval\":[1634,1638]},\"\\n\"]],[\"range\",{\"sourceInterval\":[1639,1660]},\"\\u0000\",\"\"]]]],\"escapeChar_backslash\":[\"define\",{\"sourceInterval\":[1703,1758]},null,[],[\"terminal\",{\"sourceInterval\":[1703,1709]},\"\\\\\\\\\"]],\"escapeChar_doubleQuote\":[\"define\",{\"sourceInterval\":[1765,1822]},null,[],[\"terminal\",{\"sourceInterval\":[1765,1771]},\"\\\\\\\"\"]],\"escapeChar_singleQuote\":[\"define\",{\"sourceInterval\":[1829,1886]},null,[],[\"terminal\",{\"sourceInterval\":[1829,1835]},\"\\\\'\"]],\"escapeChar_backspace\":[\"define\",{\"sourceInterval\":[1893,1948]},null,[],[\"terminal\",{\"sourceInterval\":[1893,1898]},\"\\\\b\"]],\"escapeChar_lineFeed\":[\"define\",{\"sourceInterval\":[1955,2009]},null,[],[\"terminal\",{\"sourceInterval\":[1955,1960]},\"\\\\n\"]],\"escapeChar_carriageReturn\":[\"define\",{\"sourceInterval\":[2016,2076]},null,[],[\"terminal\",{\"sourceInterval\":[2016,2021]},\"\\\\r\"]],\"escapeChar_tab\":[\"define\",{\"sourceInterval\":[2083,2132]},null,[],[\"terminal\",{\"sourceInterval\":[2083,2088]},\"\\\\t\"]],\"escapeChar_unicodeCodePoint\":[\"define\",{\"sourceInterval\":[2139,2243]},null,[],[\"seq\",{\"sourceInterval\":[2139,2221]},[\"terminal\",{\"sourceInterval\":[2139,2145]},\"\\\\u{\"],[\"app\",{\"sourceInterval\":[2146,2154]},\"hexDigit\",[]],[\"opt\",{\"sourceInterval\":[2155,2164]},[\"app\",{\"sourceInterval\":[2155,2163]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2165,2174]},[\"app\",{\"sourceInterval\":[2165,2173]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2188,2197]},[\"app\",{\"sourceInterval\":[2188,2196]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2198,2207]},[\"app\",{\"sourceInterval\":[2198,2206]},\"hexDigit\",[]]],[\"opt\",{\"sourceInterval\":[2208,2217]},[\"app\",{\"sourceInterval\":[2208,2216]},\"hexDigit\",[]]],[\"terminal\",{\"sourceInterval\":[2218,2221]},\"}\"]]],\"escapeChar_unicodeEscape\":[\"define\",{\"sourceInterval\":[2250,2309]},null,[],[\"seq\",{\"sourceInterval\":[2250,2291]},[\"terminal\",{\"sourceInterval\":[2250,2255]},\"\\\\u\"],[\"app\",{\"sourceInterval\":[2256,2264]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2265,2273]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2274,2282]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2283,2291]},\"hexDigit\",[]]]],\"escapeChar_hexEscape\":[\"define\",{\"sourceInterval\":[2316,2371]},null,[],[\"seq\",{\"sourceInterval\":[2316,2339]},[\"terminal\",{\"sourceInterval\":[2316,2321]},\"\\\\x\"],[\"app\",{\"sourceInterval\":[2322,2330]},\"hexDigit\",[]],[\"app\",{\"sourceInterval\":[2331,2339]},\"hexDigit\",[]]]],\"escapeChar\":[\"define\",{\"sourceInterval\":[1664,2371]},\"an escape sequence\",[],[\"alt\",{\"sourceInterval\":[1703,2371]},[\"app\",{\"sourceInterval\":[1703,1709]},\"escapeChar_backslash\",[]],[\"app\",{\"sourceInterval\":[1765,1771]},\"escapeChar_doubleQuote\",[]],[\"app\",{\"sourceInterval\":[1829,1835]},\"escapeChar_singleQuote\",[]],[\"app\",{\"sourceInterval\":[1893,1898]},\"escapeChar_backspace\",[]],[\"app\",{\"sourceInterval\":[1955,1960]},\"escapeChar_lineFeed\",[]],[\"app\",{\"sourceInterval\":[2016,2021]},\"escapeChar_carriageReturn\",[]],[\"app\",{\"sourceInterval\":[2083,2088]},\"escapeChar_tab\",[]],[\"app\",{\"sourceInterval\":[2139,2221]},\"escapeChar_unicodeCodePoint\",[]],[\"app\",{\"sourceInterval\":[2250,2291]},\"escapeChar_unicodeEscape\",[]],[\"app\",{\"sourceInterval\":[2316,2339]},\"escapeChar_hexEscape\",[]]]],\"space\":[\"extend\",{\"sourceInterval\":[2375,2394]},null,[],[\"app\",{\"sourceInterval\":[2387,2394]},\"comment\",[]]],\"comment_singleLine\":[\"define\",{\"sourceInterval\":[2412,2458]},null,[],[\"seq\",{\"sourceInterval\":[2412,2443]},[\"terminal\",{\"sourceInterval\":[2412,2416]},\"//\"],[\"star\",{\"sourceInterval\":[2417,2429]},[\"seq\",{\"sourceInterval\":[2418,2427]},[\"not\",{\"sourceInterval\":[2418,2423]},[\"terminal\",{\"sourceInterval\":[2419,2423]},\"\\n\"]],[\"app\",{\"sourceInterval\":[2424,2427]},\"any\",[]]]],[\"lookahead\",{\"sourceInterval\":[2430,2443]},[\"alt\",{\"sourceInterval\":[2432,2442]},[\"terminal\",{\"sourceInterval\":[2432,2436]},\"\\n\"],[\"app\",{\"sourceInterval\":[2439,2442]},\"end\",[]]]]]],\"comment_multiLine\":[\"define\",{\"sourceInterval\":[2465,2501]},null,[],[\"seq\",{\"sourceInterval\":[2465,2487]},[\"terminal\",{\"sourceInterval\":[2465,2469]},\"/*\"],[\"star\",{\"sourceInterval\":[2470,2482]},[\"seq\",{\"sourceInterval\":[2471,2480]},[\"not\",{\"sourceInterval\":[2471,2476]},[\"terminal\",{\"sourceInterval\":[2472,2476]},\"*/\"]],[\"app\",{\"sourceInterval\":[2477,2480]},\"any\",[]]]],[\"terminal\",{\"sourceInterval\":[2483,2487]},\"*/\"]]],\"comment\":[\"define\",{\"sourceInterval\":[2398,2501]},null,[],[\"alt\",{\"sourceInterval\":[2412,2501]},[\"app\",{\"sourceInterval\":[2412,2443]},\"comment_singleLine\",[]],[\"app\",{\"sourceInterval\":[2465,2487]},\"comment_multiLine\",[]]]],\"tokens\":[\"define\",{\"sourceInterval\":[2505,2520]},null,[],[\"star\",{\"sourceInterval\":[2514,2520]},[\"app\",{\"sourceInterval\":[2514,2519]},\"token\",[]]]],\"token\":[\"define\",{\"sourceInterval\":[2524,2600]},null,[],[\"alt\",{\"sourceInterval\":[2532,2600]},[\"app\",{\"sourceInterval\":[2532,2540]},\"caseName\",[]],[\"app\",{\"sourceInterval\":[2543,2550]},\"comment\",[]],[\"app\",{\"sourceInterval\":[2553,2558]},\"ident\",[]],[\"app\",{\"sourceInterval\":[2561,2569]},\"operator\",[]],[\"app\",{\"sourceInterval\":[2572,2583]},\"punctuation\",[]],[\"app\",{\"sourceInterval\":[2586,2594]},\"terminal\",[]],[\"app\",{\"sourceInterval\":[2597,2600]},\"any\",[]]]],\"operator\":[\"define\",{\"sourceInterval\":[2604,2669]},null,[],[\"alt\",{\"sourceInterval\":[2615,2669]},[\"terminal\",{\"sourceInterval\":[2615,2619]},\"<:\"],[\"terminal\",{\"sourceInterval\":[2622,2625]},\"=\"],[\"terminal\",{\"sourceInterval\":[2628,2632]},\":=\"],[\"terminal\",{\"sourceInterval\":[2635,2639]},\"+=\"],[\"terminal\",{\"sourceInterval\":[2642,2645]},\"*\"],[\"terminal\",{\"sourceInterval\":[2648,2651]},\"+\"],[\"terminal\",{\"sourceInterval\":[2654,2657]},\"?\"],[\"terminal\",{\"sourceInterval\":[2660,2663]},\"~\"],[\"terminal\",{\"sourceInterval\":[2666,2669]},\"&\"]]],\"punctuation\":[\"define\",{\"sourceInterval\":[2673,2709]},null,[],[\"alt\",{\"sourceInterval\":[2687,2709]},[\"terminal\",{\"sourceInterval\":[2687,2690]},\"<\"],[\"terminal\",{\"sourceInterval\":[2693,2696]},\">\"],[\"terminal\",{\"sourceInterval\":[2699,2702]},\",\"],[\"terminal\",{\"sourceInterval\":[2705,2709]},\"--\"]]]}]);\n\nconst superSplicePlaceholder = Object.create(PExpr.prototype);\n\nfunction namespaceHas(ns, name) {\n  // Look for an enumerable property, anywhere in the prototype chain.\n  for (const prop in ns) {\n    if (prop === name) return true;\n  }\n  return false;\n}\n\n// Returns a Grammar instance (i.e., an object with a `match` method) for\n// `tree`, which is the concrete syntax tree of a user-written grammar.\n// The grammar will be assigned into `namespace` under the name of the grammar\n// as specified in the source.\nfunction buildGrammar(match, namespace, optOhmGrammarForTesting) {\n  const builder = new Builder();\n  let decl;\n  let currentRuleName;\n  let currentRuleFormals;\n  let overriding = false;\n  const metaGrammar = optOhmGrammarForTesting || ohmGrammar;\n\n  // A visitor that produces a Grammar instance from the CST.\n  const helpers = metaGrammar.createSemantics().addOperation('visit', {\n    Grammars(grammarIter) {\n      return grammarIter.children.map(c => c.visit());\n    },\n    Grammar(id, s, _open, rules, _close) {\n      const grammarName = id.visit();\n      decl = builder.newGrammar(grammarName);\n      s.child(0) && s.child(0).visit();\n      rules.children.map(c => c.visit());\n      const g = decl.build();\n      g.source = this.source.trimmed();\n      if (namespaceHas(namespace, grammarName)) {\n        throw duplicateGrammarDeclaration(g);\n      }\n      namespace[grammarName] = g;\n      return g;\n    },\n\n    SuperGrammar(_, n) {\n      const superGrammarName = n.visit();\n      if (superGrammarName === 'null') {\n        decl.withSuperGrammar(null);\n      } else {\n        if (!namespace || !namespaceHas(namespace, superGrammarName)) {\n          throw undeclaredGrammar(superGrammarName, namespace, n.source);\n        }\n        decl.withSuperGrammar(namespace[superGrammarName]);\n      }\n    },\n\n    Rule_define(n, fs, d, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n      // If there is no default start rule yet, set it now. This must be done before visiting\n      // the body, because it might contain an inline rule definition.\n      if (!decl.defaultStartRule && decl.ensureSuperGrammar() !== Grammar.ProtoBuiltInRules) {\n        decl.withDefaultStartRule(currentRuleName);\n      }\n      const body = b.visit();\n      const description = d.children.map(c => c.visit())[0];\n      const source = this.source.trimmed();\n      return decl.define(currentRuleName, currentRuleFormals, body, description, source);\n    },\n    Rule_override(n, fs, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n\n      const source = this.source.trimmed();\n      decl.ensureSuperGrammarRuleForOverriding(currentRuleName, source);\n\n      overriding = true;\n      const body = b.visit();\n      overriding = false;\n      return decl.override(currentRuleName, currentRuleFormals, body, null, source);\n    },\n    Rule_extend(n, fs, _, b) {\n      currentRuleName = n.visit();\n      currentRuleFormals = fs.children.map(c => c.visit())[0] || [];\n      const body = b.visit();\n      const source = this.source.trimmed();\n      return decl.extend(currentRuleName, currentRuleFormals, body, null, source);\n    },\n    RuleBody(_, terms) {\n      return builder.alt(...terms.visit()).withSource(this.source);\n    },\n    OverrideRuleBody(_, terms) {\n      const args = terms.visit();\n\n      // Check if the super-splice operator (`...`) appears in the terms.\n      const expansionPos = args.indexOf(superSplicePlaceholder);\n      if (expansionPos >= 0) {\n        const beforeTerms = args.slice(0, expansionPos);\n        const afterTerms = args.slice(expansionPos + 1);\n\n        // Ensure it appears no more than once.\n        afterTerms.forEach(t => {\n          if (t === superSplicePlaceholder) throw multipleSuperSplices(t);\n        });\n\n        return new Splice(\n            decl.superGrammar,\n            currentRuleName,\n            beforeTerms,\n            afterTerms,\n        ).withSource(this.source);\n      } else {\n        return builder.alt(...args).withSource(this.source);\n      }\n    },\n    Formals(opointy, fs, cpointy) {\n      return fs.visit();\n    },\n\n    Params(opointy, ps, cpointy) {\n      return ps.visit();\n    },\n\n    Alt(seqs) {\n      return builder.alt(...seqs.visit()).withSource(this.source);\n    },\n\n    TopLevelTerm_inline(b, n) {\n      const inlineRuleName = currentRuleName + '_' + n.visit();\n      const body = b.visit();\n      const source = this.source.trimmed();\n      const isNewRuleDeclaration = !(\n        decl.superGrammar && decl.superGrammar.rules[inlineRuleName]\n      );\n      if (overriding && !isNewRuleDeclaration) {\n        decl.override(inlineRuleName, currentRuleFormals, body, null, source);\n      } else {\n        decl.define(inlineRuleName, currentRuleFormals, body, null, source);\n      }\n      const params = currentRuleFormals.map(formal => builder.app(formal));\n      return builder.app(inlineRuleName, params).withSource(body.source);\n    },\n    OverrideTopLevelTerm_superSplice(_) {\n      return superSplicePlaceholder;\n    },\n\n    Seq(expr) {\n      return builder.seq(...expr.children.map(c => c.visit())).withSource(this.source);\n    },\n\n    Iter_star(x, _) {\n      return builder.star(x.visit()).withSource(this.source);\n    },\n    Iter_plus(x, _) {\n      return builder.plus(x.visit()).withSource(this.source);\n    },\n    Iter_opt(x, _) {\n      return builder.opt(x.visit()).withSource(this.source);\n    },\n\n    Pred_not(_, x) {\n      return builder.not(x.visit()).withSource(this.source);\n    },\n    Pred_lookahead(_, x) {\n      return builder.lookahead(x.visit()).withSource(this.source);\n    },\n\n    Lex_lex(_, x) {\n      return builder.lex(x.visit()).withSource(this.source);\n    },\n\n    Base_application(rule, ps) {\n      const params = ps.children.map(c => c.visit())[0] || [];\n      return builder.app(rule.visit(), params).withSource(this.source);\n    },\n    Base_range(from, _, to) {\n      return builder.range(from.visit(), to.visit()).withSource(this.source);\n    },\n    Base_terminal(expr) {\n      return builder.terminal(expr.visit()).withSource(this.source);\n    },\n    Base_paren(open, x, close) {\n      return x.visit();\n    },\n\n    ruleDescr(open, t, close) {\n      return t.visit();\n    },\n    ruleDescrText(_) {\n      return this.sourceString.trim();\n    },\n\n    caseName(_, space1, n, space2, end) {\n      return n.visit();\n    },\n\n    name(first, rest) {\n      return this.sourceString;\n    },\n    nameFirst(expr) {},\n    nameRest(expr) {},\n\n    terminal(open, cs, close) {\n      return cs.children.map(c => c.visit()).join('');\n    },\n\n    oneCharTerminal(open, c, close) {\n      return c.visit();\n    },\n\n    escapeChar(c) {\n      try {\n        return unescapeCodePoint(this.sourceString);\n      } catch (err) {\n        if (err instanceof RangeError && err.message.startsWith('Invalid code point ')) {\n          throw invalidCodePoint(c);\n        }\n        throw err; // Rethrow\n      }\n    },\n\n    NonemptyListOf(x, _, xs) {\n      return [x.visit()].concat(xs.children.map(c => c.visit()));\n    },\n    EmptyListOf() {\n      return [];\n    },\n\n    _terminal() {\n      return this.sourceString;\n    },\n  });\n  return helpers(match).visit();\n}\n\nvar operationsAndAttributesGrammar = makeRecipe([\"grammar\",{\"source\":\"OperationsAndAttributes {\\n\\n  AttributeSignature =\\n    name\\n\\n  OperationSignature =\\n    name Formals?\\n\\n  Formals\\n    = \\\"(\\\" ListOf<name, \\\",\\\"> \\\")\\\"\\n\\n  name  (a name)\\n    = nameFirst nameRest*\\n\\n  nameFirst\\n    = \\\"_\\\"\\n    | letter\\n\\n  nameRest\\n    = \\\"_\\\"\\n    | alnum\\n\\n}\"},\"OperationsAndAttributes\",null,\"AttributeSignature\",{\"AttributeSignature\":[\"define\",{\"sourceInterval\":[29,58]},null,[],[\"app\",{\"sourceInterval\":[54,58]},\"name\",[]]],\"OperationSignature\":[\"define\",{\"sourceInterval\":[62,100]},null,[],[\"seq\",{\"sourceInterval\":[87,100]},[\"app\",{\"sourceInterval\":[87,91]},\"name\",[]],[\"opt\",{\"sourceInterval\":[92,100]},[\"app\",{\"sourceInterval\":[92,99]},\"Formals\",[]]]]],\"Formals\":[\"define\",{\"sourceInterval\":[104,143]},null,[],[\"seq\",{\"sourceInterval\":[118,143]},[\"terminal\",{\"sourceInterval\":[118,121]},\"(\"],[\"app\",{\"sourceInterval\":[122,139]},\"ListOf\",[[\"app\",{\"sourceInterval\":[129,133]},\"name\",[]],[\"terminal\",{\"sourceInterval\":[135,138]},\",\"]]],[\"terminal\",{\"sourceInterval\":[140,143]},\")\"]]],\"name\":[\"define\",{\"sourceInterval\":[147,187]},\"a name\",[],[\"seq\",{\"sourceInterval\":[168,187]},[\"app\",{\"sourceInterval\":[168,177]},\"nameFirst\",[]],[\"star\",{\"sourceInterval\":[178,187]},[\"app\",{\"sourceInterval\":[178,186]},\"nameRest\",[]]]]],\"nameFirst\":[\"define\",{\"sourceInterval\":[191,223]},null,[],[\"alt\",{\"sourceInterval\":[207,223]},[\"terminal\",{\"sourceInterval\":[207,210]},\"_\"],[\"app\",{\"sourceInterval\":[217,223]},\"letter\",[]]]],\"nameRest\":[\"define\",{\"sourceInterval\":[227,257]},null,[],[\"alt\",{\"sourceInterval\":[242,257]},[\"terminal\",{\"sourceInterval\":[242,245]},\"_\"],[\"app\",{\"sourceInterval\":[252,257]},\"alnum\",[]]]]}]);\n\ninitBuiltInSemantics(Grammar.BuiltInRules);\ninitPrototypeParser(operationsAndAttributesGrammar); // requires BuiltInSemantics\n\nfunction initBuiltInSemantics(builtInRules) {\n  const actions = {\n    empty() {\n      return this.iteration();\n    },\n    nonEmpty(first, _, rest) {\n      return this.iteration([first].concat(rest.children));\n    },\n  };\n\n  Semantics.BuiltInSemantics = Semantics.createSemantics(builtInRules, null).addOperation(\n      'asIteration',\n      {\n        emptyListOf: actions.empty,\n        nonemptyListOf: actions.nonEmpty,\n        EmptyListOf: actions.empty,\n        NonemptyListOf: actions.nonEmpty,\n      },\n  );\n}\n\nfunction initPrototypeParser(grammar) {\n  Semantics.prototypeGrammarSemantics = grammar.createSemantics().addOperation('parse', {\n    AttributeSignature(name) {\n      return {\n        name: name.parse(),\n        formals: [],\n      };\n    },\n    OperationSignature(name, optFormals) {\n      return {\n        name: name.parse(),\n        formals: optFormals.children.map(c => c.parse())[0] || [],\n      };\n    },\n    Formals(oparen, fs, cparen) {\n      return fs.asIteration().children.map(c => c.parse());\n    },\n    name(first, rest) {\n      return this.sourceString;\n    },\n  });\n  Semantics.prototypeGrammar = grammar;\n}\n\nfunction findIndentation(input) {\n  let pos = 0;\n  const stack = [0];\n  const topOfStack = () => stack[stack.length - 1];\n\n  const result = {};\n\n  const regex = /( *).*(?:$|\\r?\\n|\\r)/g;\n  let match;\n  while ((match = regex.exec(input)) != null) {\n    const [line, indent] = match;\n\n    // The last match will always have length 0. In every other case, some\n    // characters will be matched (possibly only the end of line chars).\n    if (line.length === 0) break;\n\n    const indentSize = indent.length;\n    const prevSize = topOfStack();\n\n    const indentPos = pos + indentSize;\n\n    if (indentSize > prevSize) {\n      // Indent -- always only 1.\n      stack.push(indentSize);\n      result[indentPos] = 1;\n    } else if (indentSize < prevSize) {\n      // Dedent -- can be multiple levels.\n      const prevLength = stack.length;\n      while (topOfStack() !== indentSize) {\n        stack.pop();\n      }\n      result[indentPos] = -1 * (prevLength - stack.length);\n    }\n    pos += line.length;\n  }\n  // Ensure that there is a matching DEDENT for every remaining INDENT.\n  if (stack.length > 1) {\n    result[pos] = 1 - stack.length;\n  }\n  return result;\n}\n\nconst INDENT_DESCRIPTION = 'an indented block';\nconst DEDENT_DESCRIPTION = 'a dedent';\n\n// A sentinel value that is out of range for both charCodeAt() and codePointAt().\nconst INVALID_CODE_POINT = 0x10ffff + 1;\n\nclass InputStreamWithIndentation extends InputStream {\n  constructor(state) {\n    super(state.input);\n    this.state = state;\n  }\n\n  _indentationAt(pos) {\n    return this.state.userData[pos] || 0;\n  }\n\n  atEnd() {\n    return super.atEnd() && this._indentationAt(this.pos) === 0;\n  }\n\n  next() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return undefined;\n    }\n    return super.next();\n  }\n\n  nextCharCode() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return INVALID_CODE_POINT;\n    }\n    return super.nextCharCode();\n  }\n\n  nextCodePoint() {\n    if (this._indentationAt(this.pos) !== 0) {\n      this.examinedLength = Math.max(this.examinedLength, this.pos);\n      return INVALID_CODE_POINT;\n    }\n    return super.nextCodePoint();\n  }\n}\n\nclass Indentation extends PExpr {\n  constructor(isIndent = true) {\n    super();\n    this.isIndent = isIndent;\n  }\n\n  allowsSkippingPrecedingSpace() {\n    return true;\n  }\n\n  eval(state) {\n    const {inputStream} = state;\n    const pseudoTokens = state.userData;\n    state.doNotMemoize = true;\n\n    const origPos = inputStream.pos;\n\n    const sign = this.isIndent ? 1 : -1;\n    const count = (pseudoTokens[origPos] || 0) * sign;\n    if (count > 0) {\n      // Update the count to consume the pseudotoken.\n      state.userData = Object.create(pseudoTokens);\n      state.userData[origPos] -= sign;\n\n      state.pushBinding(new TerminalNode(0), origPos);\n      return true;\n    } else {\n      state.processFailure(origPos, this);\n      return false;\n    }\n  }\n\n  getArity() {\n    return 1;\n  }\n\n  _assertAllApplicationsAreValid(ruleName, grammar) {}\n\n  _isNullable(grammar, memo) {\n    return false;\n  }\n\n  assertChoicesHaveUniformArity(ruleName) {}\n\n  assertIteratedExprsAreNotNullable(grammar) {}\n\n  introduceParams(formals) {\n    return this;\n  }\n\n  substituteParams(actuals) {\n    return this;\n  }\n\n  toString() {\n    return this.isIndent ? 'indent' : 'dedent';\n  }\n\n  toDisplayString() {\n    return this.toString();\n  }\n\n  toFailure(grammar) {\n    const description = this.isIndent ? INDENT_DESCRIPTION : DEDENT_DESCRIPTION;\n    return new Failure(this, description, 'description');\n  }\n}\n\n// Create a new definition for `any` that can consume indent & dedent.\nconst applyIndent = new Apply('indent');\nconst applyDedent = new Apply('dedent');\nconst newAnyBody = new Splice(BuiltInRules, 'any', [applyIndent, applyDedent], []);\n\nconst IndentationSensitive = new Builder()\n    .newGrammar('IndentationSensitive')\n    .withSuperGrammar(BuiltInRules)\n    .define('indent', [], new Indentation(true), INDENT_DESCRIPTION, undefined, true)\n    .define('dedent', [], new Indentation(false), DEDENT_DESCRIPTION, undefined, true)\n    .extend('any', [], newAnyBody, 'any character', undefined)\n    .build();\n\nObject.assign(IndentationSensitive, {\n  _matchStateInitializer(state) {\n    state.userData = findIndentation(state.input);\n    state.inputStream = new InputStreamWithIndentation(state);\n  },\n  supportsIncrementalParsing: false,\n});\n\n// Generated by scripts/prebuild.js\nconst version = '17.1.0';\n\nGrammar.initApplicationParser(ohmGrammar, buildGrammar);\n\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj);\n\nfunction compileAndLoad(source, namespace) {\n  const m = ohmGrammar.match(source, 'Grammars');\n  if (m.failed()) {\n    throw grammarSyntaxError(m);\n  }\n  return buildGrammar(m, namespace);\n}\n\nfunction grammar(source, optNamespace) {\n  const ns = grammars(source, optNamespace);\n\n  // Ensure that the source contained no more than one grammar definition.\n  const grammarNames = Object.keys(ns);\n  if (grammarNames.length === 0) {\n    throw new Error('Missing grammar definition');\n  } else if (grammarNames.length > 1) {\n    const secondGrammar = ns[grammarNames[1]];\n    const interval = secondGrammar.source;\n    throw new Error(\n        getLineAndColumnMessage(interval.sourceString, interval.startIdx) +\n        'Found more than one grammar definition -- use ohm.grammars() instead.',\n    );\n  }\n  return ns[grammarNames[0]]; // Return the one and only grammar.\n}\n\nfunction grammars(source, optNamespace) {\n  const ns = Object.create(optNamespace || {});\n  if (typeof source !== 'string') {\n    // For convenience, detect Node.js Buffer objects and automatically call toString().\n    if (isBuffer(source)) {\n      source = source.toString();\n    } else {\n      throw new TypeError(\n          'Expected string as first argument, got ' + unexpectedObjToString(source),\n      );\n    }\n  }\n  compileAndLoad(source, ns);\n  return ns;\n}\n\nexports.ExperimentalIndentationSensitive = IndentationSensitive;\nexports._buildGrammar = buildGrammar;\nexports.grammar = grammar;\nexports.grammars = grammars;\nexports.makeRecipe = makeRecipe;\nexports.ohmGrammar = ohmGrammar;\nexports.pexprs = pexprs;\nexports.version = version;\n//# sourceMappingURL=ohm.cjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(800);\n"],"sourceRoot":""}